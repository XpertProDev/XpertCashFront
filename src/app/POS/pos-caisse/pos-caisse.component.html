<div class="container_pos_caisse">
    <div class="content_pos_caisse">

        

        <div class="caisse-container">
            <!-- Loading State -->
            <div *ngIf="isLoadingCaisses" class="loading-indicator">
                <i class="ri-loader-4-line spin"></i> Chargement des caisses...
            </div>

            <!-- Empty State -->
            <div *ngIf="!isLoadingCaisses && caisses.length === 0" class="no-caisses">
                <i class="ri-information-line"></i>
                <p>Aucune caisse disponible pour cette boutique</p>
            </div>

            <!-- Liste des caisses -->
            <div *ngFor="let caisse of caisses" class="caisse-card">
                <div class="block">
                    <div class="double" style="align-items: baseline;">
                        <div class="profil">
                            <span>{{ caisse.nomVendeur ? caisse.nomVendeur[0] : '?' }}</span>
                        </div>
                        <div class="caisse-info">
                            <div class="caisse-nom">{{ caisse.nomVendeur || 'Non assigné' }}</div>
                            <div class="caisse-status" [class.open]="caisse.statut === 'OUVERTE'"
                                                    [class.closed]="caisse.statut === 'FERMEE'">
                                {{ caisse.statut === 'OUVERTE' ? 'Ouverte' : 'Fermée' }}
                            </div>
                        </div>
                    </div>

                    <!-- zone "more" cliquable -->
                    <div class="icon_more" (click)="toggleMenu(caisse.id)">
                        <i class="ri-more-2-fill"></i>
                        <!-- dropdown -->
                        <div 
                            class="dropdown-menu" 
                            *ngIf="openMenuId === caisse.id"
                            (click)="$event.stopPropagation()">
                            <button (click)="allCaisseClose(caisse)" (click)="goToPosJournalCaisse()">Journal des caisses</button>
                            <button (click)="allCaisseClose(caisse)">Autres</button>
                        </div>
                    </div>
                </div>
                
                <button class="caisse-btn" 
                        [disabled]="caisse.statut !== 'OUVERTE'"
                        (click)="onCaisseButtonClick(caisse)">
                {{ caisse.statut === 'OUVERTE' ? 'Continuer la vente' : 'Caisse fermée' }}
                </button>
            </div>
        </div>
    </div>
</div>

