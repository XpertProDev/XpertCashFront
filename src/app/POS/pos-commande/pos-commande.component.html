
<div class="section_contenu_container">
    <!-- // section contenu left -->
    <div class="section_contenu_left">
        <!-- // section favory produit -->
        <div class="section_commande">
            <!-- // section recherche  -->
            <div class="toolbar">
                <div class="icon_search">
                    <i class="ri-search-line"></i>
                </div>
                <div class="search">
                    <input type="text" placeholder="Rechercher des commandes..." />
                </div>
                <div class="btn_search_filtre">
                    <button class="btn">Actif <i class="ri-arrow-down-s-fill"></i> </button>
                </div>
            </div>
            <!-- Section liste des commandes -->
            <div class="section_list_commande">
                <ul *ngFor="let cmd of commandes" 
                    class="ul_commande" 
                    [class.ul_commande_active]="activeCommandeId === cmd.id"
                    (click)="setActiveCommande(cmd.id)">
                    <li class="li_commande">
                    <div class="commande_date_heure">
                        <p class="commande_date">{{ cmd.createdAt | date:'dd/MM/yyyy' }}</p>
                        <p class="commande_heure">{{ cmd.createdAt | date:'HH:mm' }}</p>
                    </div>
                    </li>
                    <li class="li_commande">
                    <div class="num_onglet_commande">
                        <p>{{ cmd.id }}</p>
                    </div>
                    </li>
                    <li class="li_commande">
                    <div class="quantite_commande">
                        <p>Quantité {{ cmd.totalItems }}</p>
                    </div>
                    </li>
                    <li class="li_commande">
                    <div class="price_commande">
                        <p>{{ cmd.totalAmount | currency:'CFA ':'symbol':'1.0-0' }}</p>
                    </div>
                    </li>
                    <li class="li_commande" style="display: flex; align-items: center; gap: 30px;">
                    <div class="etat_commande">
                        <p>En cours</p>
                    </div>
                    <div class="icon_delete_commande" (click)="removeCommande(cmd.id); $event.stopPropagation()">
                        <i class="ri-delete-bin-5-line"></i>
                    </div>
                    </li>
                </ul>
                <div *ngIf="!products.length" class="loading_commande">
                    Chargement des produits en cours...
                </div>
            </div>
        </div>
    </div>
    <!-- // section contenu right -->
    <div class="section_contenu_right" style="background-color: #ffffff; height: 100vh; box-shadow: rgba(0, 0, 0, 0.04) 0px 3px 5px;">
        <div class="list_produit_select">
            <!-- Liste des produits de la commande active -->
            <ul class="ul_list_produit_select">
                <li class="li_list_produit_select" *ngFor="let item of activeCommandeItems">
                    <div class="double">
                        <!-- Quantité sélectionnée -->
                        <div class="nombre_select">
                            {{ item.quantity }}
                        </div>
                        <!-- Nom du produit et prix unitaire -->
                        <div class="name_produit_select">
                            <p style="margin: 0;">
                                {{ item.product.nom }}
                                <span>({{ item.product.prixVente | currency:'CFA ':'symbol':'1.0-0' }})</span>
                            </p>
                        </div>
                    </div>
                    <div class="double">
                        <!-- Prix total pour ce produit -->
                        <div class="price_produit">
                            {{ (item.quantity * item.product.prixVente) | currency:'CFA ':'symbol':'1.0-0' }}
                        </div>
                        <!-- Bouton pour supprimer le produit -->
                        <div class="icon_close_select" (click)="removeProductFromCommande(item.product.id)">
                            <i class="ri-close-circle-fill"></i>
                        </div>
                    </div>
                </li>
            </ul>
            <div *ngIf="activeCommandeItems.length === 0" class="empty-cart-message">
                <p>Aucun produit dans cette commande</p>
            </div>
        </div>
        
        <!-- Récapitulatif : Taxes / Total -->
        <div class="summary_panel">
            <div class="double_row">
                <span>Taxes</span>
                <span>00 CFA</span>
            </div>
            <div class="double_row total">
                <strong>Total</strong>
                <strong>{{ activeCommandeTotal | currency:'CFA ':'symbol':'1.0-0' }}</strong>
            </div>
        </div>

        <!-- Boutons d'action -->
        <div class="btn_container">
            <!-- Bouton retour -->
            <div class="btn_action_commande">
                <button class="btn_retourn" (click)="router.navigate(['/pos-accueil'])">
                    <i class="ri-arrow-left-s-line"></i>
                </button>
            </div>
            
            <!-- Bouton paiement -->
            <div class="btn_content">
                <button class="btn-payment">Paiement</button>
            </div>
            
            <!-- Bouton supprimer la commande -->
            <div class="btn_action_commande">
                <button class="btn_delete" (click)="removeCommande(activeCommandeId)">
                    <i class="ri-delete-bin-5-line"></i>
                </button>
            </div>
        </div>
    </div>
</div>