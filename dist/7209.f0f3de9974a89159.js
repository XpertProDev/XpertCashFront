"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[7209],{7209:(b,g,c)=>{c.r(g),c.d(g,{PosCommandeComponent:()=>v});var s=c(177),f=c(9417),l=c(2525),t=c(4438),u=c(9192),m=c(145),C=c(7022),x=c(9293);function _(i,r){if(1&i){const n=t.RV6();t.j41(0,"ul",30),t.bIt("click",function(){const o=t.eBV(n).$implicit,a=t.XpG();return t.Njj(a.setActiveCommande(o.id))}),t.j41(1,"li",31)(2,"div",32)(3,"p",33),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"p",34),t.EFF(7),t.nI1(8,"date"),t.k0s()()(),t.j41(9,"li",31)(10,"div",35)(11,"p"),t.EFF(12),t.k0s()()(),t.j41(13,"li",31)(14,"div",36)(15,"p"),t.EFF(16),t.k0s()()(),t.j41(17,"li",31)(18,"div",37)(19,"p"),t.EFF(20),t.nI1(21,"currency"),t.k0s()()(),t.j41(22,"li",38)(23,"div",39)(24,"p"),t.EFF(25,"En cours"),t.k0s()(),t.j41(26,"div",40),t.bIt("click",function(o){const a=t.eBV(n).$implicit;return t.XpG().removeCommande(a.id),t.Njj(o.stopPropagation())}),t.nrm(27,"i",29),t.k0s()()()}if(2&i){const n=r.$implicit,e=t.XpG();t.AVh("ul_commande_active",e.activeCommandeId===n.id),t.R7$(4),t.JRh(t.i5U(5,7,n.createdAt,"dd/MM/yyyy")),t.R7$(3),t.JRh(t.i5U(8,10,n.createdAt,"HH:mm")),t.R7$(5),t.JRh(n.id),t.R7$(4),t.SpI("Quantit\xe9 ",n.totalItems,""),t.R7$(4),t.JRh(t.ii3(21,13,n.totalAmount,"CFA ","symbol","1.0-0"))}}function P(i,r){1&i&&(t.j41(0,"div",41),t.EFF(1," Chargement des produits en cours... "),t.k0s())}function h(i,r){if(1&i){const n=t.RV6();t.j41(0,"li",42)(1,"div",43)(2,"div",44),t.EFF(3),t.k0s(),t.j41(4,"div",45)(5,"p",46),t.EFF(6),t.j41(7,"span"),t.EFF(8),t.nI1(9,"currency"),t.k0s()()()(),t.j41(10,"div",43)(11,"div",47),t.EFF(12),t.nI1(13,"currency"),t.k0s(),t.j41(14,"div",48),t.bIt("click",function(){const o=t.eBV(n).$implicit,a=t.XpG();return t.Njj(a.removeProductFromCommande(o.product.id))}),t.nrm(15,"i",49),t.k0s()()()}if(2&i){const n=r.$implicit;t.R7$(3),t.SpI(" ",n.quantity," "),t.R7$(3),t.SpI(" ",n.product.nom," "),t.R7$(2),t.SpI("(",t.ii3(9,4,n.product.prixVente,"CFA ","symbol","1.0-0"),")"),t.R7$(4),t.SpI(" ",t.ii3(13,9,n.quantity*n.product.prixVente,"CFA ","symbol","1.0-0")," ")}}function d(i,r){1&i&&(t.j41(0,"div",50)(1,"p"),t.EFF(2,"Aucun produit dans cette commande"),t.k0s()())}let v=(()=>{class i{constructor(n,e,o,a){this.router=n,this.viewState=e,this.commandeState=o,this.categorieService=a,this.apiUrl=l.c.imgUrl,this.isListView=!0,this.showDropdown=!1,this.commandes=[],this.products=[],this.activeCommandeId="",this.activeCommandeCart=new Map,this.activeCommandeTotal=0,this.activeCommandeItems=[]}ngOnInit(){this.viewState.isListView$.subscribe(n=>{this.isListView=n}),this.loadProducts(),this.commandeState.commandeUpdated$.subscribe(()=>{this.loadCommandes(),this.loadActiveCommandeDetails()}),this.commandeState.activeCommandeId$.subscribe(n=>{this.activeCommandeId=n,this.loadActiveCommandeDetails()})}setActiveCommande(n){this.commandeState.setActiveCommande(n),this.loadActiveCommandeDetails()}loadProducts(){this.categorieService.getCategories().subscribe({next:n=>{this.products=[],n.forEach(e=>{e.produits&&(this.products=[...this.products,...e.produits])}),this.loadCommandes(),this.loadActiveCommandeDetails()},error:n=>console.error("Erreur chargement produits",n)})}loadActiveCommandeDetails(){if(!this.activeCommandeId)return;const n=this.commandeState.getCommandeDetails(this.activeCommandeId);n&&(this.activeCommandeCart=n.cart,this.activeCommandeTotal=n.totalAmount||0,this.updateActiveCommandeItems())}updateActiveCommandeItems(){this.activeCommandeItems=[],this.activeCommandeCart&&this.products.length&&this.activeCommandeCart.forEach((n,e)=>{if(n>0){const o=this.products.find(a=>a.id===e);o&&this.activeCommandeItems.push({product:o,quantity:n})}})}loadCommandes(){this.commandes=this.commandeState.getAllCommandesIds().map(n=>{const e=this.commandeState.getCommandeDetails(n);let o=0,a=0;return e?.cart&&(e.cart.forEach((p,O)=>{const M=this.products.find(y=>y.id===O);M&&(o+=p,a+=p*M.prixVente)}),this.commandeState.updateCommandeTotals(n,o,a)),{id:n,totalItems:o,totalAmount:a,createdAt:e?.createdAt||new Date}})}removeCommande(n){this.commandeState.removeCommande(n),this.loadCommandes()}removeProductFromCommande(n){const e=this.commandeState.getCommandeDetails(this.activeCommandeId);if(e){e.cart.delete(n);const o=this.calculateTotalItems(e.cart),a=this.calculateTotalAmount(e.cart);this.commandeState.updateCommandeTotals(this.activeCommandeId,o,a),this.loadActiveCommandeDetails()}}calculateTotalItems(n){let e=0;return n.forEach(o=>e+=o),e}calculateTotalAmount(n){let e=0;return n.forEach((o,a)=>{const p=this.products.find(O=>O.id===a);p&&(e+=o*p.prixVente)}),e}toggleView(n){this.isListView="grid"===n,this.showDropdown=!0,localStorage.setItem("viewPreference",n)}pagePosVente(){}static{this.\u0275fac=function(e){return new(e||i)(t.rXU(u.Ix),t.rXU(m.C),t.rXU(C.f),t.rXU(x.R))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-pos-commande"]],decls:42,vars:10,consts:[[1,"section_contenu_container"],[1,"section_contenu_left"],[1,"section_commande"],[1,"toolbar"],[1,"icon_search"],[1,"ri-search-line"],[1,"search"],["type","text","placeholder","Rechercher des commandes..."],[1,"btn_search_filtre"],[1,"btn"],[1,"ri-arrow-down-s-fill"],[1,"section_list_commande"],["class","ul_commande",3,"ul_commande_active","click",4,"ngFor","ngForOf"],["class","loading_commande",4,"ngIf"],[1,"section_contenu_right",2,"background-color","#ffffff","height","100vh","box-shadow","rgba(0, 0, 0, 0.04) 0px 3px 5px"],[1,"list_produit_select"],[1,"ul_list_produit_select"],["class","li_list_produit_select",4,"ngFor","ngForOf"],["class","empty-cart-message",4,"ngIf"],[1,"summary_panel"],[1,"double_row"],[1,"double_row","total"],[1,"btn_container"],[1,"btn_action_commande"],[1,"btn_retourn",3,"click"],[1,"ri-arrow-left-s-line"],[1,"btn_content"],[1,"btn-payment"],[1,"btn_delete",3,"click"],[1,"ri-delete-bin-5-line"],[1,"ul_commande",3,"click"],[1,"li_commande"],[1,"commande_date_heure"],[1,"commande_date"],[1,"commande_heure"],[1,"num_onglet_commande"],[1,"quantite_commande"],[1,"price_commande"],[1,"li_commande",2,"display","flex","align-items","center","gap","30px"],[1,"etat_commande"],[1,"icon_delete_commande",3,"click"],[1,"loading_commande"],[1,"li_list_produit_select"],[1,"double"],[1,"nombre_select"],[1,"name_produit_select"],[2,"margin","0"],[1,"price_produit"],[1,"icon_close_select",3,"click"],[1,"ri-close-circle-fill"],[1,"empty-cart-message"]],template:function(e,o){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.nrm(5,"i",5),t.k0s(),t.j41(6,"div",6),t.nrm(7,"input",7),t.k0s(),t.j41(8,"div",8)(9,"button",9),t.EFF(10,"Actif "),t.nrm(11,"i",10),t.k0s()()(),t.j41(12,"div",11),t.DNE(13,_,28,18,"ul",12)(14,P,2,0,"div",13),t.k0s()()(),t.j41(15,"div",14)(16,"div",15)(17,"ul",16),t.DNE(18,h,16,14,"li",17),t.k0s(),t.DNE(19,d,3,0,"div",18),t.k0s(),t.j41(20,"div",19)(21,"div",20)(22,"span"),t.EFF(23,"Taxes"),t.k0s(),t.j41(24,"span"),t.EFF(25,"00 CFA"),t.k0s()(),t.j41(26,"div",21)(27,"strong"),t.EFF(28,"Total"),t.k0s(),t.j41(29,"strong"),t.EFF(30),t.nI1(31,"currency"),t.k0s()()(),t.j41(32,"div",22)(33,"div",23)(34,"button",24),t.bIt("click",function(){return o.router.navigate(["/pos-accueil"])}),t.nrm(35,"i",25),t.k0s()(),t.j41(36,"div",26)(37,"button",27),t.EFF(38,"Paiement"),t.k0s()(),t.j41(39,"div",23)(40,"button",28),t.bIt("click",function(){return o.removeCommande(o.activeCommandeId)}),t.nrm(41,"i",29),t.k0s()()()()()),2&e&&(t.R7$(13),t.Y8G("ngForOf",o.commandes),t.R7$(),t.Y8G("ngIf",!o.products.length),t.R7$(4),t.Y8G("ngForOf",o.activeCommandeItems),t.R7$(),t.Y8G("ngIf",0===o.activeCommandeItems.length),t.R7$(11),t.JRh(t.ii3(31,5,o.activeCommandeTotal,"CFA ","symbol","1.0-0")))},dependencies:[f.YN,s.MD,s.Sq,s.bT,s.oe,s.vh],styles:['@charset "UTF-8";ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.section_contenu_container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 380px;flex:1;min-height:0}.section_contenu_left[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0}.section_favory_produit[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;margin-top:12px;flex:1;min-height:0}.section_favory[_ngcontent-%COMP%]{border-right:1px solid #d1d1d1;height:100vh}.section_favory[_ngcontent-%COMP%]   .ul_section_favory[_ngcontent-%COMP%]   .li_section_favory[_ngcontent-%COMP%]{background-color:#cde3fa;padding:5px 10px}.double[_ngcontent-%COMP%]   .icon_favory[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.title_favory[_ngcontent-%COMP%]{margin:0}.titre_categorie[_ngcontent-%COMP%]{padding-left:10px}.titre_categorie[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:10px;font-weight:600}.ul_li_name_categorie[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:7px 10px;margin-bottom:8px;font-size:13px;cursor:pointer}.ul_li_name_categorie[_ngcontent-%COMP%]:hover{background-color:#cde3fa}.allCate[_ngcontent-%COMP%]{cursor:pointer;padding:10px 0;letter-spacing:.6px;font-weight:500}.section_produit[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(100vh - 75px);min-height:0}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:2px}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0672e433;border-radius:5px}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.li_list_produit_select[_ngcontent-%COMP%]{background-color:#f4f4f4;display:flex;align-items:center;justify-content:space-between;padding:8px 10px;margin:6px 8px;border-radius:5px}.nombre_select[_ngcontent-%COMP%], .name_produit_select[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price_produit[_ngcontent-%COMP%]{font-size:12px}.icon_close_select[_ngcontent-%COMP%]{cursor:pointer}.icon_close_select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.icon_close_select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem;padding:0 10px 10px}.product-card[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:8px;box-shadow:0 2px 5px #0000000d;overflow:hidden;display:flex;flex-direction:column;align-items:center;padding-bottom:10px}.stock-badge[_ngcontent-%COMP%]{position:absolute;top:8px;left:5px;background:#fde047;color:#333;font-size:.8rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.product-card.disabled[_ngcontent-%COMP%], .li_list.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;pointer-events:none}.stock-badge-list[_ngcontent-%COMP%]{background:#fde047;color:#333;font-size:.8rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.product-img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;margin-top:10px;box-shadow:#0000001a 0 1px 2px}.favorite-icon[_ngcontent-%COMP%]{position:absolute;top:2px;right:3px;font-size:1.2rem;color:#0672e4;cursor:pointer}.favorite-icon.ri-heart-fill[_ngcontent-%COMP%]{color:#0672e4}.favorite-icon-list[_ngcontent-%COMP%]{font-size:1.2rem;color:#0672e4;cursor:pointer}.favorite-icon-list.ri-heart-fill[_ngcontent-%COMP%]{color:#0672e4}.card-body[_ngcontent-%COMP%]{text-align:center;margin:.5rem 0;flex:1}.product-name[_ngcontent-%COMP%]{font-weight:500;margin:.25rem 0}.product-stock[_ngcontent-%COMP%]{font-size:10px;color:#666;margin:.15rem 0}.product-price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;margin:0;font-size:13px}.btn-decrement[_ngcontent-%COMP%]{border:none;background:#f3f4f6;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;pointer-events:auto!important;z-index:10}.btn-decrement[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}.bottom_price_sub[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:0 10px}.section_contenu_right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;box-shadow:#0000000a 0 3px 5px;padding-bottom:10px}.list_produit_select[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.summary_panel[_ngcontent-%COMP%]{background:#f1f5f9;padding:4px 10px;margin:0 10px}.summary_panel[_ngcontent-%COMP%]   .double_row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.25rem 0;border-bottom:1px solid #e2e8f0}.summary_panel[_ngcontent-%COMP%]   .double_row.total[_ngcontent-%COMP%]{font-size:1.1rem;padding-top:.5rem;border-bottom:none}.double_row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.double_row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px}.keypad[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:5px;padding:5px 10px}.keypad[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3.5rem;background:#f1f5f9;border:none;font-size:1rem;cursor:pointer;border-radius:4px}.keypad[_ngcontent-%COMP%]   button.backspace[_ngcontent-%COMP%]{font-size:1.2rem}.btn_content[_ngcontent-%COMP%]{margin:0 10px}.btn-payment[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:68px;background:#2978f2;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.name_stock_list[_ngcontent-%COMP%]{line-height:1.5}.product-stock-list[_ngcontent-%COMP%]{font-size:10px;color:#666}.name_stock_list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .moyen_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price_du[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .moyen_paiement_restant[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .paiement_btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}ul.ul_list[_ngcontent-%COMP%]{margin:0 10px}.li_list[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;box-shadow:#64646f10 0 7px 29px;padding:0 10px;border-radius:5px;margin-bottom:10px}.img_product_list[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;justify-content:center;margin:5px 0}.img_product_list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px;cursor:pointer;box-shadow:#0000000d 0 0 0 1px}.payment-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1000}.payment-popup[_ngcontent-%COMP%]{background-color:#fff;width:85%;height:90vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden;position:relative}.payment-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer;transition:color .2s}.payment-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.section_popup_paiement[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;flex:1;min-height:0;margin:30px 80px}.btn-payment-pop[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#2978f2;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.methode_paiement[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:15px;margin:20px 10px}.cadre_paiement[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;height:135px;box-shadow:#0000000d 0 6px 24px,#00000014 0 0 0 1px;padding:10px 0;cursor:pointer}.cadre_paiement[_ngcontent-%COMP%]:hover{border:.5px solid #0672e4}.img_paiement[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;margin:0 auto;display:flex;justify-content:center;align-items:center}.img_paiement[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.title_paiement[_ngcontent-%COMP%]{margin-top:22px}.title_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center}.montant_paiement[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.double[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.cadre_section_contenu_left_prise[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;border-radius:8px;align-items:center}.section_contenu_left_prise[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.montant_paiement[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;gap:8px}.montant_paiement[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:600;margin:0}.montant_paiement[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#666}.moyen_paiement_price[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#cde3fa;gap:16px;border-radius:5px;padding:10px}.moyen_paiement[_ngcontent-%COMP%]{background:#e6f3ff;border:1px solid #C1E0FF;border-radius:8px;padding:8px 16px;text-align:center;cursor:pointer}.moyen_paiement.selected[_ngcontent-%COMP%]{background:#d0ebff;border-color:#90cdf4}.moyen_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.moyen_prise_du[_ngcontent-%COMP%]   .price_du[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;color:#333}.clear-icon[_ngcontent-%COMP%]{font-size:18px;color:#e53e3e;cursor:pointer}.discount-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;border-bottom:1px solid #ccc;padding-bottom:8px}.btn-currency[_ngcontent-%COMP%], .btn-percent[_ngcontent-%COMP%]{background:#f0f0f0;border:none;border-radius:4px;font-size:16px;cursor:pointer}.btn-currency[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px!important}.btn-percent[_ngcontent-%COMP%]{padding:3px 15px;background-color:#cde3fa;border:1px solid #0672e4}.input-discount[_ngcontent-%COMP%]{width:100px;border:none;outline:none;text-align:right;font-size:16px;text-align:center}.discount-unit[_ngcontent-%COMP%]{font-size:18px;color:#333}.discount-label[_ngcontent-%COMP%]{text-align:center;position:relative;top:-18px}.discount-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;font-size:10px;color:#666}.paiement_restant[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 30px}.btn_facture[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.btn_facture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.paiement_btn[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:12px;border-radius:5px}.paiement_btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}.btn_client[_ngcontent-%COMP%]{cursor:pointer}.btn_client[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.double_client_facture[_ngcontent-%COMP%]{gap:5px;display:grid;grid-template-columns:repeat(2,1fr);padding:0 10px}.selected[_ngcontent-%COMP%]{background-color:#0672e4!important;color:#fff!important}.selected[_ngcontent-%COMP%]   .name_categorie[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{color:#fff!important}.selected_mode_pay[_ngcontent-%COMP%]{border:1px solid #2f7dd1}.keypad[_ngcontent-%COMP%]   button.btn_keypad_active[_ngcontent-%COMP%]{border:1px solid #2f7dd1;background-color:#e0efff}.cadre_paiement.selected[_ngcontent-%COMP%]{border:2px solid #4CAF50;background-color:#f0fff4}.btn-payment-pop[_ngcontent-%COMP%]:disabled{background-color:#f4f4f4;cursor:not-allowed;color:#acacac}.price_du[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em}p[_ngcontent-%COMP%]{margin:0}.btn_container[_ngcontent-%COMP%]{display:grid;grid-template-columns:60px 1fr 60px;margin:10px 10px 0;gap:10px}.btn-payment[_ngcontent-%COMP%]{width:100%;height:80px;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.btn_content[_ngcontent-%COMP%]{margin:0}.btn_delete[_ngcontent-%COMP%], .btn_retourn[_ngcontent-%COMP%]{width:100%;height:80px;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.btn_delete[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.btn_retourn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px}.btn_delete[_ngcontent-%COMP%]{background-color:#f2acac;color:#000}.btn_retourn[_ngcontent-%COMP%]{background-color:#f4f4f4;color:#000}.section_list_commande[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(100vh - 115px);padding-right:5px}.section_list_commande[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.section_list_commande[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0672e433;border-radius:5px}.section_list_commande[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.ul_commande[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px 10px;margin-bottom:10px;margin-top:10px;box-shadow:#0000000d 0 0 0 1px;background-color:#fff}.ul_commande_active[_ngcontent-%COMP%]{background-color:#cde3fa}.commande_date[_ngcontent-%COMP%], .commande_heure[_ngcontent-%COMP%]{font-size:12px}.etat_commande[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:3px 20px;border-radius:20px}.icon_delete_commande[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .icon_favory_commande[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.icon_delete_commande[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.icon_favory_commande[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0672e4}.toolbar[_ngcontent-%COMP%]{display:grid;grid-template-columns:45px 1fr 100px;margin:10px 10px 0}.icon_search[_ngcontent-%COMP%]{height:45px;background-color:#f4f4f4;display:flex;align-items:center;justify-content:center;border-left:1px solid #000;border-top:1px solid #000;border-bottom:1px solid #000;border-top-left-radius:5px;border-bottom-left-radius:5px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:45px;border:1px solid #000;padding-left:10px}.btn_search_filtre[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:45px;width:100%;border-radius:0 5px 5px 0;border:1px solid #000;border-right:1px solid #000;border-top:1px solid #000;border-bottom:1px solid #000;border-left:0px;background-color:#f4f4f4}.btn_search_filtre[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;margin-top:1px}.loading_commande[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#666}']})}}return i})()},9293:(b,g,c)=>{c.d(g,{R:()=>h});var s=c(1626),f=c(4412),l=c(5558),t=c(8810),u=c(8141),m=c(9437),C=c(1985),x=c(2525),_=c(4438),P=c(8026);let h=(()=>{class d{constructor(i,r){this.http=i,this.usersService=r,this.apiUrl=x.c.apiBaseUrl,this.categoriesSubject=new f.t([]),this.categories$=this.categoriesSubject.asObservable()}ajouterCategorie(i){return this.usersService.getValidAccessToken().pipe((0,l.n)(r=>{if(!r)return console.error("\u26a0\ufe0f Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),(0,t.$)(()=>new Error("Aucun token valide trouv\xe9"));const n=new s.Lr({Authorization:`Bearer ${r}`});return this.http.post(`${this.apiUrl}/createCategory`,i,{headers:n}).pipe((0,u.M)(e=>{this.categoriesSubject.next([...this.categoriesSubject.value,e])}))}),(0,m.W)(r=>(console.error("Erreur lors de l'ajout de la cat\xe9gorie:",r),(0,t.$)(()=>r))))}getCategories(){return this.usersService.getValidAccessToken().pipe((0,l.n)(i=>{if(!i)return console.error("\u26a0\ufe0f Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),new C.c;const r=(new s.Lr).set("Authorization",`Bearer ${i}`);return console.log("\u{1f539} En-t\xeates envoy\xe9s :",r),this.http.get(`${this.apiUrl}/allCategory`,{headers:r}).pipe((0,u.M)(n=>{this.categoriesSubject.next(n)}))}),(0,m.W)(i=>(console.error("Erreur lors de la r\xe9cup\xe9ration des cat\xe9gories:",i),(0,t.$)(()=>i))))}deleteCategorie(i){return this.usersService.getValidAccessToken().pipe((0,l.n)(r=>{if(!r)return console.error("\u26a0\ufe0f Token JWT manquant pour suppression cat\xe9gorie."),(0,t.$)(()=>new Error("Token manquant"));const n=(new s.Lr).set("Authorization",`Bearer ${r}`);return console.log("\u{1f539} Token envoy\xe9 pour DELETE cat\xe9gorie :",n),this.http.delete(`${this.apiUrl}/deleteCategory/${i}`,{headers:n,responseType:"text"})}),(0,m.W)(r=>(console.error("\u274c Erreur API DELETE :",r),(0,t.$)(()=>r))))}static{this.\u0275fac=function(r){return new(r||d)(_.KVO(s.Qq),_.KVO(P.g))}}static{this.\u0275prov=_.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()}}]);