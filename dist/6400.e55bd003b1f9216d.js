"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[6400],{6375:(F,j,u)=>{u.d(j,{D:()=>M});var g=u(1626),x=u(9437),c=u(8810),C=u(2525),P=u(4438);let M=(()=>{class h{constructor(d){this.http=d,this.apiUrl=C.c.apiBaseUrl}ajouterProduit(d,p,t,m,_,v){const k=`${this.apiUrl}/create?addToStock=${v}`,b=new FormData;b.append("boutiqueIds",JSON.stringify(d)),b.append("quantites",JSON.stringify(p)),b.append("produit",JSON.stringify(m)),b.append("seuilAlert",JSON.stringify(t)),_&&b.append("image",_,_.name);const A=localStorage.getItem("authToken")||"",O=new g.Lr({Authorization:`Bearer ${A}`});return this.http.post(k,b,{headers:O})}modifierProduit(d,p){const t=localStorage.getItem("authToken")||"",m=new g.Lr({Authorization:`Bearer ${t}`}),_=new FormData,{id:v,...k}=d;return _.append("produit",JSON.stringify(k)),_.append("addToStock",d.enStock?"true":"false"),p&&_.append("image",p,p.name),this.http.patch(`${this.apiUrl}/updateProduit/${d.id}`,_,{headers:m})}getProduitById(d){const p=localStorage.getItem("authToken")||"",t=new g.Lr({Authorization:`Bearer ${p}`});return this.http.get(`${this.apiUrl}/produits/${d}`,{headers:t})}getProduitsEntreprise(d){const p=localStorage.getItem("authToken"),t=new g.Lr({Authorization:`Bearer ${p}`});return this.http.get(`${this.apiUrl}/produits/${d}/stock`,{headers:t}).pipe((0,x.W)(m=>(0,c.$)(400===m.status&&"Cette boutique est d\xe9sactiv\xe9e, ses produits ne sont pas accessibles !"===m.error?.error?()=>new Error("BOUTIQUE_DESACTIVEE"):()=>m)))}getProduitBoutique(d){const p=localStorage.getItem("authToken");if(!p)return console.error("Aucun token trouv\xe9"),(0,c.$)("Aucun token trouv\xe9");const t=new g.Lr({Authorization:`Bearer ${p}`});return this.http.get(`${this.apiUrl}/produits/${d}/totaux-stock`,{headers:t})}getProduitsByEntrepriseId(d){return this.http.get(`${this.apiUrl}/produits/entreprise/${d}`)}getProduitsParEntreprise(d){return this.http.get(`${this.apiUrl}/produits/entreprise/${d}`)}getFournisseurs(){const d=localStorage.getItem("authToken")||"",p=new g.Lr({Authorization:`Bearer ${d}`});return this.http.get(`${this.apiUrl}/get-fournisseurs`,{headers:p})}static{this.\u0275fac=function(p){return new(p||h)(P.KVO(g.Qq))}}static{this.\u0275prov=P.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},4019:(F,j,u)=>{u.r(j),u.d(j,{AddStockAjustementComponent:()=>gt});var g=u(467),x=u(177),c=u(9417),C=u(6115),P=u(1413),M=u(6977),h=u(9172),E=u(6354),d=u(850),p=u(9980),t=u(4438),m=u(6375),_=u(9192),v=u(8026),k=u(933),b=u(1856),A=u(4564);const O=["productSelect"];function q(i,s){1&i&&(t.j41(0,"div",37)(1,"mat-icon",38),t.EFF(2,"keyboard_arrow_right"),t.k0s()())}function I(i,s){if(1&i&&(t.j41(0,"mat-option",33)(1,"div",34)(2,"div",35),t.EFF(3),t.k0s(),t.DNE(4,q,3,0,"div",36),t.k0s()()),2&i){const e=s.$implicit,o=t.XpG();t.Y8G("value",e),t.R7$(3),t.SpI(" ",e," "),t.R7$(),t.Y8G("ngIf",o.controlBoutique.value!==e)}}function R(i,s){1&i&&(t.j41(0,"span"),t.EFF(1,"La description doit avoir au moins 2 caract\xe8res."),t.k0s())}function T(i,s){1&i&&(t.j41(0,"span"),t.EFF(1,"La description ne doit pas d\xe9passer 100 caract\xe8res."),t.k0s())}function y(i,s){if(1&i&&(t.j41(0,"div",39),t.DNE(1,R,2,0,"span",40)(2,T,2,0,"span",40),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.f.descriptionGlobal.errors?null:e.f.descriptionGlobal.errors.minlength),t.R7$(),t.Y8G("ngIf",null==e.f.descriptionGlobal.errors?null:e.f.descriptionGlobal.errors.maxlength)}}function G(i,s){if(1&i&&(t.j41(0,"option",44),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("ngValue",e.id),t.R7$(),t.SpI(" ",e.nomComplet," ")}}function B(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",16)(1,"div",41)(2,"div",42),t.EFF(3,"Nom du fournisseur"),t.k0s(),t.j41(4,"select",43),t.bIt("change",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onFournisseurChange())}),t.j41(5,"option",44),t.EFF(6,"-- S\xe9lectionnez un fournisseur --"),t.k0s(),t.DNE(7,G,2,2,"option",45),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(5),t.Y8G("ngValue",null),t.R7$(2),t.Y8G("ngForOf",e.fournisseurs)}}function V(i,s){1&i&&(t.j41(0,"div",16)(1,"div",46)(2,"div",47),t.EFF(3,"Num\xe9ro du facture fournisseur"),t.k0s(),t.nrm(4,"input",48),t.k0s()())}function $(i,s){if(1&i){const e=t.RV6();t.j41(0,"tr",55)(1,"td")(2,"div",66),t.nrm(3,"input",67),t.k0s()(),t.j41(4,"td")(5,"div",68),t.nrm(6,"input",69),t.k0s()(),t.j41(7,"td")(8,"div",68),t.nrm(9,"input",69),t.k0s()(),t.j41(10,"td")(11,"div",68),t.nrm(12,"input",69),t.nI1(13,"customNumber"),t.k0s()(),t.j41(14,"td")(15,"div",70),t.nrm(16,"input",71),t.k0s()(),t.j41(17,"td")(18,"div",72),t.bIt("click",function(){const n=t.eBV(e).index,r=t.XpG(3);return t.Njj(r.removePendingAdjustment(n))}),t.nrm(19,"i",73),t.k0s()()()}if(2&i){const e=s.$implicit;t.R7$(3),t.Y8G("value",e.produitNom),t.R7$(3),t.Y8G("value",e.quantiteAjoute&&e.quantiteAjoute>0?e.quantiteAjoute:e.quantiteRetirer),t.R7$(3),t.Y8G("value",e.stockActuel),t.R7$(3),t.Y8G("value",t.bMT(13,5,e.prixVente)),t.R7$(4),t.Y8G("value",e.stockApres)}}function D(i,s){if(1&i&&(t.j41(0,"tbody"),t.DNE(1,$,20,7,"tr",65),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.pendingAdjustments)}}function N(i,s){1&i&&(t.qex(0),t.j41(1,"option",74),t.EFF(2," Aucune boutique s\xe9lectionn\xe9e "),t.k0s(),t.bVm())}function w(i,s){1&i&&(t.qex(0),t.j41(1,"option",74),t.EFF(2," Aucun produit disponible dans cette boutique "),t.k0s(),t.bVm())}function Y(i,s){if(1&i&&(t.j41(0,"option",44),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("ngValue",e),t.R7$(),t.SpI(" ",e.nom," ")}}function z(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",75)(1,"div",76)(2,"p",77),t.EFF(3),t.k0s(),t.j41(4,"button",78),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.clearSelections())}),t.EFF(5,"OK"),t.k0s()()()}if(2&i){const e=t.XpG(2);t.R7$(3),t.JRh(e.errorMessage)}}function X(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",13)(1,"div",14)(2,"div",49)(3,"h4"),t.EFF(4,"Gestion des stocks"),t.k0s()(),t.j41(5,"div",50)(6,"table")(7,"thead")(8,"tr",51)(9,"th",52),t.EFF(10,"Mes produits"),t.k0s(),t.j41(11,"th",53),t.EFF(12,"Quantit\xe9 \xe0 ajouter"),t.k0s(),t.j41(13,"th",54),t.EFF(14,"Stock actuel"),t.k0s(),t.j41(15,"th",54),t.EFF(16,"Co\xfbt unitaire"),t.k0s(),t.j41(17,"th",54),t.EFF(18,"Stock apr\xe8s"),t.k0s()()(),t.DNE(19,D,2,1,"tbody",40),t.j41(20,"tbody")(21,"tr",55)(22,"td")(23,"div",56)(24,"select",57,1),t.mxI("ngModelChange",function(n){t.eBV(e);const r=t.XpG();return t.DH7(r.selectedProduct,n)||(r.selectedProduct=n),t.Njj(n)}),t.bIt("ngModelChange",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.checkExistingProduct())}),t.j41(26,"option",44),t.EFF(27),t.k0s(),t.DNE(28,N,3,0,"ng-container",40)(29,w,3,0,"ng-container",40)(30,Y,2,2,"option",45),t.k0s()()(),t.j41(31,"td")(32,"div",58)(33,"input",59),t.mxI("ngModelChange",function(n){t.eBV(e);const r=t.XpG();return t.DH7(r.quantiteAjoute,n)||(r.quantiteAjoute=n),t.Njj(n)}),t.k0s()()(),t.j41(34,"td")(35,"div",58),t.nrm(36,"input",60),t.k0s()(),t.j41(37,"td")(38,"div",58),t.nrm(39,"input",61),t.nI1(40,"customNumber"),t.nI1(41,"customNumber"),t.k0s()(),t.j41(42,"td")(43,"div",56),t.nrm(44,"input",62),t.k0s()(),t.j41(45,"td")(46,"div",63),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addToPendingAdjustments())}),t.nrm(47,"i",64),t.k0s()()()()(),t.DNE(48,z,6,1,"div",32),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(19),t.Y8G("ngIf",e.pendingAdjustments.length>0),t.R7$(5),t.AVh("duplicate",e.errorMessage.includes("est d\xe9j\xe0 dans la liste")),t.R50("ngModel",e.selectedProduct),t.Y8G("disabled",!e.boutiqueIdSelected)("compareWith",e.compareProducts),t.R7$(2),t.Y8G("ngValue",null),t.R7$(),t.SpI(" ",e.boutiqueIdSelected?"S\xe9lectionner un produit":"Veuillez s\xe9lectionner une boutique"," "),t.R7$(),t.Y8G("ngIf",!e.boutiqueIdSelected),t.R7$(),t.Y8G("ngIf",e.boutiqueIdSelected&&0===e.tasks.length),t.R7$(),t.Y8G("ngForOf",e.tasks),t.R7$(3),t.R50("ngModel",e.quantiteAjoute),t.Y8G("max",e.selectedProduct?e.selectedProduct.quantite:null),t.R7$(3),t.Y8G("value",e.selectedProduct?e.selectedProduct.quantite:0),t.R7$(3),t.Y8G("value",e.selectedProduct?t.bMT(40,17,e.selectedProduct.prixVente):t.bMT(41,19,0)),t.R7$(5),t.Y8G("value",e.stockApres),t.R7$(4),t.Y8G("ngIf",e.errorMessage)}}function U(i,s){if(1&i){const e=t.RV6();t.j41(0,"tr",55)(1,"td")(2,"div",66),t.nrm(3,"input",67),t.k0s()(),t.j41(4,"td")(5,"div",68),t.nrm(6,"input",69),t.k0s()(),t.j41(7,"td")(8,"div",68),t.nrm(9,"input",69),t.k0s()(),t.j41(10,"td")(11,"div",68),t.nrm(12,"input",69),t.nI1(13,"customNumber"),t.k0s()(),t.j41(14,"td")(15,"div",70),t.nrm(16,"input",69),t.k0s()(),t.j41(17,"td")(18,"div",72),t.bIt("click",function(){const n=t.eBV(e).index,r=t.XpG(3);return t.Njj(r.removePendingAdjustment(n))}),t.nrm(19,"i",73),t.k0s()()()}if(2&i){const e=s.$implicit;t.R7$(3),t.Y8G("value",e.produitNom),t.R7$(3),t.Y8G("value",e.quantiteRetirer&&e.quantiteRetirer>0?e.quantiteRetirer:e.quantiteAjoute),t.R7$(3),t.Y8G("value",e.stockActuel),t.R7$(3),t.Y8G("value",t.bMT(13,5,e.prixVente)),t.R7$(4),t.Y8G("value",e.stockApres)}}function L(i,s){if(1&i&&(t.j41(0,"tbody"),t.DNE(1,U,20,7,"tr",65),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.pendingAdjustments)}}function W(i,s){1&i&&(t.qex(0),t.j41(1,"option",74),t.EFF(2," Aucune boutique s\xe9lectionn\xe9e "),t.k0s(),t.bVm())}function K(i,s){1&i&&(t.qex(0),t.j41(1,"option",74),t.EFF(2," Aucun produit disponible dans cette boutique "),t.k0s(),t.bVm())}function Q(i,s){if(1&i&&(t.j41(0,"option",44),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("ngValue",e),t.R7$(),t.SpI(" ",e.nom," ")}}function J(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",75)(1,"div",76)(2,"p",77),t.EFF(3),t.k0s(),t.j41(4,"button",78),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.clearSelections())}),t.EFF(5,"OK"),t.k0s()()()}if(2&i){const e=t.XpG(2);t.R7$(3),t.JRh(e.errorMessage)}}function H(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",13)(1,"div",14)(2,"div",49)(3,"h4"),t.EFF(4,"Gestion des stocks"),t.k0s()(),t.j41(5,"div",50)(6,"table")(7,"thead")(8,"tr",51)(9,"th",52),t.EFF(10,"Mes produits"),t.k0s(),t.j41(11,"th",79),t.EFF(12,"Quantit\xe9 \xe0 reduire"),t.k0s(),t.j41(13,"th",54),t.EFF(14,"Stock actuel"),t.k0s(),t.j41(15,"th",54),t.EFF(16,"Co\xfbt unitaire"),t.k0s(),t.j41(17,"th",54),t.EFF(18,"Stock apr\xe8s"),t.k0s()()(),t.DNE(19,L,2,1,"tbody",40),t.j41(20,"tbody")(21,"tr",55)(22,"td")(23,"div",56)(24,"select",57,1),t.mxI("ngModelChange",function(n){t.eBV(e);const r=t.XpG();return t.DH7(r.selectedProduct,n)||(r.selectedProduct=n),t.Njj(n)}),t.bIt("ngModelChange",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.checkExistingProduct())}),t.j41(26,"option",44),t.EFF(27),t.k0s(),t.DNE(28,W,3,0,"ng-container",40)(29,K,3,0,"ng-container",40)(30,Q,2,2,"option",45),t.k0s()()(),t.j41(31,"td")(32,"form")(33,"div",58)(34,"input",80),t.mxI("ngModelChange",function(n){t.eBV(e);const r=t.XpG();return t.DH7(r.quantiteRetirer,n)||(r.quantiteRetirer=n),t.Njj(n)}),t.k0s()()()(),t.j41(35,"td")(36,"div",58),t.nrm(37,"input",60),t.k0s()(),t.j41(38,"td")(39,"div",58),t.nrm(40,"input",61),t.nI1(41,"customNumber"),t.nI1(42,"customNumber"),t.k0s()(),t.j41(43,"td")(44,"div",56),t.nrm(45,"input",81),t.k0s()(),t.j41(46,"td")(47,"div",63),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.reduireToPendingAdjustments())}),t.nrm(48,"i",64),t.k0s()()()()(),t.DNE(49,J,6,1,"div",32),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(19),t.Y8G("ngIf",e.pendingAdjustments.length>0),t.R7$(5),t.AVh("duplicate",e.errorMessage.includes("est d\xe9j\xe0 dans la liste")),t.R50("ngModel",e.selectedProduct),t.Y8G("disabled",!e.boutiqueIdSelected)("compareWith",e.compareProducts),t.R7$(2),t.Y8G("ngValue",null),t.R7$(),t.SpI(" ",e.boutiqueIdSelected?"S\xe9lectionner un produit":"Veuillez s\xe9lectionner une boutique"," "),t.R7$(),t.Y8G("ngIf",!e.boutiqueIdSelected),t.R7$(),t.Y8G("ngIf",e.boutiqueIdSelected&&0===e.tasks.length),t.R7$(),t.Y8G("ngForOf",e.tasks),t.R7$(4),t.R50("ngModel",e.quantiteRetirer),t.Y8G("max",e.selectedProduct?e.selectedProduct.quantite:null),t.R7$(3),t.Y8G("value",e.selectedProduct?e.selectedProduct.quantite:0),t.R7$(3),t.Y8G("value",e.selectedProduct?t.bMT(41,17,e.selectedProduct.prixVente):t.bMT(42,19,0)),t.R7$(5),t.Y8G("value",e.stockApres),t.R7$(4),t.Y8G("ngIf",e.errorMessage)}}function Z(i,s){if(1&i){const e=t.RV6();t.j41(0,"tr",55)(1,"td")(2,"div",66),t.nrm(3,"input",67),t.k0s()(),t.j41(4,"td")(5,"div",68),t.nrm(6,"input",69),t.k0s()(),t.j41(7,"td")(8,"div",68),t.nrm(9,"input",69),t.k0s()(),t.j41(10,"td")(11,"div",68),t.nrm(12,"input",69),t.k0s()(),t.j41(13,"td")(14,"div",66),t.nrm(15,"input",67),t.k0s()(),t.j41(16,"td")(17,"div",72),t.bIt("click",function(){const n=t.eBV(e).index,r=t.XpG(3);return t.Njj(r.removePendingAdjustment(n))}),t.nrm(18,"i",73),t.k0s()()()}if(2&i){const e=s.$implicit;t.R7$(3),t.Y8G("value",e.produitNom),t.R7$(3),t.Y8G("value",e.quantite),t.R7$(3),t.Y8G("value",e.stockActuel),t.R7$(3),t.Y8G("value",e.stockActuel),t.R7$(3),t.Y8G("value",e.boutiqueDestinationName)}}function tt(i,s){if(1&i&&(t.j41(0,"tbody"),t.DNE(1,Z,19,5,"tr",65),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.Y8G("ngForOf",e.pendingAdjustments)}}function et(i,s){1&i&&(t.qex(0),t.j41(1,"option",74),t.EFF(2," Aucune boutique s\xe9lectionn\xe9e "),t.k0s(),t.bVm())}function nt(i,s){1&i&&(t.qex(0),t.j41(1,"option",74),t.EFF(2," Aucun produit disponible dans cette boutique "),t.k0s(),t.bVm())}function ot(i,s){if(1&i&&(t.j41(0,"option",44),t.EFF(1),t.k0s()),2&i){const e=s.$implicit;t.Y8G("ngValue",e),t.R7$(),t.SpI(" ",e.nom," ")}}function it(i,s){1&i&&(t.j41(0,"span",90),t.EFF(1," (D\xe9j\xe0 s\xe9lectionn\xe9e) "),t.k0s())}function rt(i,s){1&i&&(t.j41(0,"span",91),t.EFF(1," (Suspendue) "),t.k0s())}function st(i,s){if(1&i&&(t.j41(0,"mat-option",87),t.EFF(1),t.DNE(2,it,2,0,"span",88)(3,rt,2,0,"span",89),t.k0s()),2&i){const e=s.$implicit,o=t.XpG(2);t.Y8G("value",e)("disabled",e.id===o.boutiqueIdSelected||!e.actif),t.R7$(),t.SpI(" ",e.name," "),t.R7$(),t.Y8G("ngIf",e.id===o.boutiqueIdSelected),t.R7$(),t.Y8G("ngIf",!e.actif)}}function ct(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",75)(1,"div",76)(2,"p",77),t.EFF(3),t.k0s(),t.j41(4,"button",78),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.errorMessage="")}),t.EFF(5,"OK"),t.k0s()()()}if(2&i){const e=t.XpG(2);t.R7$(3),t.JRh(e.errorMessage)}}function ut(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",13)(1,"div",14)(2,"div",49)(3,"h4"),t.EFF(4,"Gestion des transferts"),t.k0s()(),t.j41(5,"div",50)(6,"table")(7,"thead")(8,"tr",51)(9,"th",82),t.EFF(10,"Mes produits"),t.k0s(),t.j41(11,"th",83),t.EFF(12,"Quantit\xe9 de transfert"),t.k0s(),t.j41(13,"th",54),t.EFF(14,"Stock actuel"),t.k0s(),t.j41(15,"th",54),t.EFF(16,"Stock apr\xe8s"),t.k0s(),t.j41(17,"th",54),t.EFF(18,"Boutique d'arriver"),t.k0s()()(),t.DNE(19,tt,2,1,"tbody",40),t.j41(20,"tbody")(21,"tr",55)(22,"td")(23,"div",58)(24,"select",57,1),t.mxI("ngModelChange",function(n){t.eBV(e);const r=t.XpG();return t.DH7(r.selectedProduct,n)||(r.selectedProduct=n),t.Njj(n)}),t.bIt("ngModelChange",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.checkExistingProduct())}),t.j41(26,"option",44),t.EFF(27),t.k0s(),t.DNE(28,et,3,0,"ng-container",40)(29,nt,3,0,"ng-container",40)(30,ot,2,2,"option",45),t.k0s()()(),t.j41(31,"td")(32,"form")(33,"div",58)(34,"input",80),t.mxI("ngModelChange",function(n){t.eBV(e);const r=t.XpG();return t.DH7(r.quantiteRetirer,n)||(r.quantiteRetirer=n),t.Njj(n)}),t.k0s()()()(),t.j41(35,"td")(36,"div",58),t.nrm(37,"input",60),t.k0s()(),t.j41(38,"td")(39,"div",58),t.nrm(40,"input",81),t.k0s()(),t.j41(41,"td")(42,"div",16),t.nrm(43,"input",84),t.j41(44,"label",85),t.EFF(45,"Boutique"),t.k0s(),t.j41(46,"mat-autocomplete",24,2),t.bIt("optionSelected",function(n){t.eBV(e);const r=t.XpG();return t.Njj(r.onBoutiqueSelectedTransfert(n))}),t.DNE(48,st,4,5,"mat-option",86),t.nI1(49,"async"),t.k0s()()(),t.j41(50,"td")(51,"div",63),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.transfertToPendingAdjustments())}),t.nrm(52,"i",64),t.k0s()()()()(),t.DNE(53,ct,6,1,"div",32),t.k0s()()()}if(2&i){const e=t.sdS(47),o=t.XpG();t.R7$(19),t.Y8G("ngIf",o.pendingAdjustments.length>0),t.R7$(5),t.AVh("duplicate",o.errorMessage.includes("est d\xe9j\xe0 dans la liste")),t.R50("ngModel",o.selectedProduct),t.Y8G("disabled",!o.boutiqueIdSelected)("compareWith",o.compareProducts),t.R7$(2),t.Y8G("ngValue",null),t.R7$(),t.SpI(" ",o.boutiqueIdSelected?"S\xe9lectionner un produit":"S\xe9lectionner une boutique"," "),t.R7$(),t.Y8G("ngIf",!o.boutiqueIdSelected),t.R7$(),t.Y8G("ngIf",o.boutiqueIdSelected&&0===o.tasks.length),t.R7$(),t.Y8G("ngForOf",o.tasks),t.R7$(4),t.R50("ngModel",o.quantiteRetirer),t.Y8G("max",o.selectedProduct?o.selectedProduct.quantite:null),t.R7$(3),t.Y8G("value",o.selectedProduct?o.selectedProduct.quantite:0),t.R7$(3),t.Y8G("value",o.stockApres),t.R7$(3),t.Y8G("formControl",o.controlBoutiqueTransfert)("matAutocomplete",e),t.R7$(3),t.Y8G("displayWith",o.displayFnBoutiqueTransfert),t.R7$(2),t.Y8G("ngForOf",t.bMT(49,20,o.filteredStreetsBoutiqueTransfert)),t.R7$(5),t.Y8G("ngIf",o.errorMessage)}}function dt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",13)(1,"div",92)(2,"div",93)(3,"button",94),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goToStock())}),t.EFF(4,"Annuler"),t.k0s()(),t.j41(5,"div",95)(6,"button",96),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.AjouterDesQuan())}),t.EFF(7,"Ajuster"),t.k0s()()()()}}function at(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",13)(1,"div",92)(2,"div",93)(3,"button",94),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goToStock())}),t.EFF(4,"Annuler"),t.k0s()(),t.j41(5,"div",95)(6,"button",96),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.RetirerDesQuan())}),t.EFF(7,"Ajuster"),t.k0s()()()()}}function lt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",13)(1,"div",92)(2,"div",93)(3,"button",94),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.goToStock())}),t.EFF(4,"Annuler"),t.k0s()(),t.j41(5,"div",95)(6,"button",96),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.transfererProduits())}),t.EFF(7,"Transf\xe9rer"),t.k0s()()()()}}function pt(i,s){if(1&i){const e=t.RV6();t.j41(0,"div",75)(1,"div",76)(2,"p",77),t.EFF(3),t.k0s(),t.j41(4,"button",78),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.successMessage="")}),t.EFF(5,"OK"),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(3),t.JRh(e.successMessage)}}function _t(i,s){if(1&i&&(t.j41(0,"div",75)(1,"div",76)(2,"p",77),t.EFF(3),t.k0s()()()),2&i){const e=t.XpG();t.R7$(3),t.JRh(e.errorMessageError)}}let gt=(()=>{class i{constructor(e,o,n,r,l,a,f){this.produitService=e,this.fb=o,this.router=n,this.usersService=r,this.stockService=l,this.cdRef=a,this.transfertService=f,this.destroy$=new P.B,this.errorMessage="",this.errorMessageError="",this.selectedDestinationBoutique=null,this.boutiqueName="",this.selectedAction="ajouter",this.stocksVisible=!1,this.pendingAdjustments=[],this.successMessage="",this.descriptionGlobal="",this.codeFournisseurGlobal="",this.boutiqueIdSelected=null,this.controlBoutique=new c.MJ(""),this.controlBoutiqueTransfert=new c.MJ(""),this.streetsBoutique=[],this.streetsBoutiqueTransfert=[],this.showPopupBoutique=!1,this.selectedProduct=null,this.tasks=[],this.selectedFournisseur=null,this.fournisseurs=[],this.quantiteAjoute=null,this.quantiteRetirer=null,this.descriptionAjout="",this.descriptionRetire="",this.codeFournisseur="",this.adjustedStocks=[]}goToStock(){this.router.navigate(["/stocks"])}ngOnInit(){this.getBoutiqueName(),this.getAjusteForm(),this.getControleBoutique(),this.loadFournisseurs()}getControleBoutique(){this.controlBoutique.valueChanges.pipe((0,M.Q)(this.destroy$)).subscribe(e=>{e||this.handleBoutiqueDeselection()})}handleBoutiqueDeselection(){this.boutiqueIdSelected=null,this.tasks=[],this.pendingAdjustments=[],this.selectedProduct=null,this.cdRef.detectChanges()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}checkBoutiqueSelection(){this.controlBoutique.value||this.handleBoutiqueDeselection()}getBoutiqueName(){this.usersService.getUserInfo().subscribe(e=>{e&&e.boutiques&&(this.streetsBoutique=e.boutiques.filter(o=>o.actif).map(o=>({id:o.id,name:o.nomBoutique,actif:o.actif})),this.streetsBoutiqueTransfert=[...this.streetsBoutique],this.getFilteredStreetsBoutique(),this.getFilteredStreetsBoutiqueTransfert())},e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des informations utilisateur",e)})}loadProduits(e){e?this.produitService.getProduitsEntreprise(e).subscribe({next:o=>{this.tasks=o.filter(n=>n.enStock).map(n=>({...n})).sort((n,r)=>{const l=a=>{try{return a?new Date(a).getTime():0}catch{return 0}};return l(r.createdAt)-l(n.createdAt)})},error:o=>{console.error("Erreur lors de la r\xe9cup\xe9ration des produits",o),this.tasks=[]}}):this.tasks=[]}get f(){return this.ajusteForm.controls}get r(){return this.ajusteRetirerForm.controls}loadFournisseurs(){this.produitService.getFournisseurs().subscribe({next:e=>{this.fournisseurs=e,console.log("Fournisseurs:",this.fournisseurs)},error:e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des fournisseurs",e),this.fournisseurs=[]}})}get stockApres(){if(!this.selectedProduct)return"";const e=Number(this.selectedProduct.quantite);return"ajouter"===this.selectedAction&&this.quantiteAjoute?e+Number(this.quantiteAjoute):"reduire"===this.selectedAction&&this.quantiteRetirer?e-Number(this.quantiteRetirer):"transfert"===this.selectedAction&&this.quantiteRetirer?e-this.quantiteRetirer:""}loadAdjustedStocks(){const e=this.usersService.getToken();e?this.stockService.getAllStocks(e).subscribe({next:o=>{this.adjustedStocks=o.filter(n=>n.quantiteAjoute&&n.quantiteAjoute>0||n.quantiteRetirer&&n.quantiteRetirer>0)},error:o=>{console.error("Erreur lors du chargement des stocks ajust\xe9s",o)}}):console.error("Token introuvable")}getProductName(e){if(e.produitId){console.log("ProduitId dans stock:",e.produitId);const o=this.tasks.find(n=>n.id===e.produitId);return o?(console.log("Produit trouv\xe9:",o),o.nom):(console.warn("Produit non trouv\xe9 dans tasks pour l'id:",e.produitId),"Produit inconnu")}return console.warn("Aucun produitId pr\xe9sent dans le stock:",e),"Produit inconnu"}getProductPrixVente(e){if(e.produitId){console.log("ProduitId dans stock:",e.produitId);const o=this.tasks.find(n=>n.id===e.produitId);return o?(console.log("Produit trouv\xe9:",o),`${o.prixVente}`):(console.warn("Produit non trouv\xe9 dans tasks pour l'id:",e.produitId),"Produit inconnu")}return console.warn("Aucun produitId pr\xe9sent dans le stock:",e),"Produit inconnu"}checkStocksVisibility(){this.stocksVisible="true"===localStorage.getItem("stocksVisibility")}getAjusteForm(){this.ajusteForm=this.fb.group({descriptionGlobal:["",[c.k0.minLength(2),c.k0.maxLength(100)]],codeFournisseur:["",[c.k0.minLength(4),c.k0.maxLength(100)]],fournisseurId:[null,c.k0.required]})}addToPendingAdjustments(){if(!this.errorMessage){if(!this.selectedProduct)return void(this.errorMessage="Veuillez s\xe9lectionner un produit");if(!this.quantiteAjoute||this.quantiteAjoute<=0)return void(this.errorMessage="Quantit\xe9 invalide");this.pendingAdjustments=[...this.pendingAdjustments,{produitId:this.selectedProduct.id,produitNom:this.selectedProduct.nom,quantiteAjoute:this.quantiteAjoute,stockActuel:this.selectedProduct.quantite,stockApres:this.stockApres,prixVente:this.selectedProduct.prixVente,descriptionAjout:this.descriptionAjout,codeFournisseur:this.codeFournisseur}],this.selectedProduct=null,this.quantiteAjoute=null,this.descriptionAjout=""}}reduireToPendingAdjustments(){if(!this.errorMessage){if(!this.selectedProduct)return void(this.errorMessage="Veuillez s\xe9lectionner un produit");if(!this.quantiteRetirer||this.quantiteRetirer<=0)return void(this.errorMessage="Quantit\xe9 invalide");this.pendingAdjustments=[...this.pendingAdjustments,{produitId:this.selectedProduct.id,produitNom:this.selectedProduct.nom,quantiteRetirer:this.quantiteRetirer,stockActuel:this.selectedProduct.quantite,stockApres:this.stockApres,prixVente:this.selectedProduct.prixVente,descriptionretire:this.descriptionRetire}],this.selectedProduct=null,this.quantiteRetirer=null,this.descriptionRetire=""}}loadPendingAdjustments(){const e=localStorage.getItem("pendingAdjustments");this.pendingAdjustments=e?JSON.parse(e):[]}checkExistingProduct(){this.selectedProduct&&this.pendingAdjustments.some(o=>o.produitNom===this.selectedProduct.nom)?(this.errorMessage=`${this.selectedProduct.nom} est d\xe9j\xe0 dans la liste !`,this.selectedProduct=null):this.errorMessage=""}clearSelections(){this.errorMessage="",this.selectedProduct=null,this.quantiteAjoute=null,setTimeout(()=>{this.cdRef.detectChanges(),this.cdRef.markForCheck()}),this.productSelect&&(this.productSelect.nativeElement.selectedIndex=0)}compareProducts(e,o){return null===e&&null===o||!(!e||!o)&&e.id===o.id}AjouterDesQuan(){this.errorMessage="",this.successMessage="";const e=[...this.pendingAdjustments];if(this.selectedProduct&&this.quantiteAjoute&&this.quantiteAjoute>0&&-1===e.findIndex(n=>n.produitId===this.selectedProduct.id)&&e.push({produitId:this.selectedProduct.id,produitNom:this.selectedProduct.nom,quantiteAjoute:this.quantiteAjoute,stockActuel:this.selectedProduct.quantite,stockApres:this.selectedProduct.quantite+this.quantiteAjoute,prixVente:this.selectedProduct.prixVente}),e.length>0){const l={produitsQuantites:e.reduce((a,f)=>(a[f.produitId]=f.quantiteAjoute,a),{}),description:this.ajusteForm.value.descriptionGlobal||"",codeFournisseur:this.ajusteForm.value.codeFournisseur||"",fournisseurId:this.fournisseurCtrl.value};console.log("Data \xe0 envoyer:",l),this.stockService.ajouterStock(l).subscribe({next:a=>{e.forEach(f=>{const S=this.tasks.find(mt=>mt.id===f.produitId);S&&(S.quantite=f.stockApres)}),this.clearForm(),this.showSuccessModal()},error:a=>{console.error("Erreur d\xe9taill\xe9e:",a),this.showErrorModal(this.getErrorMessage(a))}})}else this.showErrorModal("Veuillez s\xe9lectionner au moins un produit avec une quantit\xe9 valide")}RetirerDesQuan(){this.errorMessage="",this.successMessage="";const e=[...this.pendingAdjustments];if(this.selectedProduct&&this.quantiteRetirer&&this.quantiteRetirer>0&&-1===e.findIndex(n=>n.produitId===this.selectedProduct.id)){const n=this.selectedProduct.quantite-this.quantiteRetirer;if(n<0)return void this.showErrorModal("Le stock ne peut pas devenir n\xe9gatif");e.push({produitId:this.selectedProduct.id,produitNom:this.selectedProduct.nom,quantiteRetirer:this.quantiteRetirer,stockActuel:this.selectedProduct.quantite,stockApres:n,prixVente:this.selectedProduct.prixVente})}if(e.length>0){const o=e.reduce((r,l)=>(r[l.produitId]=l.quantiteRetirer,r),{});this.stockService.retirerStock({produitsQuantites:o,description:this.ajusteForm.value.descriptionGlobal||""}).subscribe({next:r=>{e.forEach(l=>{const a=this.tasks.find(f=>f.id===l.produitId);a&&(a.quantite=l.stockApres)}),this.clearForm(),this.showSuccessModal()},error:r=>{console.error("Erreur d\xe9taill\xe9e:",r),this.showErrorModal(this.getErrorMessage(r))}})}else this.showErrorModal("Veuillez s\xe9lectionner au moins un produit avec une quantit\xe9 valide")}clearForm(){this.pendingAdjustments=[],this.selectedProduct=null,this.quantiteAjoute=null,this.quantiteRetirer=null,this.ajusteForm.reset()}getErrorMessage(e){return 400===e.status?e.error.message||"Quantit\xe9 invalide ou stock insuffisant":404===e.status?"Produit non trouv\xe9":"Erreur technique - Veuillez r\xe9essayer plus tard"}showSuccessModal(){this.successMessage="Les produits ont \xe9t\xe9 ajust\xe9s avec r\xe9ussite ! ",setTimeout(()=>{this.successMessage=""},5e3)}showErrorModal(e){this.errorMessageError=e,setTimeout(()=>{this.errorMessageError=""},3e3)}removePendingAdjustment(e){this.pendingAdjustments.splice(e,1)}onBoutiqueSelected(e){const o=this.streetsBoutique.find(n=>n.name===e.option.value);o&&(this.boutiqueIdSelected=o.id,this.loadProduits(o.id),this.pendingAdjustments=[],this.selectedProduct=null,this.updateTransfertFilter())}getFilteredStreetsBoutique(){this.filteredStreetsBoutique=this.controlBoutique.valueChanges.pipe((0,h.Z)(""),(0,E.T)(e=>this._filterBoutique(e||"")))}_filterBoutique(e){const o=this._normalizeValue(e);return this.streetsBoutique.filter(n=>n.actif).map(n=>n.name).filter(n=>this._normalizeValue(n).includes(o))}_normalizeValue(e){return e.toLowerCase().replace(/\s/g,"")}onFocusBoutiqueInput(){this.controlBoutique.setValue("")}displayFnBoutique(e){return e||""}onBoutiqueSelectedTransfert(e){this.selectedDestinationBoutique=e.option.value}getFilteredStreetsBoutiqueTransfert(){this.filteredStreetsBoutiqueTransfert=this.controlBoutiqueTransfert.valueChanges.pipe((0,h.Z)(""),(0,E.T)(e=>this._filterBoutiqueTransfert(e||"")))}_filterBoutiqueTransfert(e){const n=this._normalizeValueTransfert("string"==typeof e?e:e?.name||"");return this.streetsBoutiqueTransfert.filter(r=>this._normalizeValueTransfert(r.name).includes(n)&&r.id!==this.boutiqueIdSelected)}updateTransfertFilter(){const e=this.controlBoutiqueTransfert.value;this.controlBoutiqueTransfert.setValue(""),this.controlBoutiqueTransfert.setValue(e)}_normalizeValueTransfert(e){return e.toLowerCase().replace(/\s/g,"")}onFocusBoutiqueInputTransfert(){this.controlBoutiqueTransfert.setValue("")}displayFnBoutiqueTransfert(e){return e?.name||""}validateSingleTransfer(){if(!this.boutiqueIdSelected||!this.selectedDestinationBoutique?.id)return{valid:!1,error:"Veuillez s\xe9lectionner les boutiques"};if(this.boutiqueIdSelected===this.selectedDestinationBoutique.id)return{valid:!1,error:"La source et la destination doivent \xeatre diff\xe9rentes"};if(!this.selectedProduct)return{valid:!1,error:"Veuillez s\xe9lectionner un produit"};const e=this.quantiteRetirer||0;return e<=0||e>this.selectedProduct.quantite?{valid:!1,error:"Quantit\xe9 invalide"}:{valid:!0,transfert:{produitId:this.selectedProduct.id,quantite:e,boutiqueSourceId:this.boutiqueIdSelected,boutiqueDestinationId:this.selectedDestinationBoutique.id}}}transfererProduits(){var e=this;return(0,g.A)(function*(){let o=[...e.pendingAdjustments];if(0===o.length){const n=e.validateSingleTransfer();if(!n.valid)return void(e.errorMessage=n.error);o=[n.transfert]}try{if(!e.usersService.getToken())throw new Error("Non authentifi\xe9");for(const r of o){yield e.transfertService.effectuerTransfert(r).toPromise();const l=e.tasks.find(a=>a.id===r.produitId);l&&(l.quantite-=r.quantite)}e.pendingAdjustments=[],e.selectedProduct=null,e.quantiteRetirer=null,e.controlBoutiqueTransfert.reset(),e.successMessage="Transfert(s) effectu\xe9(s) avec succ\xe8s",setTimeout(()=>e.successMessage="",3e3)}catch(n){console.error("Erreur:",n),e.errorMessage=n.error?.message||"Erreur lors du transfert",setTimeout(()=>e.errorMessage="",5e3)}})()}transfertToPendingAdjustments(){const e=this.validateSingleTransfer();e.valid?this.pendingAdjustments.some(r=>r.produitId===e.transfert.produitId&&r.boutiqueDestinationId===e.transfert.boutiqueDestinationId)?this.errorMessage="Ce transfert est d\xe9j\xe0 dans la liste":(this.pendingAdjustments.push({...e.transfert,produitNom:this.selectedProduct.nom,stockActuel:this.selectedProduct.quantite,stockApres:this.selectedProduct.quantite-e.transfert.quantite,boutiqueDestinationName:this.selectedDestinationBoutique.name}),this.selectedProduct=null,this.quantiteRetirer=null,this.selectedDestinationBoutique=null,this.controlBoutiqueTransfert.reset(),this.errorMessage=""):this.errorMessage=e.error}get fournisseurCtrl(){return this.ajusteForm.get("fournisseurId")}onFournisseurChange(){const e=this.fournisseurCtrl.value,o=this.fournisseurs.find(n=>n.id===e);this.codeFournisseur=o?o.nomComplet:"",console.log("\u2705 ID:",e,"Nom:",this.codeFournisseur)}navigateBack(){this.router.navigate(["/stocks"])}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(m.D),t.rXU(c.ok),t.rXU(_.Ix),t.rXU(v.g),t.rXU(k.Q),t.rXU(t.gRc),t.rXU(b.r))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-add-stock-ajustement"]],viewQuery:function(o,n){if(1&o&&t.GBs(O,5),2&o){let r;t.mGM(r=t.lsd())&&(n.productSelect=r.first)}},decls:53,vars:19,consts:[["autoBoutique","matAutocomplete"],["productSelect",""],["autoBoutiqueTransfert","matAutocomplete"],[1,"container_global"],[1,"content_formulaire"],[1,"modal-body"],[1,"container_formulaire"],["title","Retour sur la page stock",1,"retour_icon_text",2,"cursor","pointer","color","#0672E4","margin-bottom","15px",3,"click"],[1,"ri-arrow-left-s-line"],[2,"margin-left","8px","font-size","12px"],[1,"Title"],[1,"form_left_right"],[1,"formulaire"],[1,"information_cadre"],[1,"info_titre_input"],[1,"double_input"],[1,"champ_input","champ_input2"],[1,"title_input"],["required","","name","action",1,"input_focus",3,"ngModelChange","ngModel"],["value","ajouter"],["value","reduire"],["value","transfert"],["autocomplete","off","type","text","placeholder","Saisis le nom de boutique","matInput","",1,"input_focus",3,"blur","formControl","matAutocomplete"],["for","boutiqueId",1,"label",2,"opacity","0.8"],[3,"optionSelected","displayWith"],[3,"value",4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","descriptionGlobal","id","descriptionGlobal","name","descriptionGlobal","placeholder","Saisis Une description pour ce produit",1,"input_focus2"],["for","descriptionGlobal",1,"label","labelColor"],["class","error-message",4,"ngIf"],["class","champ_input champ_input2",4,"ngIf"],["class","information_cadre",4,"ngIf"],["class","modal-overlay",4,"ngIf"],[3,"value"],[1,"container_name_icon"],[1,"option-content"],["class","option_icon_div",4,"ngIf"],[1,"option_icon_div"],[1,"option-icon"],[1,"error-message"],[4,"ngIf"],[1,"champ_input_list_stocke"],[1,"title_input2"],["formControlName","fournisseurId","required","",1,"input_table2",3,"change"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"champ_input_list_stocke",2,"margin-right","15px"],[1,"title_input2",2,"text-align","center"],["type","text","formControlName","codeFournisseur","id","codeFournisseur","name","codeFournisseur","placeholder","0",1,"input_table2",2,"text-align","center","margin-bottom","3px!important"],[1,"add_new_quantite_stock"],[1,"containerTable",2,"position","relative"],[1,"titleTableProduit"],[1,"title_table_name"],[1,"title_table_contenu",2,"color","#0672E4"],[1,"title_table_contenu"],[1,"tr_stock",2,"border-top","1px solid #f0f2f5"],[1,"champ_input"],["required","","name","selectedProduct",1,"input_focus_type","input_focus_type_select",3,"ngModelChange","ngModel","disabled","compareWith"],[1,"champ_input",2,"margin-right","15px"],["type","number","id","addQuantite","placeholder","0","name","addQuantite","min","0",1,"input_focus_type",2,"text-align","center",3,"ngModelChange","ngModel","max"],["type","text","disabled","","id","stockActuel","name","stockActuel",1,"input_focus_type",2,"cursor","no-drop","text-align","center",3,"value"],["type","text","disabled","","id","CoutUnitaire","name","CoutUnitaire",1,"input_focus_type",2,"cursor","no-drop","text-align","center",3,"value"],["type","text","disabled","","id","stockApres","name","stockApres",1,"input_focus_type",2,"text-align","center","cursor","no-drop",3,"value"],[1,"btn_ajouter",3,"click"],[1,"ri-add-fill"],["class","tr_stock","style","border-top: 1px solid #f0f2f5;",4,"ngFor","ngForOf"],[1,"champ_input_list_stock",2,"margin-right","10px"],["type","text","readonly","",1,"input_table",3,"value"],[1,"champ_input_list_stock",2,"margin-right","15px"],["type","text","readonly","",1,"input_table",2,"text-align","center",3,"value"],[1,"champ_input_list_stock"],["type","text","readonly","",1,"input_table",2,"text-align","center","cursor","no-drop",3,"value"],[1,"btn_delete",3,"click"],[1,"ri-delete-bin-5-fill"],["disabled",""],[1,"modal-overlay"],[1,"modal-content"],[1,"modal-content-text"],[1,"modal-content-text-button",3,"click"],[1,"title_table_contenu",2,"color","#ff0000"],["type","number","placeholder","0","name","quantiteRetirer","min","0",1,"input_focus_type",2,"text-align","center",3,"ngModelChange","ngModel","max"],["type","text","disabled","","id","stockApres","name","stockApres",1,"input_focus_type",2,"text-align","center",3,"value"],[1,"title_table_name_transfert"],[1,"title_table_contenu",2,"color","#0672E4","margin-right","15px"],["autocomplete","off","type","text","placeholder","Saisis le nom de boutique","matInput","",1,"input_focus",3,"formControl","matAutocomplete"],["for","boutiqueId",1,"label"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["style","color: #666; margin-left: 8px;",4,"ngIf"],["style","color: #ff0000; margin-left: 8px;",4,"ngIf"],[2,"color","#666","margin-left","8px"],[2,"color","#ff0000","margin-left","8px"],[1,"info_titre_input","info_titre_input_btn"],[1,"btn_annuler"],[1,"btn_cancel",3,"click"],[1,"btn_ajouter"],[1,"btn_save",3,"click"]],template:function(o,n){if(1&o){const r=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"form",6)(4,"p",7),t.bIt("click",function(){return t.eBV(r),t.Njj(n.navigateBack())}),t.nrm(5,"i",8),t.j41(6,"span",9),t.EFF(7,"Stocks"),t.k0s()(),t.j41(8,"div",10)(9,"h3"),t.EFF(10,"Ajustements des stocks"),t.k0s()(),t.j41(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",15)(16,"div",16)(17,"div",17),t.EFF(18,"Type"),t.k0s(),t.j41(19,"select",18),t.mxI("ngModelChange",function(a){return t.eBV(r),t.DH7(n.selectedAction,a)||(n.selectedAction=a),t.Njj(a)}),t.j41(20,"option",19),t.EFF(21,"Ajouter"),t.k0s(),t.j41(22,"option",20),t.EFF(23,"Reduire"),t.k0s(),t.j41(24,"option",21),t.EFF(25,"Transfert"),t.k0s()()(),t.j41(26,"div",16)(27,"div",17),t.EFF(28,"Boutique"),t.k0s(),t.j41(29,"input",22),t.bIt("blur",function(){return t.eBV(r),t.Njj(n.checkBoutiqueSelection())}),t.k0s(),t.j41(30,"label",23),t.EFF(31,"Boutique"),t.k0s(),t.j41(32,"mat-autocomplete",24,0),t.bIt("optionSelected",function(a){return t.eBV(r),t.Njj(n.onBoutiqueSelected(a))}),t.DNE(34,I,5,3,"mat-option",25),t.nI1(35,"async"),t.k0s()()(),t.j41(36,"form",26)(37,"div",15)(38,"div",16),t.nrm(39,"textarea",27),t.j41(40,"label",28),t.EFF(41,"Description (Facultatif)"),t.k0s(),t.DNE(42,y,3,2,"div",29),t.k0s(),t.DNE(43,B,8,2,"div",30)(44,V,5,0,"div",30),t.k0s()()()(),t.DNE(45,X,49,21,"div",31)(46,H,50,21,"div",31)(47,ut,54,22,"div",31)(48,dt,8,0,"div",31)(49,at,8,0,"div",31)(50,lt,8,0,"div",31)(51,pt,6,1,"div",32)(52,_t,4,1,"div",32),t.k0s()()()()()()}if(2&o){const r=t.sdS(33);t.R7$(19),t.R50("ngModel",n.selectedAction),t.R7$(10),t.Y8G("formControl",n.controlBoutique)("matAutocomplete",r),t.R7$(3),t.Y8G("displayWith",n.displayFnBoutique),t.R7$(2),t.Y8G("ngForOf",t.bMT(35,17,n.filteredStreetsBoutique)),t.R7$(2),t.Y8G("formGroup",n.ajusteForm),t.R7$(6),t.Y8G("ngIf",n.f.descriptionGlobal.touched&&n.f.descriptionGlobal.invalid),t.R7$(),t.Y8G("ngIf","ajouter"===n.selectedAction),t.R7$(),t.Y8G("ngIf","ajouter"===n.selectedAction),t.R7$(),t.Y8G("ngIf","ajouter"===n.selectedAction),t.R7$(),t.Y8G("ngIf","reduire"===n.selectedAction),t.R7$(),t.Y8G("ngIf","transfert"===n.selectedAction),t.R7$(),t.Y8G("ngIf","ajouter"===n.selectedAction),t.R7$(),t.Y8G("ngIf","reduire"===n.selectedAction),t.R7$(),t.Y8G("ngIf","transfert"===n.selectedAction),t.R7$(),t.Y8G("ngIf",n.successMessage),t.R7$(),t.Y8G("ngIf",n.errorMessageError)}},dependencies:[x.MD,x.Sq,x.bT,x.Jj,c.YN,c.qT,c.xH,c.y7,c.me,c.Q0,c.wz,c.BC,c.cb,c.YS,c.VZ,c.zX,c.vS,c.cV,c.X1,c.l_,c.j4,c.JD,C.v,d.jL,d.$3,A.M,d.pN,p.m_,p.An],styles:['@charset "UTF-8";.container_global[_ngcontent-%COMP%]{margin-right:15%}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.title[_ngcontent-%COMP%]{font-size:18px}th[_ngcontent-%COMP%]{padding:10px 0}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.containerTable[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px}.titleTableProduit[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.champ_input[_ngcontent-%COMP%]{position:relative;margin-bottom:30px}.champ_input_list_stock[_ngcontent-%COMP%]{position:relative;margin-bottom:10px;display:block}.champ_input[_ngcontent-%COMP%]   .title_input[_ngcontent-%COMP%]{position:absolute;top:-18px}.champ_input_Categorie[_ngcontent-%COMP%]{margin-bottom:15px!important}.formulaire[_ngcontent-%COMP%]{position:relative}.Title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.input_focus[_ngcontent-%COMP%]{width:100%;min-width:250px;height:49px;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:14px;background:none;color:#695c5c}.champ_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:4px;pointer-events:none;color:#6b6666}.input_focus[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.input_focus[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:5px;left:0;transition:all .3s ease-in-out;background:none;font-size:11px;padding:0}.input_focus[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:12px;transition:all .2s ease-in-out}.input_focus2[_ngcontent-%COMP%]{width:100%;min-width:250px;height:57px;outline:none;border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:14px;padding-left:10px;background:none;color:#777474;border-radius:5px;padding-top:10px;border-bottom:1px solid rgb(53,50,50);resize:none}.input_focus2[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.champ_input2[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:0;pointer-events:none;color:#423838}.champ_input[_ngcontent-%COMP%]   .labelCategory[_ngcontent-%COMP%]{color:#423838;left:0;font-size:14px}.input_focus2[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus2[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:0;left:0;transition:all .3s ease-in-out;background:none;font-size:11px;padding:0;background-color:#fff}.input_focus2[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus2[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:15px;transition:all .2s ease-in-out}.info_titre_input[_ngcontent-%COMP%]{padding:20px}.info_titre_input[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px;letter-spacing:.6px}.information_cadre[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#fff;box-shadow:2px 2px 30px #0000001c;border-radius:5px;margin-top:20px;margin-bottom:20px}.information_cadre_save[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.input_focus_magasin[_ngcontent-%COMP%]{width:100%}.input_focus_petit[_ngcontent-%COMP%]{width:50%}.double_input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-top:20px}.champ_input2[_ngcontent-%COMP%]{display:inline-block;width:50%;box-sizing:border-box;vertical-align:top}.champ_input_inventaire[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.champ_input_inventaire[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:24px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#0672e4}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.container_file[_ngcontent-%COMP%]{width:150px;border-radius:10px;box-shadow:4px 4px 30px #0003;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:10px;gap:5px;background-color:#006eff0a;margin-bottom:10px;margin-top:20px}.header_file[_ngcontent-%COMP%]{height:140px;width:140px;border:1px dashed rgba(6,113,228,.6156862745);border-radius:10px;flex-direction:column;overflow:hidden;display:flex;align-items:center;justify-content:center;box-shadow:#959da533 0 8px 24px}.header_file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover;transition:transform .2s}.header_file[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:100px}.header_file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:#000}.footer_file[_ngcontent-%COMP%]{background-color:#006eff13;width:140px;height:35px;padding:5px 8px;border-radius:5px;cursor:pointer;display:flex;align-items:center;color:#000;border:none;margin-top:3px}.footer_file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important;font-size:10px}.footer_file[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;margin-right:7px}#file[_ngcontent-%COMP%]{display:none}.header_file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.info_titre_input_btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:end;gap:20px}.btn_annuler[_ngcontent-%COMP%]   .btn_cancel[_ngcontent-%COMP%]{padding:8px 30px;border:none;border-radius:5px;background-color:red;color:#fff;text-transform:uppercase;letter-spacing:.6px}.btn_annuler[_ngcontent-%COMP%]   .btn_cancel[_ngcontent-%COMP%]:hover{background-color:#d80101;transition:all ease-in .5s}.btn_ajouter[_ngcontent-%COMP%]   .btn_save[_ngcontent-%COMP%]{padding:8px 30px;border:none;border-radius:5px;background-color:#0672e4;color:#fff;text-transform:uppercase;letter-spacing:.6px}.btn_ajouter[_ngcontent-%COMP%]   .btn_save[_ngcontent-%COMP%]:hover{background-color:#0863c5;transition:all .5s}.example-form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.btn_add_category2[_ngcontent-%COMP%]{border:none;padding:2px 10px;border-radius:4px;background-color:#0672e4;color:#fff;cursor:pointer}.btn_add_category2[_ngcontent-%COMP%]:hover{background-color:#0863c5;transition:all ease .5s}.btn_add_categoryDiv2[_ngcontent-%COMP%]{margin:10px 0;justify-content:center;position:absolute;right:10px;top:10px}.double_input2[_ngcontent-%COMP%]{position:relative}.ajouter_cadre_cree_c_u[_ngcontent-%COMP%]{width:250px;height:230px;background-color:#fff;margin-top:40px;border-radius:5px;box-shadow:2px 2px 30px #0000001c}.container_error_message[_ngcontent-%COMP%]{margin-left:20px}.input_focus_cree_cate[_ngcontent-%COMP%]{min-width:auto}.btn-c-s[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.btn_s_category[_ngcontent-%COMP%]{width:100%;height:35px;background-color:#0671e4c8;color:#fff;border:none;border-radius:5px;letter-spacing:.6px;padding:0 25px}.btn_c_category[_ngcontent-%COMP%]{width:100%;height:35px;background-color:#ff0000ce;color:#fff;border:none;border-radius:5px;letter-spacing:.6px;padding:0 25px}.btn_s_category[_ngcontent-%COMP%]:hover{background-color:#0672e4;transition:all ease .5s}.btn_c_category[_ngcontent-%COMP%]:hover{background-color:red;transition:all ease .5s}.error-message-category[_ngcontent-%COMP%]{font-size:10px;color:red;font-weight:700;margin-top:10px;margin-bottom:10px}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:10px}.errorAPI[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px;margin-top:-9px}.errorAPI[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:12px;height:12px}.errorAPI[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:10px;padding-left:5px}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:10px;text-align:center;width:90%;max-width:400px;box-shadow:0 5px 15px #0000004d;animation:fadeInDown .3s ease;position:relative}.popup-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:20px}.popup-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;margin-bottom:10px}.popup-icon[_ngcontent-%COMP%]{width:100%;height:100%;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5em;color:#333}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#555;margin:20px 0}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#0672e4;color:#fff;border:none;padding:10px 20px;font-size:1em;border-radius:5px;cursor:pointer;transition:background .3s ease}.modal-content.error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#e53935}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0863c5}.modal-content.error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;color:#fff;font-size:18px;z-index:1000}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid white;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.info_titre_input_type[_ngcontent-%COMP%]{padding:20px 20px 10px;display:flex;align-items:center;justify-content:space-between;margin-left:10px}.info_type[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-top:20px}.input_focus_type_select[_ngcontent-%COMP%]{min-width:200px}.input_focus_type[_ngcontent-%COMP%]{width:100%;height:49px;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:14px;background:none;color:#695c5c}.btn_cadre_action[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;background-color:#0672e4;padding:5px;border-radius:50%;font-size:20px}.input_table[_ngcontent-%COMP%]{width:100%;height:49px;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:14px;background:none;color:#695c5c}.input_table2[_ngcontent-%COMP%]{width:100%;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:-1px 0 0;font-size:14px;background:none;color:#695c5c;top:10px;padding:10px}.title_table_name[_ngcontent-%COMP%]{width:50%}.add_new_quantite_stock[_ngcontent-%COMP%]{margin-bottom:20px}.add_new_quantite_stock[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px;letter-spacing:.6px;color:#0000008e}.add_new_quantite_stock[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 20px;border:1px solid #0672E4;border-radius:5px;background-color:transparent;color:#000}.btn_ajuster[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0262c8;transition:all ease-in .5}.btn_ajuster[_ngcontent-%COMP%]{display:flex;justify-content:right;margin-top:20px}.btn_ajuster[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 20px;border:none;border-radius:5px;background-color:#0672e4;color:#fff}.btn_ajuster_reduire[_ngcontent-%COMP%]{display:flex;justify-content:right}.btn_ajuster_reduire[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 20px;border:none;border-radius:5px;background-color:red;color:#fff}.btn_ajuster_reduire[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#db0303;transition:all ease-in .5}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;font-weight:700;margin-top:10px}.btn_ajouter[_ngcontent-%COMP%]{margin-left:30px}.btn_ajouter[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;background-color:transparent;color:#0672e4;padding:2px;border-radius:50%;cursor:pointer;border:3px solid #0672E4}.btn_ajouter[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{background-color:#0863c50e;transition:all ease .5s}.btn_delete[_ngcontent-%COMP%]{margin-left:30px;margin-top:10px}.btn_delete[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;color:red;cursor:pointer}.btn_delete[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#ca0000;transition:all ease .5s}.tr_stock[_ngcontent-%COMP%]{display:table-row!important}.error-popup[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;padding:15px 25px;background:#ffebee;border:1px solid #ffcdd2;border-radius:4px;color:#d32f2f;box-shadow:0 2px 4px #0000001a;z-index:1000;display:flex;align-items:center;gap:15px;animation:_ngcontent-%COMP%_shake .4s ease-in-out}.error-popup[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;color:#d32f2f;cursor:pointer;padding:5px}.input_focus_type_select.duplicate[_ngcontent-%COMP%]{border-color:#f44!important;animation:_ngcontent-%COMP%_shake .5s}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(5px)}75%{transform:translate(-5px)}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{padding:15px 25px;background:#fff;border-radius:4px;color:#d32f2f;box-shadow:0 2px 4px #0000001a;z-index:1000;display:flex;align-items:center;gap:15px;animation:_ngcontent-%COMP%_shake .4s ease-in-out}.modal-content[_ngcontent-%COMP%]   .modal-content-text[_ngcontent-%COMP%]{font-size:15px;color:#555;margin:15px 0}.modal-content[_ngcontent-%COMP%]   .modal-content-text-button[_ngcontent-%COMP%]{background-color:#0672e4;color:#fff;border:none;font-size:1em;border-radius:5px;cursor:pointer;transition:background .3s ease;padding:10px;margin:0}select[_ngcontent-%COMP%]:invalid{color:#6c757d}select.input_focus_type_select.duplicate[_ngcontent-%COMP%]{border-color:#f44;transform:scale(1.02)}select.input_focus_type_select[_ngcontent-%COMP%]{transition:all .3s ease;appearance:none}.info-message[_ngcontent-%COMP%]{margin-top:8px;color:#666;font-size:.9em;display:flex;align-items:center;gap:5px}.info-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2em}.input_focus_type_select[_ngcontent-%COMP%]:disabled{cursor:not-allowed}option[disabled][_ngcontent-%COMP%]{color:#999;font-style:italic}.option-with-icon[_ngcontent-%COMP%]   .option-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.option-with-icon[_ngcontent-%COMP%]   .option-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px}.option_icon_div[_ngcontent-%COMP%]{position:absolute;right:0;top:16px}.container_name_icon[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.option_icon_div[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:auto}.option-icon[_ngcontent-%COMP%]{color:#666;font-size:18px}']})}}return i})()}}]);