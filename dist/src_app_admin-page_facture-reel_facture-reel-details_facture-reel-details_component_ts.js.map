{"version":3,"file":"src_app_admin-page_facture-reel_facture-reel-details_facture-reel-details_component_ts.js","mappings":"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","sources":["./src/app/admin-page/MODELS/number-to-words.pipe.ts","./src/app/admin-page/SERVICES/entreprise-service.ts","./src/app/admin-page/facture-reel/facture-reel-details/facture-reel-details.component.ts","./src/app/admin-page/facture-reel/facture-reel-details/facture-reel-details.component.html"],"sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'enLettres' })\nexport class EnLettresPipe implements PipeTransform {\n  private unite = ['zéro', 'un', 'deux', 'trois', 'quatre', 'cinq', 'six', 'sept', 'huit', 'neuf'];\n  private dizaine = ['', '', 'vingt', 'trente', 'quarante', 'cinquante', 'soixante'];\n  private dizaineSpecial = ['dix', 'onze', 'douze', 'treize', 'quatorze', 'quinze', 'seize'];\n\n  transform(value: number): string {\n    if (isNaN(value)) {\n      return '';\n    }\n\n    const n = Math.floor(value);\n    const words = this.numberToWords(n) + ' Francs CFA';\n    // Mettre en majuscule la première lettre\n    return words.charAt(0).toUpperCase() + words.slice(1);\n  }\n\n  private numberToWords(n: number): string {\n    if (n < 10) {\n      return this.unite[n];\n    }\n    if (n < 17) {\n      return this.dizaineSpecial[n - 10];\n    }\n    if (n < 20) {\n      return 'dix-' + this.unite[n - 10];\n    }\n    if (n < 70) {\n      const d = Math.floor(n / 10);\n      const reste = n % 10;\n      return this.dizaine[d] + (reste ? '-' + this.unite[reste] : '');\n    }\n    if (n < 80) {\n      return 'soixante-' + this.numberToWords(n - 60);\n    }\n    if (n < 100) {\n      return 'quatre-vingt' + (n % 20 ? '-' + this.numberToWords(n % 20) : '');\n    }\n    if (n < 1000) {\n      const c = Math.floor(n / 100);\n      const reste = n % 100;\n      return (c > 1 ? this.unite[c] + '-cent' : 'cent') + (reste ? '-' + this.numberToWords(reste) : '');\n    }\n    if (n < 1000000) {\n      const m = Math.floor(n / 1000);\n      const reste = n % 1000;\n      return (m > 1 ? this.numberToWords(m) + ' mille' : 'mille') + (reste ? ' ' + this.numberToWords(reste) : '');\n    }\n    if (n < 1000000000) {\n        const millions = Math.floor(n / 1000000);\n        const reste = n % 1000000;\n        return (millions > 1 ? this.numberToWords(millions) + ' millions' : 'un million') +\n          (reste ? ' ' + this.numberToWords(reste) : '');\n    }\n    return 'nombre trop grand';\n  }\n}\n","import { HttpClient, HttpHeaders } from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\nimport { BehaviorSubject, catchError, Observable, switchMap, tap, throwError } from \"rxjs\";\nimport { Entreprise } from \"../MODELS/entreprise-model\";\nimport { EntrepriseClient } from \"../MODELS/entreprise-clients-model\";\nimport { environment } from \"src/environments/environment\";\nimport { UsersService } from \"./users.service\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntrepriseService {\n    private apiUrl = environment.apiBaseUrl;\n  \n\n  private entrepriseSubject = new BehaviorSubject<Entreprise[]>([]);\n  public entreprise$ = this.entrepriseSubject.asObservable(); \n  constructor(private http: HttpClient, private usersService: UsersService) { }\n\n  // Dans client.service.ts\n// Dans entreprise.service.ts\n getListEntreprises(): Observable<EntrepriseClient[]> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      });\n      return this.http.get<EntrepriseClient[]>(`${this.apiUrl}/entreprises`, { headers });\n    }),\n    catchError(error => {\n      let errorMsg = 'Erreur inconnue';\n      if (error.error instanceof ErrorEvent) {\n        errorMsg = `Erreur: ${error.error.message}`;\n      } else if (error.status === 404) {\n        errorMsg = 'Aucune entreprise trouvée';\n      }\n      return throwError(() => new Error(errorMsg));\n    })\n  );\n}\n\n\n  // Ajouter une entreprise\n addEntreprise(entreprise: Entreprise): Observable<Entreprise> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      });\n\n      return this.http.post<Entreprise>(`${this.apiUrl}/entreprise-clients`, entreprise, { headers });\n    }),\n    tap((newEntreprise) => {\n      const currentEntreprise = this.entrepriseSubject.value;\n      this.entrepriseSubject.next([...currentEntreprise, newEntreprise]);\n    }),\n    catchError(error => {\n      let errorMsg = 'Erreur inconnue';\n      if (error.error instanceof ErrorEvent) {\n        errorMsg = `Erreur: ${error.error.message}`;\n      } else if (error.status === 400) {\n        errorMsg = error.error || 'Données invalides';\n      }\n      return throwError(() => new Error(errorMsg));\n    })\n  );\n}\n\n\n  // List de tout les entreprises\n getListEntreprise(): Observable<Entreprise[]> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Token vide ou non défini ! Vérifiez que l\\'utilisateur est bien connecté.');\n        return throwError(() => new Error('Token manquant'));\n      }\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n      console.log(\"En-têtes envoyés : \", headers);\n\n      return this.http.get<Entreprise[]>(`${this.apiUrl}/entreprises`, { headers });\n    }),\n    tap(data => {\n      this.entrepriseSubject.next(data);\n    }),\n    catchError(error => {\n      console.error('Erreur lors de la récupération des entreprises:', error);\n      return throwError(() => error);\n    })\n  );\n}\n\n\n\n  // Recuperer information d'une entreprise de la user connecter\n getEntrepriseById(id: number): Observable<Entreprise> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Token manquant');\n        return throwError(() => new Error('Token manquant'));\n      }\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      });\n      return this.http.get<Entreprise>(`${this.apiUrl}/entreprises/${id}`, { headers });\n    }),\n    catchError(error => {\n      let errorMsg = 'Erreur inconnue';\n      if (error.error instanceof ErrorEvent) {\n        errorMsg = `Erreur: ${error.error.message}`;\n      } else if (error.status === 404) {\n        errorMsg = 'Entreprise non trouvée';\n      }\n      return throwError(() => new Error(errorMsg));\n    })\n  );\n}\n\n\n  updateEntreprise(id: number, formData: FormData): Observable<string> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        return throwError(() => new Error('Token manquant'));\n      }\n\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`\n      });\n\n      return this.http.patch(`${this.apiUrl}/updateEntreprise/${id}`, formData, {\n        headers,\n        responseType: 'text' // réponse en texte brut\n      });\n    }),\n    catchError(error => {\n      let errorMsg = 'Erreur inconnue';\n      if (error.error instanceof ErrorEvent) {\n        errorMsg = `Erreur: ${error.error.message}`;\n      } else if (error.status === 400) {\n        errorMsg = error.error || 'Données invalides';\n      }\n      return throwError(() => new Error(errorMsg));\n    })\n  );\n}\n\n\n  // updateEntreprise(id: number, formData: FormData): Observable<any> {\n  //   const token = localStorage.getItem('accessToken') || '';\n  //   const headers = new HttpHeaders({\n  //     'Authorization': `Bearer ${token}`\n  //   });\n\n  //   return this.http.patch(`${this.apiUrl}/updateEntreprise/${id}`, formData, { headers }).pipe(\n  //     catchError(error => {\n  //       let errorMsg = 'Erreur inconnue';\n  //       if (error.error instanceof ErrorEvent) {\n  //         errorMsg = `Erreur: ${error.error.message}`;\n  //       } else if (error.status === 400) {\n  //         errorMsg = error.error || 'Données invalides';\n  //       }\n  //       return throwError(() => new Error(errorMsg));\n  //     })\n  //   );\n  // }\n\n  // Get entreprise d'un user\n  getEntrepriseInfo(): Observable<Entreprise> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        return throwError(() => new Error('Aucun token trouvé'));\n      }\n\n      const headers = new HttpHeaders({\n        Authorization: `Bearer ${token}`\n      });\n\n      return this.http.get<Entreprise>(`${this.apiUrl}/myEntreprise`, { headers }).pipe(\n        tap(entreprise => {\n          localStorage.setItem('entreprise', JSON.stringify(entreprise));\n        })\n      );\n    }),\n    catchError(error => {\n      console.error('Erreur récupération info entreprise:', error);\n      return throwError(() => error);\n    })\n  );\n}\n\n\n  // Simpl dcodage JWT pour vérifier si le token est expiré\n  decodeJwt(token: string): any {\n    return JSON.parse(atob(token.split('.')[1]));\n  }\n  \n  // Vérifier si le token est expiré\n  isTokenExpired(decodedToken: any): boolean {\n    const expirationDate = new Date(decodedToken.exp * 1000);\n    return expirationDate < new Date();\n  }\n    \n  // Rafraîchir le token avec un refresh token (si applicable)\n  getNewTokenFromApi(): Observable<{ token: string }> {\n    const refreshToken = localStorage.getItem('refreshToken');\n    return this.http.post<{ token: string }>(`${this.apiUrl}/refresh-token`, { refreshToken });\n  }\n\n \n}","import { Component, Input, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { EntrepriseService } from '../../SERVICES/entreprise-service';\nimport { FactureReelService } from '../../SERVICES/facturereel-service';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, FormGroup, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { CustomNumberPipe } from '../../MODELS/customNumberPipe';\nimport { EnLettresPipe } from '../../MODELS/number-to-words.pipe';\nimport { FactureReelle, LigneFactureDTO, PaiementDTO } from '../../MODELS/FactureReelle.model';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Subscription, timer } from 'rxjs';\nimport { environment } from 'src/environments/environment';\nimport { MatDialog } from '@angular/material/dialog';\nimport { MatButtonModule } from '@angular/material/button';\nimport { title } from 'process';\nimport { jsPDF } from 'jspdf';\nimport 'jspdf-autotable';\n\n@Component({\n  selector: 'app-facture-reel-details',\n  standalone: true,\n  imports: [CommonModule, FormsModule, CustomNumberPipe, EnLettresPipe, ReactiveFormsModule, MatButtonModule],\n  templateUrl: './facture-reel-details.component.html',\n  styleUrl: './facture-reel-details.component.scss'\n})\nexport class FactureReelDetailsComponent implements OnInit {\n  // facture: any | null = null;\n  \n  nom: string | null = null;\n  siege!: string;\n  email!: string;\n  logo: string | null = null;\n  signaturNum: string | null = null;\n  cachetNum: string | null = null;\n\n  secteur!: string;\n  telephone!: string;\n  adresse!: string;\n  nif!: string;\n  banque!: string;\n  nina!: string;\n  pays!: string;\n  rccm!: string;\n  siteWeb!: string;\n  signataire!: string;\n  signataireNom!: string;\n  tauxTva?: number | null;\n  totauxParMode: { [key: string]: number } = {};\n\n  @Input() nomComplet: string = '';\n  @Input() role: 'Validateur' | 'Createur' = 'Createur';\n\n  facture: FactureReelle | null = null;\n  totalTVA: number = 0;\n  montantCommercial: number = 0;\n\n  paiementForm: FormGroup;\n  montantRestant: number = 0;\n  historiquePaiements: PaiementDTO[] = [];\n  isLoading: boolean = false;\n  isLoadingFacture: boolean = false;\n  errorMessage: string | null = null;\n  successMessage: string | null = null;\n  errorMessageFactureAnuller: string | null = null;\n  successMessageFactureAnuller: string | null = null;\n  montant: number = 0;\n  private messageSubscription: Subscription | null = null;\n  private apiUrl = environment.imgUrl;\n  fallbackLogo = `${this.apiUrl}/defaultLogo/Votre.png`;\n\n  modesPaiementVisibles: { mode: string, montant: number }[] = [];\n  showAnnulationConfirmation: boolean = false;\n\n  \n  constructor(\n    private router: Router,\n    private route: ActivatedRoute,\n    private factureService: FactureReelService,\n    private entrepriseService: EntrepriseService,\n    private fb: FormBuilder,\n    private dialog: MatDialog,\n  ){\n    this.paiementForm = this.fb.group({\n      montant: ['', [Validators.required, Validators.min(0.01)]],\n      modePaiement: ['', Validators.required]\n    });\n  }\n\n  onInputChange(event: Event): void {\n    const input = event.target as HTMLInputElement;\n    if (!input) return;\n\n    const cleaned = input.value.replace(/\\s/g, '');\n    const parsed = parseInt(cleaned, 10);\n\n    if (!isNaN(parsed)) {\n      // Met à jour le champ FormControl\n      this.paiementForm.get('montant')?.setValue(parsed, { emitEvent: false });\n\n      // Met à jour visuellement le champ avec format\n      input.value = this.customNumberTransform(parsed);\n    } else {\n      this.paiementForm.get('montant')?.setValue(null, { emitEvent: false });\n    }\n  }\n\n  // Fonction utilitaire de formatage (tu peux réutiliser ta pipe ici si tu veux)\n  customNumberTransform(value: number): string {\n    return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\n  }\n\n  ngOnInit(): void {\n    // 1) Charger les infos de l’entreprise (en-tête)\n    this.getUserEntrepriseInfo();\n\n    // 2) Récupérer l’ID de la facture depuis l’URL et lancer la requête API\n    const idParam = this.route.snapshot.paramMap.get('id');\n    if (idParam) {\n      const factureId = +idParam;\n      this.loadFactureReelle(factureId);\n    } else {\n      // Si pas d’ID dans l’URL, rediriger ou afficher message d’erreur\n      console.error('Aucun ID de facture passé en paramètre');\n      this.router.navigate(['/facture-reel']);\n    }\n\n    this.paiementForm = this.fb.group({\n      montant: ['', [Validators.required, Validators.min(0.01)]],\n      modePaiement: ['', Validators.required]\n    });\n    \n  }\n\n loadFactureReelle(id: number): void {\n  this.factureService.getFactureReelleById(id).subscribe({\n    next: (data: FactureReelle) => {\n      console.log('Les données de la facture :', data);\n\n      // Calcul du total HT et autres informations\n      data.totalHT = data.lignesFacture\n        .reduce((sum: number, ligne: LigneFactureDTO) => sum + ligne.montantTotal, 0);\n\n      data.tauxRemise = data.remise > 0\n        ? (data.remise / data.totalHT!) * 100\n        : 0;\n\n      if (data.tva) {\n        this.totalTVA = (data.totalHT! - data.remise) * (this.tauxTva ?? 0);\n        this.montantCommercial = data.totalHT! - data.remise;\n      }\n\n      // Ici, tu as directement accès à produit.nom\n      data.lignesFacture.forEach((ligne: LigneFactureDTO) => {\n        ligne.produit.nom = ligne.produit.nom;  // Assignation directe du nom du produit\n      });\n\n      this.facture = data;\n      this.loadMontantRestant();\n      this.loadHistoriquePaiements();\n    \n      // Ajouter le calcul du statut\n      this.updatePaymentStatus();\n    },\n    error: (err) => {\n      console.error('Erreur', err);\n      this.router.navigate(['/facture-reel']);\n    }\n  });\n}\n\n\n  // Nouvelle méthode pour mettre à jour le statut\n  private updatePaymentStatus() {\n    if (!this.facture) return;\n    \n    if (this.montantRestant <= 0) {\n      this.facture.statutPaiement = 'PAYEE';\n    } else if (this.montantRestant < this.facture.totalFacture) {\n      this.facture.statutPaiement = 'PARTIELLEMENT_PAYEE';\n    } else {\n      this.facture.statutPaiement = 'EN_ATTENTE';\n    }\n  }\n\nvoirProforma() {\n  if (this.facture?.factureProFormaId) {\n    this.router.navigate(['/facture-proforma-details', this.facture.factureProFormaId]);\n  } else {\n    console.error('Aucune facture proforma associée trouvée');\n    // Option: Afficher un message à l'utilisateur\n    this.errorMessage = \"Aucune facture proforma associée\";\n  }\n}\n\n  loadMontantRestant() {\n    if (!this.facture) return;\n    \n    this.factureService.getMontantRestant(this.facture.id).subscribe({\n      next: (montant) => {\n        this.montantRestant = montant;\n        this.updatePaymentStatus(); // Mettre à jour le statut après avoir reçu le montant restant\n      },\n      error: (err) => console.error(err)\n    });\n  }\n\n  getStatutText(statut: string | undefined): string {\n    if (!statut) return 'Inconnu';\n    \n    switch(statut) {\n      case 'PAYEE': return 'Payée';\n      case 'PARTIELLEMENT_PAYEE': return 'Partiellement payée';\n      case 'EN_ATTENTE': return 'Non payé ';\n      default: return statut;\n    }\n  }\n\n  getModeText(mode: string): string {\n    switch(mode) {\n      case 'CASH': return 'Espèce';\n      case 'CHEQUE': return 'Chèque';\n      case 'CARD': return 'Carte de crédit';\n      case 'VIREMENT': return 'Virement bancaire';\n      case 'MOBILE': return 'Mobile Money';\n      default: return mode;\n    }\n  }\n\n  getModeIconClass(mode: string): string {\n    switch (mode) {\n      case 'CASH': return 'ri-cash-line text-green';\n      case 'CHEQUE': return 'ri-bill-line text-blue';\n      case 'CARD': return 'ri-bank-card-line text-purple';\n      case 'VIREMENT': return 'ri-bank-fill text-navy';\n      case 'MOBILE': return 'ri-smartphone-line text-orange';\n      default: return 'ri-question-line text-gray';\n    }\n  }\n\n  // loadHistoriquePaiements() {\n  //   if (!this.facture) return;\n    \n  //   this.factureService.getHistoriquePaiements(this.facture.id).subscribe({\n  //     next: (paiements) => this.historiquePaiements = paiements.reverse(),\n  //     error: (err) => console.error(err)\n  //   });\n  // }\n\n  loadHistoriquePaiements() {\n    if (!this.facture) return;\n    \n    this.factureService.getHistoriquePaiements(this.facture.id).subscribe({\n      next: (paiements) => {\n        this.historiquePaiements = paiements.reverse();\n        this.calculerTotauxParMode(); // Nouvelle fonction\n      },\n      error: (err) => console.error(err)\n    });\n  }\n\n  calculerTotauxParMode(): void {\n    const totaux: { [key: string]: number } = {};\n    \n    // Calcul des totaux\n    this.historiquePaiements.forEach(paiement => {\n      totaux[paiement.modePaiement] = (totaux[paiement.modePaiement] || 0) + paiement.montant;\n    });\n    \n    // Création du tableau des modes visibles\n    this.modesPaiementVisibles = Object.entries(totaux)\n      .filter(([_, montant]) => montant > 0)\n      .map(([mode, montant]) => ({ mode, montant }));\n    \n    // Tri pour un affichage cohérent\n    this.modesPaiementVisibles.sort((a, b) => b.montant - a.montant);\n  }\n\n  getIconClass(mode: string): string {\n    switch (mode) {\n      case 'CASH': return 'ri-cash-line text-green';\n      case 'CHEQUE': return 'ri-bill-line text-blue';\n      case 'CARD': return 'ri-bank-card-line text-purple';\n      case 'VIREMENT': return 'ri-bank-fill text-navy';\n      case 'MOBILE': return 'ri-smartphone-line text-orange';\n      default: return 'ri-question-line text-gray';\n    }\n  }\n\n  enregistrerPaiement() {\n    if (this.paiementForm.invalid || !this.facture) return;\n\n    // Réinitialiser les messages avant chaque tentative\n    this.errorMessage = null;\n    this.successMessage = null;\n    this.clearMessageTimer(); // Annuler tout timer existant\n    \n    this.isLoading = true;\n    const montantPaiement = this.paiementForm.get('montant')?.value;\n    \n    // Validation supplémentaire du montant\n    if (montantPaiement > this.montantRestant) {\n      this.errorMessage = \"Le montant saisi est supérieur au montant restant à payer.\";\n      this.startMessageTimer(3000);\n      this.isLoading = false;\n      return;\n    }\n\n    this.factureService.enregistrerPaiement(\n      this.facture.id, \n      montantPaiement, \n      this.paiementForm.get('modePaiement')?.value\n    ).subscribe({\n      next: () => {\n        this.successMessage = \"Paiement enregistré avec succès.\";\n        this.paiementForm.reset();\n        \n        // Recharger les données de la facture pour mettre à jour le statut\n        this.loadFactureReelle(this.facture!.id);\n        \n        this.startMessageTimer(3000);\n      },\n      error: (err: HttpErrorResponse) => {\n        // Gestion spécifique du succès avec réponse texte\n        if (err.status === 200 && err.error?.text) {\n          this.successMessage = err.error.text;\n          this.paiementForm.reset();\n          \n          // Recharger les données de la facture pour mettre à jour le statut\n          this.loadFactureReelle(this.facture!.id);\n        } \n        // Gestion des erreurs standards\n        else if (err.error?.message) {\n          this.errorMessage = err.error.message;\n        } else {\n          this.errorMessage = \"Une erreur inconnue est survenue\";\n        }\n        \n        this.isLoading = false;\n        this.startMessageTimer(3000);\n      }\n    });\n  }\n\n // Méthode pour démarrer le timer de fermeture automatique\n  private startMessageTimer(duration: number) {\n    this.clearMessageTimer(); // Nettoyer tout timer existant\n    \n    this.messageSubscription = timer(duration).subscribe(() => {\n      this.successMessage = null;\n      this.errorMessage = null;\n      this.messageSubscription = null;\n    });\n  }\n\n  // Méthode pour annuler le timer\n  private clearMessageTimer() {\n    if (this.messageSubscription) {\n      this.messageSubscription.unsubscribe();\n      this.messageSubscription = null;\n    }\n  }\n\n  ngOnDestroy() {\n    this.clearMessageTimer();\n  }\n\n  getUserEntrepriseInfo(): void {\n    this.entrepriseService.getEntrepriseInfo().subscribe({\n      next: (entreprise) => {\n        this.nom = entreprise.nom;\n        this.siege = entreprise.siege;\n        this.email = entreprise.email;\n        this.logo = entreprise.logo ? `${this.apiUrl}${entreprise.logo}` : null;\n        this.secteur = entreprise.secteur;\n        this.telephone = entreprise.telephone;\n        this.adresse = entreprise.adresse;\n        this.nif = entreprise.nif;\n        this.banque = entreprise.banque;\n        this.nina = entreprise.nina;\n        this.pays = entreprise.pays;\n        this.rccm = entreprise.rccm;\n        this.siteWeb = entreprise.siteWeb;\n        this.signataire = entreprise.signataire;\n        this.signataireNom = entreprise.signataireNom;\n        this.tauxTva = entreprise.tauxTva;\n        this.signaturNum = entreprise.signaturNum ? `${this.apiUrl}${entreprise.signaturNum}` : null;\n        this.cachetNum = entreprise.cachetNum ? `${this.apiUrl}${entreprise.cachetNum}` : null;\n\n\n      },\n      error: (err) => {\n        console.error('Erreur lors de la récupération des infos entreprise :', err);\n      }\n    });\n  }\n\n  navigateBack() {\n    this.router.navigate(['/facture-reel']);\n  }\n\n  getLegalInfo(): string {\n    const parts: string[] = [];\n    if (this.nina) { parts.push(`NINA : ${this.nina}`); }\n    if (this.rccm) { parts.push(`RCCM : ${this.rccm}`); }\n    if (this.nif) { parts.push(`NIF : ${this.nif}`); }\n    if (this.banque) { parts.push(`Banque : ${this.banque}`); }\n    return parts.join(' ; ');\n  }\n\n  getAddressInfo(): string {\n    const adresse = this.adresse;\n    const siege = this.siege;\n    const pays = this.pays;\n\n    if (adresse && siege && pays) { return `Adresse : ${adresse} / ${siege}-${pays}`; }\n    if (adresse && siege) { return `Adresse : ${adresse} / ${siege}`; }\n    if (adresse && pays) { return `Adresse : ${adresse} / ${pays}`; }\n    if (siege && pays)  { return `Adresse : ${siege} / ${pays}`; }\n    if (adresse)        { return `Adresse : ${adresse}`; }\n    if (siege)          { return `Adresse : ${siege}`; }\n    if (pays)           { return `Adresse : ${pays}`; }\n    return '';\n  }\n\n  annulerFacture() {\n    // Afficher la popup de confirmation\n    this.showAnnulationConfirmation = true;\n  }\n\n  cancelAnnulation() {\n    // Cacher la popup\n    this.showAnnulationConfirmation = false;\n  }\n\n  confirmAnnulation() {\n    // Cacher la popup\n    this.showAnnulationConfirmation = false;\n    \n    this.isLoadingFacture = true;\n    \n    if (!this.facture) {\n      this.isLoadingFacture = false;\n      return;\n    }\n\n    this.factureService.annulerFactureReelle(this.facture.id).subscribe({\n      next: (factureAnnulee) => {\n        // Mettre à jour la facture locale avec le nouveau statut\n        this.facture = factureAnnulee;\n        this.successMessageFactureAnuller = 'Facture annulée avec succès';\n        // Rediriger après 2 secondes\n        setTimeout(() => {\n          this.router.navigate(['/facture-reel']);\n        }, 2000);\n      },\n      error: (err) => {\n        // this.errorMessage = err.error?.message || 'Erreur lors de l\\'annulation de facture le paiement est déjà commencer';\n        this.errorMessageFactureAnuller = err.error?.message || 'Vous pouvez pas annuler cette facture le paiement est déjà commencer';\n        this.isLoadingFacture = false;\n      }\n    });\n  }\n\nasync download() {\n  const doc = new jsPDF({ unit: 'mm', format: 'a4' });\n\n  // Logo\n  try {\n    if (this.logo) {\n      const imgData = this.logo.startsWith('data:image/') \n        ? this.logo \n        : await this.getImageFromUrl(this.logo);\n      const formatMatch = imgData.match(/^data:image\\/(png|jpeg|jpg|gif);/);\n      const format = formatMatch ? formatMatch[1].toUpperCase() : 'PNG';\n      doc.addImage(imgData, format, 15, 10, 47, 17);\n    }\n  } catch (imgErr) {\n    console.error('Erreur de chargement du logo', imgErr);\n  }\n\n  // Infos entreprise\n  const infoX = 70;\n  doc.setFontSize(10);\n  doc.setFont('helvetica', 'bold');\n  doc.text(this.nom || 'Nom Entreprise', infoX, 12);\n  doc.setFont('helvetica', 'normal');\n  doc.text(`Secteur : ${this.secteur || ''}`, infoX, 17);\n  doc.text(`Email : ${this.email || ''}`, infoX, 22);\n  doc.text(`Téléphone : ${this.telephone || ''}`, infoX + 60, 22);\n\n  // Séparateurs\n  doc.setDrawColor(200);\n  doc.line(15, 27, 195, 27);\n  doc.line(15, 28.5, 195, 28.5);\n\n  // Titre\n  doc.setFontSize(14);\n  doc.setFont('helvetica', 'bold');\n  doc.setTextColor(85, 85, 85);\n  doc.text(`FACTURE : ${this.facture?.numeroFacture}`, 105, 36, { align: 'center' });\n\n\n\n  // Date\n  doc.setFontSize(10);\n  doc.setFont('helvetica', 'normal');\n  const dateStr = this.facture?.dateCreation \n    ? new Date(this.facture.dateCreation).toLocaleDateString('fr-FR', { \n        day: '2-digit', \n        month: 'long', \n        year: 'numeric' \n      })\n    : '';\n  doc.text(`${this.siege || ''}, le ${dateStr}`, 195, 46, { align: 'right' });\n\n  // Client\n  const clientY = 56;\n  if (this.facture) {\n    const clientName = this.facture.client?.nomComplet || \n                      this.facture.entrepriseClient?.nom || \n                      'Non spécifié';\n    doc.setFont('helvetica', 'bold');\n    doc.text('Doit :', 15, clientY);\n    doc.setFont('helvetica', 'normal');\n    doc.text(clientName, 15 + doc.getTextWidth('Doit :') + 2, clientY);\n  }\n\n  // Objet\n  doc.setFont('helvetica', 'bold');\n  doc.text('Objet :', 15, clientY + 7);\n  doc.setFont('helvetica', 'normal');\n  doc.text(this.facture?.description || '', 15 + doc.getTextWidth('Objet :') + 2, clientY + 7);\n\n  // Tableau des produits\n  const tableStartY = clientY + 17;\n  const customNumberPipe = new CustomNumberPipe();\n  const tableData = this.facture?.lignesFacture.map(ligne => [\n    ligne.produit.nom,\n    ligne.ligneDescription,\n    customNumberPipe.transform(ligne.prixUnitaire),\n    ligne.quantite.toString(),\n    customNumberPipe.transform(ligne.montantTotal)\n  ]) || [];\n\n  // Totaux\n  tableData.push([\n    { content: 'Total HT', colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n    { content: customNumberPipe.transform(this.facture?.totalHT || 0), styles: { halign: 'right' } }\n  ] as any);\n\n  // Remise\n  if (this.facture?.remise && this.facture.remise > 0) {\n    const remisePourcent = this.facture.totalHT > 0 \n    ? Math.round((this.facture.remise / this.facture.totalHT) * 100) \n    : 0;\n    tableData.push([\n      { content: `Remise ${remisePourcent}%`, colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n      { content: customNumberPipe.transform(this.facture.remise), styles: { halign: 'right' } }\n    ] as any);\n    \n    const montantCommercial = this.facture.totalHT - this.facture.remise;\n\n    tableData.push([\n      { content: 'Montant Commercial', colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n      { content: customNumberPipe.transform(montantCommercial), styles: { halign: 'right' } }\n    ] as any);\n  }\n\n  // TVA\n  if (this.facture?.tva && this.tauxTva) {\n    const tauxPourcent = Math.round(this.tauxTva * 100);\n    tableData.push([\n      { content: `TVA (${tauxPourcent} %)`, colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n      { content: customNumberPipe.transform(this.totalTVA), styles: { halign: 'right' } }\n    ] as any);\n    \n    tableData.push([\n      { content: 'Montant TTC', colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n      { content: customNumberPipe.transform(this.facture.totalFacture || 0), styles: { halign: 'right' } }\n    ] as any);\n  }\n\n  // Si paiement partiel ou complet, afficher les montants payés et restants\nconst facture = this.facture;\nif (facture && facture.statutPaiement !== 'EN_ATTENTE') {\n  const montantPaye = (facture.totalFacture || 0) - (facture.montantRestant || 0);\n  const montantRestant = facture.montantRestant || 0;\n\n  tableData.push([\n    { content: 'Montant payé', colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n    { content: customNumberPipe.transform(montantPaye), styles: { halign: 'right' } }\n  ] as any);\n\n  tableData.push([\n    { content: 'Reste à payer', colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n    { content: customNumberPipe.transform(montantRestant), styles: { halign: 'right' } }\n  ] as any);\n}\n\n\n\n  // Génération du tableau\n  (doc as any).autoTable({\n    head: [['Désignation', 'Description', 'Prix Unitaire (FCFA)', 'Quantité', 'Montant (FCFA)']],\n    body: tableData,\n    startY: tableStartY,\n    theme: 'grid',\n    styles: { \n      fontSize: 9, \n      cellPadding: 2, \n      lineWidth: 0.1, \n      lineColor: [221, 221, 221]\n    },\n    headStyles: { \n      fillColor: [242, 242, 242], \n      textColor: [0, 0, 0], \n      fontSize: 8, \n      fontStyle: 'bold'\n    },\n    margin: { left: 15, right: 15 },\n    columnStyles: {\n      0: { cellWidth: 30 },\n      1: { cellWidth: 60 },\n      2: { cellWidth: 33 },\n      3: { cellWidth: 20 },\n      4: { cellWidth: 35 },\n    }\n  });\n\n// Montant en lettres\nconst tableEndY = (doc as any).lastAutoTable.finalY;\nconst amountY = tableEndY + 18;\nconst libelle = 'Arrêté la présente facture à la somme de : ';\ndoc.setFont('helvetica', 'bold');\ndoc.setFontSize(8);\ndoc.text(libelle, 17, amountY);\n\n// Déterminer le montant à afficher en lettres\nconst currentFacture = this.facture;\nlet montantPourTexte = currentFacture?.totalFacture || 0;\n\nif (currentFacture?.statutPaiement !== 'EN_ATTENTE' && currentFacture?.montantRestant != null) {\n  montantPourTexte = currentFacture.montantRestant;\n}\n\n// Convertir en lettres\nconst enLettresPipe = new EnLettresPipe();\nconst amountText = enLettresPipe.transform(montantPourTexte);\n\ndoc.setFont('helvetica', 'normal');\ndoc.setFontSize(9);\ndoc.text(amountText, 15 + doc.getTextWidth(libelle), amountY);\n\n\n// Signature\nconst signatureY = amountY + 30;\n\n// \"Pour acquit\" à gauche\ndoc.setFontSize(9);\ndoc.setFont('helvetica', 'bold');\ndoc.text('Pour acquit :', 29, signatureY);\n\n// Nom du signataire à droite (au même niveau que \"Pour acquit\")\ndoc.setFont('helvetica', 'bold');\ndoc.text(this.signataire || '', 180, signatureY, { align: 'right' });\n\n// === Signature (image en bas à droite, ajustée) ===\nconst signatureImageWidth = 33;\nconst signatureImageHeight = 33;\n\n// ↓ Ajustements ici\nconst signatureImageX = 180 - signatureImageWidth - 6; // décalé 5px à gauche\nconst signatureImageY = signatureY + 1; // 3px plus haut\n\nif (this.signaturNum) {\n  doc.addImage(\n    this.signaturNum,\n    'PNG',\n    signatureImageX,\n    signatureImageY,\n    signatureImageWidth,\n    signatureImageHeight\n  );\n}\n\n\n// === Cachet superposé (ajusté) ===\nconst cachetImageWidth = 40;\nconst cachetImageHeight = 40;\nconst cachetImageX = signatureImageX - 12; // un peu plus à gauche\nconst cachetImageY = signatureImageY + 3;  // un peu plus en haut\n\nif (this.cachetNum) {\n  doc.addImage(\n    this.cachetNum,\n    'PNG',\n    cachetImageX,\n    cachetImageY,\n    cachetImageWidth,\n    cachetImageHeight\n  );\n}\n\n\n// === Nom complet du signataire (sous l’image) ===\ndoc.setFontSize(9);\ndoc.setFont('helvetica', 'bold');\ndoc.text(this.signataireNom || '', 180, signatureImageY + signatureImageHeight + 4, { align: 'right' });\n\n\n  // Footer\n  const footerY = doc.internal.pageSize.height - 20;\n  doc.setLineWidth(0.2);\n  doc.setDrawColor(150);\n  doc.line(15, footerY - 5, 195, footerY - 5);\n  doc.setFontSize(8);\n  doc.setTextColor(100);\n  \n  if (this.siteWeb) {\n    doc.text(this.siteWeb, 105, footerY, { align: 'center' });\n  }\n  \n  const legalInfo = this.getLegalInfo();\n  if (legalInfo) {\n    doc.text(legalInfo, 105, footerY + 4, { align: 'center' });\n  }\n  \n  const addressInfo = this.getAddressInfo();\n  if (addressInfo) {\n    doc.text(addressInfo, 105, footerY + 8, { align: 'center' });\n  }\n\n  //filigran\n  const statut = this.facture?.statutPaiement;\n\nlet filigraneTexte = '';\nlet filigraneCouleur = '';\n\nif (statut === 'EN_ATTENTE') {\n  filigraneTexte = 'NON PAYÉ';\n  filigraneCouleur = 'rgba(255, 0, 0, 0.08)';\n} else if (statut === 'PARTIELLEMENT_PAYEE') {\n  filigraneTexte = 'PAYÉ EN PARTIE';\n  filigraneCouleur = 'rgba(255, 165, 0, 0.15)';\n} else if (statut === 'PAYEE') {\n  filigraneTexte = 'PAYÉ';\n  filigraneCouleur = 'rgba(0, 200, 0, 0.23)';\n}\n\nif (filigraneTexte) {\n  const pageWidth = doc.internal.pageSize.width;\n  const pageHeight = doc.internal.pageSize.height;\n\n  // Canvas HD pour qualité\n  const scaleFactor = 30; \n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n  if (!ctx) return;\n\n  canvas.width = pageWidth * scaleFactor;\n  canvas.height = pageHeight * scaleFactor;\n\n  const centerX = canvas.width / 2;\n  const centerY = canvas.height / 2;\n\n  ctx.font = `bold ${19 * scaleFactor}px Arial`;\n  ctx.fillStyle = filigraneCouleur;\n  ctx.textAlign = \"center\";\n  ctx.textBaseline = \"middle\";\n\n  const dyInMM = 10;\n  const dy = dyInMM * scaleFactor; \n  ctx.translate(centerX, centerY + dy);\n  ctx.rotate(-45 * Math.PI / 180);\n  ctx.fillText(filigraneTexte, 0, 0);\n  ctx.resetTransform();\n\n  const watermarkImage = canvas.toDataURL('image/png');\n\n  doc.addImage(\n    watermarkImage,\n    'PNG',\n    0,\n    0,\n    pageWidth,\n    pageHeight\n  );\n\n  console.log('✅ Filigrane visible :', filigraneTexte, '| Couleur :', filigraneCouleur);\n}\n\n\n\n\n  // Téléchargement\n  doc.save(`Facture_${this.facture?.numeroFacture}.pdf`);\n}\n\n  private getImageFromUrl(url: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.setAttribute('crossOrigin', 'anonymous');\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext('2d');\n        ctx?.drawImage(img, 0, 0);\n        resolve(canvas.toDataURL('image/png'));\n      };\n      img.onerror = error => reject(error);\n      img.src = url;\n    });\n  }\n\n\n  // Variables pour gérer la signature\nsignatureImage: string | ArrayBuffer | null = null;\nsignatureValidee: boolean = false;\n\nonSignatureUpload(event: Event) {\n  const input = event.target as HTMLInputElement;\n  if (input.files && input.files[0]) {\n    const file = input.files[0];\n    const reader = new FileReader();\n\n    reader.onload = e => {\n      this.signatureImage = e.target?.result || null;\n    };\n\n    reader.readAsDataURL(file);\n  }\n}\n\ntransformerLigne(ligne: string): string {\n   return ligne.replace(/-\\s*/g, '<br> - <span></span>');\n}\n\n}\n","<!-- <div>\n    {{facture | json}}\n</div> -->\n\n\n<!-- Icon return  -->\n<p class=\"retour_icon_text\" (click)=\"navigateBack()\" style=\"cursor: pointer; color: #0672E4; margin-bottom: 15px;\" title=\"Retour sur la page factures réelle\">\n    <i class=\"ri-arrow-left-s-line\"></i> <span style=\"margin-left: 8px; font-size: 12px;\">Factures réelle</span>\n</p>\n\n\n\n<div class=\"container_global\" *ngIf=\"facture as f; else noData\">\n  <div class=\"information_cadre div1\" style=\"position: relative;\">\n    <div class=\"cadre_retour\">\n      <!-- <div class=\"retour_icon\" (click)=\"navigateBack()\">\n        <i class=\"ri-arrow-left-long-fill\"></i>\n      </div> -->\n\n      <div class=\"etat_envoyer\" *ngIf=\"facture?.statutPaiement === 'EN_ATTENTE'\">\n          <button class=\"btn_etat btn_etat_annuler\" \n                  (click)=\"annulerFacture()\"\n                  [disabled]=\"isLoadingFacture\">\n              <span *ngIf=\"!isLoadingFacture\">Annuler la facture</span>\n              <span *ngIf=\"isLoadingFacture\">Traitement...</span>\n          </button>\n      </div>\n\n      <div class=\"lien_proforma\" style=\"display: flex; align-items: center; gap: 5px;\">\n        <button class=\"btn_etat\" style=\"color: green;\" (click)=\"voirProforma()\">\n          <span>Voir proforma</span>\n        </button>\n\n        <div class=\"download_icon\" (click)=\"download()\" style=\"text-align: right;\">\n            <i class=\"ri-download-2-fill\"></i>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"info_titre_input\">\n      <div class=\"content\">\n        <!-- En-tête avec logo et infos entreprise -->\n        <div class=\"header_apercu\">\n          <div class=\"logo_entreprise\">\n            <img [src]=\"logo\" (error)=\"logo = fallbackLogo\" alt=\"Logo de l'entreprise\">\n\n          </div>\n          <div class=\"entete_entreprise\">\n            <div class=\"content_entete\">\n              <p class=\"para1\">{{ nom }}</p>\n              <p class=\"para2\">Secteur : {{ secteur }}</p>\n              <div class=\"para3\">\n                Email : <a href=\"mailto:{{ email }}\">{{ email }}</a>  \n                Téléphone : {{ telephone }}\n              </div>\n            </div>\n          </div>\n\n          <div class=\"statut_paiement\">\n            <!-- <div class=\"cadre_name_paiement\">\n              NON PAYER\n            </div> --> \n            <div class=\"cadre_name_paiement\" [ngClass]=\"{\n              'payee': facture.statutPaiement === 'PAYEE',\n              'partiel': facture.statutPaiement === 'PARTIELLEMENT_PAYEE',\n              'attente': facture.statutPaiement === 'EN_ATTENTE'\n            }\">\n              {{ getStatutText(facture.statutPaiement || '') }}\n            </div>\n          </div>\n        </div>\n\n        <hr>\n        <hr>\n\n        <!-- Titre facture -->\n        <div class=\"titre\">\n          <h2>Facture : {{ f.numeroFacture }}</h2>\n        </div>\n\n        <!-- Date de création -->\n        <div class=\"date\">\n          <!-- <p>{{ siege }}, le {{ f.dateCreation | date:'dd MMMM yyyy' }}</p> -->\n          <p>{{ siege }}, le {{ f.dateCreation | date:'dd-MM-yyyy':'fr_FR' }}</p>\n        </div>\n\n        <!-- Client -->\n        <div class=\"droit\" *ngIf=\"f.client\">\n          <h4>Doit :</h4>\n          <p>{{ f.client.nomComplet }}</p>\n        </div>\n\n        <!-- Entreprise cliente éventuelle -->\n        <div class=\"droit\" *ngIf=\"f.entrepriseClient\">\n          <h4>Doit :</h4>\n          <p>{{ f.entrepriseClient.nom }}</p>\n        </div>\n\n        <!-- Description / Objet -->\n        <div class=\"object\">\n          <h4>Objet :</h4>\n          <p>{{ f.description }}</p>\n        </div>\n\n        <!-- Tableau des lignes de facture -->\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <th>Désignation</th>\n              <th style=\"width: 260px!important;\">Description</th>\n              <th>Prix Unitaire (FCFA)</th>\n              <th>Quantité</th>\n              <th>Montant (FCFA)</th>\n            </tr>\n          </thead>\n          <tbody> \n            <tr *ngFor=\"let ligne of f.lignesFacture\">\n              <td class=\"td_left\">{{ ligne.produit.nom }}</td>\n              <td class=\"td_left\" [innerHTML]=\"transformerLigne(ligne.ligneDescription || '')\"></td>\n              <td>{{ ligne.prixUnitaire | customNumber }}</td>\n              <td>{{ ligne.quantite }}</td>\n              <td>{{ ligne.montantTotal | customNumber }}</td>\n            </tr>\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan=\"4\">Total HT</td>\n              <td>{{ f.totalHT | customNumber }}</td>\n            </tr>\n            <tr *ngIf=\"f.remise && f.remise > 0\">\n              <td colspan=\"4\">\n                Remise {{ f.tauxRemise | number:'1.0-2' }}%\n            </td>\n              <td>\n                <!-- {{ ((f.totalHT * f.remise / 100) | customNumber) }} -->\n              {{ f.remise | customNumber }}\n            </td>\n            </tr>\n            <tr *ngIf=\"f.remise && f.remise > 0\">\n              <td colspan=\"4\">Montant commercial</td>\n              <td>\n                {{ (f.totalHT - f.remise) | customNumber }}\n              </td>\n            </tr>\n            <tr *ngIf=\"f.tva\">\n              <td colspan=\"4\">TVA ({{ (tauxTva ?? 0) * 100 | number:'1.0-2' }} %)</td>\n              <td>\n                {{ totalTVA | customNumber }}\n              </td>\n            </tr>\n            <tr *ngIf=\"f.tva\">\n              <td colspan=\"4\">Montant TTC</td>\n              <td>{{ f.totalFacture | customNumber }}</td>\n            </tr>\n          </tfoot>\n        </table>\n\n        <!-- Montant en lettres -->\n        <div class=\"contenu_bottom\">\n          <p>\n            <span style=\"font-weight: 600;\">Arrêté la présente facture à la somme de : </span>\n            {{ f.totalFacture | enLettres }}.\n          </p>\n        </div>\n\n        <!-- signature -->\n\n        <div class=\"footer_container1\">\n          <!-- Ligne avec \"Pour acquit\" à gauche et le nom du signataire à droite -->\n          <div class=\"ligne_haut\">\n            <div class=\"acquis\">\n              <h6>Pour acquit</h6>\n            </div>\n            <div class=\"signataire_header\">\n              <h6>{{ signataire }}</h6>\n            </div>\n          </div>\n\n          <!-- Signature + nom complet sous le nom du signataire -->\n          <div class=\"signature_bloc\">\n            <div class=\"signaturNum\">\n              <img class=\"img\" [src]=\"signaturNum\" (error)=\"logo = fallbackLogo\" alt=\"Signature\">\n              <img class=\"cachetNum\" [src]=\"cachetNum\" (error)=\"logo = fallbackLogo\" alt=\"cachetNum\">\n            </div>\n            <h4 class=\"name_directeur\">{{ signataireNom }}</h4>\n          </div>\n        </div>\n\n      </div>\n    </div>\n\n    <!-- Footer -->\n    <div class=\"container_footer\">\n      <div class=\"footer\">\n        <hr style=\"margin-top: 40px;\">\n        <p *ngIf=\"siteWeb\"><strong>{{ siteWeb }}</strong></p>\n        <div *ngIf=\"getLegalInfo()\">\n          <em>{{ getLegalInfo() }}</em>\n        </div>\n        <div *ngIf=\"getAddressInfo()\" style=\"margin-top: -4px;\">\n          <em>{{ getAddressInfo() }}</em>\n        </div>\n      </div>\n    </div>\n  </div>\n  \n\n  <div class=\"column\">\n    \n        <div class=\"message-container\">\n          <div *ngIf=\"successMessageFactureAnuller\" class=\"success-message\" style=\"margin-bottom: 10px;\">\n            <i class=\"ri-checkbox-circle-fill\"></i>\n            {{ successMessageFactureAnuller }}\n            <i class=\"ri-close-line\" (click)=\"successMessageFactureAnuller = null\"></i>\n          </div>\n          \n          <div *ngIf=\"errorMessageFactureAnuller\" class=\"error-message\" style=\"margin-bottom: 10px;\">\n            <i class=\"ri-error-warning-fill\"></i>\n            {{ errorMessageFactureAnuller }}\n            <i class=\"ri-close-line\" (click)=\"errorMessageFactureAnuller = null\"></i>\n          </div>\n        </div>\n\n    <!-- Formulaire de paiement -->\n    <div class=\"information_cadre_row\" *ngIf=\"facture?.statutPaiement !== 'PAYEE' && facture?.statutPaiement !== 'ANNULEE'\">\n      <div class=\"info_titre_input\">\n        <div class=\"paiement_title\">\n          <h5>Paiement de facture</h5>\n        </div>\n        <div class=\"content\">\n          <form [formGroup]=\"paiementForm\">\n            <!-- <div class=\"grid_colonne\">\n              <div class=\"champ_input\">\n                <input type=\"text\" class=\"input_focus\" readonly style=\"cursor: no-drop;\"\n                    [value]=\"(facture.client?.nom || facture.entrepriseClient?.nom) || ''\">\n                <label class=\"label\">Client</label>\n              </div>\n              \n              <div class=\"champ_input\">\n                <input type=\"text\" class=\"input_focus\" readonly style=\"cursor: no-drop;\"\n                    [value]=\"(facture.totalFacture || 0) | customNumber\">\n                <label class=\"label\">Montant total</label>\n              </div>\n            </div> -->\n            \n            <div class=\"grid_colonne\">\n              <!-- Montant paiement -->\n              <div class=\"champ_input\">\n                <input type=\"text\"\n                  class=\"input_focus\"\n                  formControlName=\"montant\"\n                  (input)=\"onInputChange($event)\"\n                  placeholder=\"Saisis le montant\">\n\n\n                <label class=\"label\">Montant paiement</label>\n                <small class=\"restant\" *ngIf=\"montantRestant > 0\">\n                  Restant: {{ montantRestant | customNumber }} FCFA\n                </small>\n              </div>\n              \n              <!-- Mode paiement -->\n              <div class=\"champ_input\">\n                <select class=\"input_focus\" formControlName=\"modePaiement\">\n                  <option value=\"\">Sélectionnez...</option>\n                  <option value=\"CASH\">Espèce</option>\n                  <option value=\"CHEQUE\">Chèque</option>\n                  <option value=\"CARD\">Carte de crédit</option>\n                  <option value=\"VIREMENT\">Virement bancaire</option>\n                  <option value=\"MOBILE\">Mobile Money</option>\n                </select>\n                <label class=\"label\">Mode de paiement</label>\n              </div>\n            </div>\n\n            <div class=\"content_btn\">\n              <div class=\"message-container\">\n                <div *ngIf=\"successMessage\" class=\"success-message\">\n                  <i class=\"ri-checkbox-circle-fill\"></i>\n                  {{ successMessage }}\n                  <i class=\"ri-close-line\" (click)=\"successMessage = null\"></i>\n                </div>\n                \n                <div *ngIf=\"errorMessage\" class=\"error-message\">\n                  <i class=\"ri-error-warning-fill\"></i>\n                  {{ errorMessage }}\n                  <i class=\"ri-close-line\" (click)=\"errorMessage = null\"></i>\n                </div>\n              </div>\n\n            <!-- Dans le formulaire de paiement -->\n              <div class=\"btn_ajouter\">\n                <button type=\"button\" class=\"btn_save\" \n                        (click)=\"enregistrerPaiement()\"\n                        [disabled]=\"paiementForm.invalid || isLoading\">\n                  <span *ngIf=\"!isLoading\">Payer la facture</span>\n                  <span *ngIf=\"isLoading\">Traitement...</span>\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n\n    <!-- Historique des paiements -->\n    <div class=\"information_cadre_row_list\">\n      <div class=\"info_titre_input\">\n        <div class=\"content_header\">\n          <div class=\"paiement_title\">\n            <h5>Historique des paiements</h5>\n            <div class=\"statut-badge\" [ngClass]=\"{\n              'payee': facture.statutPaiement === 'PAYEE',\n              'partiel': facture.statutPaiement === 'PARTIELLEMENT_PAYEE',\n              'attente': facture.statutPaiement === 'EN_ATTENTE'\n            }\">\n              {{ getStatutText(facture.statutPaiement || '') }}\n            </div>\n          </div>\n\n          <div class=\"total_montant\">\n            <p>Montant dû : <span style=\"background-color: #ddd; background-color: #aaddaa91; padding: 5px 10px; border-radius: 10px;\">{{ (facture.totalFacture || 0) | customNumber }} FCFA</span></p>\n            <p>Montant restant : <span style=\"background-color: #ddd; background-color: #b8b8b891; padding: 5px 10px; border-radius: 10px;\">{{ montantRestant | customNumber }} FCFA </span></p>\n          </div>\n        </div>\n        \n        <div class=\"content\">\n          <div class=\"historique-container\">\n            <div *ngIf=\"historiquePaiements.length === 0\" class=\"empty-state\">\n              <i class=\"ri-history-line\"></i>\n              <p>Aucun paiement enregistré</p>\n            </div>\n            \n            <div *ngFor=\"let p of historiquePaiements\" class=\"paiement-card\">\n              <div class=\"paiement-header\">\n                <span class=\"montant\">{{ p.montant | customNumber }} FCFA</span>\n                <span class=\"date\">{{ p.datePaiement | date: 'dd/MM/yyyy' }}</span>\n              </div>\n              \n              <div class=\"paiement-details\">\n                <div class=\"mode\">\n                  <i [ngClass]=\"getModeIconClass(p.modePaiement)\"></i>\n                  {{ getModeText(p.modePaiement) }}\n                </div>\n                <div class=\"encaisse\">\n                  <i class=\"ri-user-line\"></i>\n                  Par {{ p.encaissePar }}\n                </div>\n            </div>\n\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"content_footer\">\n          <div class=\"total_montant\">\n            <p>Montant total :</p>\n          </div>\n\n          \n\n          <!-- <div class=\"total_logo_virement\">\n            <ng-container *ngFor=\"let item of modesPaiementVisibles\">\n              <div class=\"total_montant_logo\">\n                <i [class]=\"getIconClass(item.mode)\"></i>\n                <p>: {{ item.montant | customNumber }}</p>\n              </div>\n            </ng-container>\n          </div> -->\n          <div class=\"total_logo_virement\">\n            <!-- Boucle sur les modes de paiement avec montant > 0 -->\n            <ng-container *ngFor=\"let item of modesPaiementVisibles\">\n              <div class=\"total_montant_logo\">\n                <i [class]=\"getIconClass(item.mode)\" \n                  [title]=\"getModeText(item.mode)\"></i>\n                <p [title]=\"getModeText(item.mode)\">: {{ item.montant | customNumber }}</p>\n              </div>\n            </ng-container>\n          </div>\n        </div>\n      </div>\n    </div>\n     <div class=\"facture-header\" *ngIf=\"facture\">\n  <div class=\"user-badges-container\">\n    \n    <!-- Badge Créateur -->\n    <div class=\"user-badge creator\">\n      <div class=\"badge-icon\">\n        <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n          <path fill=\"currentColor\"\n            d=\"M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12.5,7V8H11V7H12.5M12.5,16V17H11V16H12.5M7,10.5V9H17V10.5H7M7,15V13.5H17V15H7Z\" />\n        </svg>\n      </div>\n      <div class=\"badge-content\">\n        <div class=\"user-name\"> Créé par {{ facture.utilisateurCreateur }}</div>\n        <span class=\"dateC\">Le  {{facture.dateCreationPro | date: 'dd/MM/yyyy'}}</span>\n      </div>\n    </div>\n\n    <!-- Badge Validateur -->\n    <div class=\"user-badge validator\" *ngIf=\"facture.utilisateurValidateur\">\n      <div class=\"badge-icon\">\n        <svg viewBox=\"0 0 24 24\" width=\"16\" height=\"16\">\n          <path fill=\"currentColor\"\n            d=\"M12,2C6.5,2 2,6.5 2,12C2,17.5 6.5,22 12,22C17.5,22 22,17.5 22,12C22,6.5 17.5,2 12,2M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8L10,17Z\" />\n        </svg>\n      </div>\n      <div class=\"badge-content\">\n        <div class=\"user-name\">Validé par {{ facture.utilisateurValidateur }}</div>\n        <span class=\"dateC\">Le  {{facture.dateCreation | date: 'dd/MM/yyyy'}}</span>\n\n      </div>\n    </div>\n\n  </div>\n</div>\n  </div>\n  \n</div>\n\n<ng-template #noData>\n  <p>Aucune donnée d’aperçu… <a (click)=\"navigateBack()\">Retour</a></p>\n</ng-template>\n\n\n\n<!-- Popup de confirmation pour l'annulation -->\n<div *ngIf=\"showAnnulationConfirmation\" class=\"status-confirmation-popup\">\n  <div class=\"popup-content\">\n    <h4>Confirmer l'annulation</h4>\n    \n    <p>\n      Êtes-vous sûr de vouloir annuler cette facture ? Cette action est irréversible.\n    </p>\n    \n    <div class=\"popup-actions\">\n      <button class=\"btn btn-secondary\" (click)=\"cancelAnnulation()\">Retour</button>\n      <button class=\"btn btn-danger\" \n              (click)=\"confirmAnnulation()\">\n          Confirmer\n      </button>\n      <!-- [disabled]=\"canAddNote && !annulationReason.trim()\" -->\n    </div>\n  </div>\n</div>\n\n\n\n\n\n"],"names":["EnLettresPipe","constructor","unite","dizaine","dizaineSpecial","transform","value","isNaN","n","Math","floor","words","numberToWords","charAt","toUpperCase","slice","d","reste","c","m","millions","pure","HttpHeaders","BehaviorSubject","catchError","switchMap","tap","throwError","environment","EntrepriseService","http","usersService","apiUrl","apiBaseUrl","entrepriseSubject","entreprise$","asObservable","getListEntreprises","getValidAccessToken","pipe","token","headers","get","error","errorMsg","ErrorEvent","message","status","Error","addEntreprise","entreprise","post","newEntreprise","currentEntreprise","next","getListEntreprise","console","set","log","data","getEntrepriseById","id","updateEntreprise","formData","patch","responseType","getEntrepriseInfo","Authorization","localStorage","setItem","JSON","stringify","decodeJwt","parse","atob","split","isTokenExpired","decodedToken","expirationDate","Date","exp","getNewTokenFromApi","refreshToken","getItem","i0","ɵɵinject","i1","HttpClient","i2","UsersService","factory","ɵfac","providedIn","CommonModule","FormsModule","ReactiveFormsModule","Validators","CustomNumberPipe","timer","MatButtonModule","jsPDF","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","FactureReelDetailsComponent_div_4_div_3_Template_button_click_1_listener","ɵɵrestoreView","_r3","ctx_r3","ɵɵnextContext","ɵɵresetView","annulerFacture","ɵɵtemplate","FactureReelDetailsComponent_div_4_div_3_span_2_Template","FactureReelDetailsComponent_div_4_div_3_span_3_Template","ɵɵadvance","ɵɵproperty","isLoadingFacture","ɵɵtextInterpolate","f_r5","client","nomComplet","entrepriseClient","nom","ɵɵelement","ligne_r6","produit","transformerLigne","ligneDescription","ɵɵsanitizeHtml","ɵɵpipeBind1","prixUnitaire","quantite","montantTotal","ɵɵtextInterpolate1","ɵɵpipeBind2","tauxRemise","remise","totalHT","tmp_4_0","tauxTva","undefined","totalTVA","totalFacture","siteWeb","getLegalInfo","getAddressInfo","FactureReelDetailsComponent_div_4_div_99_Template_i_click_3_listener","_r7","successMessageFactureAnuller","FactureReelDetailsComponent_div_4_div_100_Template_i_click_3_listener","_r8","errorMessageFactureAnuller","montantRestant","FactureReelDetailsComponent_div_4_div_101_div_31_Template_i_click_3_listener","_r10","successMessage","FactureReelDetailsComponent_div_4_div_101_div_32_Template_i_click_3_listener","_r11","errorMessage","FactureReelDetailsComponent_div_4_div_101_Template_input_input_9_listener","$event","_r9","onInputChange","FactureReelDetailsComponent_div_4_div_101_small_12_Template","FactureReelDetailsComponent_div_4_div_101_div_31_Template","FactureReelDetailsComponent_div_4_div_101_div_32_Template","FactureReelDetailsComponent_div_4_div_101_Template_button_click_34_listener","enregistrerPaiement","FactureReelDetailsComponent_div_4_div_101_span_35_Template","FactureReelDetailsComponent_div_4_div_101_span_36_Template","paiementForm","invalid","isLoading","p_r12","montant","datePaiement","getModeIconClass","modePaiement","getModeText","encaissePar","ɵɵelementContainerStart","ɵɵclassMap","getIconClass","item_r13","mode","facture","utilisateurValidateur","dateCreation","FactureReelDetailsComponent_div_4_div_131_div_12_Template","utilisateurCreateur","dateCreationPro","FactureReelDetailsComponent_div_4_div_3_Template","FactureReelDetailsComponent_div_4_Template_button_click_5_listener","_r2","voirProforma","FactureReelDetailsComponent_div_4_Template_div_click_8_listener","download","FactureReelDetailsComponent_div_4_Template_img_error_14_listener","logo","fallbackLogo","FactureReelDetailsComponent_div_4_div_38_Template","FactureReelDetailsComponent_div_4_div_39_Template","FactureReelDetailsComponent_div_4_tr_59_Template","FactureReelDetailsComponent_div_4_tr_67_Template","FactureReelDetailsComponent_div_4_tr_68_Template","FactureReelDetailsComponent_div_4_tr_69_Template","FactureReelDetailsComponent_div_4_tr_70_Template","FactureReelDetailsComponent_div_4_Template_img_error_87_listener","FactureReelDetailsComponent_div_4_Template_img_error_88_listener","FactureReelDetailsComponent_div_4_p_94_Template","FactureReelDetailsComponent_div_4_div_95_Template","FactureReelDetailsComponent_div_4_div_96_Template","FactureReelDetailsComponent_div_4_div_99_Template","FactureReelDetailsComponent_div_4_div_100_Template","FactureReelDetailsComponent_div_4_div_101_Template","FactureReelDetailsComponent_div_4_div_123_Template","FactureReelDetailsComponent_div_4_div_124_Template","FactureReelDetailsComponent_div_4_ng_container_130_Template","FactureReelDetailsComponent_div_4_div_131_Template","statutPaiement","ɵɵsanitizeUrl","secteur","ɵɵpropertyInterpolate1","email","telephone","ɵɵpureFunction3","_c0","getStatutText","numeroFacture","ɵɵtextInterpolate2","siege","ɵɵpipeBind3","description","lignesFacture","tva","signataire","signaturNum","cachetNum","signataireNom","historiquePaiements","length","modesPaiementVisibles","FactureReelDetailsComponent_ng_template_5_Template_a_click_2_listener","_r14","navigateBack","FactureReelDetailsComponent_div_7_Template_button_click_7_listener","_r15","cancelAnnulation","FactureReelDetailsComponent_div_7_Template_button_click_9_listener","confirmAnnulation","FactureReelDetailsComponent","router","route","factureService","entrepriseService","fb","dialog","totauxParMode","role","montantCommercial","messageSubscription","imgUrl","showAnnulationConfirmation","signatureImage","signatureValidee","group","required","min","event","input","target","cleaned","replace","parsed","parseInt","setValue","emitEvent","customNumberTransform","toString","ngOnInit","getUserEntrepriseInfo","idParam","snapshot","paramMap","factureId","loadFactureReelle","navigate","getFactureReelleById","subscribe","reduce","sum","ligne","forEach","loadMontantRestant","loadHistoriquePaiements","updatePaymentStatus","err","factureProFormaId","getMontantRestant","statut","getHistoriquePaiements","paiements","reverse","calculerTotauxParMode","totaux","paiement","Object","entries","filter","_","map","sort","a","b","clearMessageTimer","montantPaiement","startMessageTimer","reset","text","duration","unsubscribe","ngOnDestroy","adresse","nif","banque","nina","pays","rccm","parts","push","join","annulerFactureReelle","factureAnnulee","setTimeout","_this","_asyncToGenerator","doc","unit","format","imgData","startsWith","getImageFromUrl","formatMatch","match","addImage","imgErr","infoX","setFontSize","setFont","setDrawColor","line","setTextColor","align","dateStr","toLocaleDateString","day","month","year","clientY","clientName","getTextWidth","tableStartY","customNumberPipe","tableData","content","colSpan","styles","fontStyle","halign","remisePourcent","round","tauxPourcent","montantPaye","autoTable","head","body","startY","theme","fontSize","cellPadding","lineWidth","lineColor","headStyles","fillColor","textColor","margin","left","right","columnStyles","cellWidth","tableEndY","lastAutoTable","finalY","amountY","libelle","currentFacture","montantPourTexte","enLettresPipe","amountText","signatureY","signatureImageWidth","signatureImageHeight","signatureImageX","signatureImageY","cachetImageWidth","cachetImageHeight","cachetImageX","cachetImageY","footerY","internal","pageSize","height","setLineWidth","legalInfo","addressInfo","filigraneTexte","filigraneCouleur","pageWidth","width","pageHeight","scaleFactor","canvas","document","createElement","ctx","getContext","centerX","centerY","font","fillStyle","textAlign","textBaseline","dyInMM","dy","translate","rotate","PI","fillText","resetTransform","watermarkImage","toDataURL","save","url","Promise","resolve","reject","img","Image","setAttribute","onload","drawImage","onerror","src","onSignatureUpload","files","file","reader","FileReader","e","result","readAsDataURL","ɵɵdirectiveInject","Router","ActivatedRoute","FactureReelService","i3","i4","FormBuilder","i5","MatDialog","selectors","inputs","decls","vars","consts","template","FactureReelDetailsComponent_Template","rf","FactureReelDetailsComponent_Template_p_click_0_listener","_r1","FactureReelDetailsComponent_div_4_Template","FactureReelDetailsComponent_ng_template_5_Template","ɵɵtemplateRefExtractor","FactureReelDetailsComponent_div_7_Template","noData_r16","i6","NgClass","NgForOf","NgIf","DecimalPipe","DatePipe","ɵNgNoValidate","NgSelectOption","ɵNgSelectMultipleOption","DefaultValueAccessor","SelectControlValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}