"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[1297],{1297:(O,h,r)=>{r.r(h),r.d(h,{PosVenteComponent:()=>I});var p=r(177),P=r(9417),u=r(2525),t=r(4438),b=r(9192),m=r(145),C=r(9293),y=r(7022);function g(i,a){if(1&i){const e=t.RV6();t.j41(0,"li",33),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.selectCategory(n.id))}),t.j41(1,"div",34)(2,"span"),t.EFF(3),t.k0s()(),t.j41(4,"div",35),t.EFF(5),t.k0s()()}if(2&i){const e=a.$implicit,o=t.XpG(2);t.AVh("selected",o.selectedCategoryId===e.id),t.R7$(3),t.JRh(e.nom),t.R7$(2),t.SpI(" ",e.produitCount||0," ")}}function k(i,a){if(1&i&&(t.j41(0,"ul",31),t.DNE(1,g,6,4,"li",32),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.categories)}}function x(i,a){if(1&i&&(t.j41(0,"span",49),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(),t.SpI(" ",o.getSelectedQuantity(e.id)," ")}}function _(i,a){if(1&i){const e=t.RV6();t.j41(0,"div",39),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.getAvailableStock(n)>0?c.addToCart(n):null)}),t.DNE(1,x,2,1,"span",40),t.nrm(2,"img",41),t.j41(3,"div",42)(4,"p",43),t.EFF(5),t.k0s(),t.j41(6,"p",44),t.EFF(7),t.k0s()(),t.j41(8,"div",45)(9,"div",46)(10,"p"),t.EFF(11),t.nI1(12,"currency"),t.k0s()(),t.j41(13,"button",47),t.bIt("click",function(n){const c=t.eBV(e).$implicit;return t.XpG(2).decreaseQuantity(c),t.Njj(n.stopPropagation())}),t.nrm(14,"i",48),t.k0s()()()}if(2&i){const e=a.$implicit,o=t.XpG(2);t.AVh("disabled",o.getAvailableStock(e)<=0),t.R7$(),t.Y8G("ngIf",o.getSelectedQuantity(e.id)>0),t.R7$(),t.Y8G("src",o.getProductImage(e.photo),t.B4B),t.R7$(3),t.JRh(e.nom),t.R7$(2),t.SpI("Stocks : ",o.getAvailableStock(e),""),t.R7$(4),t.JRh(t.ii3(12,7,e.prixVente,"CFA ","symbol","1.0-0"))}}function j(i,a){1&i&&(t.j41(0,"div",50),t.nrm(1,"i",51),t.EFF(2," Chargement des produits... "),t.k0s())}function l(i,a){if(1&i&&(t.j41(0,"div",36),t.DNE(1,_,15,12,"div",37)(2,j,3,0,"div",38),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.displayedProducts),t.R7$(),t.Y8G("ngIf",!e.categories.length)}}function s(i,a){if(1&i&&(t.j41(0,"span",70),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(),t.SpI(" ",o.getSelectedQuantity(e.id)," ")}}function d(i,a){if(1&i){const e=t.RV6();t.j41(0,"li",56),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.getAvailableStock(n)>0?c.addToCart(n):null)}),t.j41(1,"div",57)(2,"div",58)(3,"div",59),t.nrm(4,"img",60),t.k0s(),t.j41(5,"div",61)(6,"p",62),t.EFF(7),t.k0s(),t.j41(8,"p",63),t.EFF(9),t.k0s()()()(),t.j41(10,"div",64)(11,"div",65)(12,"div",46)(13,"p"),t.EFF(14),t.nI1(15,"currency"),t.k0s()(),t.j41(16,"div",66),t.DNE(17,s,2,1,"span",67),t.k0s(),t.j41(18,"button",47),t.bIt("click",function(n){const c=t.eBV(e).$implicit;return t.XpG(2).decreaseQuantity(c),t.Njj(n.stopPropagation())}),t.nrm(19,"i",48),t.k0s(),t.j41(20,"div",68),t.nrm(21,"i",69),t.k0s()()()()}if(2&i){const e=a.$implicit,o=t.XpG(2);t.AVh("disabled",o.getAvailableStock(e)<=0),t.R7$(4),t.Y8G("src",o.getProductImage(e.photo),t.B4B),t.R7$(3),t.JRh(e.nom),t.R7$(2),t.SpI("Stocks : ",o.getAvailableStock(e),""),t.R7$(5),t.JRh(t.ii3(15,7,e.prixVente,"CFA ","symbol","1.0-0")),t.R7$(3),t.Y8G("ngIf",o.getSelectedQuantity(e.id)>0)}}function v(i,a){1&i&&(t.j41(0,"div",71),t.EFF(1," Aucun produit dans cette cat\xe9gorie "),t.k0s())}function M(i,a){if(1&i&&(t.j41(0,"div",52)(1,"ul",53),t.DNE(2,d,22,12,"li",54),t.k0s(),t.DNE(3,v,2,0,"div",55),t.k0s()),2&i){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.displayedProducts),t.R7$(),t.Y8G("ngIf",0===e.displayedProducts.length&&e.categories.length)}}function E(i,a){if(1&i){const e=t.RV6();t.j41(0,"li",72)(1,"div",58)(2,"div",73),t.EFF(3),t.k0s(),t.j41(4,"div",74)(5,"p",75),t.EFF(6),t.j41(7,"span"),t.EFF(8),t.nI1(9,"currency"),t.k0s()()()(),t.j41(10,"div",58)(11,"div",76),t.EFF(12),t.nI1(13,"currency"),t.k0s(),t.j41(14,"div",77),t.bIt("click",function(){const n=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.removeProduct(n.product.id))}),t.nrm(15,"i",78),t.k0s()()()}if(2&i){const e=a.$implicit;t.R7$(3),t.SpI(" ",e.quantity," "),t.R7$(3),t.SpI(" ",e.product.nom," "),t.R7$(2),t.SpI("(",t.ii3(9,4,e.product.prixVente,"CFA ","symbol","1.0-0"),")"),t.R7$(4),t.SpI(" ",t.ii3(13,9,e.quantity*e.product.prixVente,"CFA ","symbol","1.0-0")," ")}}function F(i,a){if(1&i){const e=t.RV6();t.j41(0,"div",79)(1,"div",80)(2,"div",81)(3,"button",82),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closePaymentPopup())}),t.nrm(4,"i",83),t.k0s()(),t.j41(5,"div",84)(6,"div",85)(7,"div",86)(8,"div",87)(9,"h1"),t.EFF(10),t.nI1(11,"currency"),t.k0s(),t.j41(12,"span"),t.EFF(13,"CFA"),t.k0s()(),t.j41(14,"div",88)(15,"div",89)(16,"p"),t.EFF(17),t.k0s()(),t.j41(18,"div",90)(19,"div",91)(20,"p"),t.EFF(21),t.nI1(22,"currency"),t.k0s(),t.j41(23,"i",92),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return n.enteredAmount="",t.Njj(n.calculatePayment())}),t.k0s()()()(),t.j41(24,"div",93)(25,"div",94)(26,"p"),t.EFF(27),t.k0s()(),t.j41(28,"div",90)(29,"div",91)(30,"p"),t.EFF(31),t.nI1(32,"currency"),t.k0s()()()(),t.j41(33,"div",95)(34,"button",96),t.EFF(35," CFA "),t.k0s(),t.nrm(36,"input",97),t.j41(37,"button",98),t.EFF(38," % "),t.k0s()(),t.j41(39,"div",99)(40,"p"),t.EFF(41,"Remise par produit"),t.k0s()()()(),t.j41(42,"div",100)(43,"div",11)(44,"div",101)(45,"div",102),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.selectPaymentMethod("Esp\xe8ces"))}),t.j41(46,"div",103),t.nrm(47,"img",104),t.k0s(),t.j41(48,"div",105)(49,"p"),t.EFF(50,"Esp\xe8ces"),t.k0s()()(),t.j41(51,"div",102),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.selectPaymentMethod("Carte"))}),t.j41(52,"div",106),t.nrm(53,"img",107),t.k0s(),t.j41(54,"div",105)(55,"p"),t.EFF(56,"Carte"),t.k0s()()(),t.j41(57,"div",102),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.selectPaymentMethod("Compte client"))}),t.j41(58,"div",108),t.nrm(59,"img",109),t.k0s(),t.j41(60,"div",105)(61,"p"),t.EFF(62,"Compte client"),t.k0s()()()()(),t.j41(63,"div",110)(64,"div",18)(65,"div",19)(66,"p"),t.EFF(67,"Client"),t.k0s()(),t.j41(68,"div",20)(69,"p"),t.EFF(70,"Facture"),t.k0s(),t.nrm(71,"input",21),t.k0s()()(),t.j41(72,"div",111)(73,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("1"))}),t.EFF(74,"1"),t.k0s(),t.j41(75,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("2"))}),t.EFF(76,"2"),t.k0s(),t.j41(77,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("3"))}),t.EFF(78,"3"),t.k0s(),t.j41(79,"button"),t.EFF(80,"Qt\xe9"),t.k0s(),t.j41(81,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("4"))}),t.EFF(82,"4"),t.k0s(),t.j41(83,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("5"))}),t.EFF(84,"5"),t.k0s(),t.j41(85,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("6"))}),t.EFF(86,"6"),t.k0s(),t.j41(87,"button"),t.EFF(88,"%"),t.k0s(),t.j41(89,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("7"))}),t.EFF(90,"7"),t.k0s(),t.j41(91,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("8"))}),t.EFF(92,"8"),t.k0s(),t.j41(93,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("9"))}),t.EFF(94,"9"),t.k0s(),t.j41(95,"button"),t.EFF(96,"Prix"),t.k0s(),t.j41(97,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("+/-"))}),t.EFF(98,"+/-"),t.k0s(),t.j41(99,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("0"))}),t.EFF(100,"0"),t.k0s(),t.j41(101,"button",23),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress(","))}),t.EFF(102,","),t.k0s(),t.j41(103,"button",26),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("backspace"))}),t.nrm(104,"i",27),t.k0s()(),t.j41(105,"div",28)(106,"button",112),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.completePayment())}),t.EFF(107," Valider Paiement "),t.k0s()()()()()()}if(2&i){const e=t.XpG();t.R7$(10),t.JRh(t.ii3(11,16,e.totalAmount,"CFA ","symbol","1.0-0")),t.R7$(7),t.JRh(e.selectedPaymentMethod),t.R7$(4),t.JRh(t.ii3(22,21,e.paymentAmount,"CFA ","symbol","1.0-0")),t.R7$(5),t.xc7("color",e.paymentAmount>=e.totalAmount?"#008000":"#ff0000"),t.R7$(),t.SpI(" ",e.paymentAmount>=e.totalAmount?"Monnaie":"Restant"," "),t.R7$(3),t.xc7("color",e.paymentAmount>=e.totalAmount?"#008000":"#ff0000"),t.R7$(),t.SpI(" ",t.ii3(32,26,e.changeDue,"CFA ","symbol","1.0-0")," "),t.R7$(14),t.AVh("selected_mode_pay","Esp\xe8ces"===e.selectedPaymentMethod),t.R7$(6),t.AVh("selected_mode_pay","card"===e.selectedPaymentMethod),t.R7$(6),t.AVh("selected_mode_pay","account"===e.selectedPaymentMethod),t.R7$(49),t.Y8G("disabled",!e.isAmountEntered)}}let I=(()=>{class i{constructor(e,o,n,c){this.router=e,this.viewState=o,this.categorieService=n,this.commandeState=c,this.isListView=!0,this.showDropdown=!1,this.showPaymentPopup=!1,this.categories=[],this.selectedCategoryId=null,this.displayedProducts=[],this.currentQuantityInput="",this.selectedProduct=null,this.quantityMode=!0,this.showStockWarning=!1,this.cart=new Map,this.totalAmount=0,this.selectedPaymentMethod="Esp\xe8ces",this.enteredAmount="",this.paymentAmount=0,this.changeDue=0,this.isAmountEntered=!1,this.commandeState.activeCommandeId$.subscribe(()=>{this.loadActiveCart()})}ngOnInit(){const e=localStorage.getItem("viewPreference");this.isListView=!e||"list"===e,this.loadActiveCart(),this.viewState.isListView$.subscribe(o=>{this.isListView=o}),this.categories.length||this.loadCategories()}loadActiveCart(){this.cart=new Map(this.commandeState.getActiveCart())}saveActiveCart(){this.commandeState.updateActiveCart(this.cart)}loadCategories(){this.categorieService.getCategories().subscribe({next:e=>{this.categories=e,this.displayedProducts=[],this.categories.forEach(o=>{o.produits&&(this.displayedProducts=[...this.displayedProducts,...o.produits])})},error:e=>{console.error("Erreur lors du chargement des cat\xe9gories",e)}})}showAllProducts(){this.selectedCategoryId=null,this.displayedProducts=[],this.categories.forEach(e=>{e.produits&&(this.displayedProducts=[...this.displayedProducts,...e.produits])})}selectCategory(e){if(void 0===e)return;this.selectedCategoryId=e;const o=this.categories.find(n=>n.id===e);this.displayedProducts=o&&o.produits?o.produits:[]}getProductImage(e){return e&&""!==e?e.startsWith("http")?e:e.startsWith("/uploads")?u.c.imgUrl.replace("/api","")+e:e:"assets/img/default-product.png"}openPaymentPopup(){this.showPaymentPopup=!0,this.totalAmount=this.getTotalCart(),this.enteredAmount="",this.paymentAmount=0,this.changeDue=0,this.isAmountEntered=!1,this.selectedPaymentMethod="Esp\xe8ces"}handlePaymentKeyPress(e){switch(e){case"backspace":this.enteredAmount=this.enteredAmount.slice(0,-1);break;case",":this.enteredAmount.includes(",")||(this.enteredAmount+=",");break;case"+/-":break;default:this.enteredAmount.length<10&&(this.enteredAmount+=e)}this.calculatePayment()}calculatePayment(){const e=parseFloat(this.enteredAmount.replace(",","."))||0;this.paymentAmount=e,this.isAmountEntered=e>0,this.changeDue=this.paymentAmount>=this.totalAmount?this.paymentAmount-this.totalAmount:this.totalAmount-this.paymentAmount}selectPaymentMethod(e){this.selectedPaymentMethod=e}completePayment(){console.log("Paiement compl\xe9t\xe9:",{method:this.selectedPaymentMethod,amount:this.paymentAmount,change:this.changeDue}),this.closePaymentPopup(),this.cart.clear(),this.saveActiveCart()}closePaymentPopup(){this.showPaymentPopup=!1}addToCart(e){if(this.getAvailableStock(e)<=0)return;this.currentQuantityInput="";const o=this.cart.get(e.id)||0;this.cart.set(e.id,o+1),this.selectedProduct=e,this.saveActiveCart(),this.updateCommandeTotals()}decreaseQuantity(e){const o=this.cart.get(e.id)||0;if(o>0){const n=o-1;this.cart.set(e.id,n),this.selectedProduct?.id===e.id&&(this.currentQuantityInput=n>0?n.toString():"")}this.saveActiveCart(),this.updateCommandeTotals()}getSelectedQuantity(e){return this.cart.get(e)||0}removeProduct(e){this.cart.delete(e),this.saveActiveCart(),this.selectedProduct?.id===e&&(this.currentQuantityInput=""),this.updateCommandeTotals()}updateCommandeTotals(){const e=this.getTotalItems(),o=this.getTotalCart(),n=this.commandeState.getActiveCommandeId();this.commandeState.updateCommandeTotals(n,e,o)}getTotalItems(){let e=0;return this.cart.forEach(o=>e+=o),e}getCartItems(){const e=[];for(const[o,n]of this.cart.entries())if(n>0){const c=this.displayedProducts.find(f=>f.id===o);c&&e.push({product:c,quantity:n})}return e}getAvailableStock(e){const o=this.getSelectedQuantity(e.id);return e.quantite-o}getTotalCart(){let e=0;return this.cart.forEach((o,n)=>{const c=this.displayedProducts.find(f=>f.id===n);c&&(e+=o*c.prixVente)}),e}handleKeyPress(e){if(this.selectedProduct&&this.quantityMode){switch(e){case"backspace":this.currentQuantityInput=this.currentQuantityInput.slice(0,-1);break;case"+/-":break;default:this.currentQuantityInput.length<5&&(this.currentQuantityInput+=e)}this.applyQuantityToProduct()}}applyQuantityToProduct(){if(!this.selectedProduct||""===this.currentQuantityInput)return;const e=parseInt(this.currentQuantityInput,10);if(isNaN(e))return;const o=this.selectedProduct.quantite;e>0&&e<=o?this.cart.set(this.selectedProduct.id,e):(this.cart.set(this.selectedProduct.id,o),this.currentQuantityInput=o.toString(),this.showStockWarning=!0,setTimeout(()=>this.showStockWarning=!1,3e3)),this.saveActiveCart()}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(b.Ix),t.rXU(m.C),t.rXU(C.R),t.rXU(y.f))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-pos-vente"]],decls:73,vars:13,consts:[[1,"section_contenu_container"],[1,"section_contenu_left"],[1,"section_favory_produit"],[1,"section_favory"],[1,"titre_categorie"],[1,"allCate",3,"click"],["class","ul_name_categorie",4,"ngIf"],[1,"section_produit"],["class","cadre_produit product-grid",4,"ngIf"],["class","cadre_produit_list product-list",4,"ngIf"],[1,"section_contenu_right",2,"background-color","#ffffff","height","100vh","box-shadow","rgba(0, 0, 0, 0.04) 0px 3px 5px"],[1,"list_produit_select"],[1,"ul_list_produit_select"],["class","li_list_produit_select",4,"ngFor","ngForOf"],[1,"summary_panel"],[1,"double_row"],[1,"double_row","total"],[1,"client_facture",2,"padding-top","5px"],[1,"double_client_facture"],[1,"paiement_btn","btn_client"],[1,"paiement_btn","btn_facture"],["type","checkbox"],[1,"keypad"],[3,"click"],[1,"btn_keypad_action","btn_keypad_active"],[1,"btn_keypad_action"],[1,"backspace",3,"click"],[1,"ri-delete-back-2-line"],[1,"btn_content"],[1,"btn-payment",3,"click"],["class","payment-popup-overlay",4,"ngIf"],[1,"ul_name_categorie"],["class","ul_li_name_categorie",3,"selected","click",4,"ngFor","ngForOf"],[1,"ul_li_name_categorie",3,"click"],[1,"name_categorie"],[1,"nombre"],[1,"cadre_produit","product-grid"],["class","product-card",3,"disabled","click",4,"ngFor","ngForOf"],["class","loading-indicator",4,"ngIf"],[1,"product-card",3,"click"],["class","stock-badge",4,"ngIf"],["alt","",1,"product-img",3,"src"],[1,"card-body"],[1,"product-name"],[1,"product-stock"],[1,"bottom_price_sub"],[1,"product-price"],[1,"btn-decrement",3,"click"],[1,"ri-subtract-line"],[1,"stock-badge"],[1,"loading-indicator"],[1,"ri-loader-4-line"],[1,"cadre_produit_list","product-list"],[1,"ul_list"],["class","li_list",3,"disabled","click",4,"ngFor","ngForOf"],["class","empty-category",4,"ngIf"],[1,"li_list",3,"click"],[1,"list_left"],[1,"double"],[1,"img_product_list"],["alt","",3,"src"],[1,"name_stock_list"],[1,"product-name-list"],[1,"product-stock-list"],[1,"list_right"],[1,"double",2,"gap","15px"],[1,"btn_badge"],["class","stock-badge-list",4,"ngIf"],[1,"btn_fovory"],[1,"ri-heart-line","favorite-icon-list"],[1,"stock-badge-list"],[1,"empty-category"],[1,"li_list_produit_select"],[1,"nombre_select"],[1,"name_produit_select"],[2,"margin","0"],[1,"price_produit"],[1,"icon_close_select",3,"click"],[1,"ri-close-circle-fill"],[1,"payment-popup-overlay"],[1,"payment-popup"],[1,"popup-header"],[1,"close-btn",3,"click"],[1,"ri-close-line"],[1,"section_popup_paiement"],[1,"cadre_section_contenu_left_prise"],[1,"section_contenu_left_prise"],[1,"montant_paiement"],[1,"moyen_paiement_price"],[1,"moyen_paiement"],[1,"moyen_prise_du"],[1,"price_du"],[1,"ri-close-line","clear-icon",3,"click"],[1,"paiement_restant"],[1,"moyen_paiement_restant"],[1,"discount-input"],[1,"btn-currency"],["type","text","placeholder","0",1,"input-discount"],[1,"btn-percent"],[1,"discount-label"],[1,"section_contenu_right",2,"background-color","#ffffff","height","80vh","box-shadow","rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"],[1,"methode_paiement"],[1,"cadre_paiement",3,"click"],[1,"img_paiement"],["src","assets/img/payer.png","alt",""],[1,"title_paiement"],[1,"img_paiement","img_paiement_carte"],["src","assets/img/carte-de-credit.png","alt",""],[1,"img_paiement","img_paiement_compte"],["src","assets/img/compte-rendu.png","alt",""],[1,"client_facture"],[1,"keypad",2,"padding-top","5px"],[1,"btn-payment-pop",3,"click","disabled"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p",5),t.bIt("click",function(){return n.showAllProducts()}),t.EFF(6," Toutes les cat\xe9gories"),t.k0s()(),t.DNE(7,k,2,1,"ul",6),t.k0s(),t.j41(8,"div",7),t.DNE(9,l,3,2,"div",8)(10,M,4,2,"div",9),t.k0s()()(),t.j41(11,"div",10)(12,"div",11)(13,"ul",12),t.DNE(14,E,16,14,"li",13),t.k0s()(),t.j41(15,"div",14)(16,"div",15)(17,"span"),t.EFF(18,"Taxes"),t.k0s(),t.j41(19,"span"),t.EFF(20,"00 CFA"),t.k0s()(),t.j41(21,"div",16)(22,"strong"),t.EFF(23,"Total"),t.k0s(),t.j41(24,"strong"),t.EFF(25),t.nI1(26,"currency"),t.k0s()()(),t.j41(27,"div",17)(28,"div",18)(29,"div",19)(30,"p"),t.EFF(31,"Client"),t.k0s()(),t.j41(32,"div",20)(33,"p"),t.EFF(34,"Facture"),t.k0s(),t.nrm(35,"input",21),t.k0s()()(),t.j41(36,"div",22)(37,"button",23),t.bIt("click",function(){return n.handleKeyPress("1")}),t.EFF(38,"1"),t.k0s(),t.j41(39,"button",23),t.bIt("click",function(){return n.handleKeyPress("2")}),t.EFF(40,"2"),t.k0s(),t.j41(41,"button",23),t.bIt("click",function(){return n.handleKeyPress("3")}),t.EFF(42,"3"),t.k0s(),t.j41(43,"button",24),t.EFF(44,"Qt\xe9"),t.k0s(),t.j41(45,"button",23),t.bIt("click",function(){return n.handleKeyPress("4")}),t.EFF(46,"4"),t.k0s(),t.j41(47,"button",23),t.bIt("click",function(){return n.handleKeyPress("5")}),t.EFF(48,"5"),t.k0s(),t.j41(49,"button",23),t.bIt("click",function(){return n.handleKeyPress("6")}),t.EFF(50,"6"),t.k0s(),t.j41(51,"button",25),t.EFF(52,"%"),t.k0s(),t.j41(53,"button",23),t.bIt("click",function(){return n.handleKeyPress("7")}),t.EFF(54,"7"),t.k0s(),t.j41(55,"button",23),t.bIt("click",function(){return n.handleKeyPress("8")}),t.EFF(56,"8"),t.k0s(),t.j41(57,"button",23),t.bIt("click",function(){return n.handleKeyPress("9")}),t.EFF(58,"9"),t.k0s(),t.j41(59,"button",25),t.EFF(60,"Prix"),t.k0s(),t.j41(61,"button",23),t.bIt("click",function(){return n.handleKeyPress("+/-")}),t.EFF(62,"+/-"),t.k0s(),t.j41(63,"button",23),t.bIt("click",function(){return n.handleKeyPress("0")}),t.EFF(64,"0"),t.k0s(),t.j41(65,"button",23),t.bIt("click",function(){return n.handleKeyPress(",")}),t.EFF(66,","),t.k0s(),t.j41(67,"button",26),t.bIt("click",function(){return n.handleKeyPress("backspace")}),t.nrm(68,"i",27),t.k0s()(),t.j41(69,"div",28)(70,"button",29),t.bIt("click",function(){return n.openPaymentPopup()}),t.EFF(71,"Paiement"),t.k0s()()()(),t.DNE(72,F,108,31,"div",30)),2&o&&(t.R7$(4),t.AVh("selected",null===n.selectedCategoryId),t.R7$(3),t.Y8G("ngIf",n.categories.length),t.R7$(2),t.Y8G("ngIf",n.isListView),t.R7$(),t.Y8G("ngIf",!n.isListView),t.R7$(4),t.Y8G("ngForOf",n.getCartItems()),t.R7$(11),t.JRh(t.ii3(26,8,n.getTotalCart(),"CFA ","symbol","1.0-0")),t.R7$(47),t.Y8G("ngIf",n.showPaymentPopup))},dependencies:[P.YN,p.MD,p.Sq,p.bT,p.oe,P.X1],styles:['@charset "UTF-8";ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.section_contenu_container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 380px;flex:1;min-height:0}.section_contenu_left[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0}.section_favory_produit[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;margin-top:12px;flex:1;min-height:0}.section_favory[_ngcontent-%COMP%]{border-right:1px solid #d1d1d1;height:100vh}.section_favory[_ngcontent-%COMP%]   .ul_section_favory[_ngcontent-%COMP%]   .li_section_favory[_ngcontent-%COMP%]{background-color:#cde3fa;padding:5px 10px}.double[_ngcontent-%COMP%]   .icon_favory[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.title_favory[_ngcontent-%COMP%]{margin:0}.titre_categorie[_ngcontent-%COMP%]{padding-left:10px}.titre_categorie[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:10px;font-weight:600}.ul_li_name_categorie[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:7px 10px;margin-bottom:8px;font-size:13px;cursor:pointer}.ul_li_name_categorie[_ngcontent-%COMP%]:hover{background-color:#cde3fa}.allCate[_ngcontent-%COMP%]{cursor:pointer;padding:10px 0;letter-spacing:.6px;font-weight:500}.section_produit[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(100vh - 75px);min-height:0}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:2px}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0672e433;border-radius:5px}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.li_list_produit_select[_ngcontent-%COMP%]{background-color:#f4f4f4;display:flex;align-items:center;justify-content:space-between;padding:8px 10px;margin:6px 8px;border-radius:5px}.nombre_select[_ngcontent-%COMP%], .name_produit_select[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price_produit[_ngcontent-%COMP%]{font-size:12px}.icon_close_select[_ngcontent-%COMP%]{cursor:pointer}.icon_close_select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.icon_close_select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem;padding:0 10px 10px}.product-card[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:8px;box-shadow:0 2px 5px #0000000d;overflow:hidden;display:flex;flex-direction:column;align-items:center;padding-bottom:10px}.stock-badge[_ngcontent-%COMP%]{position:absolute;top:8px;left:5px;background:#fde047;color:#333;font-size:.8rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.product-card.disabled[_ngcontent-%COMP%], .li_list.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;pointer-events:none}.stock-badge-list[_ngcontent-%COMP%]{background:#fde047;color:#333;font-size:.8rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.product-img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;margin-top:10px;box-shadow:#0000001a 0 1px 2px}.favorite-icon[_ngcontent-%COMP%]{position:absolute;top:2px;right:3px;font-size:1.2rem;color:#0672e4;cursor:pointer}.favorite-icon.ri-heart-fill[_ngcontent-%COMP%]{color:#0672e4}.favorite-icon-list[_ngcontent-%COMP%]{font-size:1.2rem;color:#0672e4;cursor:pointer}.favorite-icon-list.ri-heart-fill[_ngcontent-%COMP%]{color:#0672e4}.card-body[_ngcontent-%COMP%]{text-align:center;margin:.5rem 0;flex:1}.product-name[_ngcontent-%COMP%]{font-weight:500;margin:.25rem 0}.product-stock[_ngcontent-%COMP%]{font-size:10px;color:#666;margin:.15rem 0}.product-price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;margin:0;font-size:13px}.btn-decrement[_ngcontent-%COMP%]{border:none;background:#f3f4f6;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;pointer-events:auto!important;z-index:10}.btn-decrement[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}.bottom_price_sub[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:0 10px}.section_contenu_right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;box-shadow:#0000000a 0 3px 5px;padding-bottom:10px}.list_produit_select[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.summary_panel[_ngcontent-%COMP%]{background:#f1f5f9;padding:4px 10px;margin:0 10px}.summary_panel[_ngcontent-%COMP%]   .double_row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.25rem 0;border-bottom:1px solid #e2e8f0}.summary_panel[_ngcontent-%COMP%]   .double_row.total[_ngcontent-%COMP%]{font-size:1.1rem;padding-top:.5rem;border-bottom:none}.double_row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.double_row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px}.keypad[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:5px;padding:5px 10px}.keypad[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3.5rem;background:#f1f5f9;border:none;font-size:1rem;cursor:pointer;border-radius:4px}.keypad[_ngcontent-%COMP%]   button.backspace[_ngcontent-%COMP%]{font-size:1.2rem}.btn_content[_ngcontent-%COMP%]{margin:0 10px}.btn-payment[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:68px;background:#2978f2;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.name_stock_list[_ngcontent-%COMP%]{line-height:1.5}.product-stock-list[_ngcontent-%COMP%]{font-size:10px;color:#666}.name_stock_list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .moyen_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price_du[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .moyen_paiement_restant[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .paiement_btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}ul.ul_list[_ngcontent-%COMP%]{margin:0 10px}.li_list[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;box-shadow:#64646f10 0 7px 29px;padding:0 10px;border-radius:5px;margin-bottom:10px}.img_product_list[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;justify-content:center;margin:5px 0}.img_product_list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px;cursor:pointer;box-shadow:#0000000d 0 0 0 1px}.payment-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1000}.payment-popup[_ngcontent-%COMP%]{background-color:#fff;width:85%;height:90vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden;position:relative}.payment-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer;transition:color .2s}.payment-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.section_popup_paiement[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;flex:1;min-height:0;margin:30px 80px}.btn-payment-pop[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#2978f2;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.methode_paiement[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:15px;margin:20px 10px}.cadre_paiement[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;height:135px;box-shadow:#0000000d 0 6px 24px,#00000014 0 0 0 1px;padding:10px 0;cursor:pointer}.cadre_paiement[_ngcontent-%COMP%]:hover{border:.5px solid #0672e4}.img_paiement[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;margin:0 auto;display:flex;justify-content:center;align-items:center}.img_paiement[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.title_paiement[_ngcontent-%COMP%]{margin-top:22px}.title_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center}.montant_paiement[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.double[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.cadre_section_contenu_left_prise[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;border-radius:8px;align-items:center}.section_contenu_left_prise[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.montant_paiement[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;gap:8px}.montant_paiement[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:600;margin:0}.montant_paiement[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#666}.moyen_paiement_price[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#cde3fa;gap:16px;border-radius:5px;padding:10px}.moyen_paiement[_ngcontent-%COMP%]{background:#e6f3ff;border:1px solid #C1E0FF;border-radius:8px;padding:8px 16px;text-align:center;cursor:pointer}.moyen_paiement.selected[_ngcontent-%COMP%]{background:#d0ebff;border-color:#90cdf4}.moyen_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.moyen_prise_du[_ngcontent-%COMP%]   .price_du[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;color:#333}.clear-icon[_ngcontent-%COMP%]{font-size:18px;color:#e53e3e;cursor:pointer}.discount-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;border-bottom:1px solid #ccc;padding-bottom:8px}.btn-currency[_ngcontent-%COMP%], .btn-percent[_ngcontent-%COMP%]{background:#f0f0f0;border:none;border-radius:4px;font-size:16px;cursor:pointer}.btn-currency[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px!important}.btn-percent[_ngcontent-%COMP%]{padding:3px 15px;background-color:#cde3fa;border:1px solid #0672e4}.input-discount[_ngcontent-%COMP%]{width:100px;border:none;outline:none;text-align:right;font-size:16px;text-align:center}.discount-unit[_ngcontent-%COMP%]{font-size:18px;color:#333}.discount-label[_ngcontent-%COMP%]{text-align:center;position:relative;top:-18px}.discount-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;font-size:10px;color:#666}.paiement_restant[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 30px}.btn_facture[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.btn_facture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.paiement_btn[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:12px;border-radius:5px}.paiement_btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}.btn_client[_ngcontent-%COMP%]{cursor:pointer}.btn_client[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.double_client_facture[_ngcontent-%COMP%]{gap:5px;display:grid;grid-template-columns:repeat(2,1fr);padding:0 10px}.selected[_ngcontent-%COMP%]{background-color:#0672e4!important;color:#fff!important}.selected[_ngcontent-%COMP%]   .name_categorie[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{color:#fff!important}.selected_mode_pay[_ngcontent-%COMP%]{border:1px solid #2f7dd1}.keypad[_ngcontent-%COMP%]   button.btn_keypad_active[_ngcontent-%COMP%]{border:1px solid #2f7dd1;background-color:#e0efff}.cadre_paiement.selected[_ngcontent-%COMP%]{border:2px solid #4CAF50;background-color:#f0fff4}.btn-payment-pop[_ngcontent-%COMP%]:disabled{background-color:#f4f4f4;cursor:not-allowed;color:#acacac}.price_du[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em}']})}}return i})()},9293:(O,h,r)=>{r.d(h,{R:()=>x});var p=r(1626),P=r(4412),u=r(5558),t=r(8810),b=r(8141),m=r(9437),C=r(1985),y=r(2525),g=r(4438),k=r(8026);let x=(()=>{class _{constructor(l,s){this.http=l,this.usersService=s,this.apiUrl=y.c.apiBaseUrl,this.categoriesSubject=new P.t([]),this.categories$=this.categoriesSubject.asObservable()}ajouterCategorie(l){return this.usersService.getValidAccessToken().pipe((0,u.n)(s=>{if(!s)return console.error("\u26a0\ufe0f Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),(0,t.$)(()=>new Error("Aucun token valide trouv\xe9"));const d=new p.Lr({Authorization:`Bearer ${s}`});return this.http.post(`${this.apiUrl}/createCategory`,l,{headers:d}).pipe((0,b.M)(v=>{this.categoriesSubject.next([...this.categoriesSubject.value,v])}))}),(0,m.W)(s=>(console.error("Erreur lors de l'ajout de la cat\xe9gorie:",s),(0,t.$)(()=>s))))}getCategories(){return this.usersService.getValidAccessToken().pipe((0,u.n)(l=>{if(!l)return console.error("\u26a0\ufe0f Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),new C.c;const s=(new p.Lr).set("Authorization",`Bearer ${l}`);return console.log("\u{1f539} En-t\xeates envoy\xe9s :",s),this.http.get(`${this.apiUrl}/allCategory`,{headers:s}).pipe((0,b.M)(d=>{this.categoriesSubject.next(d)}))}),(0,m.W)(l=>(console.error("Erreur lors de la r\xe9cup\xe9ration des cat\xe9gories:",l),(0,t.$)(()=>l))))}deleteCategorie(l){return this.usersService.getValidAccessToken().pipe((0,u.n)(s=>{if(!s)return console.error("\u26a0\ufe0f Token JWT manquant pour suppression cat\xe9gorie."),(0,t.$)(()=>new Error("Token manquant"));const d=(new p.Lr).set("Authorization",`Bearer ${s}`);return console.log("\u{1f539} Token envoy\xe9 pour DELETE cat\xe9gorie :",d),this.http.delete(`${this.apiUrl}/deleteCategory/${l}`,{headers:d,responseType:"text"})}),(0,m.W)(s=>(console.error("\u274c Erreur API DELETE :",s),(0,t.$)(()=>s))))}static{this.\u0275fac=function(s){return new(s||_)(g.KVO(p.Qq),g.KVO(k.g))}}static{this.\u0275prov=g.jDH({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()}}]);