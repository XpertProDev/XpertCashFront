{"version":3,"file":"src_app_admin-page_facture-proforma_detail-facture-proforma-apercu_detail-facture-proforma-ap-7c87c0.js","mappings":"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","sources":["./src/app/admin-page/MODELS/number-to-words.pipe.ts","./src/app/admin-page/SERVICES/entreprise-service.ts","./src/app/admin-page/SERVICES/facture-preview-service.ts","./src/app/admin-page/facture-proforma/detail-facture-proforma-apercu/detail-facture-proforma-apercu.component.ts","./src/app/admin-page/facture-proforma/detail-facture-proforma-apercu/detail-facture-proforma-apercu.component.html"],"sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({ name: 'enLettres' })\nexport class EnLettresPipe implements PipeTransform {\n  private unite = ['zéro', 'un', 'deux', 'trois', 'quatre', 'cinq', 'six', 'sept', 'huit', 'neuf'];\n  private dizaine = ['', '', 'vingt', 'trente', 'quarante', 'cinquante', 'soixante'];\n  private dizaineSpecial = ['dix', 'onze', 'douze', 'treize', 'quatorze', 'quinze', 'seize'];\n\n  transform(value: number): string {\n    if (isNaN(value)) {\n      return '';\n    }\n\n    const n = Math.floor(value);\n    const words = this.numberToWords(n) + ' Francs CFA';\n    // Mettre en majuscule la première lettre\n    return words.charAt(0).toUpperCase() + words.slice(1);\n  }\n\n  private numberToWords(n: number): string {\n    if (n < 10) {\n      return this.unite[n];\n    }\n    if (n < 17) {\n      return this.dizaineSpecial[n - 10];\n    }\n    if (n < 20) {\n      return 'dix-' + this.unite[n - 10];\n    }\n    if (n < 70) {\n      const d = Math.floor(n / 10);\n      const reste = n % 10;\n      return this.dizaine[d] + (reste ? '-' + this.unite[reste] : '');\n    }\n    if (n < 80) {\n      return 'soixante-' + this.numberToWords(n - 60);\n    }\n    if (n < 100) {\n      return 'quatre-vingt' + (n % 20 ? '-' + this.numberToWords(n % 20) : '');\n    }\n    if (n < 1000) {\n      const c = Math.floor(n / 100);\n      const reste = n % 100;\n      return (c > 1 ? this.unite[c] + '-cent' : 'cent') + (reste ? '-' + this.numberToWords(reste) : '');\n    }\n    if (n < 1000000) {\n      const m = Math.floor(n / 1000);\n      const reste = n % 1000;\n      return (m > 1 ? this.numberToWords(m) + ' mille' : 'mille') + (reste ? ' ' + this.numberToWords(reste) : '');\n    }\n    if (n < 1000000000) {\n        const millions = Math.floor(n / 1000000);\n        const reste = n % 1000000;\n        return (millions > 1 ? this.numberToWords(millions) + ' millions' : 'un million') +\n          (reste ? ' ' + this.numberToWords(reste) : '');\n    }\n    return 'nombre trop grand';\n  }\n}\n","import { HttpClient, HttpHeaders } from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\nimport { BehaviorSubject, catchError, Observable, switchMap, tap, throwError } from \"rxjs\";\nimport { Entreprise } from \"../MODELS/entreprise-model\";\nimport { EntrepriseClient } from \"../MODELS/entreprise-clients-model\";\nimport { environment } from \"src/environments/environment\";\nimport { UsersService } from \"./users.service\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EntrepriseService {\n    private apiUrl = environment.apiBaseUrl;\n  \n\n  private entrepriseSubject = new BehaviorSubject<Entreprise[]>([]);\n  public entreprise$ = this.entrepriseSubject.asObservable(); \n  constructor(private http: HttpClient, private usersService: UsersService) { }\n\n  // Dans client.service.ts\n// Dans entreprise.service.ts\n getListEntreprises(): Observable<EntrepriseClient[]> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      });\n      return this.http.get<EntrepriseClient[]>(`${this.apiUrl}/entreprises`, { headers });\n    }),\n    catchError(error => {\n      let errorMsg = 'Erreur inconnue';\n      if (error.error instanceof ErrorEvent) {\n        errorMsg = `Erreur: ${error.error.message}`;\n      } else if (error.status === 404) {\n        errorMsg = 'Aucune entreprise trouvée';\n      }\n      return throwError(() => new Error(errorMsg));\n    })\n  );\n}\n\n\n  // Ajouter une entreprise\n addEntreprise(entreprise: Entreprise): Observable<Entreprise> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      });\n\n      return this.http.post<Entreprise>(`${this.apiUrl}/entreprise-clients`, entreprise, { headers });\n    }),\n    tap((newEntreprise) => {\n      const currentEntreprise = this.entrepriseSubject.value;\n      this.entrepriseSubject.next([...currentEntreprise, newEntreprise]);\n    }),\n    catchError(error => {\n      let errorMsg = 'Erreur inconnue';\n      if (error.error instanceof ErrorEvent) {\n        errorMsg = `Erreur: ${error.error.message}`;\n      } else if (error.status === 400) {\n        errorMsg = error.error || 'Données invalides';\n      }\n      return throwError(() => new Error(errorMsg));\n    })\n  );\n}\n\n\n  // List de tout les entreprises\n getListEntreprise(): Observable<Entreprise[]> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Token vide ou non défini ! Vérifiez que l\\'utilisateur est bien connecté.');\n        return throwError(() => new Error('Token manquant'));\n      }\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n      console.log(\"En-têtes envoyés : \", headers);\n\n      return this.http.get<Entreprise[]>(`${this.apiUrl}/entreprises`, { headers });\n    }),\n    tap(data => {\n      this.entrepriseSubject.next(data);\n    }),\n    catchError(error => {\n      console.error('Erreur lors de la récupération des entreprises:', error);\n      return throwError(() => error);\n    })\n  );\n}\n\n\n\n  // Recuperer information d'une entreprise de la user connecter\n getEntrepriseById(id: number): Observable<Entreprise> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Token manquant');\n        return throwError(() => new Error('Token manquant'));\n      }\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      });\n      return this.http.get<Entreprise>(`${this.apiUrl}/entreprises/${id}`, { headers });\n    }),\n    catchError(error => {\n      let errorMsg = 'Erreur inconnue';\n      if (error.error instanceof ErrorEvent) {\n        errorMsg = `Erreur: ${error.error.message}`;\n      } else if (error.status === 404) {\n        errorMsg = 'Entreprise non trouvée';\n      }\n      return throwError(() => new Error(errorMsg));\n    })\n  );\n}\n\n\n  updateEntreprise(id: number, formData: FormData): Observable<string> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        return throwError(() => new Error('Token manquant'));\n      }\n\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}`\n      });\n\n      return this.http.patch(`${this.apiUrl}/updateEntreprise/${id}`, formData, {\n        headers,\n        responseType: 'text' // réponse en texte brut\n      });\n    }),\n    catchError(error => {\n      let errorMsg = 'Erreur inconnue';\n      if (error.error instanceof ErrorEvent) {\n        errorMsg = `Erreur: ${error.error.message}`;\n      } else if (error.status === 400) {\n        errorMsg = error.error || 'Données invalides';\n      }\n      return throwError(() => new Error(errorMsg));\n    })\n  );\n}\n\n\n  // updateEntreprise(id: number, formData: FormData): Observable<any> {\n  //   const token = localStorage.getItem('accessToken') || '';\n  //   const headers = new HttpHeaders({\n  //     'Authorization': `Bearer ${token}`\n  //   });\n\n  //   return this.http.patch(`${this.apiUrl}/updateEntreprise/${id}`, formData, { headers }).pipe(\n  //     catchError(error => {\n  //       let errorMsg = 'Erreur inconnue';\n  //       if (error.error instanceof ErrorEvent) {\n  //         errorMsg = `Erreur: ${error.error.message}`;\n  //       } else if (error.status === 400) {\n  //         errorMsg = error.error || 'Données invalides';\n  //       }\n  //       return throwError(() => new Error(errorMsg));\n  //     })\n  //   );\n  // }\n\n  // Get entreprise d'un user\n  getEntrepriseInfo(): Observable<Entreprise> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        return throwError(() => new Error('Aucun token trouvé'));\n      }\n\n      const headers = new HttpHeaders({\n        Authorization: `Bearer ${token}`\n      });\n\n      return this.http.get<Entreprise>(`${this.apiUrl}/myEntreprise`, { headers }).pipe(\n        tap(entreprise => {\n          localStorage.setItem('entreprise', JSON.stringify(entreprise));\n        })\n      );\n    }),\n    catchError(error => {\n      console.error('Erreur récupération info entreprise:', error);\n      return throwError(() => error);\n    })\n  );\n}\n\n\n  // Simpl dcodage JWT pour vérifier si le token est expiré\n  decodeJwt(token: string): any {\n    return JSON.parse(atob(token.split('.')[1]));\n  }\n  \n  // Vérifier si le token est expiré\n  isTokenExpired(decodedToken: any): boolean {\n    const expirationDate = new Date(decodedToken.exp * 1000);\n    return expirationDate < new Date();\n  }\n    \n  // Rafraîchir le token avec un refresh token (si applicable)\n  getNewTokenFromApi(): Observable<{ token: string }> {\n    const refreshToken = localStorage.getItem('refreshToken');\n    return this.http.post<{ token: string }>(`${this.apiUrl}/refresh-token`, { refreshToken });\n  }\n\n \n}","// src/app/services/facture-preview.service.ts\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { FactureProForma } from '../MODELS/FactureProForma.model';\n\n@Injectable({ providedIn: 'root' })\nexport class FacturePreviewService {\n  private previewSubject = new BehaviorSubject<FactureProForma | null>(null);\n\n  setPreview(data: FactureProForma) {\n    this.previewSubject.next(data);\n  }\n\n  getPreview(): Observable<FactureProForma | null> {\n    return this.previewSubject.asObservable();\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FactureProForma } from '../../MODELS/FactureProForma.model';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { EntrepriseService } from '../../SERVICES/entreprise-service';\nimport { FactureProFormaService } from '../../SERVICES/factureproforma-service';\nimport { UsersService } from '../../SERVICES/users.service';\nimport { EnLettresPipe } from '../../MODELS/number-to-words.pipe';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CustomNumberPipe } from '../../MODELS/customNumberPipe';\nimport { FacturePreviewService } from '../../SERVICES/facture-preview-service';\nimport { jsPDF } from 'jspdf';\nimport 'jspdf-autotable';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-detail-facture-proforma-apercu',\n  standalone: true,\n  imports: [CommonModule, FormsModule, CustomNumberPipe, EnLettresPipe],\n  templateUrl: './detail-facture-proforma-apercu.component.html',\n  styleUrl: './detail-facture-proforma-apercu.component.scss'\n})\nexport class DetailFactureProformaApercuComponent implements OnInit {\n  facture: FactureProForma | null = null;\n\n  nom: string | null = null;\n  siege!: string;\n  email!: string;\n  logo: string | null = null;\n  secteur!: string;\n  telephone!: string;\n  adresse!: string;\n  nif!: string;\n  banque!: string;\n  nina!: string;\n  pays!: string;\n  rccm!: string;\n  siteWeb!: string;\n  signataire!: string;\n  signataireNom!: string;\n  tauxTva!: number;\n\n  signaturNum: string | null = null;\n  cachetNum: string | null = null;\n\n  private apiUrl = environment.imgUrl;\n  fallbackLogo = `${this.apiUrl}/defaultLogo/Votre.png`;\n\n\n  constructor(\n    private previewService: FacturePreviewService,\n    public router: Router,\n    private entrepriseService: EntrepriseService\n  ) {}\n\n  ngOnInit(): void {\n    this.getFacturePreview();\n    this.getUserEntrepriseInfo();\n  }\n\n  getFacturePreview() {\n    this.previewService.getPreview().subscribe(data => {\n      if (!data) {\n        this.router.navigate(['/facture-proforma']);\n      } else {\n        this.facture = data;\n      }\n    });\n  }\n\n  navigateBack() {\n    if (this.facture?.id) {\n      this.router.navigate(['/facture-proforma-details', this.facture.id]);\n    } else {\n      console.error('ID de la facture non disponible');\n      // Optionnel : Naviguer vers une page par défaut, par exemple :\n      this.router.navigate(['/facture-proforma']);\n    }\n  }\n\n  getUserEntrepriseInfo(): void {\n    this.entrepriseService.getEntrepriseInfo().subscribe({\n      next: (entreprise) => {\n        this.nom = entreprise.nom;\n        this.siege = entreprise.siege;\n        this.email = entreprise.email;\n        this.logo = `${this.apiUrl}${entreprise.logo}`;\n        this.secteur = entreprise.secteur;\n        this.telephone = entreprise.telephone;\n        this.adresse = entreprise.adresse;\n        this.nif = entreprise.nif;\n        this.banque = entreprise.banque;\n        this.nina = entreprise.nina;\n        this.pays = entreprise.pays;\n        this.rccm = entreprise.rccm;\n        this.siteWeb = entreprise.siteWeb;\n        this.signataire = entreprise.signataire;\n        this.signataireNom = entreprise.signataireNom;\n        this.tauxTva = entreprise.tauxTva;\n        \n        this.signaturNum = entreprise.signaturNum ? `${this.apiUrl}${entreprise.signaturNum}` : 'assets/img/sinum.png';\n        this.cachetNum = entreprise.cachetNum ? `${this.apiUrl}${entreprise.cachetNum}` : 'assets/img/tampon.png';\n      },\n      error: (err) => {\n        console.error(\"Erreur lors de la récupération des infos utilisateur :\", err);\n      }\n    });\n  }\n\n  getLegalInfo(): string {\n    const parts = [];\n    \n    if (this.nina) {\n      parts.push(`NINA : ${this.nina}`);\n    }\n    \n    if (this.rccm) {\n      parts.push(`RCCM : ${this.rccm}`);\n    }\n    \n    if (this.nif) {\n      parts.push(`NIF : ${this.nif}`);\n    }\n    \n    if (this.banque) {\n      parts.push(`Banque : ${this.banque}`);\n    }\n    \n    return parts.join(' ; ');\n  }\n\n  getAddressInfo(): string {\n    const adresse = this.adresse;\n    const siege = this.siege;\n    const pays = this.pays;\n    \n    if (adresse && siege && pays) {\n      return `Adresse : ${adresse} / ${siege}-${pays}`;\n    } else if (adresse && siege) {\n      return `Adresse : ${adresse} / ${siege}`;\n    } else if (adresse && pays) {\n      return `Adresse : ${adresse} / ${pays}`;\n    } else if (siege && pays) {\n      return `Adresse : ${siege} / ${pays}`;\n    } else if (adresse) {\n      return `Adresse : ${adresse}`;\n    } else if (siege) {\n      return `Adresse : ${siege}`;\n    } else if (pays) {\n      return `Adresse : ${pays}`;\n    }\n    \n    return '';\n  }\n\n  private getImageFromUrl(url: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n      const img = new Image();\n      img.setAttribute('crossOrigin', 'anonymous');\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext('2d');\n        ctx?.drawImage(img, 0, 0);\n        resolve(canvas.toDataURL('image/png'));\n      };\n      img.onerror = error => reject(error);\n      img.src = url;\n    });\n  }\n\n  async download() {\n\n    const doc = new jsPDF({ unit: 'mm', format: 'a4' });\n\n    // 2. Logo\n    try {\n      if (this.logo) {\n        const imgData = this.logo.startsWith('data:image/') ? this.logo : await this.getImageFromUrl(this.logo);\n        const formatMatch = imgData.match(/^data:image\\/(png|jpeg|gif);/);\n        const format = formatMatch ? formatMatch[1].toUpperCase() : 'PNG';\n        doc.addImage(imgData, format, 15, 10, 47, 17);\n      }\n    } catch (imgErr) {\n      // Logo non chargé, on continue\n    }\n\n    // 3. Infos société à droite du logo\n    const infoX = 70;\n    const infoY_Start = 12;\n    doc.setFontSize(10);\n    doc.setFont('helvetica', 'bold');\n    doc.text(this.nom || 'Nom Entreprise', infoX, infoY_Start);\n    doc.setFont('helvetica', 'normal');\n    doc.text(`Secteur : ${this.secteur || ''}`, infoX, infoY_Start + 5);\n    const emailText = `Email : ${this.email || ''}`;\n    doc.text(emailText, infoX, infoY_Start + 10);\n    const emailWidth = doc.getTextWidth(emailText);\n    doc.text(`Téléphone : ${this.telephone || ''}`, infoX + emailWidth + 5, infoY_Start + 10);\n\n    // 4. Double ligne\n    const lastInfoY = infoY_Start + 10;\n    const gapBelowInfo = 7;\n    const sepY = lastInfoY + gapBelowInfo;\n    doc.setDrawColor(200);\n    doc.line(15, sepY, 195, sepY);\n    doc.line(15, sepY + 1.5, 195, sepY + 1.5);\n\n    // 5. Titre principal\n    const gapBelowSep = 8;\n    const titleY = sepY + gapBelowSep;\n    doc.setFontSize(14);\n    doc.setFont('helvetica', 'bold');\n    doc.setTextColor(85, 85, 85);\n    doc.text(`FACTURE PROFORMA ${this.facture?.numeroFacture}`, 105, titleY, { align: 'center' });\n    doc.setDrawColor(0);\n    const titleLineWidth = 90;\n    const titleLineX = 105 - titleLineWidth / 2;\n    // doc.line(titleLineX, titleY + 1.5, titleLineX + titleLineWidth, titleY + 1.5);\n\n    // 6. Date à droite\n    doc.setFontSize(10);\n    doc.setFont('helvetica', 'normal');\n    doc.text(\n      `${this.siege || ''}, le ${\n        this.facture?.dateCreation\n          ? new Date(this.facture?.dateCreation).toLocaleDateString('fr-FR', { day: '2-digit', month: 'long', year: 'numeric' })\n          : ''\n      }`,\n      195,\n      titleY + 10,\n      { align: 'right' }\n    );\n\n    // 7. Bloc client/objet\n    const clientObjectBlockY = titleY + 20;\n    let currentY = clientObjectBlockY;\n    const labelX = 15;\n    if (this.facture) {\n      const isClient = !!this.facture.client;\n      const isEntreprise = !!this.facture.entrepriseClient;\n      const label = isClient ? 'Doit :' : isEntreprise ? 'Doit :' : 'Doit :';\n      const nom = isClient\n        ? this.facture.client?.nomComplet ?? 'Non spécifié'\n        : isEntreprise\n          ? this.facture.entrepriseClient?.nom ?? 'Non spécifié'\n          : 'Non spécifié';\n      doc.setFont('helvetica', 'bold');\n      doc.text(label, labelX, currentY);\n      doc.setFont('helvetica', 'normal');\n      doc.text(nom, labelX + doc.getTextWidth(label) + 2, currentY);\n    }\n    currentY += 7;\n    doc.setFont('helvetica', 'bold');\n    doc.text('Objet :', labelX, currentY);\n    doc.setFont('helvetica', 'normal');\n    doc.text(this.facture?.description || '', labelX + doc.getTextWidth('Object :') + 2, currentY);\n\n    // 8. Tableau produits & totaux\n    const tableStartY = currentY + 10;\n    const customNumberPipe = new CustomNumberPipe();\n    const tableData = this.facture?.lignesFacture.map(ligne => [\n      ligne.produit.nom,\n      ligne.ligneDescription,\n      customNumberPipe.transform(ligne.prixUnitaire),\n      ligne.quantite.toString(),\n      customNumberPipe.transform(ligne.prixUnitaire * ligne.quantite)\n    ]);\n    // Ajout des totaux comme dans ton exemple\n    tableData?.push([\n      { content: 'Total HT', colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n      { content: customNumberPipe.transform(this.facture?.totalHT || 0), styles: { halign: 'right' } }\n    ] as any);\n\n    // Remise\n    if (this.facture?.remise && this.facture.remise > 0) {\n      tableData?.push([\n        { content: `Remise (${this.facture.remise}%)`, colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n        { content: customNumberPipe.transform(this.facture.totalHT * this.facture.remise / 100), styles: { halign: 'right' } }\n      ] as any);\n      tableData?.push([\n        { content: 'Montant Commercial', colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n        { content: customNumberPipe.transform(this.facture.totalHT - (this.facture.totalHT * this.facture.remise / 100)), styles: { halign: 'right' } }\n      ] as any);\n    }\n\n    // TVA\n    if (this.facture?.tva) {\n      const tauxPourcent = Math.round((this.tauxTva ?? 0) * 100);\n      tableData?.push([\n        { content: `TVA (${tauxPourcent} %)`, colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n        { content: customNumberPipe.transform((this.facture.totalHT - (this.facture.totalHT * (this.facture.remise ?? 0) / 100)) * this.tauxTva), styles: { halign: 'right' } }\n      ] as any);\n      tableData?.push([\n        { content: 'Montant TTC', colSpan: 4, styles: { fontStyle: 'normal', halign: 'center' } },\n        { content: customNumberPipe.transform(this.facture.totalFacture), styles: { fontStyle: 'normal', halign: 'right' } }\n      ] as any);\n    }\n\n    (doc as any).autoTable({\n      head: [['Désignation', 'Description', 'Prix Unitaire (FCFA)', 'Quantité', 'Montant (FCFA)']],\n      body: tableData,\n      startY: tableStartY,\n      theme: 'grid',\n      styles: { fontSize: 9, cellPadding: 2, lineWidth: 0.1, lineColor: [221, 221, 221]},\n      headStyles: { fillColor: [242, 242, 242], textColor: [0, 0, 0], fontSize: 8, halign: 'center', fontStyle: 'bold'},\n      bodyStyles: { textColor: [0,0,0], fillColor: null },\n      margin: { left: 15, right: 15 },\n      columnStyles: {\n        0: { halign: 'left', cellWidth: 30 },\n        1: { halign: 'left', cellWidth: 60 },\n        2: { halign: 'center', cellWidth: 33 },\n        3: { halign: 'center', cellWidth: 20 },\n        4: { halign: 'right', cellWidth: 35 },\n      },\n      tableStyle: { borderColor: [200, 200, 200], borderWidth: 0.1 }\n    });\n\n    // 9. Montant en lettres\n    let y_after_table = (doc as any).lastAutoTable.finalY;\n    let y_amount_in_words = y_after_table + 18;\n    const libelle = 'Arrêté la présente facture à la somme de : ';\n    doc.setFont('helvetica', 'bold');\n    doc.setFontSize(8);\n    doc.text(libelle, 15, y_amount_in_words);\n    const libelleWidth = doc.getTextWidth(libelle);\n    const startX = 15 + libelleWidth;\n    doc.setFont('helvetica', 'normal');\n    doc.setFontSize(9);\n    const enLettresPipe = new EnLettresPipe();\n    const montantLettreRaw = enLettresPipe.transform(this.facture?.totalFacture || 0);\n    const maxWidth = 195 - startX;\n    const lines = doc.splitTextToSize(montantLettreRaw, maxWidth);\n    doc.text(lines[0], startX, y_amount_in_words);\n    let currentAmountInWordsY = y_amount_in_words;\n    for (let i = 1; i < lines.length; i++) {\n      currentAmountInWordsY += 6;\n      doc.text(lines[i], 15, currentAmountInWordsY);\n    }\n\n// 10. Signature centrée\nlet y_signature_block = currentAmountInWordsY + 30;\nconst min_y_signature = doc.internal.pageSize.height - 100;\ny_signature_block = Math.max(y_signature_block, min_y_signature);\nconst blocCenterX = 180;\n\n// Affichage du nom et du poste du signataire\ndoc.setFontSize(9);\ndoc.setFont('helvetica');\nconst signataire = this.signataire || 'Directeur';\nconst signataireWidth = doc.getTextWidth(signataire);\nconst signataireX = blocCenterX - signataireWidth / 2;\ndoc.text(signataire, signataireX, y_signature_block);\ndoc.setFontSize(9);\ndoc.setFont('helvetica', 'normal');\nconst nom = this.signataireNom || 'Nom du signataire';\nconst nomWidth = doc.getTextWidth(nom);\nconst nomX = blocCenterX - nomWidth / 2;\ndoc.text(nom, nomX, y_signature_block + 8);\n\n// Ajouter la signature numérique juste à côté du texte du signataire\ntry {\n  // Vérifier si la signature numérique est présente\n  if (this.signaturNum) {\n    const signatureImg = this.signaturNum.startsWith('data:image/') ? this.signaturNum : await this.getImageFromUrl(this.signaturNum);\n    if (signatureImg) {\n      // Signature à droite du nom du signataire\n      doc.addImage(signatureImg, 'PNG', signataireX + signataireWidth - 35, y_signature_block + 10, 40, 20); // Ajuste la position et la taille\n    } else {\n      console.error('Impossible de charger l\\'image de la signature');\n    }\n  }\n\n  // Vérifier si le cachet numérique est présent\n  if (this.cachetNum) {\n    const cachetImg = this.cachetNum.startsWith('data:image/') ? this.cachetNum : await this.getImageFromUrl(this.cachetNum);\n    if (cachetImg) {\n      // Cachet sous la signature\n      doc.addImage(cachetImg, 'PNG', signataireX + signataireWidth - 50, y_signature_block + 5, 40, 40); // Ajuste la position et la taille\n    } else {\n      console.error('Impossible de charger l\\'image du cachet');\n    }\n  }\n} catch (imgErr) {\n  console.error(\"Erreur lors de l'ajout de la signature ou du cachet : \", imgErr);\n}\n\n\n    // 11. Footer\n    const margin = 15;\n    const pageWidth = doc.internal.pageSize.width;\n    const x1 = margin;\n    const x2 = pageWidth - margin;\n    const pageHeight = doc.internal.pageSize.height;\n    const footerYStart = pageHeight - 20;\n    const separatorY = footerYStart - 5;\n    doc.setLineWidth(0.2);\n    doc.setDrawColor(150);\n    doc.line(x1, separatorY, x2, separatorY);\n    doc.setFontSize(8);\n    doc.setFont('helvetica', 'normal');\n    doc.setTextColor(100);\n    let currentFooterY = footerYStart;\n    if (this.siteWeb) {\n      doc.text(this.siteWeb, 105, currentFooterY, { align: 'center' });\n      currentFooterY += 4;\n    }\n    const parts = [];\n    if (this.nina) parts.push(`NINA : ${this.nina}`);\n    if (this.rccm) parts.push(`RCCM : ${this.rccm}`);\n    if (this.nif) parts.push(`NIF : ${this.nif}`);\n    if (this.banque) parts.push(`Banque : ${this.banque}`);\n    if (parts.length > 0) {\n      doc.text(parts.join(' ; '), 105, currentFooterY, { align: 'center' });\n      currentFooterY += 4;\n    }\n    let adresseLine = '';\n    if (this.adresse && this.siege && this.pays) {\n      adresseLine = `Adresse : ${this.adresse} / ${this.siege}-${this.pays}`;\n    } else if (this.adresse && this.siege) {\n      adresseLine = `Adresse : ${this.adresse} / ${this.siege}`;\n    } else if (this.adresse && this.pays) {\n      adresseLine = `Adresse : ${this.adresse} / ${this.pays}`;\n    } else if (this.siege && this.pays) {\n      adresseLine = `Adresse : ${this.siege} / ${this.pays}`;\n    } else if (this.adresse) {\n      adresseLine = `Adresse : ${this.adresse}`;\n    } else if (this.siege) {\n      adresseLine = `Adresse : ${this.siege}`;\n    } else if (this.pays) {\n      adresseLine = `Adresse : ${this.pays}`;\n    }\n    if (adresseLine) {\n      doc.text(adresseLine, 105, currentFooterY, { align: 'center' });\n      currentFooterY += 4;\n    }\n    doc.setTextColor(0);\n\n    // 12. Téléchargement\n    doc.save(`Facture_Proforma_${this.facture?.numeroFacture}.pdf`);\n  }\n\n  formatDateFr(dateString: string): string {\n  const date = new Date(dateString);\n  const options: Intl.DateTimeFormatOptions = {\n    day: '2-digit',\n    month: 'long',\n    year: 'numeric'\n  };\n  return date.toLocaleDateString('fr-FR', options);\n}\n\ntransformerLigne(ligne: string): string {\n   return ligne.replace(/-\\s*/g, '<br> - <span></span>');\n}\n\n\n\n\n\n}","<!-- facture-proforma-apercu-detail.component.html -->\n<div class=\"container_global\" *ngIf=\"facture as f; else noData\">\n    <div class=\"information_cadre\" style=\"position: relative;\">\n        <div class=\"cadre_retour\">\n            <div class=\"retour_icon\" (click)=\"navigateBack()\">\n                <i class=\"ri-arrow-left-long-fill\"></i>\n            </div>\n\n            <div class=\"download_icon\" (click)=\"download()\">\n                <i class=\"ri-download-2-fill\"></i>\n            </div>\n        </div>\n        \n        <div class=\"info_titre_input\">\n            <div class=\"content\">\n                <div class=\"header_apercu\">\n                    <div class=\"logo_entreprise\">\n                       <img [src]=\"logo\" (error)=\"logo = fallbackLogo\" alt=\"Logo de l'entreprise\">\n\n                    </div>\n                    <div class=\"entete_entreprise\">\n                        <div class=\"content_entete\">\n                            <p class=\"para1\">{{nom}}</p>\n                            <p class=\"para2\">Secteur: {{secteur}}</p>\n                            <div class=\"para3\">Email : <a href=\"mailto:{{email}}\">{{email }}</a> Téléphone : {{telephone}}</div>\n                        </div>\n                    </div>\n                </div>\n                <hr>\n                <hr>\n                <div class=\"titre\">\n                    <h2>Facture proforma {{ f.numeroFacture }}</h2>\n                </div>\n                <div class=\"date\">\n                    <p>{{ siege }}, le {{ formatDateFr(f.dateCreation) }}</p>\n\n                </div>\n                <div class=\"droit\" *ngIf=\"f.client\">\n                    <h4>Doit :</h4> \n                    <p>{{ f.client.nomComplet}}</p>\n                </div>\n                <div class=\"droit\" *ngIf=\"f.entrepriseClient\">\n                    <h4>Doit :</h4>\n                    <p>{{ f.entrepriseClient.nom }}</p>\n                </div>\n                <div class=\"object\">\n                    <h4>Objet :</h4>\n                    <p>{{ f.description }}</p>\n                </div>\n                <table class=\"table\">\n                    <thead>\n                        <tr>\n                            <th>Désignation</th>\n                            <th style=\"width: 260px!important;\">Description</th>\n                            <th>Prix Unitaire (FCFA)</th>\n                            <th>Quantité</th>\n                            <th>Montant (FCFA)</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr *ngFor=\"let ligne of f.lignesFacture\">\n                            <td class=\"td_left\">{{ ligne.produit.nom }}</td>\n                            <td class=\"td_left\" [innerHTML]=\"transformerLigne(ligne.ligneDescription || '')\"></td>\n                            <td>{{ ligne.prixUnitaire | customNumber }}</td>\n                            <td>{{ ligne.quantite }}</td>\n                            <td>{{ (ligne.prixUnitaire * ligne.quantite) | customNumber }}</td>\n                        </tr>\n                    </tbody>\n                    <tfoot>\n                        <tr>\n                            <td colspan=\"4\">Total HT</td>\n                            <td>{{ f.totalHT | customNumber }}</td>\n                        </tr>\n                        <tr *ngIf=\"f.remise\">\n                            <td colspan=\"4\">Remise ({{ f.remise }}%)</td>\n                            <td>{{ ((f.totalHT * f.remise/100) | customNumber) }}</td>\n                        </tr>\n                        <tr *ngIf=\"f.remise && f.remise > 0\">\n                            <td colspan=\"4\">Montant commercial</td>\n                            <td>{{ (f.totalHT - (f.totalHT * f.remise / 100)) | customNumber }}</td>\n                        </tr>\n                        <tr *ngIf=\"f.tva\">\n                            <td colspan=\"4\">TVA ({{ tauxTva * 100 | number:'1.0-2' }} %)</td>\n                            <td>{{ ((f.totalHT - (f.totalHT * (f.remise ?? 0) / 100)) * tauxTva) | customNumber }}</td>\n                        </tr>\n                        <tr *ngIf=\"f.tva\">\n                            <td colspan=\"4\">Montant TTC</td>\n                            <td>{{ f.totalFacture | customNumber }}</td>\n                        </tr>\n                    </tfoot>\n                </table>\n                <div class=\"contenu_bottom\">\n                    <p><span style=\"font-weight: 600;\">Arrêté la présente facture à la somme de : </span>{{ f.totalFacture | enLettres }}.</p>\n                </div>\n                <div class=\"signature_bloc\" style=\"position: relative; text-align: center; margin-top: 40px; margin-right: 40px;\">\n                    <h6>{{signataire}}</h6>\n                    <div class=\"signaturNum\">\n                        <img class=\"img\" \n                            [src]=\"signaturNum\" \n                            (error)=\"signaturNum = 'assets/img/sinum.png'\" \n                            alt=\"Signature\"\n                            style=\"position: relative; z-index: 1; width: 120px;\">\n                        <img class=\"cachetNum\"\n                            [src]=\"cachetNum\" \n                            (error)=\"cachetNum = 'assets/img/tampon.png'\" \n                            alt=\"Cachet\"\n                            style=\"position: absolute; top: 0; left: -30%; transform: translateX(-50%); z-index: 2; width: 200px;\">\n                    </div>\n                    <h6 class=\"name_directeur\">{{signataireNom}}</h6>\n                </div>\n                <!-- <div class=\"cachet_container\">\n                    <div></div>\n                    <div class=\"cachet\">\n                        <h6>{{signataire}}</h6>\n                        <h4 class=\"name_directeur\">{{signataireNom}}</h4>\n                        <span>{{signataireNom}}</span>\n                    </div>\n                </div> -->\n            </div>\n        </div>\n        <div class=\"container_footer\">\n            <div class=\"footer\">\n                <hr style=\"margin-top: 40px;\">\n                <p *ngIf=\"siteWeb\"><strong>{{siteWeb}}</strong></p>\n                <div *ngIf=\"getLegalInfo()\">\n                    <em>{{ getLegalInfo() }}</em>\n                </div>\n                <div *ngIf=\"getAddressInfo()\" style=\"margin-top: -4px;\">\n                    <em>{{ getAddressInfo() }}</em>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n<ng-template #noData>\n    <p>Aucune donnée d’aperçu… <a (click)=\"router.navigate(['/facture-proforma'])\">Retour</a></p>\n</ng-template>"],"names":["EnLettresPipe","constructor","unite","dizaine","dizaineSpecial","transform","value","isNaN","n","Math","floor","words","numberToWords","charAt","toUpperCase","slice","d","reste","c","m","millions","pure","HttpHeaders","BehaviorSubject","catchError","switchMap","tap","throwError","environment","EntrepriseService","http","usersService","apiUrl","apiBaseUrl","entrepriseSubject","entreprise$","asObservable","getListEntreprises","getValidAccessToken","pipe","token","headers","get","error","errorMsg","ErrorEvent","message","status","Error","addEntreprise","entreprise","post","newEntreprise","currentEntreprise","next","getListEntreprise","console","set","log","data","getEntrepriseById","id","updateEntreprise","formData","patch","responseType","getEntrepriseInfo","Authorization","localStorage","setItem","JSON","stringify","decodeJwt","parse","atob","split","isTokenExpired","decodedToken","expirationDate","Date","exp","getNewTokenFromApi","refreshToken","getItem","i0","ɵɵinject","i1","HttpClient","i2","UsersService","factory","ɵfac","providedIn","FacturePreviewService","previewSubject","setPreview","getPreview","CommonModule","FormsModule","CustomNumberPipe","jsPDF","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","f_r3","client","nomComplet","entrepriseClient","nom","ɵɵelement","ligne_r4","produit","ɵɵproperty","ctx_r1","transformerLigne","ligneDescription","ɵɵsanitizeHtml","ɵɵpipeBind1","prixUnitaire","quantite","ɵɵtextInterpolate1","remise","totalHT","ɵɵpipeBind2","tauxTva","tmp_5_0","undefined","totalFacture","siteWeb","getLegalInfo","getAddressInfo","ɵɵlistener","DetailFactureProformaApercuComponent_div_0_Template_div_click_3_listener","ɵɵrestoreView","_r1","ɵɵnextContext","ɵɵresetView","navigateBack","DetailFactureProformaApercuComponent_div_0_Template_div_click_5_listener","download","DetailFactureProformaApercuComponent_div_0_Template_img_error_11_listener","logo","fallbackLogo","ɵɵtemplate","DetailFactureProformaApercuComponent_div_0_div_31_Template","DetailFactureProformaApercuComponent_div_0_div_32_Template","DetailFactureProformaApercuComponent_div_0_tr_52_Template","DetailFactureProformaApercuComponent_div_0_tr_60_Template","DetailFactureProformaApercuComponent_div_0_tr_61_Template","DetailFactureProformaApercuComponent_div_0_tr_62_Template","DetailFactureProformaApercuComponent_div_0_tr_63_Template","DetailFactureProformaApercuComponent_div_0_Template_img_error_74_listener","signaturNum","DetailFactureProformaApercuComponent_div_0_Template_img_error_75_listener","cachetNum","DetailFactureProformaApercuComponent_div_0_p_81_Template","DetailFactureProformaApercuComponent_div_0_div_82_Template","DetailFactureProformaApercuComponent_div_0_div_83_Template","ɵɵsanitizeUrl","secteur","ɵɵpropertyInterpolate1","email","telephone","numeroFacture","ɵɵtextInterpolate2","siege","formatDateFr","dateCreation","description","lignesFacture","tva","signataire","signataireNom","DetailFactureProformaApercuComponent_ng_template_1_Template_a_click_2_listener","_r5","router","navigate","DetailFactureProformaApercuComponent","previewService","entrepriseService","facture","imgUrl","ngOnInit","getFacturePreview","getUserEntrepriseInfo","subscribe","adresse","nif","banque","nina","pays","rccm","err","parts","push","join","getImageFromUrl","url","Promise","resolve","reject","img","Image","setAttribute","onload","canvas","document","createElement","width","height","ctx","getContext","drawImage","toDataURL","onerror","src","_this","_asyncToGenerator","doc","unit","format","imgData","startsWith","formatMatch","match","addImage","imgErr","infoX","infoY_Start","setFontSize","setFont","text","emailText","emailWidth","getTextWidth","lastInfoY","gapBelowInfo","sepY","setDrawColor","line","gapBelowSep","titleY","setTextColor","align","titleLineWidth","titleLineX","toLocaleDateString","day","month","year","clientObjectBlockY","currentY","labelX","isClient","isEntreprise","label","tableStartY","customNumberPipe","tableData","map","ligne","toString","content","colSpan","styles","fontStyle","halign","tauxPourcent","round","autoTable","head","body","startY","theme","fontSize","cellPadding","lineWidth","lineColor","headStyles","fillColor","textColor","bodyStyles","margin","left","right","columnStyles","cellWidth","tableStyle","borderColor","borderWidth","y_after_table","lastAutoTable","finalY","y_amount_in_words","libelle","libelleWidth","startX","enLettresPipe","montantLettreRaw","maxWidth","lines","splitTextToSize","currentAmountInWordsY","i","length","y_signature_block","min_y_signature","internal","pageSize","max","blocCenterX","signataireWidth","signataireX","nomWidth","nomX","signatureImg","cachetImg","pageWidth","x1","x2","pageHeight","footerYStart","separatorY","setLineWidth","currentFooterY","adresseLine","save","dateString","date","options","replace","ɵɵdirectiveInject","Router","i3","selectors","decls","vars","consts","template","DetailFactureProformaApercuComponent_Template","rf","DetailFactureProformaApercuComponent_div_0_Template","DetailFactureProformaApercuComponent_ng_template_1_Template","ɵɵtemplateRefExtractor","noData_r6","i4","NgForOf","NgIf","DecimalPipe"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}