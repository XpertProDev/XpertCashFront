"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[4744],{2120:(j,P,s)=>{s.d(P,{r:()=>b});var f=s(1626),E=s(4412),l=s(5558),_=s(9437),d=s(8810),x=s(8141),O=s(2525),M=s(4438),F=s(8026);let b=(()=>{class h{constructor(e,o){this.http=e,this.usersService=o,this.apiUrl=O.c.apiBaseUrl,this.entrepriseSubject=new E.t([]),this.entreprise$=this.entrepriseSubject.asObservable()}getListEntreprises(){return this.usersService.getValidAccessToken().pipe((0,l.n)(e=>{const o=new f.Lr({Authorization:`Bearer ${e}`,"Content-Type":"application/json"});return this.http.get(`${this.apiUrl}/entreprises`,{headers:o})}),(0,_.W)(e=>{let o="Erreur inconnue";return e.error instanceof ErrorEvent?o=`Erreur: ${e.error.message}`:404===e.status&&(o="Aucune entreprise trouv\xe9e"),(0,d.$)(()=>new Error(o))}))}addEntreprise(e){return this.usersService.getValidAccessToken().pipe((0,l.n)(o=>{const p=new f.Lr({Authorization:`Bearer ${o}`,"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/entreprises`,e,{headers:p})}),(0,x.M)(o=>{this.entrepriseSubject.next([...this.entrepriseSubject.value,o])}),(0,_.W)(o=>{let p="Erreur inconnue";return o.error instanceof ErrorEvent?p=`Erreur: ${o.error.message}`:400===o.status&&(p=o.error||"Donn\xe9es invalides"),(0,d.$)(()=>new Error(p))}))}getListEntreprise(){return this.usersService.getValidAccessToken().pipe((0,l.n)(e=>{if(!e)return console.error("Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),(0,d.$)(()=>new Error("Token manquant"));const o=(new f.Lr).set("Authorization",`Bearer ${e}`);return console.log("En-t\xeates envoy\xe9s : ",o),this.http.get(`${this.apiUrl}/entreprises`,{headers:o})}),(0,x.M)(e=>{this.entrepriseSubject.next(e)}),(0,_.W)(e=>(console.error("Erreur lors de la r\xe9cup\xe9ration des entreprises:",e),(0,d.$)(()=>e))))}getEntrepriseById(e){return this.usersService.getValidAccessToken().pipe((0,l.n)(o=>{if(!o)return console.error("Token manquant"),(0,d.$)(()=>new Error("Token manquant"));const p=new f.Lr({Authorization:`Bearer ${o}`,"Content-Type":"application/json"});return this.http.get(`${this.apiUrl}/entreprises/${e}`,{headers:p})}),(0,_.W)(o=>{let p="Erreur inconnue";return o.error instanceof ErrorEvent?p=`Erreur: ${o.error.message}`:404===o.status&&(p="Entreprise non trouv\xe9e"),(0,d.$)(()=>new Error(p))}))}updateEntreprise(e,o){return this.usersService.getValidAccessToken().pipe((0,l.n)(p=>{if(!p)return(0,d.$)(()=>new Error("Token manquant"));const v=new f.Lr({Authorization:`Bearer ${p}`});return this.http.patch(`${this.apiUrl}/updateEntreprise/${e}`,o,{headers:v,responseType:"text"})}),(0,_.W)(p=>{let v="Erreur inconnue";return p.error instanceof ErrorEvent?v=`Erreur: ${p.error.message}`:400===p.status&&(v=p.error||"Donn\xe9es invalides"),(0,d.$)(()=>new Error(v))}))}getEntrepriseInfo(){return this.usersService.getValidAccessToken().pipe((0,l.n)(e=>{if(!e)return(0,d.$)(()=>new Error("Aucun token trouv\xe9"));const o=new f.Lr({Authorization:`Bearer ${e}`});return this.http.get(`${this.apiUrl}/myEntreprise`,{headers:o}).pipe((0,x.M)(p=>{localStorage.setItem("entreprise",JSON.stringify(p))}))}),(0,_.W)(e=>(console.error("Erreur r\xe9cup\xe9ration info entreprise:",e),(0,d.$)(()=>e))))}decodeJwt(e){return JSON.parse(atob(e.split(".")[1]))}isTokenExpired(e){return new Date(1e3*e.exp)<new Date}getNewTokenFromApi(){const e=localStorage.getItem("refreshToken");return this.http.post(`${this.apiUrl}/refresh-token`,{refreshToken:e})}static{this.\u0275fac=function(o){return new(o||h)(M.KVO(f.Qq),M.KVO(F.g))}}static{this.\u0275prov=M.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},4744:(j,P,s)=>{s.r(P),s.d(P,{AddClientsComponent:()=>H});var f=s(467),E=s(177),l=s(9417),_=s(850),d=s(6967),x=s(7673),O=s(4412),M=s(4572),F=s(9172),b=s(6354),h=s(5558),k=s(8810),e=s(4438),o=s(9192),p=s(2120),v=s(7746),y=s(8026),A=s(4564);const I=()=>({standalone:!0});function T(r,c){1&r&&(e.j41(0,"div",53)(1,"div",54),e.nrm(2,"div",55),e.j41(3,"p"),e.EFF(4,"Creation en cours..."),e.k0s()()())}function D(r,c){1&r&&(e.j41(0,"small"),e.EFF(1,"Champ requis."),e.k0s())}function R(r,c){1&r&&(e.j41(0,"small"),e.EFF(1,"Au moins 2 caract\xe8res."),e.k0s())}function $(r,c){if(1&r&&(e.j41(0,"div",56),e.DNE(1,D,2,0,"small",57)(2,R,2,0,"small",57),e.k0s()),2&r){let t,n;const i=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=i.clientForm.get("nomComplet"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==(n=i.clientForm.get("nomComplet"))||null==n.errors?null:n.errors.minlength)}}function S(r,c){1&r&&(e.j41(0,"small"),e.EFF(1,"Format invalide."),e.k0s())}function w(r,c){if(1&r&&(e.j41(0,"div",56),e.DNE(1,S,2,0,"small",57),e.k0s()),2&r){let t;const n=e.XpG();e.R7$(),e.Y8G("ngIf",null==(t=n.clientForm.get("email"))||null==t.errors?null:t.errors.email)}}function L(r,c){if(1&r&&(e.j41(0,"option",58),e.EFF(1),e.k0s()),2&r){const t=c.$implicit,n=e.XpG();e.Y8G("value",t),e.R7$(),e.Lme(" ",t," (",n.paysIndicatifs[t].indicatif,") ")}}function G(r,c){1&r&&(e.j41(0,"div",56)(1,"small"),e.EFF(2,"Ce champ est requis"),e.k0s()())}function N(r,c){if(1&r&&(e.j41(0,"div",56)(1,"small"),e.EFF(2),e.k0s()()),2&r){const t=c.ngIf,n=e.XpG();e.R7$(2),e.Lme(" Le num\xe9ro doit contenir ",n.paysIndicatifs[t].longueur," chiffres apr\xe8s l\u2019indicatif ",n.paysIndicatifs[t].indicatif.trim(),". ")}}function B(r,c){1&r&&(e.j41(0,"div",56)(1,"small"),e.EFF(2,"Le t\xe9l\xe9phone est requis."),e.k0s()())}function U(r,c){if(1&r&&(e.j41(0,"mat-option",58)(1,"div",69),e.EFF(2),e.k0s()()),2&r){const t=c.$implicit;e.Y8G("value",t),e.R7$(2),e.SpI(" ",t.nom," ")}}function V(r,c){if(1&r){const t=e.RV6();e.j41(0,"div",12)(1,"div",13)(2,"div",59),e.nrm(3,"input",60),e.j41(4,"label",61),e.EFF(5,"Mon entreprise"),e.k0s(),e.j41(6,"mat-autocomplete",62,0),e.bIt("optionSelected",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.onEntrepriseSelected(i))}),e.j41(8,"mat-option",63),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.openPopup())}),e.j41(9,"div",64),e.nrm(10,"i",65),e.j41(11,"span",66),e.EFF(12,"Cr\xe9er une entreprise"),e.k0s()()(),e.DNE(13,U,3,2,"mat-option",29),e.nI1(14,"async"),e.k0s(),e.j41(15,"div",67),e.nrm(16,"i",68),e.k0s()()()()}if(2&r){const t=e.sdS(7),n=e.XpG();e.R7$(3),e.Y8G("formControl",n.control)("matAutocomplete",t),e.R7$(3),e.Y8G("displayWith",n.displayFnEntreprise),e.R7$(7),e.Y8G("ngForOf",e.bMT(14,4,n.filteredOptions))}}function W(r,c){if(1&r&&(e.j41(0,"div",70),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.errorMessage)}}function z(r,c){if(1&r&&(e.j41(0,"div",71),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.successMessage)}}function K(r,c){1&r&&(e.j41(0,"div",72)(1,"p"),e.EFF(2,"Vous devez s\xe9lectionner ou cr\xe9er une entreprise"),e.k0s()())}function Y(r,c){1&r&&(e.j41(0,"div",96),e.EFF(1," Ce champ est requis "),e.k0s())}function X(r,c){if(1&r&&(e.j41(0,"div",97),e.EFF(1),e.k0s()),2&r){const t=e.XpG(2);e.R7$(),e.SpI(" ",t.errorMessageApi," ")}}function J(r,c){if(1&r){const t=e.RV6();e.j41(0,"div",73)(1,"div",74)(2,"div",75)(3,"h4"),e.EFF(4,"Ajouter une entreprise"),e.k0s(),e.j41(5,"button",76),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closePopup())}),e.EFF(6,"\xd7"),e.k0s()(),e.j41(7,"form",77)(8,"div",78)(9,"div",79)(10,"div",59),e.nrm(11,"input",80),e.j41(12,"label",81),e.EFF(13,"Nom entreprise "),e.j41(14,"span",82),e.EFF(15,"*"),e.k0s()(),e.DNE(16,Y,2,0,"div",83),e.k0s(),e.j41(17,"div",59),e.nrm(18,"input",84),e.j41(19,"label",81),e.EFF(20,"Email"),e.k0s()()(),e.j41(21,"div",79)(22,"div",59),e.nrm(23,"input",85),e.j41(24,"label",81),e.EFF(25,"Adresse"),e.k0s()(),e.j41(26,"div",59),e.nrm(27,"input",86),e.j41(28,"label",81),e.EFF(29,"Ville"),e.k0s()()(),e.j41(30,"div",25)(31,"div",26)(32,"select",27),e.bIt("change",function(i){e.eBV(t);const a=e.XpG();return e.Njj(a.onEntreprisePaysChange(i))}),e.j41(33,"option",28),e.EFF(34,"Pays"),e.k0s(),e.j41(35,"option",87),e.EFF(36,"Mali"),e.k0s(),e.j41(37,"option",88),e.EFF(38,"S\xe9n\xe9gal"),e.k0s(),e.j41(39,"option",89),e.EFF(40,"C\xf4te d'Ivoire"),e.k0s()(),e.j41(41,"label",30),e.EFF(42,"Pays"),e.k0s()(),e.j41(43,"div",31)(44,"input",90),e.bIt("input",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.formatEntreprisePhoneNumber())}),e.k0s(),e.j41(45,"label",33),e.EFF(46,"T\xe9l\xe9phone"),e.k0s()(),e.j41(47,"div",34),e.nrm(48,"input",91),e.j41(49,"label",36),e.EFF(50,"Secteur"),e.k0s()()()(),e.j41(51,"div",43),e.DNE(52,X,2,1,"div",92),e.k0s(),e.j41(53,"div",93)(54,"button",94),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.closePopup())}),e.EFF(55,"Annuler"),e.k0s(),e.j41(56,"button",95),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.ajouterEntreprise())}),e.EFF(57," Ajouter "),e.k0s()()()()()}if(2&r){let t;const n=e.XpG();e.R7$(7),e.Y8G("formGroup",n.entrepriseForm),e.R7$(9),e.Y8G("ngIf",(null==(t=n.entrepriseForm.get("nom"))?null:t.invalid)&&(null==(t=n.entrepriseForm.get("nom"))?null:t.touched)),e.R7$(36),e.Y8G("ngIf",n.errorMessageApi),e.R7$(4),e.xc7("background-color",n.entrepriseForm.valid?"#0672E4":"#0671e434")("color",n.entrepriseForm.valid?"#ffffff":"#00000073")("cursor",n.entrepriseForm.valid?"pointer":"no-drop"),e.Y8G("disabled",n.entrepriseForm.invalid)}}let H=(()=>{class r{constructor(t,n,i,a,u){this.router=t,this.fb=n,this.entrepriseService=i,this.clientService=a,this.usersService=u,this.errorMessage="",this.errorMessageApi="",this.successMessage="",this.isEntrepriseSelected=!1,this.showPopup=!1,this.urllink="assets/img/appareil.jpg",this.newPhotoUrl=null,this.selectedFile=null,this.imageFile=null,this.control=new l.MJ,this.filteredOptions=(0,x.of)([]),this.loading=!1,this.optionsEntreprise$=new O.t([]),this.entrepriseRequiredError=!1,this.isLoading=!1,this.indicatif="",this.maxPhoneLength=0,this.entrepriseIndicatif="",this.entrepriseMaxPhoneLength=0,this.paysIndicatifs={Mali:{indicatif:"+223",longueur:8},S\u00e9n\u00e9gal:{indicatif:"+221",longueur:9},"C\xf4te d'Ivoire":{indicatif:"+225",longueur:10},"Burkina Faso":{indicatif:"+226",longueur:8},Niger:{indicatif:"+227",longueur:8},France:{indicatif:"+33",longueur:9},Belgique:{indicatif:"+32",longueur:9},Suisse:{indicatif:"+41",longueur:9},Canada:{indicatif:"+1",longueur:10},"\xc9tats-Unis":{indicatif:"+1",longueur:10},Maroc:{indicatif:"+212",longueur:9},Alg\u00e9rie:{indicatif:"+213",longueur:9},Tunisie:{indicatif:"+216",longueur:8},Togo:{indicatif:"+228",longueur:8},B\u00e9nin:{indicatif:"+229",longueur:8},Guin\u00e9e:{indicatif:"+224",longueur:9},Tchad:{indicatif:"+235",longueur:8},Cameroun:{indicatif:"+237",longueur:9},RDC:{indicatif:"+243",longueur:9},Gabon:{indicatif:"+241",longueur:9},"Afrique du Sud":{indicatif:"+27",longueur:9},Rwanda:{indicatif:"+250",longueur:9},Kenya:{indicatif:"+254",longueur:9},Nig\u00e9ria:{indicatif:"+234",longueur:10},Ghana:{indicatif:"+233",longueur:9},\u00c9thiopie:{indicatif:"+251",longueur:9},\u00c9gypte:{indicatif:"+20",longueur:10},Inde:{indicatif:"+91",longueur:10},Chine:{indicatif:"+86",longueur:11},Mexique:{indicatif:"+52",longueur:10},Allemagne:{indicatif:"+49",longueur:10},Espagne:{indicatif:"+34",longueur:9},Italie:{indicatif:"+39",longueur:10},"Royaume-Uni":{indicatif:"+44",longueur:10},"Pays-Bas":{indicatif:"+31",longueur:9},Portugal:{indicatif:"+351",longueur:9}},this.paysKeys=Object.keys(this.paysIndicatifs)}onPaysChange(t){const i=this.paysIndicatifs[t.target.value];if(!i)return;this.indicatif=i.indicatif,this.maxPhoneLength=i.longueur;const a=this.clientForm.get("telephone");let u=a?.value??"";const g=this.indicatif.replace(/\D/g,""),m=u.replace(/\D/g,"");if(m.startsWith(g)){const C=m.slice(g.length,g.length+this.maxPhoneLength);a?.setValue(this.indicatif+C)}else a?.setValue(this.indicatif);this.updatePhoneValidator(i.longueur)}updatePhoneValidator(t){const n=this.clientForm.get("telephone"),i=new RegExp(`^\\${this.indicatif}\\s?\\d{${t}}$`);n?.setValidators([l.k0.required,l.k0.pattern(i)]),n?.updateValueAndValidity()}formatPhoneNumber(){let t=this.clientForm.get("telephone")?.value;if(!t.startsWith(this.indicatif))return void this.clientForm.get("telephone")?.setValue(this.indicatif);const n=t.replace(this.indicatif,"").replace(/\D/g,""),i=this.indicatif+n;this.clientForm.get("telephone")?.setValue(i.slice(0,this.indicatif.length+this.maxPhoneLength))}testImageCompression(t){var n=this;return(0,f.A)(function*(){if(!t)return void console.log("Aucun fichier s\xe9lectionn\xe9.");console.log("Taille originale:",t.size/1024,"Ko");const i={maxSizeMB:1,maxWidthOrHeight:1e3,useWebWorker:!0};try{const a=yield(0,d.A)(t,i);if(console.log("Taille apr\xe8s compression:",a.size/1024,"Ko"),"image/png"!==a.type&&"image/jpeg"!==a.type)return console.error("Le fichier compress\xe9 n'est pas un format support\xe9 (PNG ou JPEG)."),void(n.errorMessage="Erreur de compression : Le format de l'image n'est pas valide.");const u=new FileReader;u.onload=g=>{n.newPhotoUrl=g.target?.result,console.log("Image compress\xe9e pr\xeate \xe0 \xeatre affich\xe9e !")},u.readAsDataURL(a)}catch(a){console.error("Erreur lors de la compression:",a)}})()}onFileSelected(t){const n=t.target;if(n.files&&n.files.length>0){const i=n.files[0];if(!["image/jpeg","image/png","image/jpg"].includes(i.type))return void(this.errorMessage="Le fichier doit \xeatre une image (JPG, PNG)");this.selectedFile=i,this.imageFile=i,this.testImageCompression(i);const u=new FileReader;u.onload=g=>{this.newPhotoUrl=g.target?.result},u.readAsDataURL(this.selectedFile)}}goToStock(){this.router.navigate(["/clients"])}ngOnInit(){this.getListEntreprise(),this.initEntreprise(),this.getClientForm(),this.loadEntreprises()}getClientForm(){this.clientForm=this.fb.group({nomComplet:["",[l.k0.required,l.k0.minLength(2)]],email:["",[l.k0.email]],telephone:["",l.k0.required],adresse:[""],poste:[""],pays:[""],ville:[""]})}onEntreprisePaysChange(t){const i=this.paysIndicatifs[t.target.value];i&&(this.entrepriseIndicatif=`${i.indicatif} `,this.entrepriseMaxPhoneLength=this.entrepriseIndicatif.length+i.longueur,this.entrepriseForm.get("telephone")?.value.startsWith(this.entrepriseIndicatif)||this.entrepriseForm.get("telephone")?.setValue(this.entrepriseIndicatif),this.updateEntreprisePhoneValidator(i.longueur))}updateEntreprisePhoneValidator(t){this.entrepriseForm.controls.telephone.setValidators([l.k0.pattern(`^\\${this.entrepriseIndicatif}\\d{${t}}$`)]),this.entrepriseForm.controls.telephone.updateValueAndValidity()}formatEntreprisePhoneNumber(){let t=this.entrepriseForm.get("telephone")?.value;if(!t.startsWith(this.entrepriseIndicatif))return void this.entrepriseForm.get("telephone")?.setValue(this.entrepriseIndicatif);const n=t.replace(this.entrepriseIndicatif,"").replace(/\D/g,""),i=this.entrepriseIndicatif+n;this.entrepriseForm.get("telephone")?.setValue(i.slice(0,this.entrepriseIndicatif.length+this.entrepriseMaxPhoneLength))}loadEntreprises(){localStorage.getItem("accessToken")&&this.entrepriseService.getListEntreprise().subscribe(n=>{this.optionsEntreprise$.next(n),this.setupAutocomplete()},n=>{console.error("Erreur lors de la r\xe9cup\xe9ration des entreprises :",n),this.errorMessage=n.error?.error||"Client physiques"})}setupAutocomplete(){this.filteredOptions=(0,M.z)([this.control.valueChanges.pipe((0,F.Z)(""),(0,b.T)(t=>"string"==typeof t?t:t?.nom)),this.optionsEntreprise$]).pipe((0,b.T)(([t,n])=>t?this._filter(t,n):n))}getListEntreprise(){this.usersService.getValidAccessToken().pipe((0,h.n)(t=>t?this.entrepriseService.getListEntreprise():(console.error("Aucun token valide trouv\xe9 !"),(0,k.$)(()=>new Error("Aucun token trouv\xe9"))))).subscribe({next:t=>{console.log("Entreprises re\xe7ues depuis l'API :",t),this.optionsEntreprise$.next(t),this.filteredOptions=this.control.valueChanges.pipe((0,F.Z)(""),(0,b.T)(n=>n?"string"==typeof n?n:n.nom:""),(0,b.T)(n=>n?this._filter(n,this.optionsEntreprise$.value):this.optionsEntreprise$.value.slice()))},error:t=>{console.error("Erreur lors de la r\xe9cup\xe9ration des entreprises :",t)}})}_filter(t,n){const i=t.toLowerCase();return n.filter(a=>a.nom.toLowerCase().includes(i))}displayFnEntreprise(t){return t?t.nom:""}onEntrepriseSelected(t){}openPopup(){this.showPopup=!0}closePopup(){this.showPopup=!1}initEntreprise(){this.entrepriseForm=this.fb.group({nom:["",l.k0.required],pays:[""],email:[""],telephone:[""],adresse:[""],siege:[""],secteur:[""]})}ajouterEntreprise(){this.entrepriseForm.invalid||this.entrepriseService.addEntreprise({nom:this.entrepriseForm.value.nom,pays:this.entrepriseForm.value.pays,email:this.entrepriseForm.value.email,telephone:this.entrepriseForm.value.telephone,adresse:this.entrepriseForm.value.adresse,siege:this.entrepriseForm.value.siege,secteur:this.entrepriseForm.value.secteur,logo:this.entrepriseForm.value.logo,nif:this.entrepriseForm.value.nif,nina:this.entrepriseForm.value.nina,banque:this.entrepriseForm.value.banque,rccm:this.entrepriseForm.value.rccm,siteWeb:this.entrepriseForm.value.siteWeb,signataire:this.entrepriseForm.value.signataire,signataireNom:this.entrepriseForm.value.signataireNom,prefixe:this.entrepriseForm.value.prefixe,suffixe:this.entrepriseForm.value.suffixe,tauxTva:this.entrepriseForm.value.tauxTva,signaturNum:this.entrepriseForm.value.signaturNum}).subscribe({next:n=>{this.optionsEntreprise$.next([n,...this.optionsEntreprise$.value]),this.control.setValue(n),this.closePopup(),this.entrepriseForm.reset()},error:n=>{this.errorMessageApi=n.message||"Erreur lors de la cr\xe9ation"}})}ajouterClient(){if(this.errorMessage="",this.successMessage="",this.entrepriseRequiredError=!1,this.isEntrepriseSelected){const n=this.control.value;if(!n||!n.id)return void(this.entrepriseRequiredError=!0)}if(this.clientForm.invalid)return void(this.errorMessage="Veuillez corriger les erreurs du formulaire.");this.isLoading=!0;const t=this.clientForm.value;if(this.isEntrepriseSelected){const n=this.control.value;n&&n.id&&(t.entrepriseClient={id:n.id})}setTimeout(()=>{this.clientService.addClient(t).subscribe({next:n=>{this.isLoading=!1,this.successMessage=n.message,this.clientForm.reset(),this.isEntrepriseSelected=!1,this.goToClients()},error:n=>{this.isLoading=!1,this.errorMessage=n.error?.error||"Erreur lors de la cr\xe9ation"}})},2e3)}goToClients(){this.router.navigate(["/clients"])}navigateBack(){this.router.navigate(["/clients"])}static{this.\u0275fac=function(n){return new(n||r)(e.rXU(o.Ix),e.rXU(l.ok),e.rXU(p.r),e.rXU(v.X),e.rXU(y.g))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-add-clients"]],decls:79,vars:24,consts:[["auto","matAutocomplete"],[1,"container_global"],["class","loading-overlay",4,"ngIf"],[1,"content_formulaire"],[1,"modal-body"],[1,"container_formulaire",3,"formGroup"],["title","Retour sur la page client",1,"retour_icon_text",2,"cursor","pointer","color","#0672E4","margin-bottom","15px",3,"click"],[1,"ri-arrow-left-s-line"],[2,"margin-left","8px","font-size","12px"],[1,"Title"],[1,"form_left_right"],[1,"formulaire"],[1,"information_cadre"],[1,"info_titre_input"],[1,"double_input"],[1,"champ_input","champ_input2"],["type","text","id","nomComplet","formControlName","nomComplet","name","nomComplet","placeholder","Saisis le nom et pr\xe9nom",1,"input_focus"],["for","nomComplet",1,"label"],["class","error",4,"ngIf"],["type","email","id","email","formControlName","email","name","email","placeholder","Saisis l'email",1,"input_focus"],["for","email",1,"label"],["id","adresse","formControlName","adresse","name","adresse","placeholder","Saisis l'adresse",1,"input_focus"],["for","adresse",1,"label"],["id","poste","formControlName","poste","name","poste","placeholder","Saisissez votre poste ",1,"input_focus"],["for","poste",1,"label"],[1,"grid_colonne"],[1,"champ_input","div1"],["formControlName","pays",1,"input_focus",3,"change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","pays",1,"label"],[1,"champ_input","div2"],["type","tel","id","telephone","formControlName","telephone","name","telephone","placeholder","Saisis le num\xe9ro de t\xe9l\xe9phone",1,"input_focus",3,"input"],["for","telephone",1,"label"],[1,"champ_input","div3"],["id","ville","formControlName","ville","name","ville","placeholder","Saisis la ville",1,"input_focus"],["for","ville",1,"label"],[1,"champ_input_inventaire"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel","ngModelOptions"],[1,"slider","round"],["class","information_cadre",4,"ngIf"],[1,"information_cadre","information_cadre_save"],[1,"container_error_message"],["class","error-messageApi2",4,"ngIf"],["class","success-messageApi2",4,"ngIf"],["class","error","style","margin-top: 8px;",4,"ngIf"],[1,"info_titre_input","info_titre_input_btn"],[1,"btn_annuler"],[1,"btn_cancel",3,"click"],[1,"btn_ajouter"],[1,"btn_save",3,"click","disabled"],["class","popup-overlay",4,"ngIf"],[1,"loading-overlay"],[1,"loading-content"],[1,"spinner"],[1,"error"],[4,"ngIf"],[3,"value"],[1,"champ_input"],["type","text","placeholder","Selectionner un entreprise","matInput","",1,"input_focus","input_cursor",3,"formControl","matAutocomplete"],["for","categorieId",1,"label"],[3,"optionSelected","displayWith"],[1,"select-option",3,"click"],[2,"display","flex","align-items","center","color","#0672E4"],[1,"ri-community-line"],[2,"margin-left","8px"],[1,"icon_arrow"],[1,"ri-arrow-down-s-line"],[1,"option-content"],[1,"error-messageApi2"],[1,"success-messageApi2"],[1,"error",2,"margin-top","8px"],[1,"popup-overlay"],[1,"popup-content"],[1,"popup-header"],[1,"close-btn",3,"click"],[3,"formGroup"],[1,"popup-body"],[1,"champ_grid"],["type","text","formControlName","nom","placeholder","Saisis le nom de l'entreprise",1,"input_focus"],[1,"label"],[2,"color","#ff0000","margin-left","5px"],["class","error-text",4,"ngIf"],["type","email","formControlName","email","placeholder","Saisis l'email",1,"input_focus"],["type","text","formControlName","adresse","placeholder","Saisis l'adresse",1,"input_focus"],["type","text","formControlName","siege","placeholder","Saisis le si\xe8ge",1,"input_focus"],["value","Mali"],["value","S\xe9n\xe9gal"],["value","C\xf4te d'Ivoire"],["type","tel","formControlName","telephone","placeholder","Saisis le num\xe9ro de t\xe9l\xe9phone",1,"input_focus",3,"input"],["id","ville","formControlName","secteur","name","ville","placeholder","Saisis la ville",1,"input_focus"],["class","error-messageApi",4,"ngIf"],[1,"popup-footer"],["type","button",1,"btn-cancel",3,"click"],["type","submit",1,"btn-submit",3,"click","disabled"],[1,"error-text"],[1,"error-messageApi"]],template:function(n,i){if(1&n&&(e.j41(0,"div",1),e.DNE(1,T,5,0,"div",2),e.j41(2,"div",3)(3,"div",4)(4,"form",5)(5,"p",6),e.bIt("click",function(){return i.navigateBack()}),e.nrm(6,"i",7),e.j41(7,"span",8),e.EFF(8,"Clients"),e.k0s()(),e.j41(9,"div",9)(10,"h3"),e.EFF(11,"Ajouter un client"),e.k0s()(),e.j41(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15),e.nrm(18,"input",16),e.j41(19,"label",17),e.EFF(20,"Nom et pr\xe9nom"),e.k0s(),e.DNE(21,$,3,2,"div",18),e.k0s(),e.j41(22,"div",15),e.nrm(23,"input",19),e.j41(24,"label",20),e.EFF(25,"Email"),e.k0s(),e.DNE(26,w,2,1,"div",18),e.k0s()(),e.j41(27,"div",14)(28,"div",15),e.nrm(29,"input",21),e.j41(30,"label",22),e.EFF(31,"Adresse"),e.k0s()(),e.j41(32,"div",15),e.nrm(33,"input",23),e.j41(34,"label",24),e.EFF(35,"Poste"),e.k0s()()(),e.j41(36,"div",25)(37,"div",26)(38,"select",27),e.bIt("change",function(u){return i.onPaysChange(u)}),e.j41(39,"option",28),e.EFF(40,"Pays"),e.k0s(),e.DNE(41,L,2,3,"option",29),e.k0s(),e.j41(42,"label",30),e.EFF(43,"Pays"),e.k0s(),e.DNE(44,G,3,0,"div",18),e.k0s(),e.j41(45,"div",31)(46,"input",32),e.bIt("input",function(){return i.formatPhoneNumber()}),e.k0s(),e.j41(47,"label",33),e.EFF(48,"T\xe9l\xe9phone"),e.k0s(),e.DNE(49,N,3,2,"div",18)(50,B,3,0,"div",18),e.k0s(),e.j41(51,"div",34),e.nrm(52,"input",35),e.j41(53,"label",36),e.EFF(54,"Ville"),e.k0s()()()()(),e.j41(55,"div",12)(56,"div",13)(57,"h4"),e.EFF(58,"Entreprise"),e.k0s(),e.j41(59,"div",37)(60,"p"),e.EFF(61,"J'appartient \xe0 une entreprise"),e.k0s(),e.j41(62,"label",38)(63,"input",39),e.mxI("ngModelChange",function(u){return e.DH7(i.isEntrepriseSelected,u)||(i.isEntrepriseSelected=u),u}),e.k0s(),e.nrm(64,"span",40),e.k0s()()()(),e.DNE(65,V,17,6,"div",41),e.j41(66,"div",42)(67,"div",43),e.DNE(68,W,2,1,"div",44)(69,z,2,1,"div",45)(70,K,3,0,"div",46),e.k0s(),e.j41(71,"div",47)(72,"div",48)(73,"button",49),e.bIt("click",function(){return i.goToClients()}),e.EFF(74,"Annuler"),e.k0s()(),e.j41(75,"div",50)(76,"button",51),e.bIt("click",function(){return i.ajouterClient()}),e.EFF(77," Ajouter "),e.k0s()()()()()()()()()(),e.DNE(78,J,58,10,"div",52)),2&n){let a,u,g,m,C;e.R7$(),e.Y8G("ngIf",i.isLoading),e.R7$(3),e.Y8G("formGroup",i.clientForm),e.R7$(17),e.Y8G("ngIf",(null==(a=i.clientForm.get("nomComplet"))?null:a.touched)&&(null==(a=i.clientForm.get("nomComplet"))?null:a.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(u=i.clientForm.get("email"))?null:u.touched)&&(null==(u=i.clientForm.get("email"))?null:u.invalid)),e.R7$(15),e.Y8G("ngForOf",i.paysKeys),e.R7$(3),e.Y8G("ngIf",(null==(g=i.clientForm.get("pays"))?null:g.invalid)&&(null==(g=i.clientForm.get("pays"))?null:g.touched)),e.R7$(5),e.Y8G("ngIf",(null==(m=i.clientForm.get("telephone"))?null:m.touched)&&(null==(m=i.clientForm.get("telephone"))||null==m.errors?null:m.errors.pattern)&&(null==(m=i.clientForm.get("pays"))?null:m.value)),e.R7$(),e.Y8G("ngIf",(null==(C=i.clientForm.get("telephone"))?null:C.touched)&&(null==(C=i.clientForm.get("telephone"))||null==C.errors?null:C.errors.required)),e.R7$(13),e.R50("ngModel",i.isEntrepriseSelected),e.Y8G("ngModelOptions",e.lJ4(23,I)),e.R7$(2),e.Y8G("ngIf",i.isEntrepriseSelected),e.R7$(3),e.Y8G("ngIf",i.errorMessage),e.R7$(),e.Y8G("ngIf",i.successMessage),e.R7$(),e.Y8G("ngIf",i.entrepriseRequiredError),e.R7$(6),e.xc7("background-color",i.clientForm.valid?"#0672E4":"#0671e434")("color",i.clientForm.valid?"#ffffff":"#00000073")("cursor",i.clientForm.valid?"pointer":"no-drop"),e.Y8G("disabled",i.clientForm.invalid)("disabled",i.clientForm.invalid),e.R7$(2),e.Y8G("ngIf",i.showPopup)}},dependencies:[l.YN,l.qT,l.xH,l.y7,l.me,l.Zm,l.wz,l.BC,l.cb,l.vS,E.MD,E.Sq,E.bT,E.Jj,l.X1,l.l_,l.j4,l.JD,_.jL,_.$3,A.M,_.pN],styles:['@charset "UTF-8";.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;color:#fff;font-size:18px;z-index:1000}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid white;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.container_global[_ngcontent-%COMP%]{display:grid;grid-template-columns:72% 28%;position:relative}.title[_ngcontent-%COMP%]{font-size:18px}.champ_input[_ngcontent-%COMP%]{position:relative;margin-bottom:30px}.champ_input_list_stock[_ngcontent-%COMP%]{position:relative;margin-bottom:10px}.champ_input[_ngcontent-%COMP%]   .title_input[_ngcontent-%COMP%]{position:absolute;top:-18px}.champ_input_Categorie[_ngcontent-%COMP%]{margin-bottom:15px!important}.formulaire[_ngcontent-%COMP%]{position:relative}.Title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}.input_focus[_ngcontent-%COMP%]{width:100%;height:49px;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:14px;background:none;color:#695c5c}.champ_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:4px;pointer-events:none;color:#6b6666}.input_focus[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.input_focus[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:5px;left:0;transition:all .3s ease-in-out;background:none;font-size:11px;padding:0}.input_focus[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:12px;transition:all .2s ease-in-out}.input_focus2[_ngcontent-%COMP%]{width:100%;min-width:250px;height:57px;outline:none;border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:14px;padding-left:10px;background:none;color:#777474;border-radius:5px;padding-top:10px;border-bottom:1px solid rgb(53,50,50);resize:none}.input_focus2[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.champ_input2[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:0;pointer-events:none;color:#423838}.champ_input[_ngcontent-%COMP%]   .labelCategory[_ngcontent-%COMP%]{color:#423838;left:0;font-size:14px}.input_focus2[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus2[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:0;left:0;transition:all .3s ease-in-out;background:none;font-size:11px;padding:0;background-color:#fff}.input_focus2[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus2[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:15px;transition:all .2s ease-in-out}.info_titre_input[_ngcontent-%COMP%]{padding:20px}.info_titre_input[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:16px;margin-bottom:10px;letter-spacing:.6px}.champ_input2[_ngcontent-%COMP%]{display:inline-block;width:50%;box-sizing:border-box;vertical-align:top}.champ_grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:20px}.information_cadre[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#fff;box-shadow:2px 2px 30px #0000001c;border-radius:5px;margin-top:20px;margin-bottom:20px}.double_input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;margin-top:10px}.container_file[_ngcontent-%COMP%]{width:150px;border-radius:10px;box-shadow:4px 4px 30px #0003;display:flex;flex-direction:column;align-items:center;justify-content:space-between;padding:10px;gap:5px;background-color:#006eff0a;margin-bottom:10px;margin-top:20px}.header_file[_ngcontent-%COMP%]{height:140px;width:140px;border:1px dashed rgba(6,113,228,.6156862745);border-radius:10px;flex-direction:column;overflow:hidden;display:flex;align-items:center;justify-content:center;box-shadow:#959da533 0 8px 24px}.header_file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;object-fit:cover;transition:transform .2s}.header_file[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:100px}.header_file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;color:#000}.footer_file[_ngcontent-%COMP%]{background-color:#006eff13;width:140px;height:35px;padding:5px 8px;border-radius:5px;cursor:pointer;display:flex;align-items:center;color:#000;border:none;margin-top:3px}.footer_file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0!important;font-size:10px}.footer_file[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;margin-right:7px}#file[_ngcontent-%COMP%]{display:none}.header_file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.container_error_message[_ngcontent-%COMP%]{margin-left:20px}.error-message[_ngcontent-%COMP%]{font-size:14px;color:red;font-weight:700}.information_cadre_save[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.info_titre_input_btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:end;gap:20px}.btn_annuler[_ngcontent-%COMP%]   .btn_cancel[_ngcontent-%COMP%]{padding:8px 30px;border:none;border-radius:5px;background-color:red;color:#fff}.btn_annuler[_ngcontent-%COMP%]   .btn_cancel[_ngcontent-%COMP%]:hover{background-color:#d80101;transition:all ease-in .5s}.btn_ajouter[_ngcontent-%COMP%]   .btn_save[_ngcontent-%COMP%]{padding:8px 30px;border:none;border-radius:5px;background-color:#0672e4;color:#fff}.btn_ajouter[_ngcontent-%COMP%]   .btn_save[_ngcontent-%COMP%]:hover{background-color:#0863c5;transition:all .5s}.champ_input_inventaire[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.champ_input_inventaire[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:24px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#0672e4}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.input_cursor[_ngcontent-%COMP%]{cursor:pointer}.icon_arrow[_ngcontent-%COMP%]{position:absolute;right:10px;top:25px}.icon_arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px;color:#000}.popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;width:50%}.popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.popup-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer}.popup-footer[_ngcontent-%COMP%]{margin-top:20px;text-align:right}.btn-cancel[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{margin-left:10px;border:none;border-radius:4px;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]{background-color:red;padding:6px 25px;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d80101;transition:all ease-in .5s}.btn-submit[_ngcontent-%COMP%]{background-color:#0672e4;padding:6px 25px;color:#fff;cursor:pointer;cursor:no-drop}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0863c5;transition:all ease-in .5s}.error-text[_ngcontent-%COMP%]{color:#f44;font-size:.8rem;margin-top:4px}.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.error-messageApi[_ngcontent-%COMP%]{font-size:14px;color:red;font-weight:700;position:relative;top:-20px;left:-20px}.success-messageApi[_ngcontent-%COMP%]{font-size:14px;color:#0672e4;font-weight:700;position:relative;top:-20px;left:-20px}.error-messageApi2[_ngcontent-%COMP%]{font-size:14px;color:red;font-weight:700}.success-messageApi2[_ngcontent-%COMP%]{font-size:14px;color:#0672e4;font-weight:700}.error[_ngcontent-%COMP%]{font-size:14px;color:red;font-weight:700;position:relative}.grid_colonne[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:20px}.div1[_ngcontent-%COMP%]{grid-area:1/1/2/2}.div2[_ngcontent-%COMP%]{grid-area:1/2/2/3}.div3[_ngcontent-%COMP%]{grid-area:1/3/2/4}input[type=tel][_ngcontent-%COMP%]{letter-spacing:.5px}']})}}return r})()}}]);