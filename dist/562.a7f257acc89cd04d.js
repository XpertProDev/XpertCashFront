"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[562],{562:(q,p,c)=>{c.r(p),c.d(p,{BoutiqueComponent:()=>O});var l=c(177),s=c(9417),e=c(4438),d=c(9192),g=c(8026);const _=n=>({"background-color":n,color:"white"});function m(n,a){if(1&n&&(e.j41(0,"div",17),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.successMessage," ")}}function f(n,a){if(1&n&&(e.j41(0,"div",18),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(),e.SpI(" ",t.errorMessage," ")}}function h(n,a){1&n&&(e.j41(0,"div",19)(1,"div",20),e.nrm(2,"div",21),e.j41(3,"p"),e.EFF(4,"Creation en cours..."),e.k0s()()())}function b(n,a){if(1&n){const t=e.RV6();e.j41(0,"tr",22),e.bIt("click",function(){const o=e.eBV(t).$implicit,u=e.XpG();return e.Njj(u.openBoutiqueDetail(o.id))}),e.j41(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"td",23)(13,"span",24),e.EFF(14),e.k0s()()()}if(2&n){const t=a.$implicit;e.R7$(2),e.JRh(t.nomBoutique),e.R7$(2),e.JRh(t.email||"Non email"),e.R7$(2),e.JRh(t.adresse||"Non adresse"),e.R7$(2),e.JRh(t.telephone||"Non t\xe9l\xe9phone"),e.R7$(2),e.JRh(e.i5U(11,7,t.createdAt,"dd/MM/yyyy HH:mm")),e.R7$(3),e.Y8G("ngStyle",e.eq3(10,_,t.actif?"#008000":"#dc3545")),e.R7$(),e.SpI(" ",t.actif?"Actif":"Inactif"," ")}}function C(n,a){1&n&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"Le nom boutique complet est vide."),e.k0s()())}function x(n,a){1&n&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"Un email valide est vide."),e.k0s()())}function M(n,a){1&n&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"Le num\xe9ro de t\xe9l\xe9phone est requis."),e.k0s()())}function P(n,a){1&n&&(e.j41(0,"div")(1,"small",42),e.EFF(2,"L'adresse boutique valide est vide."),e.k0s()())}function v(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",25)(1,"div",26)(2,"div",27)(3,"h4"),e.EFF(4,"Ajouter une boutique"),e.k0s(),e.j41(5,"button",28),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closePopup())}),e.EFF(6,"\xd7"),e.k0s()(),e.j41(7,"form",29)(8,"div",30)(9,"div",31)(10,"div",32),e.nrm(11,"input",33),e.j41(12,"label",34),e.EFF(13,"Nom boutque"),e.k0s(),e.DNE(14,C,3,0,"div",35),e.k0s(),e.j41(15,"div",32),e.nrm(16,"input",36),e.j41(17,"label",34),e.EFF(18,"Email"),e.k0s(),e.DNE(19,x,3,0,"div",35),e.k0s()(),e.j41(20,"div",31)(21,"div",32),e.nrm(22,"input",37),e.j41(23,"label",34),e.EFF(24,"Phone"),e.k0s(),e.DNE(25,M,3,0,"div",35),e.k0s(),e.j41(26,"div",32),e.nrm(27,"input",38),e.j41(28,"label",34),e.EFF(29,"Adresse boutique"),e.k0s(),e.DNE(30,P,3,0,"div",35),e.k0s()()(),e.j41(31,"div",39)(32,"button",40),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closePopup())}),e.EFF(33,"Annuler"),e.k0s(),e.j41(34,"button",41),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onSubmit())}),e.EFF(35," Ajouter "),e.k0s()()()()()}if(2&n){let t,i,o,u;const r=e.XpG();e.R7$(7),e.Y8G("formGroup",r.boutiqueForm),e.R7$(7),e.Y8G("ngIf",(null==(t=r.boutiqueForm.get("nomBoutique"))?null:t.invalid)&&(null==(t=r.boutiqueForm.get("nomBoutique"))?null:t.touched)),e.R7$(5),e.Y8G("ngIf",(null==(i=r.boutiqueForm.get("emailBoutique"))?null:i.invalid)&&(null==(i=r.boutiqueForm.get("emailBoutique"))?null:i.touched)),e.R7$(6),e.Y8G("ngIf",(null==(o=r.boutiqueForm.get("telephoneBoutique"))?null:o.invalid)&&(null==(o=r.boutiqueForm.get("telephoneBoutique"))?null:o.touched)),e.R7$(5),e.Y8G("ngIf",(null==(u=r.boutiqueForm.get("adresseBoutique"))?null:u.invalid)&&(null==(u=r.boutiqueForm.get("adresseBoutique"))?null:u.touched)),e.R7$(4),e.xc7("background-color",r.boutiqueForm.valid?"#0672E4":"#0671e434")("color",r.boutiqueForm.valid?"#ffffff":"#00000073")("cursor",r.boutiqueForm.valid?"pointer":"no-drop"),e.Y8G("disabled",r.boutiqueForm.invalid)}}let O=(()=>{class n{constructor(t,i,o,u){this.fb=t,this.router=i,this.usersService=o,this.cdRef=u,this.showPopup=!1,this.boutiques=[],this.filteredBoutiques=[],this.isLoading=!1,this.boutiqueForm=new s.gE({}),this.errorMessage=null,this.successMessage=null,this.filteredUsers=[],this.indicatif="",this.maxPhoneLength=8,this.isAscending=!0,this.searchTerm=""}ngOnInit(){this.initForm(),this.fetchBoutiques()}initForm(){this.boutiqueForm=this.fb.group({nomBoutique:["",s.k0.required],email:[""],telephone:["",[s.k0.pattern(/^\d{8,15}$/)]],adresse:[""]})}updatePhoneValidator(t){this.boutiqueForm.controls.telephoneBoutique.setValidators([s.k0.required,s.k0.pattern(`^\\+\\d{1,3}\\s?\\d{${t}}$`)]),this.boutiqueForm.controls.telephoneBoutique.updateValueAndValidity()}openPopup(){this.showPopup=!0}closePopup(){this.showPopup=!1,this.resetForm()}resetForm(){this.boutiqueForm&&this.boutiqueForm.reset()}onSubmit(){console.log("onSubmit() d\xe9clench\xe9 !"),this.boutiqueForm.valid?(console.log("Formulaire valide, envoi en cours...",this.boutiqueForm.value),this.usersService.addBoutique(this.boutiqueForm.value).subscribe({next:t=>{console.log("R\xe9ponse du backend :",t),this.successMessage="Boutique ajout\xe9e avec succ\xe8s !",this.fetchBoutiques(),this.resetForm(),this.closePopup()},error:t=>{console.error("Erreur lors de l'ajout :",t),this.errorMessage=t.error?.error||"Une erreur est survenue."}})):console.warn("Le formulaire est invalide !")}fetchBoutiques(){this.usersService.getBoutiquesByEntreprise().subscribe({next:t=>{this.boutiques=t,this.filteredBoutiques=[...t],console.log("Boutiques r\xe9cup\xe9r\xe9es:",this.boutiques)},error:t=>{console.error("Erreur lors de la r\xe9cup\xe9ration des boutiques:",t)}})}filterBoutiques(){const t=this.searchTerm.toLowerCase();this.filteredBoutiques=t?this.boutiques.filter(i=>i.nomBoutique&&i.nomBoutique.toLowerCase().includes(t)||i.adresse&&i.adresse.toLowerCase().includes(t)):[...this.boutiques]}clearSearch(){this.searchTerm="",this.filteredBoutiques=this.boutiques}openBoutiqueDetail(t){this.router.navigate(["/detail-boutique",t])}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(s.ok),e.rXU(d.Ix),e.rXU(g.g),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-boutique"]],decls:34,vars:7,consts:[[1,"toast-container"],["class","alert alert-success toast-message-success",4,"ngIf"],["class","alert alert-danger toast-message-danger",4,"ngIf"],[1,"containerTable"],["class","loading-overlay",4,"ngIf"],[1,"tasks-header"],[1,"title"],[1,"actions"],[1,"add-task",3,"click"],[1,"contentIcon"],[1,"bare"],[1,"inputSearch"],["type","text","placeholder","Recherche...",3,"ngModelChange","input","ngModel"],[3,"click","ngClass"],[1,"titleTableProduit"],[3,"click",4,"ngFor","ngForOf"],["class","popup-overlay",4,"ngIf"],[1,"alert","alert-success","toast-message-success"],[1,"alert","alert-danger","toast-message-danger"],[1,"loading-overlay"],[1,"loading-content"],[1,"spinner"],[3,"click"],[1,"content_statut_boutique"],[1,"statut_boutique",3,"ngStyle"],[1,"popup-overlay"],[1,"popup-content"],[1,"popup-header"],[1,"close-btn",3,"click"],[3,"formGroup"],[1,"popup-body"],[1,"champ_grid"],[1,"champ_input"],["type","text","formControlName","nomBoutique","placeholder","Saisis le nom de boutique",1,"input_focus"],[1,"label"],[4,"ngIf"],["type","email","formControlName","email","placeholder","Saisis l'email",1,"input_focus"],["type","number","formControlName","telephone","placeholder","00 00 00 00",1,"input_focus"],["type","text","formControlName","adresse","placeholder","Saisis l'adresse",1,"input_focus"],[1,"popup-footer"],[1,"btn-cancel",3,"click"],[1,"btn-submit",3,"click","disabled"],[1,"error"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.DNE(1,m,2,1,"div",1)(2,f,2,1,"div",2),e.k0s(),e.j41(3,"div",3),e.DNE(4,h,5,0,"div",4),e.j41(5,"div",5)(6,"h1",6),e.EFF(7,"Mes boutiques"),e.k0s(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return o.openPopup()}),e.EFF(10,"Ajouter "),e.k0s(),e.j41(11,"div",9),e.nrm(12,"div",10),e.k0s(),e.j41(13,"div",11)(14,"input",12),e.mxI("ngModelChange",function(r){return e.DH7(o.searchTerm,r)||(o.searchTerm=r),r}),e.bIt("input",function(){return o.filterBoutiques()}),e.k0s(),e.j41(15,"i",13),e.bIt("click",function(){return o.clearSearch()}),e.k0s()()()(),e.j41(16,"table")(17,"thead")(18,"tr",14)(19,"th"),e.EFF(20,"Nom "),e.k0s(),e.j41(21,"th"),e.EFF(22,"Email "),e.k0s(),e.j41(23,"th"),e.EFF(24,"Adresse "),e.k0s(),e.j41(25,"th"),e.EFF(26,"T\xe9l\xe9phone "),e.k0s(),e.j41(27,"th"),e.EFF(28,"Date de Creation "),e.k0s(),e.j41(29,"th"),e.EFF(30,"Statut"),e.k0s()()(),e.j41(31,"tbody"),e.DNE(32,b,15,12,"tr",15),e.k0s()()(),e.DNE(33,v,36,12,"div",16)),2&i&&(e.R7$(),e.Y8G("ngIf",o.successMessage),e.R7$(),e.Y8G("ngIf",o.errorMessage),e.R7$(2),e.Y8G("ngIf",o.isLoading),e.R7$(10),e.R50("ngModel",o.searchTerm),e.R7$(),e.Y8G("ngClass",o.searchTerm?"ri-close-line red-icon":"ri-search-2-line"),e.R7$(17),e.Y8G("ngForOf",o.filteredBoutiques),e.R7$(),e.Y8G("ngIf",o.showPopup))},dependencies:[l.MD,l.YU,l.Sq,l.bT,l.B3,l.vh,s.YN,s.qT,s.me,s.Q0,s.BC,s.cb,s.vS,s.X1,s.j4,s.JD],styles:['@charset "UTF-8";.title_return[_ngcontent-%COMP%]{display:flex;align-items:center}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.title[_ngcontent-%COMP%]{font-size:18px;margin:0 0 0 10px}tr[_ngcontent-%COMP%]{font-size:13px}th[_ngcontent-%COMP%]{border-bottom:1px solid rgba(221,221,221,.5803921569);padding:8px}td[_ngcontent-%COMP%]{padding:15px 8px;border-bottom:1px solid rgba(221,221,221,.5803921569)}th[_ngcontent-%COMP%]{background-color:#f2f2f2}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.containerTable[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px}.tasks-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.actions[_ngcontent-%COMP%]{display:flex;align-items:center}.add-task[_ngcontent-%COMP%]{padding:10px 30px;background-color:#0672e4;color:#fff;border-radius:5px;border:none}.contentIcon[_ngcontent-%COMP%]{margin:0 10px;display:flex;align-items:center}.contentIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:0 15px;font-size:20px;cursor:pointer}.contentIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#0672e4;transition:all .5s ease}.bare[_ngcontent-%COMP%]{width:2px;height:30px;background-color:#eee}.inputSearch[_ngcontent-%COMP%]{position:relative;height:40px;display:flex;align-items:center;background-color:#f9f9f9;border:1px solid #ddd;border-radius:20px;padding:0 15px;transition:all .3s ease-in-out}.inputSearch[_ngcontent-%COMP%]:hover{border-color:#0672e4}.inputSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;height:100%;border:none;outline:none;background:transparent;font-size:14px;color:#333;padding-left:10px}.inputSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa;font-size:13px}.inputSearch[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;cursor:pointer;color:#aaa;transition:all .3s ease-in-out}.inputSearch[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#0672e4}.inputSearch[_ngcontent-%COMP%]   .red-icon[_ngcontent-%COMP%]{color:red}.inputSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding-left:10px;border-radius:5px}.inputSearch[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:15px;font-size:17px}.titleTableProduit[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:12px}.content_sort[_ngcontent-%COMP%]{display:flex;align-items:center}.icon_sort[_ngcontent-%COMP%]{margin-left:6px}.icon_sort[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;color:#292929}.popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;width:50%}.popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.popup-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer}.popup-footer[_ngcontent-%COMP%]{margin-top:20px;text-align:right}.btn-cancel[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{margin-left:10px;border:none;border-radius:4px;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]{background-color:#f3d8da;border:1px solid #E7B1B6;padding:6px 25px;color:#000}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#e7b1b6;transition:all .5s}.btn-submit[_ngcontent-%COMP%]{background-color:#0671e434;padding:6px 25px;color:#fff;cursor:pointer;cursor:no-drop}.double_input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.champ_input[_ngcontent-%COMP%]{position:relative;margin-bottom:25px}.input_focus[_ngcontent-%COMP%]{width:100%;min-width:150px;height:49px;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:14px;background:none;color:#695c5c}.champ_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:4px;pointer-events:none;color:#6b6666}.champ_grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:20px}.input_focus[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.input_focus[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:0;left:0;transition:all .3s ease-in-out;background:none;font-size:11px;padding:0}.input_focus[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:12px;transition:all .2s ease-in-out}.toast-container[_ngcontent-%COMP%]{position:fixed;top:60px;right:35px;z-index:9999}.toast-message-success[_ngcontent-%COMP%]{background-color:#d5e6de;border:1px solid #ACCEBC;color:#000;padding:10px;border-radius:8px;font-size:13px;box-shadow:0 4px 6px #0000001a;opacity:0;animation:_ngcontent-%COMP%_fadeInOut 4s ease-in-out;transform:translateY(-20px)}.toast-message-danger[_ngcontent-%COMP%]{background-color:#f3d8da;border:1px solid #E7B1B6;color:#000;padding:10px;border-radius:8px;font-size:13px;box-shadow:0 4px 6px #0000001a;opacity:0;animation:_ngcontent-%COMP%_fadeInOut 4s ease-in-out;transform:translateY(-20px)}@keyframes _ngcontent-%COMP%_fadeInOut{0%{opacity:0;transform:translateY(-20px)}20%{opacity:1;transform:translateY(0)}80%{opacity:1}to{opacity:0;transform:translateY(2px)}}.error[_ngcontent-%COMP%]{color:red;font-weight:700;margin-top:10px}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;color:#fff;font-size:18px;z-index:9999999999}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid white;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.red-icon[_ngcontent-%COMP%]{color:red}.statut_boutique[_ngcontent-%COMP%]{background-color:green;color:#fff;padding:4px 10px;border-radius:20px;font-size:10px}']})}}return n})()}}]);