"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[9597],{6822:(O,x,s)=>{s.d(x,{K:()=>m});var m=function(a){return a.BROUILLON="BROUILLON",a.APPROBATION="APPROBATION",a.APPROUVE="APPROUVE",a.ENVOYE="ENVOYE",a.VALIDE="VALIDE",a.ANNULE="ANNULE",a}(m||{})},6115:(O,x,s)=>{s.d(x,{v:()=>a});var m=s(4438);let a=(()=>{class C{transform(b){return null==b?"":b.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}static{this.\u0275fac=function(y){return new(y||C)}}static{this.\u0275pipe=m.EJ8({name:"customNumber",type:C,pure:!0})}}return C})()},2409:(O,x,s)=>{s.d(x,{c:()=>k});var m=s(1626),a=s(8810),C=s(8141),E=s(9437),b=s(6822),y=s(2525),M=s(4438);let k=(()=>{class F{constructor(p){this.http=p,this.apiUrl=y.c.apiBaseUrl}creerFactureProforma(p,l,d,_){const f=localStorage.getItem("authToken");if(!f)return(0,a.$)(()=>new Error("Token manquant"));const t=new m.Lr({Authorization:`Bearer ${f}`});let v=new m.Nl;return _&&(void 0!==l&&(v=v.set("remisePourcentage",l.toString())),void 0!==d&&(v=v.set("appliquerTVA",d.toString()))),this.http.post(`${this.apiUrl}/ajouter`,p,{headers:t,params:v}).pipe((0,C.M)(u=>console.log("Facture cr\xe9\xe9e avec succ\xe8s:",u)),(0,E.W)(u=>(console.error("Erreur d\xe9taill\xe9e:",u),console.log("Corps de la r\xe9ponse:",u.error),(0,a.$)(()=>u))))}getAlFactproformaOfEntreprise(p){const l=localStorage.getItem("authToken");if(!l)return console.error("Aucun token trouv\xe9"),(0,a.$)("Aucun token trouv\xe9");const d=new m.Lr({Authorization:`Bearer ${l}`});return this.http.get(`${this.apiUrl}/mes-factures`,{headers:d})}getFactureProformaById(p){const l=localStorage.getItem("authToken"),d=new m.Lr({Authorization:`Bearer ${l}`});return this.http.get(`${this.apiUrl}/factureProforma/${p}`,{headers:d})}updateFactureProforma(p,l,d,_,f){const t=localStorage.getItem("authToken");if(!t)return(0,a.$)(()=>new Error("Token manquant"));const v=new m.Lr({Authorization:`Bearer ${t}`,"Content-Type":"application/json"});let u=new m.Nl;return void 0!==l&&(u=u.set("remisePourcentage",l.toString())),void 0!==d&&(u=u.set("appliquerTVA",d.toString())),f&&f.length>0&&f.forEach(P=>{u=u.append("idsApprobateurs",P.toString())}),_.statut===b.K.ANNULE&&(u=u.set("isAnnulation","true")),this.http.put(`${this.apiUrl}/updatefacture/${p}`,_,{headers:v,params:u}).pipe((0,C.M)(P=>console.log("Facture mise \xe0 jour:",P)),(0,E.W)(P=>(console.error("Erreur mise \xe0 jour:",P),(0,a.$)(()=>P))))}envoyerFactureEmail(p,l){const d=new FormData;d.append("to",l.to),d.append("cc",l.cc),d.append("subject",l.subject),d.append("body",l.body),l.attachments&&l.attachments.forEach((t,v)=>{d.append("attachments",t,t.name)});const _=localStorage.getItem("authToken"),f=new m.Lr({Authorization:`Bearer ${_}`});return this.http.post(`${this.apiUrl}/factures/${p}/envoyer-email`,d,{headers:f,responseType:"text"})}getHistoriqueFacture(p){const l=localStorage.getItem("authToken"),d=new m.Lr({Authorization:`Bearer ${l}`});return this.http.get(`${this.apiUrl}/factpro/${p}/historique`,{headers:d})}getNotesFactureProforma(p){const l=localStorage.getItem("authToken"),d=new m.Lr({Authorization:`Bearer ${l}`});return this.http.get(`${this.apiUrl}/factures/${p}/notes`,{headers:d})}getNoteById(p,l){const d=localStorage.getItem("authToken"),_=new m.Lr({Authorization:`Bearer ${d}`,Accept:"application/json"});return this.http.get(`${this.apiUrl}/auth/${p}/notes/${l}`,{headers:_})}updateNote(p,l,d){const _=localStorage.getItem("authToken"),f=new m.Lr({Authorization:`Bearer ${_}`,"Content-Type":"application/json"});return this.http.put(`${this.apiUrl}/${p}/notes/${l}`,{nouveauContenu:d},{headers:f}).pipe((0,C.M)(u=>console.log("Note modifi\xe9e avec succ\xe8s:",u)),(0,E.W)(u=>(console.error("Erreur lors de la modification de la note:",u),(0,a.$)(()=>u))))}deletNoteFactureProforma(p,l){const d=localStorage.getItem("authToken"),_=new m.Lr({Authorization:`Bearer ${d}`,Accept:"application/json"});return this.http.delete(`${this.apiUrl}/${p}/notes/${l}/supprimer`,{headers:_})}getFacturesByClient(p,l){const d=localStorage.getItem("authToken"),_=new m.Lr({Authorization:`Bearer ${d}`});let f=new m.Nl;return p&&(f=f.set("clientId",p.toString())),l&&(f=f.set("entrepriseClientId",l.toString())),this.http.get(`${this.apiUrl}/factures/client`,{headers:_,params:f}).pipe((0,E.W)(t=>(console.error("Erreur dans getFacturesByClient:",t),(0,a.$)(()=>t))))}static{this.\u0275fac=function(l){return new(l||F)(M.KVO(m.Qq))}}static{this.\u0275prov=M.jDH({token:F,factory:F.\u0275fac,providedIn:"root"})}}return F})()},9597:(O,x,s)=>{s.r(x),s.d(x,{DetailEditClientComponent:()=>bt});var m=s(467),a=s(9417),C=s(7673),E=s(4412),b=s(4572),y=s(9172),M=s(6354),k=s(6967),F=s(177),I=s(850),p=s(6115),l=s(4114),d=s(1811),_=s(9980),f=s(6850),t=s(4438),v=s(777);let S=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=t.$C({type:n});static \u0275inj=t.G2t({imports:[v.M,v.M]})}return n})();var A=s(1281);let N=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=t.$C({type:n});static \u0275inj=t.G2t({imports:[v.M,v.M]})}return n})();var G=s(2525),D=s(9192),V=s(2120),B=s(7746),z=s(2409),L=s(4564);const U=["fileInput"],Y=()=>({standalone:!0}),X=(n,c,e,i)=>({draft:n,sent:c,approved:e,valid:i});function W(n,c){if(1&n){const e=t.RV6();t.j41(0,"i",74),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.toggleEditing())}),t.k0s()}}function J(n,c){if(1&n){const e=t.RV6();t.j41(0,"i",75),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.toggleEditing())}),t.k0s()}}function K(n,c){1&n&&(t.j41(0,"small"),t.EFF(1,"Champ requis."),t.k0s())}function H(n,c){1&n&&(t.j41(0,"small"),t.EFF(1,"Au moins 2 caract\xe8res."),t.k0s())}function Q(n,c){if(1&n&&(t.j41(0,"div",76),t.DNE(1,K,2,0,"small",68)(2,H,2,0,"small",68),t.k0s()),2&n){let e,i;const r=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=r.modifierClientForm.get("nomComplet"))||null==e.errors?null:e.errors.required),t.R7$(),t.Y8G("ngIf",null==(i=r.modifierClientForm.get("nomComplet"))||null==i.errors?null:i.errors.minlength)}}function Z(n,c){1&n&&(t.j41(0,"small"),t.EFF(1,"Format invalide."),t.k0s())}function q(n,c){if(1&n&&(t.j41(0,"div",76),t.DNE(1,Z,2,0,"small",68),t.k0s()),2&n){let e;const i=t.XpG();t.R7$(),t.Y8G("ngIf",null==(e=i.modifierClientForm.get("email"))||null==e.errors?null:e.errors.email)}}function tt(n,c){if(1&n&&(t.j41(0,"mat-option",88)(1,"div",89),t.EFF(2),t.k0s()()),2&n){const e=c.$implicit;t.Y8G("value",e),t.R7$(2),t.SpI(" ",e.nom," ")}}function et(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",77)(1,"div",24),t.nrm(2,"input",78),t.j41(3,"label",79),t.EFF(4,"Mon entreprise"),t.k0s(),t.j41(5,"mat-autocomplete",80,2),t.bIt("optionSelected",function(r){t.eBV(e);const o=t.XpG();return t.Njj(o.onEntrepriseSelected(r))}),t.j41(7,"mat-option",81),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.openPopup())}),t.j41(8,"div",82),t.nrm(9,"i",83),t.j41(10,"span",84),t.EFF(11,"Cr\xe9er une entreprise"),t.k0s()()(),t.DNE(12,tt,3,2,"mat-option",85),t.nI1(13,"async"),t.k0s(),t.j41(14,"div",86),t.nrm(15,"i",87),t.k0s()()()}if(2&n){const e=t.sdS(6),i=t.XpG();t.R7$(2),t.Y8G("formControl",i.control)("matAutocomplete",e),t.R7$(3),t.Y8G("displayWith",i.displayFnEntreprise),t.R7$(7),t.Y8G("ngForOf",t.bMT(13,4,i.filteredOptions))}}function nt(n,c){if(1&n&&(t.j41(0,"div",99),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.JRh(e.errorMessage)}}function it(n,c){if(1&n&&(t.j41(0,"div",100),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.JRh(e.successMessage)}}function rt(n,c){1&n&&(t.j41(0,"div",101),t.EFF(1," Veuillez s\xe9lectionner ou cr\xe9er une entreprise "),t.k0s())}function ot(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",90)(1,"div",91),t.DNE(2,nt,2,1,"div",92)(3,it,2,1,"div",93)(4,rt,2,0,"div",66),t.k0s(),t.j41(5,"div",94)(6,"div",95)(7,"button",96),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.goToClients())}),t.EFF(8),t.k0s()(),t.j41(9,"div",97)(10,"button",98),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.modifierClient())}),t.EFF(11," Modifier "),t.k0s()()()()}if(2&n){const e=t.XpG();t.R7$(2),t.Y8G("ngIf",e.errorMessage),t.R7$(),t.Y8G("ngIf",e.successMessage),t.R7$(),t.Y8G("ngIf",e.entrepriseRequiredError),t.R7$(4),t.JRh(e.isEditing?"Annuler":"Retour"),t.R7$(2),t.xc7("background-color",e.modifierClientForm.valid?"#0672E4":"#0671e434")("color",e.modifierClientForm.valid?"#ffffff":"#00000073")("cursor",e.modifierClientForm.valid?"pointer":"no-drop"),t.Y8G("disabled",e.modifierClientForm.invalid)("disabled",e.modifierClientForm.invalid)}}function at(n,c){if(1&n&&(t.j41(0,"tr")(1,"td",122),t.EFF(2),t.k0s(),t.j41(3,"td",122),t.EFF(4),t.k0s(),t.j41(5,"td",122),t.EFF(6),t.nI1(7,"customNumber"),t.k0s(),t.j41(8,"td",122),t.EFF(9),t.k0s(),t.j41(10,"td",122),t.EFF(11),t.nI1(12,"customNumber"),t.k0s()()),2&n){const e=c.$implicit;t.R7$(2),t.JRh(e.nomProduit),t.R7$(2),t.JRh(e.ligneDescription),t.R7$(2),t.JRh(t.bMT(7,5,e.prixUnitaire)),t.R7$(3),t.JRh(e.quantite),t.R7$(2),t.JRh(t.bMT(12,7,e.montantTotal))}}function st(n,c){1&n&&(t.j41(0,"tr")(1,"td",121),t.EFF(2,"Remise 0%"),t.k0s(),t.j41(3,"td",122),t.EFF(4,"0000"),t.k0s()())}function lt(n,c){1&n&&(t.j41(0,"tr")(1,"td",121),t.EFF(2,"TVA 0%"),t.k0s(),t.j41(3,"td",122),t.EFF(4,"000"),t.k0s()())}function ct(n,c){if(1&n&&(t.j41(0,"div",102)(1,"div",103)(2,"div",104),t.nrm(3,"img",105),t.k0s(),t.j41(4,"div",106)(5,"p",107),t.EFF(6),t.k0s(),t.j41(7,"p",107),t.EFF(8),t.k0s(),t.j41(9,"div",107),t.EFF(10),t.k0s()()(),t.nrm(11,"hr")(12,"hr"),t.j41(13,"div",108)(14,"h6"),t.EFF(15,"Facture proforma: "),t.j41(16,"span",109),t.EFF(17),t.k0s()()(),t.j41(18,"div",110)(19,"p",111),t.EFF(20),t.nI1(21,"date"),t.k0s()(),t.j41(22,"div",112)(23,"div",113)(24,"h6",114),t.EFF(25,"Doit : "),t.k0s(),t.j41(26,"p",114),t.EFF(27),t.k0s()(),t.j41(28,"div",115)(29,"h6",114),t.EFF(30,"Objet : "),t.k0s(),t.j41(31,"p",114),t.EFF(32),t.k0s()()(),t.j41(33,"div",116)(34,"table",117)(35,"thead")(36,"tr")(37,"th",118),t.EFF(38,"D\xe9signation"),t.k0s(),t.j41(39,"th",118),t.EFF(40,"Description"),t.k0s(),t.j41(41,"th",118),t.EFF(42,"PU"),t.k0s(),t.j41(43,"th",118),t.EFF(44,"Quantit\xe9"),t.k0s(),t.j41(45,"th",118),t.EFF(46,"Montant (FCFA)"),t.k0s()()(),t.j41(47,"tbody"),t.DNE(48,at,13,9,"tr",119),t.k0s(),t.j41(49,"tfoot",120)(50,"tr")(51,"td",121),t.EFF(52,"Total HT"),t.k0s(),t.j41(53,"td",122),t.EFF(54),t.nI1(55,"customNumber"),t.k0s()(),t.DNE(56,st,5,0,"tr",68)(57,lt,5,0,"tr",68),t.j41(58,"tr")(59,"td",121),t.EFF(60,"Montant TTC"),t.k0s(),t.j41(61,"td",122),t.EFF(62),t.nI1(63,"customNumber"),t.k0s()()()()(),t.j41(64,"div",123)(65,"p",124),t.EFF(66,"Arr\xeat\xe9 la pr\xe9sente facture \xe0 la somme de : Zero ....."),t.k0s()(),t.j41(67,"div",125)(68,"div",126)(69,"p",127),t.EFF(70),t.k0s()(),t.j41(71,"div",128)(72,"p",127),t.EFF(73),t.k0s()()(),t.j41(74,"div",129)(75,"div",130),t.nrm(76,"hr"),t.j41(77,"p",131)(78,"strong"),t.EFF(79),t.k0s()(),t.j41(80,"div",132)(81,"em"),t.EFF(82),t.k0s()(),t.j41(83,"div",133)(84,"em"),t.EFF(85),t.k0s()()()()()),2&n){const e=t.XpG();t.R7$(3),t.Y8G("src",e.entrepriseLogo,t.B4B),t.R7$(3),t.JRh(e.entrepriseNom),t.R7$(2),t.SpI("Secteur: ",e.entrepriseSecteur,""),t.R7$(2),t.Lme(" Email: ",e.entrepriseEmail," T\xe9l\xe9phone: ",e.entrepriseTelephone," "),t.R7$(7),t.SpI(" ",e.factureDetails.numeroFacture," "),t.R7$(3),t.Lme(" ",e.entrepriseSiege,", ",t.i5U(21,24,e.factureDetails.dateCreation,"dd/MM/yyyy")," "),t.R7$(7),t.SpI(" ",(null==e.factureDetails.client?null:e.factureDetails.client.nomComplet)||(null==e.factureDetails.entrepriseClient?null:e.factureDetails.entrepriseClient.nom)," "),t.R7$(5),t.SpI(" ",e.factureDetails.description," "),t.R7$(16),t.Y8G("ngForOf",e.factureDetails.lignesFacture),t.R7$(6),t.JRh(t.bMT(55,27,e.factureDetails.totalHT)),t.R7$(2),t.Y8G("ngIf",e.factureDetails.remise>0),t.R7$(),t.Y8G("ngIf",e.factureDetails.tva),t.R7$(5),t.JRh(t.bMT(63,29,e.factureDetails.totalFacture)),t.R7$(8),t.JRh(e.entrepriseSignataire),t.R7$(3),t.JRh(e.entrepriseSignataireNom),t.R7$(6),t.JRh(e.entrepriseSiteWeb),t.R7$(3),t.LHq(" NINA: ",e.entrepriseNina," RCCM: ",e.entrepriseRccm," NIF: ",e.entrepriseNif," Banque: ",e.entrepriseBanque," "),t.R7$(3),t.Lme("Adresse : ",e.entrepriseAdresse," /",e.entreprisePays,"")}}function dt(n,c){}function pt(n,c){1&n&&(t.j41(0,"div",134),t.nrm(1,"i",135),t.EFF(2," Chargement des factures... "),t.k0s())}function mt(n,c){if(1&n&&(t.j41(0,"div",101),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.SpI(" ",e.errorFactures," ")}}function ut(n,c){1&n&&(t.j41(0,"div",136),t.nrm(1,"i",137),t.j41(2,"p"),t.EFF(3,"Aucune facture trouv\xe9e pour ce client"),t.k0s()())}function gt(n,c){if(1&n){const e=t.RV6();t.j41(0,"tr",141),t.bIt("click",function(){const r=t.eBV(e).$implicit,o=t.XpG(2);return t.Njj(o.onSelectFacture(r))}),t.j41(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"td")(7,"span",142),t.EFF(8),t.k0s()(),t.j41(9,"td",139),t.EFF(10),t.nI1(11,"customNumber"),t.k0s()()}if(2&n){const e=c.$implicit,i=t.XpG(2);t.AVh("selected-row",i.selectedFactureId===e.id),t.R7$(2),t.JRh(e.numeroFacture),t.R7$(2),t.JRh(t.i5U(5,7,e.dateFacture,"dd/MM/yyyy")),t.R7$(3),t.Y8G("ngClass",t.ziG(12,X,"BROUILLON"===e.statut,"ENVOYE"===e.statut,"APPROUVE"===e.statut,"VALIDE"===e.statut)),t.R7$(),t.SpI(" ",e.statut," "),t.R7$(2),t.JRh(t.bMT(11,10,e.totalFacture))}}function ft(n,c){if(1&n&&(t.j41(0,"table")(1,"thead")(2,"tr",138)(3,"th"),t.EFF(4,"Num\xe9ro"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Date"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Statut"),t.k0s(),t.j41(9,"th",139),t.EFF(10,"Montant"),t.k0s()()(),t.j41(11,"tbody"),t.DNE(12,gt,12,17,"tr",140),t.k0s()()),2&n){const e=t.XpG();t.R7$(12),t.Y8G("ngForOf",e.facturesClient)}}function ht(n,c){if(1&n&&(t.j41(0,"div",143)(1,"table",144)(2,"tfoot",145)(3,"tr")(4,"td",146),t.EFF(5,"Total"),t.k0s(),t.j41(6,"td",147),t.EFF(7),t.nI1(8,"customNumber"),t.k0s()()()()()),2&n){const e=t.XpG();t.R7$(7),t.SpI(" ",t.bMT(8,1,e.getTotalFactures())," ")}}function _t(n,c){1&n&&(t.j41(0,"div",170),t.EFF(1," Ce champ est requis "),t.k0s())}function vt(n,c){if(1&n&&(t.j41(0,"div",171),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI(" ",e.errorMessageApi," ")}}function Ct(n,c){if(1&n){const e=t.RV6();t.j41(0,"div",148)(1,"div",149)(2,"div",150)(3,"h4"),t.EFF(4,"Ajouter une entreprise"),t.k0s(),t.j41(5,"button",151),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.closePopup())}),t.EFF(6,"\xd7"),t.k0s()(),t.j41(7,"form",152)(8,"div",153)(9,"div",154)(10,"div",24),t.nrm(11,"input",155),t.j41(12,"label",156),t.EFF(13,"Nom entreprise "),t.j41(14,"span",157),t.EFF(15,"*"),t.k0s()(),t.DNE(16,_t,2,0,"div",158),t.k0s(),t.j41(17,"div",24),t.nrm(18,"input",159),t.j41(19,"label",156),t.EFF(20,"Email"),t.k0s()()(),t.j41(21,"div",154)(22,"div",24),t.nrm(23,"input",160),t.j41(24,"label",156),t.EFF(25,"Adresse"),t.k0s()(),t.j41(26,"div",24),t.nrm(27,"input",161),t.j41(28,"label",156),t.EFF(29,"Ville"),t.k0s()()(),t.j41(30,"div",162)(31,"div",32)(32,"select",33),t.bIt("change",function(r){t.eBV(e);const o=t.XpG();return t.Njj(o.onEntreprisePaysChange(r))}),t.j41(33,"option",163),t.EFF(34,"Pays"),t.k0s(),t.j41(35,"option",35),t.EFF(36,"Mali"),t.k0s(),t.j41(37,"option",36),t.EFF(38,"S\xe9n\xe9gal"),t.k0s(),t.j41(39,"option",37),t.EFF(40,"C\xf4te d'Ivoire"),t.k0s()()(),t.j41(41,"div",39)(42,"input",164),t.bIt("focus",function(){let r;t.eBV(e);const o=t.XpG();return t.Njj(o.onEntreprisePaysChange({target:{value:null==(r=o.entrepriseForm.get("pays"))?null:r.value}}))})("input",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.formatEntreprisePhoneNumber())}),t.k0s(),t.j41(43,"label",156),t.EFF(44,"T\xe9l\xe9phone"),t.k0s()(),t.j41(45,"div",41),t.nrm(46,"input",165),t.j41(47,"label",156),t.EFF(48,"Secteur"),t.k0s()()()(),t.j41(49,"div",91),t.DNE(50,vt,2,1,"div",166),t.k0s(),t.j41(51,"div",167)(52,"button",168),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.closePopup())}),t.EFF(53,"Annuler"),t.k0s(),t.j41(54,"button",169),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.ajouterEntreprise())}),t.EFF(55," Ajouter "),t.k0s()()()()()}if(2&n){let e;const i=t.XpG();t.R7$(7),t.Y8G("formGroup",i.entrepriseForm),t.R7$(9),t.Y8G("ngIf",(null==(e=i.entrepriseForm.get("nom"))?null:e.invalid)&&(null==(e=i.entrepriseForm.get("nom"))?null:e.touched)),t.R7$(34),t.Y8G("ngIf",i.errorMessageApi),t.R7$(4),t.xc7("background-color",i.entrepriseForm.valid?"#0672E4":"#0671e434")("color",i.entrepriseForm.valid?"#ffffff":"#00000073")("cursor",i.entrepriseForm.valid?"pointer":"no-drop"),t.Y8G("disabled",i.entrepriseForm.invalid)}}let bt=(()=>{class n{ngOnInit(){this.getListEntreprise(),this.initEntreprise(),this.getClientForm(),this.getEntrepriseForm(),this.loadEntreprises(),this.getRouteClient(),this.modifierClientForm.disable(),this.control.disable(),this.loadEntrepriseInfo()}constructor(e,i,r,o,g,h){this.router=e,this.fb=i,this.entrepriseService=r,this.clientService=o,this.route=g,this.factureService=h,this.imgUrl=G.c.imgUrl,this.errorMessage="",this.errorMessageApi="",this.successMessage="",this.isEntrepriseSelected=!1,this.showPopup=!1,this.urllink="assets/img/appareil.jpg",this.newPhotoUrl=null,this.selectedFile=null,this.imageFile=null,this.control=new a.MJ,this.filteredOptions=(0,C.of)([]),this.loading=!1,this.optionsEntreprise$=new E.t([]),this.entrepriseRequiredError=!1,this.indicatif="",this.maxPhoneLength=0,this.entrepriseIndicatif="",this.entrepriseMaxPhoneLength=0,this.facturesClient=[],this.loadingFactures=!1,this.errorFactures="",this.selectedFactureId=null,this.factureDetails=null,this.clientPhotoUrl=null,this.selectedImageFile=null,this.entrepriseNom="",this.entrepriseSecteur="",this.entrepriseEmail="",this.entrepriseTelephone="",this.entrepriseSiege="",this.entrepriseLogo="",this.entrepriseSiteWeb="",this.entrepriseNina="",this.entrepriseRccm="",this.entrepriseNif="",this.entrepriseBanque="",this.entrepriseAdresse="",this.entreprisePays="",this.entrepriseSignataireNom="",this.entrepriseSignataire="",this.isEditing=!1,this.displayedColumns1=["numero","date","statut","montant"],this.paysIndicatifs={Mali:{indicatif:"+223",longueur:8},S\u00e9n\u00e9gal:{indicatif:"+221",longueur:9},"C\xf4te d'Ivoire":{indicatif:"+225",longueur:10}}}testImageCompression(e){var i=this;return(0,m.A)(function*(){if(!e)return void console.log("Aucun fichier s\xe9lectionn\xe9.");console.log("Taille originale:",e.size/1024,"Ko");const r={maxSizeMB:1,maxWidthOrHeight:1e3,useWebWorker:!0};try{const o=yield(0,k.A)(e,r);if(console.log("Taille apr\xe8s compression:",o.size/1024,"Ko"),"image/png"!==o.type&&"image/jpeg"!==o.type)return console.error("Le fichier compress\xe9 n'est pas un format support\xe9 (PNG ou JPEG)."),void(i.errorMessage="Erreur de compression : Le format de l'image n'est pas valide.");const g=new FileReader;g.onload=h=>{i.newPhotoUrl=h.target?.result,console.log("Image compress\xe9e pr\xeate \xe0 \xeatre affich\xe9e !")},g.readAsDataURL(o)}catch(o){console.error("Erreur lors de la compression:",o)}})()}loadFactureDetails(e){this.factureService.getFactureProformaById(e).subscribe({next:i=>{const r=i.remise||0,o=i.totalHT-i.totalHT*r/100;let g=0,h=0;i.tva&&(g=i.totalFacture-o,o>0&&(h=g/o));let j=r;j>100&&(console.warn(`Remise invalide corrig\xe9e: ${j}% -> 100%`),j=100),this.factureDetails={...i,montantTVA:g,tauxTva:h,remise:j}},error:i=>{console.error("Erreur chargement d\xe9tails facture",i)}})}onSelectFacture(e){this.selectedFactureId=e.id,this.loadFactureDetails(e.id)}loadEntrepriseInfo(){this.entrepriseService.getEntrepriseInfo().subscribe({next:e=>{this.entrepriseNom=e.nom,this.entrepriseSecteur=e.secteur,this.entrepriseEmail=e.email,this.entrepriseTelephone=e.telephone,this.entrepriseSiege=e.siege,this.entrepriseLogo=e.logo?`${this.imgUrl}${e.logo}`:"",this.entrepriseSiteWeb=e.siteWeb,this.entrepriseNina=e.nina,this.entrepriseRccm=e.rccm,this.entrepriseNif=e.nif,this.entrepriseBanque=e.banque,this.entrepriseAdresse=e.adresse,this.entreprisePays=e.pays,this.entrepriseSignataireNom=e.signataireNom,this.entrepriseSignataire=e.signataire},error:e=>{console.error("Erreur chargement infos entreprise",e)}})}getTotalFactures(){const e=this.facturesClient.reduce((i,r)=>i+r.totalFacture,0);return Math.round(e)}triggerFileInput(){this.isEditing&&this.fileInput.nativeElement.click()}onFileSelected(e){const i=e.target;if(i.files&&i.files.length>0){const r=i.files[0];if(!["image/jpeg","image/png","image/jpg"].includes(r.type))return void(this.errorMessage="Seuls les formats JPG, PNG sont accept\xe9s");this.selectedImageFile=r;const g=new FileReader;g.onload=h=>{this.newPhotoUrl=h.target?.result},g.readAsDataURL(r)}}startEditing(){this.isEditing=!0,this.modifierClientForm.enable()}onPaysChange(e){const r=this.paysIndicatifs[e.target.value];r?(this.indicatif=`${r.indicatif} `,this.maxPhoneLength=this.indicatif.length+r.longueur,this.modifierClientForm.get("telephone")?.enable(),(this.modifierClientForm.get("telephone")?.value||"").startsWith(this.indicatif)||this.modifierClientForm.get("telephone")?.setValue(this.indicatif),this.updatePhoneValidator(r.longueur)):this.modifierClientForm.get("telephone")?.disable()}updatePhoneValidator(e){this.modifierClientForm.controls.telephone.setValidators([a.k0.pattern(`^\\${this.indicatif}\\d{${e}}$`)]),this.modifierClientForm.controls.telephone.updateValueAndValidity()}formatPhoneNumber(){let e=this.modifierClientForm.get("telephone")?.value;if(!e.startsWith(this.indicatif))return void this.modifierClientForm.get("telephone")?.setValue(this.indicatif);const i=e.replace(this.indicatif,"").replace(/\D/g,""),r=this.indicatif+i,o=this.indicatif.length+this.maxPhoneLength;this.modifierClientForm.get("telephone")?.setValue(r.slice(0,o))}goToStock(){this.router.navigate(["/clients"])}getRouteClient(){this.route.params.subscribe(e=>{this.clientId=+e.id,this.loadClientData()})}cancelEditing(){this.isEditing=!1,this.modifierClientForm.disable(),this.loadClientData()}loadClientData(){this.clientService.getClientById(this.clientId).subscribe({next:e=>{this.clientPhotoUrl=e.photo?this.clientService.getFullImageUrl(e.photo):"assets/img/profil.png",this.populateForm(e),this.modifierClientForm.disable(),this.handleEntreprise(e.entrepriseClient),this.loadFacturesClient(),e.photo&&(this.clientPhotoUrl=this.clientService.getFullImageUrl(e.photo))},error:e=>{this.errorMessage="Erreur lors du chargement du client",console.error("Erreur:",e)}})}loadFacturesClient(){this.loadingFactures=!0,this.factureService.getFacturesByClient(this.clientId).subscribe({next:e=>{this.facturesClient=e,this.loadingFactures=!1,this.facturesClient.length>0&&this.onSelectFacture(this.facturesClient[0])},error:e=>{this.errorFactures="Erreur lors du chargement des factures",this.loadingFactures=!1,console.error(e)}})}populateForm(e){if(this.modifierClientForm.patchValue({nomComplet:e.nomComplet,email:e.email,telephone:e.telephone,adresse:e.adresse,poste:e.poste,pays:e.pays,ville:e.ville}),e.telephone){const i=e.telephone.replace(/(\+\d{3})(\d+)/,"$1 $2");this.modifierClientForm.patchValue({telephone:i})}if(e.pays){const i=this.paysIndicatifs[e.pays];i&&(this.indicatif=`${i.indicatif} `,this.maxPhoneLength=i.longueur,this.updatePhoneValidator(i.longueur))}}handleEntreprise(e){this.isEntrepriseSelected=!!e,this.control.setValue(e),this.entrepriseRequiredError=!1}getClientForm(){this.modifierClientForm=this.fb.group({nomComplet:["",[a.k0.required,a.k0.minLength(2)]],email:["",[a.k0.email]],telephone:[""],adresse:[""],poste:[""],pays:[""],ville:[""]})}getEntrepriseForm(){this.entrepriseForm=this.fb.group({nom:["",a.k0.required],email:["",a.k0.email],telephone:[""],adresse:[""],siege:[""],secteur:[""],pays:[""]})}loadEntreprises(){const e=localStorage.getItem("authToken")||"";e&&this.entrepriseService.getListEntreprise(e).subscribe(i=>{this.optionsEntreprise$.next(i),this.setupAutocomplete()},i=>{console.error("Erreur lors de la r\xe9cup\xe9ration des entreprises :",i),this.errorMessage=i.error?.error||"Erreur chargement entreprises"})}setupAutocomplete(){this.filteredOptions=(0,b.z)([this.control.valueChanges.pipe((0,y.Z)(""),(0,M.T)(e=>"string"==typeof e?e:e?.nom)),this.optionsEntreprise$]).pipe((0,M.T)(([e,i])=>e?this._filter(e,i):i))}getListEntreprise(){const e=localStorage.getItem("authToken");e?this.entrepriseService.getListEntreprise(e).subscribe(i=>{console.log("Entreprise re\xe7ues depuis l'API :",i),this.optionsEntreprise$.next(i),this.filteredOptions=this.control.valueChanges.pipe((0,y.Z)(""),(0,M.T)(r=>r?"string"==typeof r?r:r.nom:""),(0,M.T)(r=>r?this._filter(r,this.optionsEntreprise$.value):this.optionsEntreprise$.value.slice()))},i=>{console.error("Erreur lors de la r\xe9cup\xe9ration des entreprises :",i)}):console.error("Aucun token trouv\xe9 !")}_filter(e,i){const r=e.toLowerCase();return i.filter(o=>o.nom.toLowerCase().includes(r))}displayFnEntreprise(e){return e?e.nom:""}onEntrepriseSelected(e){}openPopup(){this.isEditing&&(this.getEntrepriseForm(),this.entrepriseForm.reset(),this.entrepriseForm.patchValue({pays:"Mali"}),this.onEntreprisePaysChange({target:{value:this.entrepriseForm.get("pays")?.value}}),this.showPopup=!0)}closePopup(){this.showPopup=!1}initEntreprise(){this.entrepriseForm=this.fb.group({nom:["",a.k0.required],pays:[""],email:[""],telephone:[""],adresse:[""],siege:[""],secteur:[""]})}ajouterEntreprise(){this.entrepriseForm.invalid||this.entrepriseService.addEntreprise({nom:this.entrepriseForm.value.nom,pays:this.entrepriseForm.value.pays,email:this.entrepriseForm.value.email,telephone:this.entrepriseForm.value.telephone,adresse:this.entrepriseForm.value.adresse,siege:this.entrepriseForm.value.siege,secteur:this.entrepriseForm.value.secteur,logo:this.entrepriseForm.value.logo,nif:this.entrepriseForm.value.nif,nina:this.entrepriseForm.value.nina,banque:this.entrepriseForm.value.banque,rccm:this.entrepriseForm.value.rccm,siteWeb:this.entrepriseForm.value.siteWeb,signataire:this.entrepriseForm.value.signataire,signataireNom:this.entrepriseForm.value.signataireNom,prefixe:this.entrepriseForm.value.prefixe,suffixe:this.entrepriseForm.value.suffixe,tauxTva:this.entrepriseForm.value.tauxTva}).subscribe({next:i=>{this.optionsEntreprise$.next([i,...this.optionsEntreprise$.value]),this.control.setValue(i),this.closePopup(),this.entrepriseForm.reset()},error:i=>{this.errorMessageApi=i.message||"Erreur lors de la cr\xe9ation"}})}modifierClient(){if(this.markFormGroupTouched(this.modifierClientForm),this.modifierClientForm.invalid)return void(this.errorMessage="Veuillez corriger les erreurs dans le formulaire.");let e=null;if(this.isEntrepriseSelected&&(e=this.control.value,!e))return this.entrepriseRequiredError=!0,void(this.errorMessage="Veuillez s\xe9lectionner ou cr\xe9er une entreprise.");const i={...this.modifierClientForm.value,id:this.clientId,photo:this.clientPhotoUrl};i.entrepriseClient=this.isEntrepriseSelected&&this.control.value?.id?{id:this.control.value.id}:null,this.clientService.updateClient(this.clientId,i,this.selectedImageFile??void 0).subscribe({next:o=>{this.successMessage="Client modifi\xe9 avec succ\xe8s !",this.errorMessage="",setTimeout(()=>this.router.navigate(["/clients"]),2e3),o.photo&&(this.clientPhotoUrl=this.clientService.getFullImageUrl(o.photo)),this.newPhotoUrl=null,this.selectedImageFile=null},error:o=>{console.error("Erreur:",o),this.errorMessage=o.error?.message||"Erreur lors de la modification du client ",this.successMessage=""}})}markFormGroupTouched(e){Object.values(e.controls).forEach(i=>{i.markAsTouched(),i instanceof a.gE&&this.markFormGroupTouched(i)})}toggleEditing(){this.isEditing=!this.isEditing,this.isEditing?(this.control.enable(),this.modifierClientForm.enable()):(this.control.disable(),this.modifierClientForm.disable(),this.loadClientData())}goToClients(){this.isEditing?this.cancelEditing():this.router.navigate(["/clients"])}formatEntreprisePhoneNumber(){let e=this.entrepriseForm.get("telephone")?.value;if(!e.startsWith(this.entrepriseIndicatif))return void this.entrepriseForm.get("telephone")?.setValue(this.entrepriseIndicatif);const i=e.replace(this.entrepriseIndicatif,"").replace(/\D/g,""),r=this.entrepriseIndicatif+i,o=this.entrepriseIndicatif.length+this.entrepriseMaxPhoneLength;this.entrepriseForm.get("telephone")?.setValue(r.slice(0,o))}onEntreprisePaysChange(e){const r=this.paysIndicatifs[e.target.value];r&&(this.entrepriseIndicatif=`${r.indicatif} `,this.entrepriseMaxPhoneLength=r.longueur,(this.entrepriseForm.get("telephone")?.value||"").startsWith(this.entrepriseIndicatif)||this.entrepriseForm.get("telephone")?.setValue(this.entrepriseIndicatif),this.updateEntreprisePhoneValidator(r.longueur))}updateEntreprisePhoneValidator(e){this.entrepriseForm.controls.telephone.setValidators([a.k0.pattern(`^\\${this.entrepriseIndicatif}\\d{${e}}$`)]),this.entrepriseForm.controls.telephone.updateValueAndValidity()}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(D.Ix),t.rXU(a.ok),t.rXU(V.r),t.rXU(B.X),t.rXU(D.nX),t.rXU(z.c))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-detail-edit-client"]],viewQuery:function(i,r){if(1&i&&t.GBs(U,5),2&i){let o;t.mGM(o=t.lsd())&&(r.fileInput=o.first)}},decls:117,vars:21,consts:[["fileInput",""],["noFactureSelected",""],["auto","matAutocomplete"],[1,"container_client"],[1,"information_cadre",2,"margin-bottom","20px","padding","20px"],[1,"info_personnel"],[1,"information_grid_two"],[1,"profil_section"],[1,"section_title"],[1,"title"],[1,"profile-img-wrapper",3,"click"],["alt","Photo de profil",1,"profile-img",3,"src"],[1,"overlay"],["src","assets/img/appareil.jpg","alt","Modifier",1,"camera-icon"],["type","file","accept","image/*","hidden","",3,"change"],[1,"taille_photo"],[2,"margin","0","font-size","8px","text-align","center"],[1,"info_section"],[1,"title","title_display"],[1,"icon_edit"],["class","ri-edit-box-line","title","Cliquer ici pour modifier",3,"click",4,"ngIf"],["style","color: #ff0000;","class","ri-close-line","title","Fermer l'\xe9dition",3,"click",4,"ngIf"],[1,"container_formulaire",3,"formGroup"],[1,"champ_grid_true"],[1,"champ_input"],["type","text","id","nomComplet","formControlName","nomComplet","name","nomComplet","placeholder","Saisis le nom et pr\xe9nom",1,"input_focus"],["for","nomComplet",1,"label"],["class","error",4,"ngIf"],["type","email","id","email","formControlName","email","placeholder","Saisis l'email",1,"input_focus"],["for","email",1,"label"],["id","adresse","formControlName","adresse","name","adresse","placeholder","Saisissez votre adresse ",1,"input_focus"],["for","adresse",1,"label"],[1,"champ_input","div1"],["formControlName","pays",1,"input_focus",3,"change"],["value","","disabled",""],["value","Mali"],["value","S\xe9n\xe9gal"],["value","C\xf4te d'Ivoire"],["for","telephone",1,"label"],[1,"champ_input","div2"],["type","tel","id","telephone","formControlName","telephone","name","telephone","placeholder","Saisis le num\xe9ro de t\xe9l\xe9phone",1,"input_focus",3,"input"],[1,"champ_input","div3"],["id","ville","formControlName","ville","name","ville","placeholder","Saisis la viille",1,"input_focus"],["for","pays",1,"label"],["id","poste","formControlName","poste","name","poste","placeholder","Saisissez votre poste ",1,"input_focus"],["for","poste",1,"label"],[1,"info_titre_input",2,"margin-top","20px"],[1,"champ_input_inventaire"],[1,"switch"],["type","checkbox",3,"ngModelChange","disabled","ngModel","ngModelOptions"],[1,"slider","round"],["class","cadre_entreprise",4,"ngIf"],["class"," information_cadre_save",4,"ngIf"],[1,"information_cadre"],[1,"section_navbar"],[1,"custom-tabs",3,"selectedIndex"],["label","Factures client"],[1,"tab-content"],[1,"content_client"],[1,"profil_section","profil_section_facture"],["class","facture_model",4,"ngIf","ngIfElse"],[1,"info_section",2,"padding","0"],[1,"contact_info__"],[1,"section_title","section_title2",2,"padding","20px 20px 6px"],[1,"table-container",2,"max-height","41vh","border-radius","10px","display","flex","flex-direction","column","position","relative"],["class","loading-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],["class","empty-state",4,"ngIf"],[4,"ngIf"],["class","sticky-footer",4,"ngIf"],["label","Achats"],["label","Notes"],["label","????"],["class","popup-overlay",4,"ngIf"],["title","Cliquer ici pour modifier",1,"ri-edit-box-line",3,"click"],["title","Fermer l'\xe9dition",1,"ri-close-line",2,"color","#ff0000",3,"click"],[1,"error"],[1,"cadre_entreprise"],["type","text","placeholder","Selectionner un entreprise","matInput","",1,"input_focus","input_cursor",3,"formControl","matAutocomplete"],["for","categorieId",1,"label"],[3,"optionSelected","displayWith"],[1,"select-option",3,"click"],[2,"display","flex","align-items","center","color","#0672E4"],[1,"ri-community-line"],[2,"margin-left","8px"],[3,"value",4,"ngFor","ngForOf"],[1,"icon_arrow"],[1,"ri-arrow-down-s-line"],[3,"value"],[1,"option-content"],[1,"information_cadre_save"],[1,"container_error_message"],["class","error-messageApi2",4,"ngIf"],["class","success-messageApi2",4,"ngIf"],[1,"info_titre_input","info_titre_input_btn"],[1,"btn_annuler"],[1,"btn_cancel",3,"click"],[1,"btn_ajouter"],[1,"btn_save",3,"click","disabled"],[1,"error-messageApi2"],[1,"success-messageApi2"],[1,"error-message"],[1,"facture_model"],[1,"header_apercu",2,"display","flex","align-items","center","gap","5px","margin","10px"],[1,"logo_entreprise"],[3,"src"],[1,"entete_entreprise"],[1,"para1"],[1,"titre",2,"text-align","center","font-size","8px"],[2,"color","#0000003e"],[1,"date_right"],[2,"margin","0 10px","font-size","8px","text-align","right"],[1,"name_client",2,"margin-left","10px"],[1,"doit",2,"display","flex","align-items","center","gap","3px"],[2,"margin","0","font-size","8px"],[1,"objets",2,"display","flex","align-items","center","gap","3px"],[1,"container_table",2,"display","flex","justify-content","center"],[1,"table"],[1,"th"],[4,"ngFor","ngForOf"],[1,"tfoot"],["colspan","4",1,"td"],[1,"td"],[1,"arret_somme"],[2,"margin","0 0 0 10px","font-size","6px"],[1,"signature",2,"text-align","right","margin","20px 10px 16px 0"],[1,"post_signateure"],[2,"font-size","8px"],[1,"nom_signateure"],[1,"container_footer"],[1,"footer"],[2,"text-align","center","font-size","8px","margin","0 0 3px 0"],[2,"font-size","5px","text-align","center"],[2,"margin-top","0px","font-size","5px","text-align","center"],[1,"loading-indicator"],[1,"ri-loader-4-line","spin"],[1,"empty-state"],[1,"ri-file-list-2-line"],[2,"position","sticky","top","0","background","white","z-index","10","box-shadow","0 2px 2px -1px rgba(0,0,0,0.1)"],[1,"text-right"],[3,"selected-row","click",4,"ngFor","ngForOf"],[3,"click"],[1,"status-badge",3,"ngClass"],[1,"sticky-footer"],[2,"width","100%"],[2,"background-color","#ffffff"],["colspan","3",1,"text-bold"],[1,"text-right","text-bold"],[1,"popup-overlay"],[1,"popup-content"],[1,"popup-header"],[1,"close-btn",3,"click"],[3,"formGroup"],[1,"popup-body"],[1,"champ_grid"],["type","text","formControlName","nom","placeholder","Saisis le nom de l'entreprise",1,"input_focus"],[1,"label"],[2,"color","#ff0000","margin-left","5px"],["class","error-text",4,"ngIf"],["type","email","formControlName","email","placeholder","Saisis l'email",1,"input_focus"],["type","text","formControlName","adresse","placeholder","Saisis l'adresse",1,"input_focus"],["type","text","formControlName","siege","placeholder","Saisis le si\xe8ge",1,"input_focus"],[1,"grid_colonne"],["value","","disabled","","selected",""],["type","tel","formControlName","telephone","placeholder","Saisis le num\xe9ro de t\xe9l\xe9phone",1,"input_focus",3,"focus","input"],["formControlName","secteur","placeholder","Saisis le secteur",1,"input_focus"],["class","error-messageApi",4,"ngIf"],[1,"popup-footer"],["type","button",1,"btn-cancel",3,"click"],["type","submit",1,"btn-submit",3,"click","disabled"],[1,"error-text"],[1,"error-messageApi"]],template:function(i,r){if(1&i){const o=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"div",9)(7,"h6"),t.EFF(8,"Photo de profil du client"),t.k0s()()(),t.j41(9,"div",10),t.bIt("click",function(){return t.eBV(o),t.Njj(r.triggerFileInput())}),t.nrm(10,"img",11),t.j41(11,"div",12),t.nrm(12,"img",13),t.k0s()(),t.j41(13,"input",14,0),t.bIt("change",function(h){return t.eBV(o),t.Njj(r.onFileSelected(h))}),t.k0s(),t.j41(15,"div",15)(16,"p",16),t.EFF(17,"Formats JPG, GIF ou PNG autoris\xe9s. "),t.nrm(18,"br"),t.EFF(19," Taille maximale : 800 Ko."),t.k0s()()(),t.j41(20,"div",17)(21,"div",8)(22,"div",18)(23,"h6"),t.EFF(24,"Informations Personnelles"),t.k0s(),t.j41(25,"div",19),t.DNE(26,W,1,0,"i",20)(27,J,1,0,"i",21),t.k0s()()(),t.j41(28,"form",22)(29,"div",23)(30,"div",24),t.nrm(31,"input",25),t.j41(32,"label",26),t.EFF(33,"Nom et pr\xe9nom"),t.k0s(),t.DNE(34,Q,3,2,"div",27),t.k0s(),t.j41(35,"div",24),t.nrm(36,"input",28),t.j41(37,"label",29),t.EFF(38,"Email"),t.k0s(),t.DNE(39,q,2,1,"div",27),t.k0s(),t.j41(40,"div",24),t.nrm(41,"input",30),t.j41(42,"label",31),t.EFF(43,"Adresse"),t.k0s()()(),t.j41(44,"div",23)(45,"div",32)(46,"select",33),t.bIt("change",function(h){return t.eBV(o),t.Njj(r.onPaysChange(h))}),t.j41(47,"option",34),t.EFF(48,"Pays"),t.k0s(),t.j41(49,"option",35),t.EFF(50,"Mali"),t.k0s(),t.j41(51,"option",36),t.EFF(52,"S\xe9n\xe9gal"),t.k0s(),t.j41(53,"option",37),t.EFF(54,"C\xf4te d'Ivoire"),t.k0s(),t.j41(55,"label",38),t.EFF(56,"Pays"),t.k0s()()(),t.j41(57,"div",39)(58,"input",40),t.bIt("input",function(){return t.eBV(o),t.Njj(r.formatPhoneNumber())}),t.k0s(),t.j41(59,"label",38),t.EFF(60,"T\xe9l\xe9phone"),t.k0s()(),t.j41(61,"div",41),t.nrm(62,"input",42),t.j41(63,"label",43),t.EFF(64,"Ville"),t.k0s()()(),t.j41(65,"div",23)(66,"div",24),t.nrm(67,"input",44),t.j41(68,"label",45),t.EFF(69,"Poste"),t.k0s()(),t.j41(70,"div",24),t.nrm(71,"input",42),t.j41(72,"label",43),t.EFF(73,"Ville"),t.k0s()()()(),t.j41(74,"div",46)(75,"h6"),t.EFF(76,"Entreprise"),t.k0s(),t.j41(77,"div",47)(78,"p"),t.EFF(79,"J'appartient \xe0 une entreprise"),t.k0s(),t.j41(80,"label",48)(81,"input",49),t.mxI("ngModelChange",function(h){return t.eBV(o),t.DH7(r.isEntrepriseSelected,h)||(r.isEntrepriseSelected=h),t.Njj(h)}),t.k0s(),t.nrm(82,"span",50),t.k0s()()(),t.DNE(83,et,16,6,"div",51)(84,ot,12,12,"div",52),t.k0s()()()(),t.j41(85,"div",53)(86,"div",54)(87,"mat-tab-group",55)(88,"mat-tab",56)(89,"div",57)(90,"div",58)(91,"div",6)(92,"div",59),t.DNE(93,ct,86,31,"div",60)(94,dt,0,0,"ng-template",null,1,t.C5r),t.k0s(),t.j41(96,"div",61)(97,"div",62)(98,"div",63)(99,"div",9)(100,"h6"),t.EFF(101,"Toutes les factures"),t.k0s()()(),t.j41(102,"div",64),t.DNE(103,pt,3,0,"div",65)(104,mt,2,1,"div",66)(105,ut,4,0,"div",67)(106,ft,13,1,"table",68),t.k0s(),t.DNE(107,ht,9,3,"div",69),t.k0s()()()()()(),t.j41(108,"mat-tab",70)(109,"div",57),t.EFF(110," Contenu des notifications "),t.k0s()(),t.j41(111,"mat-tab",71),t.nrm(112,"div",57),t.k0s(),t.j41(113,"mat-tab",72)(114,"div",57),t.EFF(115," Contenu de la s\xe9curit\xe9 "),t.k0s()()()()()(),t.DNE(116,Ct,56,10,"div",73)}if(2&i){let o,g;const h=t.sdS(95);t.R7$(10),t.Y8G("src",r.newPhotoUrl||r.clientPhotoUrl||"assets/img/profil.png",t.B4B),t.R7$(16),t.Y8G("ngIf",!r.isEditing),t.R7$(),t.Y8G("ngIf",r.isEditing),t.R7$(),t.Y8G("formGroup",r.modifierClientForm),t.R7$(6),t.Y8G("ngIf",(null==(o=r.modifierClientForm.get("nomComplet"))?null:o.touched)&&(null==(o=r.modifierClientForm.get("nomComplet"))?null:o.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(g=r.modifierClientForm.get("email"))?null:g.touched)&&(null==(g=r.modifierClientForm.get("email"))?null:g.invalid)),t.R7$(42),t.Y8G("disabled",!r.isEditing),t.R50("ngModel",r.isEntrepriseSelected),t.Y8G("ngModelOptions",t.lJ4(20,Y)),t.R7$(2),t.Y8G("ngIf",r.isEntrepriseSelected),t.R7$(),t.Y8G("ngIf",r.isEditing),t.R7$(3),t.Y8G("selectedIndex",0),t.R7$(6),t.Y8G("ngIf",r.factureDetails)("ngIfElse",h),t.R7$(10),t.Y8G("ngIf",r.loadingFactures),t.R7$(),t.Y8G("ngIf",!r.loadingFactures&&r.errorFactures),t.R7$(),t.Y8G("ngIf",!r.loadingFactures&&!r.errorFactures&&0===r.facturesClient.length),t.R7$(),t.Y8G("ngIf",!r.loadingFactures&&!r.errorFactures&&r.facturesClient.length>0),t.R7$(),t.Y8G("ngIf",!r.loadingFactures&&!r.errorFactures&&r.facturesClient.length>0),t.R7$(9),t.Y8G("ngIf",r.showPopup)}},dependencies:[a.YN,a.qT,a.xH,a.y7,a.me,a.Zm,a.wz,a.BC,a.cb,a.vS,F.MD,F.YU,F.Sq,F.bT,F.Jj,F.vh,a.X1,a.l_,a.j4,a.JD,I.jL,I.$3,L.M,I.pN,p.v,f.RI,f.mq,f.T8,l.MY,d.M,_.m_,S,A.tP,N],styles:['@charset "UTF-8";.container_client[_ngcontent-%COMP%]{width:100%;background:transparent;border-radius:12px;box-shadow:0 10px 30px #0000001a;overflow:hidden}.information_cadre[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#fff;box-shadow:2px 2px 30px #0000001c;border-radius:5px;margin-top:0;margin-bottom:10px;padding:10px 0}.content_client[_ngcontent-%COMP%]{padding:30px}.information_grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr 2fr;gap:20px}.information_grid_two[_ngcontent-%COMP%]{display:grid;grid-template-columns:27% 2fr;gap:20px}.section_title[_ngcontent-%COMP%]{margin-bottom:10px;position:relative;padding-bottom:2px}.section_title[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#2c3e50;text-transform:uppercase;letter-spacing:1px}.title_display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.section_title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:50px;height:3px;background:linear-gradient(to right,#4b6cb7,#182848);border-radius:3px}.section_title2[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:21px;width:50px;height:3px;background:linear-gradient(to right,#4b6cb7,#182848);border-radius:3px}.profil_section[_ngcontent-%COMP%]{padding:25px;background-color:#fff;border:1px solid #e9e9e9;box-shadow:#00000001 0 0 0 1px;border-radius:20px}.profil_section_facture[_ngcontent-%COMP%]{min-height:50vh;padding:0!important}.info_section[_ngcontent-%COMP%]{padding:25px;background-color:#fff;border:1px solid #e9e9e9;box-shadow:#00000001 0 0 0 1px;border-radius:20px}.info_grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:20px}.champ_grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:20px}.champ_grid_true[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:20px}.champ_input[_ngcontent-%COMP%]{position:relative;margin-bottom:5px}.input_focus[_ngcontent-%COMP%]{width:100%;height:40px;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:10px;background:none;color:#000}.champ_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:4px;pointer-events:none;color:#999}.input_focus[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.input_focus[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:5px;left:0;transition:all .3s ease-in-out;background:none;font-size:10px;padding:0}.input_focus[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:12px;transition:all .2s ease-in-out}.profile-img-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;width:100px;height:100px;border-radius:50%;overflow:hidden;cursor:pointer;transition:transform .2s ease-in-out;display:flex;justify-content:center;margin:20px auto}.profile-img-wrapper[_ngcontent-%COMP%]:hover{transform:scale(1.01)}.profile-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0000004d;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease-in-out}.profile-img-wrapper[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.camera-icon[_ngcontent-%COMP%]{width:30px;height:30px;background:#fff;padding:6px;border-radius:50%;box-shadow:0 0 4px #00000026}.icon_edit[_ngcontent-%COMP%]{margin-top:-7px}.icon_edit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;cursor:pointer}@media (max-width: 768px){.information_grid[_ngcontent-%COMP%], .information_grid_two[_ngcontent-%COMP%], .info_grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.info_item[_ngcontent-%COMP%]{margin-bottom:20px}.info_label[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;font-weight:500;margin-bottom:5px}.info_value[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#2c3e50}.contact_info[_ngcontent-%COMP%]{margin-top:20px}.contact_item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:15px}.contact_icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#e9ecef;display:flex;align-items:center;justify-content:center;color:#4b6cb7;font-size:18px}.tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;margin-top:20px}.tag[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:6px 12px;border-radius:20px;font-size:13px;font-weight:500}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:30px;height:15px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0 0 0 2px;background-color:#ccc;transition:.4s;border-radius:24px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:11px;width:11px;left:2px;bottom:2px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#0672e4}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(13px)}.input_cursor[_ngcontent-%COMP%]{cursor:pointer}.icon_arrow[_ngcontent-%COMP%]{position:absolute;right:10px;top:25px}.icon_arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px;color:#000}.popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-content[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:8px;width:50%}.popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.popup-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer}.popup-footer[_ngcontent-%COMP%]{margin-top:20px;text-align:right}.btn-cancel[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{margin-left:10px;border:none;border-radius:4px;cursor:pointer}.btn-cancel[_ngcontent-%COMP%]{background-color:red;padding:6px 25px;color:#fff}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d80101;transition:all ease-in .5s}.btn-submit[_ngcontent-%COMP%]{background-color:#0672e4;padding:6px 25px;color:#fff;cursor:pointer;cursor:no-drop}.btn-submit[_ngcontent-%COMP%]:hover{background-color:#0863c5;transition:all ease-in .5s}.error-text[_ngcontent-%COMP%]{color:#f44;font-size:.8rem;margin-top:4px}.btn-submit[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.error-messageApi[_ngcontent-%COMP%]{font-size:9px;color:red;font-weight:700;position:relative;top:-20px;left:-20px}.success-messageApi[_ngcontent-%COMP%]{font-size:9px;color:#0672e4;font-weight:700;position:relative;top:-20px;left:-20px}.error-messageApi2[_ngcontent-%COMP%]{font-size:9px;color:red;font-weight:700}.success-messageApi2[_ngcontent-%COMP%]{font-size:9px;color:#0672e4;font-weight:700}.error[_ngcontent-%COMP%]{font-size:9px;color:red;font-weight:700;position:relative}.champ_input_inventaire[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.champ_input_inventaire[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.table-container[_ngcontent-%COMP%]{margin:0;overflow:auto}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:2px;height:2px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0003;border-radius:3px}.table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:12px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;border-bottom:1px solid #eee}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#fff;font-weight:600;color:#000;letter-spacing:.6px}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background-color .2s}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]{background-color:#f1f3f5}table[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:600;color:#212529}.text-right[_ngcontent-%COMP%]{text-align:right}.text-bold[_ngcontent-%COMP%]{font-weight:600}.status-badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 8px;border-radius:12px;font-size:9px;font-weight:500}.status-badge.draft[_ngcontent-%COMP%]{background-color:#e9ecef;color:#495057}.status-badge.sent[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.status-badge.approved[_ngcontent-%COMP%]{background-color:#c5c5e2;color:#00f}.status-badge.valid[_ngcontent-%COMP%]{background-color:#d5e6d5;color:green}.loading-indicator[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#6c757d}.loading-indicator[_ngcontent-%COMP%]   .spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:8px}.empty-state[_ngcontent-%COMP%]{padding:40px 20px;text-align:center;color:#6c757d}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;color:#ced4da}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.error-message[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#dc3545;background-color:#fff8f8;border-radius:8px;margin:10px 0}.table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative}.table-wrapper[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.sticky-footer[_ngcontent-%COMP%]{position:sticky;bottom:0;background:#fff;z-index:10;box-shadow:0 -2px 5px #0000001a;border-top:1px solid #eee}.sticky-footer[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:sticky;top:0;background:#fff;z-index:10;box-shadow:0 2px 5px #0000001a}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.logo_entreprise[_ngcontent-%COMP%]{width:50px}.logo_entreprise[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.para1[_ngcontent-%COMP%]{font-size:6px;margin:0}hr[_ngcontent-%COMP%]{margin:3px}.titre[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:10px}.table[_ngcontent-%COMP%]{width:93%;border-collapse:collapse;margin:4px 0;font-size:5px}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:3px 5px;text-align:center}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:600}.table[_ngcontent-%COMP%]   .tfoot[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{font-weight:600;background-color:#f9f9f9}@media (max-width: 768px){table[_ngcontent-%COMP%]{font-size:11px}}@media (max-width: 480px){table[_ngcontent-%COMP%]{font-size:10px}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 3px}}.btn_annuler[_ngcontent-%COMP%]   .btn_cancel[_ngcontent-%COMP%]{padding:6px 20px;font-size:10px;letter-spacing:.6px;border:none;border-radius:5px;background-color:red;color:#fff}.btn_annuler[_ngcontent-%COMP%]   .btn_cancel[_ngcontent-%COMP%]:hover{background-color:#d80101;transition:all ease-in .5s}.btn_ajouter[_ngcontent-%COMP%]   .btn_save[_ngcontent-%COMP%]{padding:6px 20px;font-size:10px;letter-spacing:.6px;border:none;border-radius:5px;background-color:#0672e4;color:#fff}.btn_ajouter[_ngcontent-%COMP%]   .btn_save[_ngcontent-%COMP%]:hover{background-color:#0863c5;transition:all .5s}.info_titre_input_btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:end;gap:8px;margin-top:12px}.grid_colonne[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:20px}.div1[_ngcontent-%COMP%]{grid-area:1/1/2/2}.div2[_ngcontent-%COMP%]{grid-area:1/2/2/3}.div3[_ngcontent-%COMP%]{grid-area:1/3/2/4}.selected-row[_ngcontent-%COMP%]{border:2px solid #0672E4;background-color:#f0f8ff}']})}}return n})()},1811:(O,x,s)=>{s.d(x,{M:()=>E});var m=s(2318),a=s(4438),C=s(777);let E=(()=>{class b{static \u0275fac=function(k){return new(k||b)};static \u0275mod=a.$C({type:b});static \u0275inj=a.G2t({imports:[C.M,m.w5,C.M]})}return b})()}}]);