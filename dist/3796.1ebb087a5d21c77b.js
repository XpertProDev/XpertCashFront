"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[3796],{3796:(X,m,o)=>{o.r(m),o.d(m,{ComptabiliteComponent:()=>U});var l=o(177),v=o(2389),F=o(4626),t=o(4438),u=o(1626),f=o(5558),h=o(9437),b=o(2525),p=o(8026);let g=(()=>{class n{constructor(e,s){this.http=e,this.usersService=s,this.apiUrl=b.c.apiBaseUrl}getVersementsParBoutique(e){return this.usersService.getValidAccessToken().pipe((0,f.n)(s=>{if(!s)throw new Error("Aucun token trouv\xe9");const a=new u.Lr({Authorization:`Bearer ${s}`});return this.http.get(`${this.apiUrl}/v/boutique/${e}`,{headers:a})}),(0,h.W)(s=>{throw console.error("Erreur lors de la r\xe9cup\xe9ration des versements :",s),s}))}static{this.\u0275fac=function(s){return new(s||n)(t.KVO(u.Qq),t.KVO(p.g))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _=o(7033),E=o(3413),r=o(3391);function k(n,i){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.nI1(9,"number"),t.k0s(),t.j41(10,"td"),t.EFF(11),t.nI1(12,"number"),t.k0s(),t.j41(13,"td"),t.EFF(14),t.nI1(15,"number"),t.k0s(),t.j41(16,"td"),t.EFF(17),t.nI1(18,"date"),t.k0s(),t.j41(19,"td"),t.EFF(20),t.k0s()()),2&n){const e=i.$implicit;t.R7$(2),t.JRh(e.id),t.R7$(2),t.JRh(e.nomBoutique),t.R7$(2),t.JRh(e.nomVendeur),t.R7$(2),t.SpI("",t.i5U(9,8,e.montantInitialCaisse,"1.0-0")," XOF"),t.R7$(3),t.SpI("",t.i5U(12,11,e.montantCourantCaisse,"1.0-0")," XOF"),t.R7$(3),t.SpI("",t.i5U(15,14,e.montantVerse,"1.0-0")," XOF"),t.R7$(3),t.JRh(t.i5U(18,17,e.dateVersement,"dd/MM/yyyy HH:mm")),t.R7$(3),t.JRh(e.statut)}}function C(n,i){if(1&n&&(t.j41(0,"table",16)(1,"thead")(2,"tr")(3,"th"),t.EFF(4,"ID"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Nom Boutique"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Vendeur"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Montant Initial"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Montant Courant"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Montant Vers\xe9"),t.k0s(),t.j41(15,"th"),t.EFF(16,"Date Versement"),t.k0s(),t.j41(17,"th"),t.EFF(18,"Statut"),t.k0s()()(),t.j41(19,"tbody"),t.DNE(20,k,21,20,"tr",17),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(20),t.Y8G("ngForOf",e.versements)}}function j(n,i){1&n&&(t.j41(0,"div")(1,"p"),t.EFF(2,"Aucun versement disponible."),t.k0s()())}function I(n,i){if(1&n&&(t.j41(0,"div",13),t.DNE(1,C,21,1,"table",14)(2,j,3,0,"div",15),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",e.versements.length>0),t.R7$(),t.Y8G("ngIf",0===e.versements.length)}}function R(n,i){if(1&n&&t.DNE(0,I,3,2,"div",12),2&n){const e=t.XpG();t.Y8G("ngIf","versements"===e.activeTab)}}function $(n,i){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.nI1(9,"number"),t.k0s(),t.j41(10,"td"),t.EFF(11),t.nI1(12,"date"),t.k0s(),t.j41(13,"td"),t.EFF(14),t.k0s()()),2&n){const e=i.$implicit;t.R7$(2),t.JRh(e.id),t.R7$(2),t.JRh(e.nomBoutique),t.R7$(2),t.JRh(e.nomVendeur),t.R7$(2),t.SpI("",t.i5U(9,6,e.montantVerse,"1.0-0")," XOF"),t.R7$(3),t.JRh(t.i5U(12,9,e.dateVersement,"dd/MM/yyyy HH:mm")),t.R7$(3),t.JRh(e.statut)}}function T(n,i){if(1&n&&(t.j41(0,"table",16)(1,"thead")(2,"tr")(3,"th"),t.EFF(4,"ID"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Nom Boutique"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Nom Vendeur"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Montant"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Date"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Statut"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,$,15,12,"tr",17),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(16),t.Y8G("ngForOf",e.mouvements)}}function N(n,i){1&n&&(t.j41(0,"p"),t.EFF(1,"Aucun mouvement de caisse disponible."),t.k0s())}function G(n,i){if(1&n&&(t.j41(0,"div",13),t.DNE(1,T,17,1,"table",18)(2,N,2,0,"ng-template",null,1,t.C5r),t.k0s()),2&n){const e=t.sdS(3),s=t.XpG(2);t.R7$(),t.Y8G("ngIf",s.mouvements.length>0)("ngIfElse",e)}}function x(n,i){if(1&n&&t.DNE(0,G,4,2,"div",12),2&n){const e=t.XpG();t.Y8G("ngIf","mouvements"===e.activeTab)}}function M(n,i){if(1&n&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"number"),t.k0s(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"date"),t.k0s(),t.j41(11,"td"),t.EFF(12),t.k0s()()),2&n){const e=i.$implicit;t.R7$(2),t.JRh(e.id),t.R7$(2),t.JRh(e.nomClient),t.R7$(2),t.SpI("",t.i5U(7,5,e.montant,"1.0-0")," XOF"),t.R7$(3),t.JRh(t.i5U(10,8,e.dateFacture,"dd/MM/yyyy")),t.R7$(3),t.JRh(e.status)}}function V(n,i){if(1&n&&(t.j41(0,"table",16)(1,"thead")(2,"tr")(3,"th"),t.EFF(4,"ID"),t.k0s(),t.j41(5,"th"),t.EFF(6,"Nom Client"),t.k0s(),t.j41(7,"th"),t.EFF(8,"Montant Facture"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Date Facture"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Status"),t.k0s()()(),t.j41(13,"tbody"),t.DNE(14,M,13,11,"tr",17),t.k0s()()),2&n){const e=t.XpG(3);t.R7$(14),t.Y8G("ngForOf",e.factures)}}function D(n,i){1&n&&(t.j41(0,"div")(1,"p"),t.EFF(2,"Aucune facture disponible."),t.k0s()())}function y(n,i){if(1&n&&(t.j41(0,"div",13),t.DNE(1,V,15,1,"table",14)(2,D,3,0,"div",15),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",e.factures.length>0),t.R7$(),t.Y8G("ngIf",0===e.factures.length)}}function S(n,i){if(1&n&&t.DNE(0,y,3,2,"div",12),2&n){const e=t.XpG();t.Y8G("ngIf","factures"===e.activeTab)}}let U=(()=>{class n{constructor(e,s,a){this.versementComptableService=e,this.userService=s,this.facturesService=a,this.versements=[],this.mouvements=[],this.factures=[],this.errorMessage=null,this.activeTab="versements"}ngOnInit(){this.getUserInfo()}getUserInfo(){this.userService.getUserInfo().subscribe({next:e=>{e.boutiques&&e.boutiques.length>0?(this.boutiqueId=e.boutiques[0].id,this.getVersements(),this.getFactures()):this.errorMessage="Aucune boutique disponible pour cet utilisateur."},error:e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des informations utilisateur:",e),this.errorMessage="Erreur lors de la r\xe9cup\xe9ration des informations utilisateur."}})}getVersements(){this.boutiqueId?this.versementComptableService.getVersementsParBoutique(this.boutiqueId).subscribe({next:e=>{this.versements=e,this.mouvements=this.versements.filter(s=>"VALIDE"===s.statut),this.errorMessage=null},error:e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des versements:",e),this.errorMessage="Erreur lors de la r\xe9cup\xe9ration des versements."}}):this.errorMessage="Aucun boutiqueId fourni."}getFactures(){this.boutiqueId?this.facturesService.getAlFactproreelOfEntreprise(this.boutiqueId).subscribe({next:e=>{this.factures=e,this.errorMessage=null},error:e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des factures:",e),this.errorMessage="Erreur lors de la r\xe9cup\xe9ration des factures."}}):this.errorMessage="Aucun boutiqueId fourni."}setActiveTab(e){this.activeTab=e}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(g),t.rXU(p.g),t.rXU(_.E))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-comptabilite"]],decls:20,vars:5,consts:[["nav","ngbNav"],["noData",""],[1,"col-md-12"],["cardTitle","Comptabilit\xe9","cardClass","tab-card tab-content","blockClass","nav-fill",3,"options"],["ngbNav","",1,"nav-pills"],[1,"flex",3,"ngbNavItem"],["ngbNavLink","",3,"click"],[1,"fa","fa-university","m-r-10"],["ngbNavContent",""],[1,"fa","fa-exchange-alt","m-r-10"],[1,"fa","fa-file-invoice","m-r-10"],[1,"mt-2",3,"ngbNavOutlet"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],["class","table",4,"ngIf"],[4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["class","table",4,"ngIf","ngIfElse"]],template:function(s,a){if(1&s){const c=t.RV6();t.j41(0,"div",2)(1,"app-card",3)(2,"ul",4,0)(4,"li",5)(5,"a",6),t.bIt("click",function(){return t.eBV(c),t.Njj(a.setActiveTab("versements"))}),t.nrm(6,"i",7),t.EFF(7," Versements "),t.k0s(),t.DNE(8,R,1,1,"ng-template",8),t.k0s(),t.j41(9,"li",5)(10,"a",6),t.bIt("click",function(){return t.eBV(c),t.Njj(a.setActiveTab("mouvements"))}),t.nrm(11,"i",9),t.EFF(12," Mouvements de Caisse "),t.k0s(),t.DNE(13,x,1,1,"ng-template",8),t.k0s(),t.j41(14,"li",5)(15,"a",6),t.bIt("click",function(){return t.eBV(c),t.Njj(a.setActiveTab("factures"))}),t.nrm(16,"i",10),t.EFF(17," Factures "),t.k0s(),t.DNE(18,S,1,1,"ng-template",8),t.k0s()(),t.nrm(19,"div",11),t.k0s()()}if(2&s){const c=t.sdS(3);t.R7$(),t.Y8G("options",!1),t.R7$(3),t.Y8G("ngbNavItem",1),t.R7$(5),t.Y8G("ngbNavItem",2),t.R7$(5),t.Y8G("ngbNavItem",3),t.R7$(5),t.Y8G("ngbNavOutlet",c)}},dependencies:[l.MD,l.Sq,l.bT,l.QX,l.vh,v.G,E.i,r.Um,r.X9,r.sy,r.Gx,r.Ri,r.WA,r.m_,F.J],styles:[".nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{background-color:#4099ff;color:#fff}"]})}}return n})()}}]);