"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[6836],{80145:(A,k,a)=>{a.d(k,{C:()=>g});var P=a(84412),v=a(54438);let g=(()=>{class f{constructor(){this.isListViewSubject=new P.t(!0),this.isListView$=this.isListViewSubject.asObservable()}setViewPreference(x){this.isListViewSubject.next(x),localStorage.setItem("viewPreference",x?"list":"grid")}static{this.\u0275fac=function(d){return new(d||f)}}static{this.\u0275prov=v.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()},16836:(A,k,a)=>{a.r(k),a.d(k,{PosCommandeComponent:()=>mt});var P=a(10467),v=a(60177),g=a(89417),f=a(21413),m=a(56977),x=a(54843),d=a(22525),C=a(41731),t=a(54438),j=a(49192),z=a(80145),E=a(17022),B=a(49293),u=a(21626),_=a(25558),O=a(88026);let w=(()=>{class r{constructor(e,o){this.http=e,this.usersService=o,this.apiUrl=d.c.apiBaseUrl}getVentesByVendeur(e){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{const n=(new u.Lr).set("Authorization",`Bearer ${o}`);return this.http.get(`${this.apiUrl}/vente/vendeur/${e}`,{headers:n})}))}rembourserVente(e){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{const n=(new u.Lr).set("Authorization",`Bearer ${o}`);return this.http.post(`${this.apiUrl}/vente/rembourser`,e,{headers:n})}))}static{this.\u0275fac=function(o){return new(o||r)(t.KVO(u.Qq),t.KVO(O.g))}}static{this.\u0275prov=t.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const S=["selectAllCheckbox"];function $(r,l){if(1&r&&(t.j41(0,"div",46),t.EFF(1),t.k0s()),2&r){const e=t.XpG();t.R7$(),t.SpI(" ",e.successMessage," ")}}function G(r,l){if(1&r&&(t.j41(0,"div",47),t.EFF(1),t.k0s()),2&r){const e=t.XpG();t.R7$(),t.SpI(" ",e.errorMessage," ")}}function L(r,l){if(1&r){const e=t.RV6();t.j41(0,"li",50),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.selectFilter(n.key))}),t.EFF(1),t.k0s()}if(2&r){const e=l.$implicit;t.R7$(),t.SpI(" ",e.label," ")}}function U(r,l){if(1&r&&(t.j41(0,"ul",48),t.DNE(1,L,2,1,"li",49),t.k0s()),2&r){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.filterOptions)}}function K(r,l){if(1&r){const e=t.RV6();t.j41(0,"ul",53),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.setActiveCommande(n.id))}),t.j41(1,"li",54)(2,"div",55)(3,"p",56),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"p",57),t.EFF(7),t.nI1(8,"date"),t.k0s()()(),t.j41(9,"li",54)(10,"div",58)(11,"p"),t.EFF(12),t.k0s()()(),t.j41(13,"li",54)(14,"div",59)(15,"p"),t.EFF(16),t.k0s()()(),t.j41(17,"li",54)(18,"div",60)(19,"p"),t.EFF(20),t.nI1(21,"cfaCurrency"),t.k0s()()(),t.j41(22,"li",61)(23,"div",62)(24,"p"),t.EFF(25,"En cours"),t.k0s()()()()}if(2&r){const e=l.$implicit,o=t.XpG(2);t.AVh("ul_commande_active",o.activeCommandeId===e.id),t.R7$(4),t.JRh(t.i5U(5,7,e.createdAt,"dd/MM/yyyy")),t.R7$(3),t.JRh(t.i5U(8,10,e.createdAt,"HH:mm")),t.R7$(5),t.JRh(e.id),t.R7$(4),t.SpI("Quantit\xe9 ",e.totalItems,""),t.R7$(4),t.JRh(t.bMT(21,13,e.totalAmount))}}function Q(r,l){1&r&&(t.j41(0,"div",63),t.EFF(1," Pas de commandes en cours "),t.k0s())}function X(r,l){if(1&r&&(t.qex(0),t.DNE(1,K,26,15,"ul",51)(2,Q,2,0,"div",52),t.bVm()),2&r){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.commandes),t.R7$(),t.Y8G("ngIf",!e.commandes.length)}}function Y(r,l){if(1&r){const e=t.RV6();t.j41(0,"ul",53),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(i.setActiveVente(n.venteId))}),t.j41(1,"li",54)(2,"div",55)(3,"p",56),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"p",57),t.EFF(7),t.nI1(8,"date"),t.k0s()()(),t.j41(9,"li",54)(10,"div",58)(11,"p"),t.EFF(12),t.k0s()()(),t.j41(13,"li",54)(14,"div",59)(15,"p"),t.EFF(16),t.k0s()()(),t.j41(17,"li",54)(18,"div",60)(19,"p"),t.EFF(20),t.nI1(21,"cfaCurrency"),t.k0s()()(),t.j41(22,"li",61)(23,"div",62)(24,"p"),t.EFF(25),t.k0s()()()()}if(2&r){const e=l.$implicit,o=t.XpG(2);t.AVh("ul_commande_active",o.activeVenteId===e.venteId),t.R7$(4),t.JRh(t.i5U(5,10,e.dateVente,"dd/MM/yyyy")),t.R7$(3),t.JRh(t.i5U(8,13,e.dateVente,"HH:mm")),t.R7$(5),t.JRh(e.venteId),t.R7$(4),t.SpI("Quantit\xe9 ",o.getUpdatedTotalItems(e),""),t.R7$(4),t.JRh(t.bMT(21,16,o.getUpdatedTotalAmount(e))),t.R7$(4),t.AVh("status-paid","Payer"===o.getVenteStatus(e)),t.R7$(),t.SpI(" ",o.getVenteStatus(e)," ")}}function q(r,l){1&r&&(t.j41(0,"div",63),t.EFF(1," Pas de ventes pour ce filtre "),t.k0s())}function W(r,l){if(1&r&&(t.qex(0),t.DNE(1,Y,26,18,"ul",51)(2,q,2,0,"div",52),t.bVm()),2&r){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.ventes),t.R7$(),t.Y8G("ngIf",!e.ventes.length)}}function H(r,l){if(1&r&&(t.j41(0,"li",67)(1,"div",68)(2,"div",69),t.EFF(3),t.k0s(),t.j41(4,"div",70)(5,"p",71),t.EFF(6),t.j41(7,"span"),t.EFF(8),t.nI1(9,"cfaCurrency"),t.k0s()()()(),t.j41(10,"div",68)(11,"div",72),t.EFF(12),t.nI1(13,"cfaCurrency"),t.k0s()()()),2&r){const e=l.$implicit;t.R7$(3),t.JRh(e.quantity),t.R7$(3),t.SpI(" ",e.product.nom," "),t.R7$(2),t.SpI("(",t.bMT(9,4,e.product.prixVente),")"),t.R7$(4),t.SpI(" ",t.bMT(13,6,e.quantity*e.product.prixVente)," ")}}function J(r,l){1&r&&(t.j41(0,"div",73)(1,"p"),t.EFF(2,"Aucun produit dans cette commande"),t.k0s()())}function Z(r,l){if(1&r&&(t.qex(0),t.j41(1,"ul",64),t.DNE(2,H,14,8,"li",65),t.k0s(),t.DNE(3,J,3,0,"div",66),t.bVm()),2&r){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.activeCommandeItems),t.R7$(),t.Y8G("ngIf",0===e.activeCommandeItems.length)}}function tt(r,l){if(1&r){const e=t.RV6();t.j41(0,"input",105),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG().$implicit;return t.DH7(i.editQuantity,n)||(i.editQuantity=n),t.Njj(n)}),t.k0s()}if(2&r){const e=t.XpG().$implicit;t.Y8G("max",e.originalQuantity||100),t.R50("ngModel",e.editQuantity)}}function et(r,l){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&r){const e=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",e.originalQuantity," \u2794 ")}}function nt(r,l){if(1&r&&(t.j41(0,"p"),t.DNE(1,et,2,1,"span",31),t.EFF(2),t.k0s()),2&r){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(),t.Y8G("ngIf","annuler"===o.currentFilterKey&&null!==e.originalQuantity),t.R7$(),t.SpI(" ",e.quantity," ")}}function ot(r,l){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"cfaCurrency"),t.k0s()),2&r){const e=t.XpG().$implicit;t.R7$(),t.SpI(" (Orig: ",t.bMT(2,1,e.originalPrice),") ")}}function it(r,l){if(1&r&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"cfaCurrency"),t.k0s()),2&r){const e=t.XpG().$implicit;t.R7$(),t.SpI(" (",t.bMT(2,1,e.product.prixVente),") ")}}function rt(r,l){if(1&r&&(t.j41(0,"span")(1,"span",106),t.EFF(2),t.k0s(),t.nrm(3,"br"),t.k0s()),2&r){const e=t.XpG().$implicit;t.R7$(2),t.SpI(" ",e.originalQuantity*e.originalPrice," ")}}function ct(r,l){if(1&r){const e=t.RV6();t.j41(0,"i",107),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.startEditQuantity(n))}),t.k0s()}}function at(r,l){if(1&r){const e=t.RV6();t.j41(0,"i",108),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.onValidateQuantityEdit(n))}),t.k0s()}}function st(r,l){if(1&r){const e=t.RV6();t.j41(0,"li",67)(1,"div",68)(2,"div",69),t.DNE(3,tt,1,2,"input",100)(4,nt,3,2,"p",31),t.k0s(),t.j41(5,"div",70)(6,"p",71),t.EFF(7),t.DNE(8,ot,3,3,"span",31)(9,it,3,3,"span",31),t.k0s()()(),t.j41(10,"div",68)(11,"div",72),t.DNE(12,rt,4,1,"span",31),t.EFF(13),t.nI1(14,"cfaCurrency"),t.k0s(),t.j41(15,"div",101),t.DNE(16,ct,1,0,"i",102)(17,at,1,0,"i",103),t.k0s()(),t.j41(18,"div",80)(19,"label",81)(20,"input",104),t.mxI("ngModelChange",function(n){const i=t.eBV(e).$implicit;return t.DH7(i.selected,n)||(i.selected=n),t.Njj(n)}),t.bIt("ngModelChange",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.updateSelectedItems())}),t.k0s(),t.j41(21,"span",83)(22,"div",84),t.qSk(),t.j41(23,"svg",85),t.nrm(24,"polyline",86),t.k0s()(),t.joV(),t.j41(25,"div",87),t.nrm(26,"div",88)(27,"div",88)(28,"div",88)(29,"div",88),t.k0s(),t.j41(30,"div",89),t.nrm(31,"div",90)(32,"div",91)(33,"div",92)(34,"div",93)(35,"div",94)(36,"div",95)(37,"div",96)(38,"div",97),t.k0s()()()()()}if(2&r){const e=l.$implicit,o=t.XpG(2);t.AVh("selected-item",e.selected),t.R7$(3),t.Y8G("ngIf",e.editing),t.R7$(),t.Y8G("ngIf",!e.editing),t.R7$(3),t.SpI(" ",e.product.nom," "),t.R7$(),t.Y8G("ngIf","annuler"===o.currentFilterKey&&null!==e.originalPrice),t.R7$(),t.Y8G("ngIf","annuler"!==o.currentFilterKey||null===e.originalPrice),t.R7$(3),t.Y8G("ngIf","annuler"===o.currentFilterKey&&null!==e.originalPrice),t.R7$(),t.SpI(" ",t.bMT(14,12,e.quantity*e.product.prixVente)," "),t.R7$(3),t.Y8G("ngIf",!e.editing),t.R7$(),t.Y8G("ngIf",e.editing),t.R7$(3),t.R50("ngModel",e.selected)}}function pt(r,l){1&r&&(t.j41(0,"div",73)(1,"p"),t.EFF(2,"Aucun produit dans cette vente"),t.k0s()())}function dt(r,l){1&r&&(t.j41(0,"div",109),t.EFF(1," Tous les produits s\xe9lectionn\xe9s - la vente sera annul\xe9e "),t.k0s())}function lt(r,l){if(1&r){const e=t.RV6();t.qex(0),t.j41(1,"div",74)(2,"div",75)(3,"ul",76)(4,"li",77)(5,"div",68)(6,"div",78),t.EFF(7,"Q"),t.k0s(),t.j41(8,"div",70)(9,"p",71),t.EFF(10," Nom du produit "),t.j41(11,"span",79),t.EFF(12,"(PU)"),t.k0s()()()(),t.j41(13,"div",68)(14,"div",72),t.EFF(15," Prix total "),t.k0s()(),t.j41(16,"div",80)(17,"label",81)(18,"input",82,1),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.allSelected,n)||(i.allSelected=n),t.Njj(n)}),t.bIt("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleSelectAll(n))}),t.k0s(),t.j41(20,"span",83)(21,"div",84),t.qSk(),t.j41(22,"svg",85),t.nrm(23,"polyline",86),t.k0s()(),t.joV(),t.j41(24,"div",87),t.nrm(25,"div",88)(26,"div",88)(27,"div",88)(28,"div",88),t.k0s(),t.j41(29,"div",89),t.nrm(30,"div",90)(31,"div",91)(32,"div",92)(33,"div",93)(34,"div",94)(35,"div",95)(36,"div",96)(37,"div",97),t.k0s()()()()()()()(),t.j41(38,"ul",64),t.DNE(39,st,39,14,"li",98),t.k0s(),t.DNE(40,pt,3,0,"div",66)(41,dt,2,0,"div",99),t.bVm()}if(2&r){const e=t.XpG();t.R7$(18),t.R50("ngModel",e.allSelected),t.Y8G("disabled",0===e.activeVenteItems.length),t.R7$(21),t.Y8G("ngForOf",e.activeVenteItems),t.R7$(),t.Y8G("ngIf",0===e.activeVenteItems.length),t.R7$(),t.Y8G("ngIf",e.selectedItems.length===e.activeVenteItems.length&&e.activeVenteItems.length>0&&"annuler"!==e.currentFilterKey&&!e.isActiveVenteAnnule())}}function gt(r,l){if(1&r&&(t.j41(0,"span",110),t.EFF(1),t.nI1(2,"cfaCurrency"),t.k0s()),2&r){const e=t.XpG();t.R7$(),t.SpI(" ",t.bMT(2,1,e.activeVente.montantTotal)," ")}}function ut(r,l){if(1&r){const e=t.RV6();t.j41(0,"div",111)(1,"div",112)(2,"button",113),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeCancelPopup())}),t.nrm(3,"i",114),t.k0s(),t.j41(4,"h4",115),t.EFF(5,"Confirmation d'annulation"),t.k0s(),t.j41(6,"p",116),t.EFF(7,"Veuillez entrer le Code PIN pour annuler la commande."),t.k0s(),t.j41(8,"div",117)(9,"input",118,2),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.pin[0],n)||(i.pin[0]=n),t.Njj(n)}),t.bIt("input",function(){t.eBV(e);const n=t.sdS(10),i=t.sdS(12),c=t.XpG();return t.Njj(c.goToNext(n,i))})("keydown",function(n){t.eBV(e);const i=t.sdS(10),c=t.sdS(12),p=t.XpG();return t.Njj(p.handleBackspace(n,0,i,c))}),t.k0s(),t.j41(11,"input",119,3),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.pin[1],n)||(i.pin[1]=n),t.Njj(n)}),t.bIt("input",function(){t.eBV(e);const n=t.sdS(12),i=t.sdS(14),c=t.XpG();return t.Njj(c.goToNext(n,i))})("keydown",function(n){t.eBV(e);const i=t.sdS(10),c=t.sdS(12),p=t.XpG();return t.Njj(p.handleBackspace(n,1,c,i))}),t.k0s(),t.j41(13,"input",120,4),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.pin[2],n)||(i.pin[2]=n),t.Njj(n)}),t.bIt("input",function(){t.eBV(e);const n=t.sdS(14),i=t.sdS(16),c=t.XpG();return t.Njj(c.goToNext(n,i))})("keydown",function(n){t.eBV(e);const i=t.sdS(12),c=t.sdS(14),p=t.XpG();return t.Njj(p.handleBackspace(n,2,c,i))}),t.k0s(),t.j41(15,"input",121,5),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.pin[3],n)||(i.pin[3]=n),t.Njj(n)}),t.bIt("input",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.verifyCode())})("keydown",function(n){t.eBV(e);const i=t.sdS(14),c=t.sdS(16),p=t.XpG();return t.Njj(p.handleBackspace(n,3,c,i))}),t.k0s()()()()}if(2&r){const e=t.XpG();t.R7$(8),t.AVh("shake",e.isCodeWrong),t.R7$(),t.R50("ngModel",e.pin[0]),t.R7$(2),t.R50("ngModel",e.pin[1]),t.R7$(2),t.R50("ngModel",e.pin[2]),t.R7$(2),t.R50("ngModel",e.pin[3])}}function _t(r,l){if(1&r){const e=t.RV6();t.j41(0,"div",111)(1,"div",112)(2,"button",113),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeAllPopups())}),t.nrm(3,"i",114),t.k0s(),t.j41(4,"h6"),t.EFF(5,"Motif du remboursement"),t.k0s(),t.j41(6,"textarea",122),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG();return t.DH7(i.motifRemboursement,n)||(i.motifRemboursement=n),t.Njj(n)}),t.k0s(),t.j41(7,"div",123)(8,"button",124),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.confirmRemboursement())}),t.EFF(9,"Confirmer"),t.k0s(),t.j41(10,"button",125),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeAllPopups())}),t.EFF(11,"Annuler"),t.k0s()()()()}if(2&r){const e=t.XpG();t.R7$(6),t.R50("ngModel",e.motifRemboursement)}}let mt=(()=>{class r{constructor(e,o,n,i,c,p){this.router=e,this.viewState=o,this.commandeState=n,this.categorieService=i,this.posCommandeService=c,this.usersService=p,this.apiUrl=d.c.imgUrl,this.destroy$=new f.B,this.isListView=!0,this.showDropdown=!1,this.showFilterDropdown=!1,this.errorMessage=null,this.successMessage=null,this.commandes=[],this.products=[],this.activeCommandeId="",this.activeCommandeCart=new Map,this.activeCommandeTotal=0,this.activeCommandeItems=[],this.allSelected=!1,this.allVentes=[],this.ventes=[],this.activeVenteId=null,this.activeVenteItems=[],this.activeVente=null,this.selectedItems=[],this.motifRemboursement="",this.showMotifPopup=!1,this.isProcessing=!1,this.filterOptions=[{key:"en-cours",label:"En cours"},{key:"payer",label:"Pay\xe9es"},{key:"annuler",label:"Annuler"}],this.currentFilterKey="en-cours",this.currentFilterLabel="En cours",this.searchTerm="",this.showCancelPopup=!1,this.pin=["","","",""],this.isCodeWrong=!1,this.activeVenteLoading=!1,this.scannerBuffer="",this.lastKeyTime=0,this.venteLineSnapshots=new Map,this.SNAPSHOT_KEY="vente_line_snapshots_v1",this.pendingRemboursementItem=null,this.pageSize=10,this.pageMap=new Map}ngOnInit(){this.loadSnapshotsFromStorage(),window.addEventListener("keydown",this.handleScannerInput.bind(this)),this.viewState.isListView$.pipe((0,m.Q)(this.destroy$)).subscribe(e=>{this.isListView=e}),this.applyFilter(this.currentFilterKey),this.commandeState.commandeUpdated$.pipe((0,m.Q)(this.destroy$)).subscribe(()=>{this.loadCommandes(),this.loadActiveCommandeDetails()}),this.commandeState.activeCommandeId$.pipe((0,m.Q)(this.destroy$)).subscribe(e=>{this.activeCommandeId=e,this.loadActiveCommandeDetails()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),window.removeEventListener("keydown",this.handleScannerInput.bind(this))}ngAfterViewInit(){this.updateSelectAllState()}toggleSelectAll(e){!this.activeVenteItems||0===this.activeVenteItems.length||(this.activeVenteItems.forEach(o=>{o.selected=!!e}),this.updateSelectedItems(),this.updateSelectAllState())}loadSnapshotsFromStorage(){try{const e=localStorage.getItem(this.SNAPSHOT_KEY);if(!e)return;const o=JSON.parse(e);Object.keys(o).forEach(n=>{const i=Number(n);Number.isNaN(i)||this.venteLineSnapshots.set(i,o[n])}),console.debug("Loaded vente snapshots from storage",this.venteLineSnapshots)}catch(e){console.warn("Failed to load vente snapshots from storage",e)}}saveSnapshotsToStorage(){try{const e={};this.venteLineSnapshots.forEach((o,n)=>e[String(n)]=o),localStorage.setItem(this.SNAPSHOT_KEY,JSON.stringify(e)),console.debug("Saved vente snapshots to storage")}catch(e){console.warn("Failed to save vente snapshots to storage",e)}}ensureSnapshotForVente(e,o){if(!this.venteLineSnapshots.has(e)&&o&&Array.isArray(o)){try{this.venteLineSnapshots.set(e,JSON.parse(JSON.stringify(o)))}catch{this.venteLineSnapshots.set(e,o.map(n=>({...n})))}this.saveSnapshotsToStorage()}}toggleFilterDropdown(){this.showFilterDropdown=!this.showFilterDropdown}closeFilterDropdown(){this.showFilterDropdown=!1}selectFilter(e){this.showFilterDropdown=!1,this.resetPageForKey(e),this.applyFilter(e)}applyFilter(e){this.currentFilterKey=e;const o=this.filterOptions.find(n=>n.key===e);this.currentFilterLabel=o?o.label:"Filtre","en-cours"===e?this.loadProducts():this.loadVentesAndFilter(e)}loadProducts(){this.categorieService.getCategories().pipe((0,m.Q)(this.destroy$)).subscribe({next:e=>{this.products=[],e.forEach(o=>{o.produits&&(this.products=[...this.products,...o.produits])}),this.loadCommandes(),this.loadActiveCommandeDetails()},error:e=>console.error("Erreur chargement produits",e)})}loadCommandes(){this.commandes=this.commandeState.getAllCommandesIds().map(e=>{const o=this.pageMap.get(this.currentFilterKey)??1;this.setCurrentPage(o);const n=this.commandeState.getCommandeDetails(e);let i=0,c=0;return n?.cart&&(n.cart.forEach((p,I)=>{const V=this.products.find(T=>T.id===I);V&&(i+=p,c+=p*V.prixVente)}),this.commandeState.updateCommandeTotals(e,i,c)),{id:e,totalItems:i,totalAmount:c,createdAt:n?.createdAt||new Date}}),this.commandes.sort((e,o)=>{const n=new Date(e.createdAt).getTime();return new Date(o.createdAt).getTime()-n})}loadActiveCommandeDetails(){if(!this.activeCommandeId)return;const e=this.commandeState.getCommandeDetails(this.activeCommandeId);e&&(this.activeCommandeCart=e.cart,this.activeCommandeTotal=e.totalAmount||0,this.updateActiveCommandeItems())}updateActiveCommandeItems(){this.activeCommandeItems=[],this.activeCommandeCart&&this.products.length&&this.activeCommandeCart.forEach((e,o)=>{if(e>0){const n=this.products.find(i=>i.id===o);n&&this.activeCommandeItems.push({product:n,quantity:e})}})}loadVentesAndFilter(e){const o=this.usersService.getCurrentUser()?.id;if(!o)return console.warn("Utilisateur non connect\xe9 \u2014 impossible de charger ventes"),this.allVentes=[],void(this.ventes=[]);this.posCommandeService.getVentesByVendeur(o).pipe((0,m.Q)(this.destroy$)).subscribe({next:n=>{if(console.debug("Ventes API raw:",n),this.allVentes=n||[],this.allVentes.forEach(i=>{const c=i.lignes??[];if(!this.venteLineSnapshots.has(i.venteId))try{this.venteLineSnapshots.set(i.venteId,JSON.parse(JSON.stringify(c)))}catch{this.venteLineSnapshots.set(i.venteId,c.map(p=>({...p})))}}),this.saveSnapshotsToStorage(),this.applyVentesFilter(e),this.ventes.length>0){const i=this.ventes[0];(!this.activeVente||this.activeVente.venteId!==i.venteId)&&this.setActiveVente(i.venteId)}else this.activeVenteId=null,this.activeVente=null,this.activeVenteItems=[],this.updateSelectedItems()},error:n=>{console.error("Erreur chargement ventes",n),this.allVentes=[],this.ventes=[]}})}applyVentesFilter(e){this.ventes=this.allVentes.filter(n=>this.matchesVenteStatus(n,e));const o=this.pageMap.get(this.currentFilterKey)??1;this.setCurrentPage(o),this.ventes.sort((n,i)=>{const c=this.getTimeFromVente(n);return this.getTimeFromVente(i)-c})}getTimeFromVente(e){const o=[e.dateVente,e.createdAt,e.date||e.timestamp];for(const i of o)if(null!=i){const c=new Date(i);if(!Number.isNaN(c.getTime()))return c.getTime()}const n=Number(e.venteId??e.id);return Number.isNaN(n)?0:n}matchesVenteStatus(e,o){const n=this.determineVenteCategory(e);return"en-cours"===o?"en-cours"===n:"payer"===o?"payer"===n:"annuler"===o&&"annuler"===n}loadVentes(){const e=this.usersService.getCurrentUser()?.id;e&&this.posCommandeService.getVentesByVendeur(e).pipe((0,m.Q)(this.destroy$)).subscribe({next:o=>{this.allVentes=o||[],this.ventes=[...this.allVentes]},error:o=>console.error("Erreur chargement ventes",o)})}loadActiveVenteDetails(){var e=this;return(0,P.A)(function*(){if(!e.activeVenteId)return e.activeVenteItems=[],void e.updateSelectedItems();e.activeVenteLoading=!0;try{console.debug("loadActiveVenteDetails - starting for id",e.activeVenteId);const n=yield function(){var s=(0,P.A)(function*(){try{const M=e.posCommandeService;if("function"==typeof M.getVenteById)return yield(0,x._)(M.getVenteById(e.activeVenteId));if("function"==typeof e.posCommandeService.getVentesByVendeur){const y=e.usersService.getCurrentUser()?.id;if(!y)return e.activeVente;const h=yield(0,x._)(e.posCommandeService.getVentesByVendeur(y));if(Array.isArray(h))return h.find(b=>b.venteId===e.activeVenteId)||e.activeVente}}catch(M){console.warn("ensureFullVente error",M)}return e.activeVente});return function(){return s.apply(this,arguments)}}()();if(!n||e.activeVente&&n.venteId===e.activeVente.venteId)console.debug("Using existing activeVente (no fetch or unchanged)");else{console.debug("Fetched fullVente from API for id",e.activeVenteId,n),e.activeVente=n;const s=e.allVentes.findIndex(M=>M.venteId===e.activeVenteId);s>=0&&(e.allVentes[s]=n)}const i=e.activeVente||{},c=i.lignes??i.lines??i.items??i.lignesVente??[];console.debug("lines used for building items:",c);const p=(s,M)=>{if(!s)return null;for(const y of M)if(Object.prototype.hasOwnProperty.call(s,y)&&null!=s[y]){const h=s[y],b="number"==typeof h?h:Number(String(h).replace(",","."));if(!Number.isNaN(b))return b}return null},I=["quantiteOriginale","quantiteInitiale","initialQuantity","originalQuantity","quantiteAvantRemboursement","qtyOriginal","original_qty","qty_initial"],V=["quantite","quantity","qty","quantite_actuelle","currentQuantity","current_qty"],T=["prixOriginal","prixAvantRemboursement","unitPriceOriginal","prixUnitaireOriginal","originalPrice"],N=["prixUnitaire","prix","price","unitPrice","prix_unitaire"],F=e.venteLineSnapshots.get(e.activeVenteId)??[],ft=s=>{if(!F||0===F.length)return null;const M=s.produitId??s.productId??s.idProduit??null;if(null!=M){const h=F.find(b=>(b.produitId??b.productId??b.idProduit)===M);if(h)return h}const y=(s.nomProduit??s.productName??s.name??"").toString().toLowerCase();return y&&F.find(h=>{const b=(h.nomProduit??h.productName??h.name??"").toString().toLowerCase();return b&&b===y})||null},D=!!e.activeVente&&"annuler"===e.determineVenteCategory(e.activeVente);console.debug("isCancelledSale:",D,"activeVente.status:",e.activeVente?.status),e.activeVenteItems=(c||[]).map(s=>{const M=p(s,V)??p(s,I)??0,y=p(s,N)??p(s,T)??s.prixUnitaire??0;let h=p(s,I)??null,b=p(s,T)??null;if((null===h||null===b)&&F&&F.length>0){const R=ft(s);R&&(null===h&&(h=p(R,I)??p(R,V)??h),null===b&&(b=p(R,T)??p(R,N)??b))}return{product:{id:s.produitId??s.productId??s.idProduit??null,nom:s.nomProduit??s.productName??s.name??"Produit",prixVente:y??0},quantity:M??0,originalQuantity:h,currentQuantity:M,originalPrice:b,currentPrice:y,selected:!1,editing:!1,editQuantity:0,__rawLine:s}}),D||(e.activeVenteItems=e.activeVenteItems.filter(s=>(s.quantity??0)>0)),e.activeVenteItems.forEach("annuler"===e.currentFilterKey?s=>s.selected=!0:s=>s.selected=!1),console.debug("activeVenteItems built:",e.activeVenteItems),e.updateSelectedItems()}catch(o){console.error("Erreur dans loadActiveVenteDetails",o),e.activeVenteItems=[],e.updateSelectedItems()}finally{e.activeVenteLoading=!1}})()}setActiveVente(e){this.activeVenteId=e,this.activeVente=this.ventes.find(o=>o.venteId===e)||null,this.activeVenteItems=[],this.selectedItems=[],this.updateSelectedItems(),this.loadActiveVenteDetails()}getTotalItems(e){return e.lignes?.reduce((o,n)=>o+n.quantite,0)||0}setActiveCommande(e){this.commandeState.setActiveCommande(e),this.loadActiveCommandeDetails(),this.updateActiveCommandeItems()}removeCommande(e){this.commandeState.removeCommande(e),this.loadCommandes()}removeProductFromCommande(e){const o=this.commandeState.getCommandeDetails(this.activeCommandeId);if(o){o.cart.delete(e);const n=this.calculateTotalItems(o.cart),i=this.calculateTotalAmount(o.cart);this.commandeState.updateCommandeTotals(this.activeCommandeId,n,i),this.loadCommandes(),this.loadActiveCommandeDetails()}}calculateTotalItems(e){let o=0;return e.forEach(n=>o+=n),o}calculateTotalAmount(e){let o=0;return e.forEach((n,i)=>{const c=this.products.find(p=>p.id===i);c&&(o+=n*c.prixVente)}),o}onSearch(e){this.searchTerm=(e||"").trim().toLowerCase(),this.resetPageForKey(this.currentFilterKey),"en-cours"===this.currentFilterKey?(this.loadCommandes(),this.searchTerm&&(this.commandes=this.commandes.filter(o=>String(o.id).toLowerCase().includes(this.searchTerm)||String(o.totalAmount).toLowerCase().includes(this.searchTerm)||String(o.totalItems).toLowerCase().includes(this.searchTerm)))):(this.applyVentesFilter(this.currentFilterKey),this.searchTerm&&(this.ventes=this.ventes.filter(o=>String(o.venteId).toLowerCase().includes(this.searchTerm)||String(o.montantTotal).toLowerCase().includes(this.searchTerm)||o.clientNom&&String(o.clientNom).toLowerCase().includes(this.searchTerm)||o.numeroFacture&&o.numeroFacture.toLowerCase().includes(this.searchTerm))))}getVenteStatus(e){if(e.status)switch(e.status.toUpperCase()){case"EN_COURS":return"En cours";case"PARTIELLEMENT_REMBOURSEE":return"Partiellement rembours\xe9e";case"REMBOURSEE":case"ANNULEE":return"Annul\xe9e";case"PAYEE":case"PAYER":return"Pay\xe9e"}switch(this.determineVenteCategory(e)){case"payer":return"Pay\xe9e";case"annuler":return"Annul\xe9e";case"en-cours":return"En cours";default:return"\u2014"}}normalizeStr(e){if(null==e)return"";const o=String(e).toLowerCase();try{return o.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"")}catch{return o.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}}determineVenteCategory(e){if(e.status)switch(e.status.toUpperCase()){case"EN_COURS":return"en-cours";case"PARTIELLEMENT_REMBOURSEE":case"PAYEE":case"PAYER":return"payer";case"REMBOURSEE":case"ANNULEE":return"annuler"}const o=e.lignes||[];if(o.length>0&&0===o.reduce((I,V)=>I+(V.quantite||0),0))return"annuler";const i=[e.paymentStatus,e.statut,e.etat,e.status,e.isPaid?"payer":void 0,e.paye?"payer":void 0].filter(Boolean).map(p=>this.normalizeStr(p)),c=p=>i.some(I=>p.some(V=>I.includes(V)));return c(["payer","paid","paye","payed","settled"])?"payer":c(["annul","cancel","void","annulee","rembourse"])?"annuler":c(["en cours","encours","pending","in_progress","ongoing","draft"])?"en-cours":"number"==typeof e.montantPaye&&e.montantPaye>0?"payer":"unknown"}toggleView(e){this.isListView="grid"===e,this.showDropdown=!0,localStorage.setItem("viewPreference",e)}pagePosVente(){}closeCancelPopup(){this.showCancelPopup=!1}goToNext(e,o){e.value&&o&&o.focus()}handleBackspace(e,o,n,i){"Backspace"===e.key&&!n.value&&i&&i.focus()}updateSelectedItems(){this.selectedItems=this.activeVenteItems.filter(e=>e.selected),this.updateSelectAllState()}updateSelectAllState(){if(!this.activeVenteItems||!this.selectAllCheckbox)return void(this.allSelected=!1);const e=this.activeVenteItems.length,o=this.activeVenteItems.filter(n=>n.selected).length;this.allSelected=o===e&&e>0;try{this.selectAllCheckbox.nativeElement.indeterminate=o>0&&o<e}catch{}}openCancelPopup(){0!==this.selectedItems.length?(this.showCancelPopup=!0,this.pin=["","","",""],this.isCodeWrong=!1):alert("Veuillez s\xe9lectionner au moins un produit \xe0 rembourser")}verifyCode(){const e=this.pin.join("");this.usersService.verifyCode(e,["ADMIN","MANAGER"]).subscribe({next:o=>{o?(this.showCancelPopup=!1,this.showMotifPopup=!0):this.handleInvalidPin()},error:()=>this.handleInvalidPin()})}handleInvalidPin(){this.isCodeWrong=!0,setTimeout(()=>this.isCodeWrong=!1,500)}confirmRemboursement(){if(!this.motifRemboursement.trim())return void alert("Veuillez saisir un motif");this.successMessage=null,this.errorMessage=null,this.isProcessing=!0;let e={};this.pendingRemboursementItem?e[this.pendingRemboursementItem.product.id]=this.pendingRemboursementItem.qtyToRefund:e=this.getProduitsQuantites();const o={venteId:this.activeVenteId,produitsQuantites:e,motif:this.motifRemboursement,rescodePin:this.pin.join("")};this.posCommandeService.rembourserVente(o).subscribe({next:n=>{this.pendingRemboursementItem=null,this.closeAllPopups(),this.loadVentesAndFilter(this.currentFilterKey),this.activeVente=n,this.loadActiveVenteDetails(),this.successMessage="Remboursement effectu\xe9 avec succ\xe8s !"},error:n=>{console.error("Erreur remboursement",n),this.errorMessage=n.error?.message||"Une erreur est survenue lors du remboursement"},complete:()=>this.isProcessing=!1})}updateVenteStatus(e,o){const n=this.allVentes.find(i=>i.venteId===e);n&&(n.status=o,this.applyVentesFilter(this.currentFilterKey)),this.activeVenteId===e&&(this.activeVente.status=o)}getProduitsQuantites(){const e={};return this.selectedItems.forEach(o=>{e[o.product.id]=o.currentQuantity??o.quantity??0}),e}closeAllPopups(){this.showCancelPopup=!1,this.showMotifPopup=!1,this.motifRemboursement="",this.selectedItems=[],this.pendingRemboursementItem=null,this.activeVenteItems.forEach(e=>e.selected=!1)}getSelectedAmount(){return this.selectedItems.reduce((e,o)=>e+(o.currentQuantity??o.quantity??0)*(o.currentPrice??o.product.prixVente??0),0)}getSelectedItemsCount(){return this.selectedItems.reduce((e,o)=>e+(o.currentQuantity??o.quantity??0),0)}getUpdatedTotalItems(e){return e?this.activeVenteId&&e.venteId===this.activeVenteId?this.activeVenteLoading?e.lignes?.reduce((o,n)=>o+(n.quantite||0),0)||e.montantTotal?this.getTotalItems(e):0:this.activeVenteItems.reduce((o,n)=>o+(n.selected?0:n.currentQuantity??n.quantity??0),0):this.getTotalItems(e):0}getUpdatedTotalAmount(e){return e?!this.activeVenteId||e.venteId!==this.activeVenteId||this.activeVenteLoading?e.montantTotal??0:this.activeVenteItems.reduce((o,n)=>o+(n.selected?0:n.currentQuantity??n.quantity??0)*(n.currentPrice??n.product.prixVente??0),0):0}isActiveVenteAnnule(){if(!this.activeVente)return!1;try{return"annuler"===this.determineVenteCategory(this.activeVente)}catch{return this.getVenteStatus(this.activeVente).toLowerCase().includes("annul")}}toggleQuantityEdit(e){e.editing?this.validateQuantityEdit(e):(e.editing=!0,e.editQuantity=e.quantity)}validateQuantityEdit(e){e.editQuantity&&e.editQuantity>0&&(e.quantity=e.editQuantity,this.updateSelectedItems()),e.editing=!1}startEditQuantity(e){e.editing=!0,e.editQuantity=e.quantity}onValidateQuantityEdit(e){const o=e.quantity;if(e.editQuantity>=1&&e.editQuantity<o){const n=o-e.editQuantity;e.quantity=e.editQuantity,this.pendingRemboursementItem={...e,qtyToRefund:n},this.showCancelPopup=!0,this.pin=["","","",""],this.isCodeWrong=!1,setTimeout(()=>{document.getElementById("0")?.focus()},0)}else e.editing=!1}handleScannerInput(e){console.log(e.key);const o=Date.now();o-this.lastKeyTime>100&&(this.scannerBuffer=""),this.lastKeyTime=o,/^\d$/.test(e.key)&&(this.scannerBuffer+=e.key,4===this.scannerBuffer.length&&(this.pin=this.scannerBuffer.split(""),this.verifyCode(),this.scannerBuffer="")),"Enter"===e.key&&4===this.scannerBuffer.length&&(this.pin=this.scannerBuffer.split(""),this.verifyCode(),this.scannerBuffer="")}getCurrentPage(){return this.pageMap.get(this.currentFilterKey)??1}setCurrentPage(e){const o=this.getTotalForCurrentFilter(),n=Math.max(1,Math.ceil((o||0)/this.pageSize)),i=Math.max(1,Math.min(e,n));this.pageMap.set(this.currentFilterKey,i)}resetPageForKey(e){this.pageMap.set(e,1)}prevPage(){const e=this.getCurrentPage();e>1&&this.setCurrentPage(e-1)}nextPage(){const e=this.getCurrentPage(),o=this.getTotalForCurrentFilter();e<Math.max(1,Math.ceil((o||0)/this.pageSize))&&this.setCurrentPage(e+1)}isFirstPage(){return this.getCurrentPage()<=1}isLastPage(){const e=this.getTotalForCurrentFilter(),o=Math.max(1,Math.ceil((e||0)/this.pageSize));return this.getCurrentPage()>=o}get pagerTotal(){return this.getTotalForCurrentFilter()}get pagerStart(){const e=this.pagerTotal;if(!e)return 0;const o=(this.getCurrentPage()-1)*this.pageSize+1;return Math.min(o,e)}get pagerEnd(){const e=this.pagerTotal;if(!e)return 0;const o=this.getCurrentPage()*this.pageSize;return Math.min(o,e)}getTotalForCurrentFilter(){return"en-cours"===this.currentFilterKey?this.commandes?.length??0:this.ventes?.length??0}get displayedCommandes(){if("en-cours"!==this.currentFilterKey)return[];const e=this.commandes||[],n=(this.getCurrentPage()-1)*this.pageSize;return e.slice(n,n+this.pageSize)}get displayedVentes(){if("en-cours"===this.currentFilterKey)return[];const e=this.ventes||[],n=(this.getCurrentPage()-1)*this.pageSize;return e.slice(n,n+this.pageSize)}static{this.\u0275fac=function(o){return new(o||r)(t.rXU(j.Ix),t.rXU(z.C),t.rXU(E.f),t.rXU(B.R),t.rXU(w),t.rXU(O.g))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-pos-commande"]],viewQuery:function(o,n){if(1&o&&t.GBs(S,5),2&o){let i;t.mGM(i=t.lsd())&&(n.selectAllCheckbox=i.first)}},decls:63,vars:19,consts:[["searchInput",""],["selectAllCheckbox",""],["pin0",""],["pin1",""],["pin2",""],["pin3",""],[1,"toast-container"],["class","alert alert-success toast-message-success",4,"ngIf"],["class","alert alert-danger toast-message-danger",4,"ngIf"],[1,"section_contenu_container"],[1,"section_contenu_left"],[1,"section_commande"],["appClickOutside","",1,"toolbar",3,"clickOutside"],[1,"icon_search"],[1,"ri-search-line"],[1,"search"],["type","text","placeholder","Rechercher des commandes...",3,"input"],[1,"btn_search_filtre"],[1,"btn",3,"click"],[1,"ri-arrow-down-s-fill"],["class","dropdown_filter",4,"ngIf"],["aria-label","Pagination",1,"pager"],["aria-live","polite",1,"pager-info"],[1,"o_pager_counter"],[1,"o_pager_limit"],["aria-atomic","true","role","group","aria-label","Navigation pages",1,"btn-group","d-print-none"],["type","button","aria-label","Pr\xe9c\xe9dent","title","Page pr\xe9c\xe9dente",1,"o_pager_previous",3,"click","disabled"],[1,"ri-arrow-left-s-line"],["type","button","aria-label","Suivant","title","Page suivante",1,"o_pager_next",3,"click","disabled"],[1,"ri-arrow-right-s-line"],[1,"section_list_commande"],[4,"ngIf"],[1,"section_contenu_right",2,"background-color","#ffffff","height","100vh","box-shadow","rgba(0, 0, 0, 0.04) 0px 3px 5px"],[1,"list_produit_select"],[1,"summary_panel"],[1,"double_row"],[1,"double_row","total"],["style","text-decoration: line-through; opacity: 0.6;",4,"ngIf"],[1,"btn_container"],[1,"btn_action_commande"],[1,"btn_retourn",3,"click"],[1,"btn_content"],[1,"btn-payment",3,"click"],[1,"btn_delete",3,"click"],[1,"ri-delete-bin-5-line"],["class","popup-overlay",4,"ngIf"],[1,"alert","alert-success","toast-message-success"],[1,"alert","alert-danger","toast-message-danger"],[1,"dropdown_filter"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["class","ul_commande",3,"ul_commande_active","click",4,"ngFor","ngForOf"],["class","loading_commande",4,"ngIf"],[1,"ul_commande",3,"click"],[1,"li_commande"],[1,"commande_date_heure"],[1,"commande_date"],[1,"commande_heure"],[1,"num_onglet_commande"],[1,"quantite_commande"],[1,"price_commande"],[1,"li_commande",2,"display","flex","align-items","center","gap","30px"],[1,"etat_commande"],[1,"loading_commande"],[1,"ul_list_produit_select"],["class","li_list_produit_select",4,"ngFor","ngForOf"],["class","empty-cart-message",4,"ngIf"],[1,"li_list_produit_select"],[1,"double_commande"],[1,"nombre_select"],[1,"name_produit_select"],[2,"margin","0"],[1,"price_produit"],[1,"empty-cart-message"],[1,"container_titre"],[1,"content_titre"],[1,"ul_list_produit_select",2,"margin","0"],[1,"li_list_produit_select",2,"background","none","font-weight","700"],["title","Quantit\xe9 s\xe9lectionner",1,"nombre_select"],["title","Prix unitaire"],[1,"icon_check"],[1,"cyber-checkbox"],["type","checkbox",3,"ngModelChange","ngModel","disabled"],[1,"cyber-checkbox__mark"],[1,"cyber-checkbox__box"],["viewBox","0 0 12 10",1,"cyber-checkbox__check"],["points","1.5 6 4.5 9 10.5 1"],[1,"cyber-checkbox__effects"],[1,"cyber-checkbox__spark"],[1,"cyber-checkbox__particles"],[1,"particle-1"],[1,"particle-2"],[1,"particle-3"],[1,"particle-4"],[1,"particle-5"],[1,"particle-6"],[1,"particle-7"],[1,"particle-8"],["class","li_list_produit_select",3,"selected-item",4,"ngFor","ngForOf"],["class","full-refund-warning",4,"ngIf"],["type","number","min","1","class","quantity-input",3,"max","ngModel","ngModelChange",4,"ngIf"],[1,"icon_edit_quantite"],["class","ri-edit-2-line",3,"click",4,"ngIf"],["class","ri-check-line",3,"click",4,"ngIf"],["type","checkbox",3,"ngModelChange","ngModel"],["type","number","min","1",1,"quantity-input",3,"ngModelChange","max","ngModel"],[2,"text-decoration","line-through","opacity","0.7"],[1,"ri-edit-2-line",3,"click"],[1,"ri-check-line",3,"click"],[1,"full-refund-warning"],[2,"text-decoration","line-through","opacity","0.6"],[1,"popup-overlay"],[1,"popup"],[1,"close-btn",3,"click"],[1,"ri-close-line"],[1,"titlh"],[1,"titlp"],[1,"pin-container"],["type","password","maxlength","1","id","0",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","id","1",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","id","2",3,"ngModelChange","input","keydown","ngModel"],["type","password","maxlength","1","id","3",3,"ngModelChange","input","keydown","ngModel"],["placeholder","Raison du remboursement","rows","4",3,"ngModelChange","ngModel"],[1,"btn-container"],[1,"btn-confirm",3,"click"],[1,"btn-cancel",3,"click"]],template:function(o,n){if(1&o){const i=t.RV6();t.j41(0,"div",6),t.DNE(1,$,2,1,"div",7)(2,G,2,1,"div",8),t.k0s(),t.j41(3,"div",9)(4,"div",10)(5,"div",11)(6,"div",12),t.bIt("clickOutside",function(){return t.eBV(i),t.Njj(n.closeFilterDropdown())}),t.j41(7,"div",13),t.nrm(8,"i",14),t.k0s(),t.j41(9,"div",15)(10,"input",16,0),t.bIt("input",function(){t.eBV(i);const p=t.sdS(11);return t.Njj(n.onSearch(p.value))}),t.k0s()(),t.j41(12,"div",17)(13,"button",18),t.bIt("click",function(){return t.eBV(i),t.Njj(n.toggleFilterDropdown())}),t.EFF(14),t.nrm(15,"i",19),t.k0s(),t.DNE(16,U,2,1,"ul",20),t.k0s(),t.j41(17,"div",21)(18,"div",22)(19,"span",23)(20,"span"),t.EFF(21),t.k0s(),t.j41(22,"span"),t.EFF(23," / "),t.k0s(),t.j41(24,"span",24),t.EFF(25),t.k0s()()(),t.j41(26,"div",25)(27,"button",26),t.bIt("click",function(){return t.eBV(i),t.Njj(n.prevPage())}),t.nrm(28,"i",27),t.k0s(),t.j41(29,"button",28),t.bIt("click",function(){return t.eBV(i),t.Njj(n.nextPage())}),t.nrm(30,"i",29),t.k0s()()()(),t.j41(31,"div",30),t.DNE(32,X,3,2,"ng-container",31)(33,W,3,2,"ng-container",31),t.k0s()()(),t.j41(34,"div",32)(35,"div",33),t.DNE(36,Z,4,2,"ng-container",31)(37,lt,42,5,"ng-container",31),t.k0s(),t.j41(38,"div",34)(39,"div",35)(40,"span"),t.EFF(41,"Taxes"),t.k0s(),t.j41(42,"span"),t.EFF(43,"00 CFA"),t.k0s()(),t.j41(44,"div",36)(45,"strong"),t.EFF(46,"Total"),t.k0s(),t.j41(47,"strong"),t.DNE(48,gt,3,3,"span",37),t.EFF(49),t.nI1(50,"cfaCurrency"),t.k0s()()(),t.j41(51,"div",38)(52,"div",39)(53,"button",40),t.bIt("click",function(){return t.eBV(i),t.Njj(n.router.navigate(["/pos-accueil"]))}),t.nrm(54,"i",27),t.k0s()(),t.j41(55,"div",41)(56,"button",42),t.bIt("click",function(){return t.eBV(i),t.Njj(n.openCancelPopup())}),t.EFF(57,"Annuler la commande"),t.k0s()(),t.j41(58,"div",39)(59,"button",43),t.bIt("click",function(){return t.eBV(i),t.Njj(n.removeCommande(n.activeCommandeId))}),t.nrm(60,"i",44),t.k0s()()()()(),t.DNE(61,ut,17,6,"div",45)(62,_t,12,1,"div",45)}2&o&&(t.R7$(),t.Y8G("ngIf",n.successMessage),t.R7$(),t.Y8G("ngIf",n.errorMessage),t.R7$(12),t.SpI(" ",n.currentFilterLabel," "),t.R7$(2),t.Y8G("ngIf",n.showFilterDropdown),t.R7$(5),t.Lme("",n.pagerStart," - ",n.pagerEnd,""),t.R7$(4),t.JRh(n.pagerTotal),t.R7$(2),t.Y8G("disabled",n.isFirstPage()||0===n.pagerTotal),t.R7$(2),t.Y8G("disabled",n.isLastPage()||0===n.pagerTotal),t.R7$(3),t.Y8G("ngIf","en-cours"===n.currentFilterKey),t.R7$(),t.Y8G("ngIf","en-cours"!==n.currentFilterKey),t.R7$(3),t.Y8G("ngIf","en-cours"===n.currentFilterKey),t.R7$(),t.Y8G("ngIf","en-cours"!==n.currentFilterKey),t.R7$(11),t.Y8G("ngIf",n.selectedItems.length>0&&n.activeVente),t.R7$(),t.SpI(" ",t.bMT(50,17,n.getUpdatedTotalAmount(n.activeVente))," "),t.R7$(12),t.Y8G("ngIf",n.showCancelPopup),t.R7$(),t.Y8G("ngIf",n.showMotifPopup))},dependencies:[g.YN,g.me,g.Q0,g.Zm,g.BC,g.tU,g.VZ,g.zX,g.vS,v.MD,v.Sq,v.bT,v.vh,C.M],styles:['@charset "UTF-8";.payment-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1000}.payment-popup[_ngcontent-%COMP%]{background-color:#fff;width:85%;height:90vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden;position:relative}.payment-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer;transition:color .2s}.payment-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.list-client-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1000}.list-client-popup[_ngcontent-%COMP%]{background-color:#fff;width:90%;height:90vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden;position:relative}.list-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.list-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer;transition:color .2s}.list-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.detail-popup-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:flex-start;padding:2rem 0;z-index:1000}.detail-image[_ngcontent-%COMP%]{height:100px;width:100px}.detail-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;border-radius:4px}.detail-popup[_ngcontent-%COMP%]{background:#fff;width:90%;max-width:900px;border-radius:8px;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 5px 15px #0000004d}.detail-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #e5e5e5}.detail-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px}.detail-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]{padding:1.5rem}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .shop-name[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:16px;font-weight:500}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:1.5rem;margin-bottom:1.5rem}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 250px 1fr;row-gap:.75rem;column-gap:4rem;margin-top:15px;margin-bottom:15px}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;line-height:25px}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#555}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#222}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-description[_ngcontent-%COMP%]{justify-content:space-between;padding:1rem 0;border-top:1px solid #e5e5e5}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-description[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#555}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-description[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-style:italic;color:#333}.detail-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#f8f9fa;text-align:right}.detail-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{background:#0672e4;border:none;color:#fff;padding:.6rem 1.2rem;border-radius:4px;cursor:pointer;transition:background .2s}.detail-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover{background:#45a049}.btn-payment-pop[_ngcontent-%COMP%]:disabled{background-color:#f4f4f4;cursor:not-allowed;color:#acacac}.btnAddClient[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.btnAddClient[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:#0672e4;padding:8px 20px;border-radius:5px;color:#fff;font-size:12px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}tr[_ngcontent-%COMP%]{font-size:13px}td[_ngcontent-%COMP%]{padding:18px 15px;border-bottom:1px solid rgba(221,221,221,.5803921569)}th[_ngcontent-%COMP%]{background-color:#f2f2f2;border-bottom:1px solid rgba(221,221,221,.5803921569);padding:12px 8px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.imgClient[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;box-shadow:0 4px 6px #0000001a;cursor:pointer}.imgClient[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:80%;border-radius:50%;object-fit:cover;transition:transform .2s}.imgClient[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.no-client-message[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#888}.inputSearch[_ngcontent-%COMP%]{position:relative;width:250px;height:35px;display:flex;align-items:center}.inputSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding-left:10px;border-radius:5px;border:1px solid #000;font-size:13px}.inputSearch[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:15px;font-size:17px}.add-client-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1001}.add-client-popup[_ngcontent-%COMP%]{position:relative;background-color:#fff;width:700px;height:83vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;padding:15px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0003;border-radius:3px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:10px 15px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;font-size:13px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#0672e4;box-shadow:0 0 0 .2rem #0672e440}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:80px;resize:vertical}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .client-type-selector[_ngcontent-%COMP%]{display:flex}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .client-type-selector[_ngcontent-%COMP%]   .client-type-btn[_ngcontent-%COMP%]{flex:1;padding:8px;background:#f1f1f1;border:none;border-radius:4px;cursor:pointer;transition:all .2s}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .client-type-selector[_ngcontent-%COMP%]   .client-type-btn.active[_ngcontent-%COMP%]{background:#0672e4;color:#fff}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   .photo-placeholder[_ngcontent-%COMP%]{height:100px;border:1px dashed #ced4da;border-radius:4px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   .photo-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px;color:#6c757d}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   .photo-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#6c757d}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:15px 20px;background-color:#f8f9fa;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;box-shadow:0 -2px 5px #0000001a}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;padding:8px 16px;border:none;border-radius:4px;font-size:14px;cursor:pointer}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{padding:8px 30px;border:none;border-radius:5px;background-color:red;color:#fff}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d70404}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background-color:#0672e4;color:#fff}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#055cb9}.double_input[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:10px}.grid_colonne[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:20px}.champ_input[_ngcontent-%COMP%]{position:relative;margin-bottom:10px}.input_focus[_ngcontent-%COMP%]{width:100%;height:49px;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:14px;background:none;color:#695c5c}.champ_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:4px;pointer-events:none;color:#6b6666}.input_focus[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.input_focus[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:5px;left:0;transition:all .3s ease-in-out;background:none;font-size:11px;padding:0}.input_focus[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:12px;transition:all .2s ease-in-out}.champ_input_inventaire[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.champ_input_inventaire[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:24px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#0672e4}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.input_cursor[_ngcontent-%COMP%]{cursor:pointer}.client-type-selector[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px}.client-type-selector[_ngcontent-%COMP%]   .client-type-btn[_ngcontent-%COMP%]{flex:1;padding:10px;background:#f1f1f1;border:none;border-radius:4px;cursor:pointer;transition:all .2s;text-align:center}.client-type-selector[_ngcontent-%COMP%]   .client-type-btn.active[_ngcontent-%COMP%]{background:#0672e4;color:#fff}.nombreCount[_ngcontent-%COMP%]{border-radius:50%;position:absolute;top:-15px;background-color:#ddd;width:18px;height:18px;display:flex;align-items:center;justify-content:center;right:-9px}.nombreCount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;border-radius:50%;font-size:9px}.barre[_ngcontent-%COMP%]{height:25px;width:1px;background-color:#0000003f;margin:8px 10px}.contentIcon[_ngcontent-%COMP%]{position:relative;cursor:pointer;transition:all .3s ease;padding:0 5px;border-radius:4px;display:flex;align-items:center;justify-content:center}.contentIcon.active[_ngcontent-%COMP%]{background-color:#e6f7ff;border:1px solid #1890ff}.contentIcon.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1890ff}.contentIcon[_ngcontent-%COMP%]:hover:not(.active){background-color:#f5f5f5}.date-red[_ngcontent-%COMP%]{color:red!important;font-weight:700}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.section_contenu_container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;flex:1;min-height:0}.section_contenu_left[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0}.section_favory_produit[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;margin-top:12px;flex:1;min-height:0}.section_favory[_ngcontent-%COMP%]{border-right:1px solid #d1d1d1;height:100vh}.section_favory[_ngcontent-%COMP%]   .ul_section_favory[_ngcontent-%COMP%]   .li_section_favory[_ngcontent-%COMP%]{background-color:#cde3fa;padding:5px 10px}.double[_ngcontent-%COMP%]   .icon_favory[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.title_favory[_ngcontent-%COMP%]{margin:0}.titre_categorie[_ngcontent-%COMP%]{padding-left:10px}.titre_categorie[_ngcontent-%COMP%]   .category-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.titre_categorie[_ngcontent-%COMP%]   .scan-controls[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.titre_categorie[_ngcontent-%COMP%]   .scan-test-btn[_ngcontent-%COMP%], .titre_categorie[_ngcontent-%COMP%]   .scan-reload-btn[_ngcontent-%COMP%], .titre_categorie[_ngcontent-%COMP%]   .scan-status-btn[_ngcontent-%COMP%], .titre_categorie[_ngcontent-%COMP%]   .scan-test-multi-btn[_ngcontent-%COMP%], .titre_categorie[_ngcontent-%COMP%]   .scan-reset-btn[_ngcontent-%COMP%]{background:#0672e4;color:#fff;border:none;padding:4px 8px;border-radius:4px;font-size:11px;cursor:pointer;display:flex;align-items:center;gap:4px;transition:background-color .2s}.titre_categorie[_ngcontent-%COMP%]   .scan-test-btn[_ngcontent-%COMP%]:hover, .titre_categorie[_ngcontent-%COMP%]   .scan-reload-btn[_ngcontent-%COMP%]:hover, .titre_categorie[_ngcontent-%COMP%]   .scan-status-btn[_ngcontent-%COMP%]:hover, .titre_categorie[_ngcontent-%COMP%]   .scan-test-multi-btn[_ngcontent-%COMP%]:hover, .titre_categorie[_ngcontent-%COMP%]   .scan-reset-btn[_ngcontent-%COMP%]:hover{background:#0556b3}.titre_categorie[_ngcontent-%COMP%]   .scan-status-btn[_ngcontent-%COMP%]{background:#28a745}.titre_categorie[_ngcontent-%COMP%]   .scan-status-btn[_ngcontent-%COMP%]:hover{background:#1e7e34}.loading-indicator[_ngcontent-%COMP%], .loading-more-indicator[_ngcontent-%COMP%], .all-loaded-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px;padding:20px;margin:20px 0;border-radius:8px;font-size:14px;font-weight:500}.loading-indicator[_ngcontent-%COMP%]{background-color:#f8f9fa;color:#6c757d;border:1px solid #dee2e6}.loading-more-indicator[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2;border:1px solid #bbdefb}.all-loaded-indicator[_ngcontent-%COMP%]{background-color:#e8f5e8;color:#2e7d32;border:1px solid #c8e6c9}.loading-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .loading-more-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .all-loaded-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;animation:_ngcontent-%COMP%_spin 1s linear infinite}.all-loaded-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{animation:none}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.titre_categorie[_ngcontent-%COMP%]   .scan-test-multi-btn[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.titre_categorie[_ngcontent-%COMP%]   .scan-test-multi-btn[_ngcontent-%COMP%]:hover{background:#e0a800}.titre_categorie[_ngcontent-%COMP%]   .scan-reset-btn[_ngcontent-%COMP%]{background:#dc3545}.titre_categorie[_ngcontent-%COMP%]   .scan-reset-btn[_ngcontent-%COMP%]:hover{background:#c82333}.titre_categorie[_ngcontent-%COMP%]   .scan-status[_ngcontent-%COMP%]{font-size:10px;color:#666;display:flex;align-items:center;gap:4px;padding:2px 6px;border-radius:3px;background:#f0f0f0}.titre_categorie[_ngcontent-%COMP%]   .scan-status.active[_ngcontent-%COMP%]{color:#28a745;background:#d4edda}.titre_categorie[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:0;font-weight:600}.ul_li_name_categorie[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:7px 10px;margin-bottom:8px;font-size:15px;cursor:pointer}.ul_li_name_categorie[_ngcontent-%COMP%]:hover{background-color:#cde3fa}.allCate[_ngcontent-%COMP%]{cursor:pointer;padding:10px 0;letter-spacing:.6px;font-weight:500}.section_produit[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(100vh - 75px);min-height:0}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:2px}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0672e433;border-radius:5px}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.li_list_produit_select[_ngcontent-%COMP%]{background-color:#f4f4f4;display:flex;align-items:center;justify-content:space-between;padding:8px 10px;margin:6px 8px;border-radius:5px}.nombre_select[_ngcontent-%COMP%], .name_produit_select[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price_produit[_ngcontent-%COMP%]{font-size:12px}.icon_close_select[_ngcontent-%COMP%]{cursor:pointer}.icon_close_select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.icon_close_select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem;padding:0 10px 10px}.product-card[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:8px;box-shadow:0 2px 5px #0000000d;overflow:hidden;display:flex;flex-direction:column;align-items:center;padding-bottom:10px}.stock-badge[_ngcontent-%COMP%]{position:absolute;top:8px;left:5px;background:#fde047;color:#333;font-size:.6rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.product-card.disabled[_ngcontent-%COMP%], .li_list.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;pointer-events:none}.stock-badge-list[_ngcontent-%COMP%]{background:#fde047;color:#333;font-size:.8rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.product-img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;margin-top:10px}.favorite-icon[_ngcontent-%COMP%]{position:absolute;top:2px;right:3px;font-size:1.2rem;color:#0672e4;cursor:pointer}.favorite-icon.ri-heart-fill[_ngcontent-%COMP%]{color:#0672e4}.favorite-icon-list[_ngcontent-%COMP%]{font-size:1.2rem;color:#0672e4;cursor:pointer}.favorite-icon-list.ri-heart-fill[_ngcontent-%COMP%]{color:#0672e4}.card-body[_ngcontent-%COMP%]{text-align:center;margin:.5rem 0;flex:1}.product-name[_ngcontent-%COMP%]{font-weight:500;margin:.25rem 0}.product-stock[_ngcontent-%COMP%]{font-size:10px;color:#666;margin:.15rem 0}.product-price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;margin:0;font-size:13px}.btn-decrement[_ngcontent-%COMP%]{border:none;background:#f3f4f6;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;pointer-events:auto!important;z-index:10}.btn-decrement[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}.bottom_price_sub[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:0 10px}.section_contenu_right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;box-shadow:#0000000a 0 3px 5px;padding-bottom:10px}.list_produit_select[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden}.list_produit_select[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.list_produit_select[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0003;border-radius:3px}.list_produit_select[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.summary_panel[_ngcontent-%COMP%]{background:#f1f5f9;padding:4px 10px;margin:0 10px}.summary_panel[_ngcontent-%COMP%]   .double_row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.25rem 0}.summary_panel[_ngcontent-%COMP%]   .double_row.total[_ngcontent-%COMP%]{font-size:1.1rem;padding-top:.5rem;border-bottom:none}.double_row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.double_row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px}.keypad[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:5px;padding:5px 10px}.keypad[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3.5rem;background:#f1f5f9;border:none;font-size:1rem;cursor:pointer;border-radius:4px}.keypad[_ngcontent-%COMP%]   button.backspace[_ngcontent-%COMP%]{font-size:1.2rem}.btn_content[_ngcontent-%COMP%]{margin:0 10px}.btn-payment[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:68px;background:#2978f2;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.name_stock_list[_ngcontent-%COMP%]{line-height:1.5;padding:10px}.product-stock-list[_ngcontent-%COMP%]{font-size:10px;color:#666}.name_stock_list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .moyen_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price_du[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .moyen_paiement_restant[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .paiement_btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}ul.ul_list[_ngcontent-%COMP%]{margin:0 10px}.li_list[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;box-shadow:#64646f10 0 7px 29px;padding:0 10px;border-radius:5px;margin-bottom:10px}.img_product_list[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;justify-content:center;margin:5px 0}.img_product_list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px;cursor:pointer;box-shadow:#0000000d 0 0 0 1px}.section_popup_paiement[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;flex:1;min-height:0;margin:30px 80px}.btn-payment-pop[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#2978f2;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.methode_paiement[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:15px;margin:20px 10px}.cadre_paiement[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;height:100px;box-shadow:#0000000d 0 6px 24px,#00000014 0 0 0 1px;padding:10px 0;cursor:pointer}.cadre_paiement[_ngcontent-%COMP%]:hover{border:.5px solid #0672e4}.img_paiement[_ngcontent-%COMP%]{width:35px;height:35px;object-fit:cover;margin:0 auto;display:flex;justify-content:center;align-items:center}.img_paiement[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.title_paiement[_ngcontent-%COMP%]{margin-top:12px}.title_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center;font-size:12px}.montant_paiement[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.double[_ngcontent-%COMP%]{display:flex;align-items:center}.cadre_section_contenu_left_prise[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;border-radius:8px;align-items:center}.section_contenu_left_prise[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.montant_paiement[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;gap:8px}.montant_paiement[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:600;margin:0}.montant_paiement[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#666}.moyen_paiement_price[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#cde3fa;gap:16px;border-radius:5px;padding:10px}.moyen_paiement[_ngcontent-%COMP%]{background:#e6f3ff;border:1px solid #C1E0FF;border-radius:8px;padding:8px 16px;text-align:center;cursor:pointer}.moyen_paiement.selected[_ngcontent-%COMP%]{background:#d0ebff;border-color:#90cdf4}.moyen_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.moyen_prise_du[_ngcontent-%COMP%]   .price_du[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;color:#333}.clear-icon[_ngcontent-%COMP%]{font-size:18px;color:#e53e3e;cursor:pointer}.discount-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;border-bottom:1px solid #ccc;padding-bottom:8px}.btn-currency[_ngcontent-%COMP%], .btn-percent[_ngcontent-%COMP%]{background:#f0f0f0;border:1px solid #b2b2b2;border-radius:4px;font-size:16px;cursor:pointer}.btn-percent[_ngcontent-%COMP%]{padding:2px 15px}.btn-currency[_ngcontent-%COMP%]{padding:5px 12px;font-size:12px!important}.input-discount[_ngcontent-%COMP%]{width:100px;border:none;outline:none;text-align:right;font-size:16px;text-align:center}.discount-unit[_ngcontent-%COMP%]{font-size:18px;color:#333}.discount-label[_ngcontent-%COMP%]{text-align:center;position:relative;top:-18px}.discount-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;font-size:10px;color:#666}.paiement_restant[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 30px}.btn_facture[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.btn_facture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.paiement_btn[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:12px;border-radius:5px}.paiement_btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}.btn_client[_ngcontent-%COMP%]{cursor:pointer}.btn_client[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.double_client_facture[_ngcontent-%COMP%]{gap:5px;display:grid;grid-template-columns:repeat(2,1fr);padding:0 10px}.double_remise_facture[_ngcontent-%COMP%]{gap:3px;display:grid;grid-template-columns:75px 1fr}.selected[_ngcontent-%COMP%]{background-color:#0672e4!important;color:#fff!important}.selected[_ngcontent-%COMP%]   .name_categorie[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{color:#fff!important}.selected_mode_pay[_ngcontent-%COMP%]{border:1px solid #2f7dd1}.keypad[_ngcontent-%COMP%]   button.btn_keypad_active[_ngcontent-%COMP%]{border:1px solid #2f7dd1;background-color:#e0efff}.cadre_paiement.selected[_ngcontent-%COMP%]{border:2px solid #4CAF50;background-color:#f0fff4}.price_du[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em}.alert-low-stock[_ngcontent-%COMP%]{color:red!important;font-weight:700}.safe-stock[_ngcontent-%COMP%]{color:green!important;font-weight:700}.barcode-shifted[_ngcontent-%COMP%]{left:11px;position:relative}.btn_client.has-selected[_ngcontent-%COMP%]{background-color:#e6f7ff;border:1px solid #91d5ff}.clear-customer[_ngcontent-%COMP%]:hover{color:#cf1322}.selected-client-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.selected-client-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-size:14px}.selected-client-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:#666}.paiement_btn[_ngcontent-%COMP%]{position:relative}.clear-customer[_ngcontent-%COMP%]{position:absolute;top:12px;right:8px;background:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;box-shadow:#0000000d 0 0 0 1px;cursor:pointer}[draggable][_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.popup-header[_ngcontent-%COMP%]{cursor:move}.discount-badge[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;padding:2px 6px 2px 0;border-radius:4px;font-size:9px;margin-left:5px}.edit-discount[_ngcontent-%COMP%]{cursor:pointer;color:#0672e4}.edit-discount[_ngcontent-%COMP%]:hover{color:#044d99}.btn-currency.active[_ngcontent-%COMP%], .btn-percent.active[_ngcontent-%COMP%]{color:#000;background-color:#cde3fa;border:1px solid #0672e4}.global-discount[_ngcontent-%COMP%]{padding:8px 0;border-bottom:1px dashed #eee}.global-discount[_ngcontent-%COMP%]   .discount-input[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.global-discount[_ngcontent-%COMP%]   .discount-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px 8px;border:1px solid #ddd;border-radius:4px;background:#f8f8f8;cursor:pointer}.global-discount[_ngcontent-%COMP%]   .discount-input[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#0672e4;color:#fff;border-color:#0672e4}.global-discount[_ngcontent-%COMP%]   .discount-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:70px;text-align:center;padding:6px;border:1px solid #ddd;border-radius:4px}.double_row.total[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding-top:8px;margin-top:8px}.global-active[_ngcontent-%COMP%]{background-color:#e6f7ff!important;border:1px solid #91d5ff!important}.scan-error-toast[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;background-color:#ffebee;color:#c62828;padding:12px 16px;border-radius:4px;display:flex;align-items:center;gap:8px;z-index:1000;box-shadow:0 2px 5px #0003}p[_ngcontent-%COMP%]{margin:0}.btn_container[_ngcontent-%COMP%]{display:grid;grid-template-columns:60px 1fr 60px;margin:10px 10px 0;gap:10px}.li_list_produit_select[_ngcontent-%COMP%]{position:relative;margin-right:25px}.icon_check[_ngcontent-%COMP%]{position:absolute;right:-20px}.icon_check[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.btn-payment[_ngcontent-%COMP%]{border:none;border-radius:4px;cursor:pointer;font-size:1rem;transition:all .3s;width:100%;height:80px;color:#fff;background-color:#0672e4}.btn-payment[_ngcontent-%COMP%]:hover{background-color:#2980b9}.btn_content[_ngcontent-%COMP%]{margin:0}.btn_delete[_ngcontent-%COMP%], .btn_retourn[_ngcontent-%COMP%]{border:none;border-radius:4px;cursor:pointer;font-size:1rem;transition:all .3s;width:100%;height:80px}.btn_delete[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.btn_retourn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:25px}.btn_delete[_ngcontent-%COMP%]{background-color:#f2acac;color:#333}.btn_retourn[_ngcontent-%COMP%]{background-color:#f4f4f4;color:#333}.section_list_commande[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(100vh - 115px);padding-right:5px}.section_list_commande[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.section_list_commande[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0672e433;border-radius:5px}.section_list_commande[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.ul_commande[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;justify-content:space-between;padding:6px 10px;margin:10px 0;box-shadow:#0000000d 0 0 0 1px;background-color:#fff}.ul_commande_active[_ngcontent-%COMP%]{background-color:#cde3fa}.commande_date[_ngcontent-%COMP%], .commande_heure[_ngcontent-%COMP%]{font-size:12px}.etat_commande[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:3px 20px;border-radius:20px}.icon_delete_commande[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .icon_favory_commande[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.icon_delete_commande[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.icon_favory_commande[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#0672e4}.toolbar[_ngcontent-%COMP%]{display:grid;grid-template-columns:45px 1fr 130px 180px;margin:10px 10px 0}.pager-info[_ngcontent-%COMP%]{margin-left:10px}.icon_search[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:45px;background-color:#f4f4f4;border:1px solid #000;border-right:none;border-radius:5px 0 0 5px}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:45px;border:1px solid #000;padding-left:10px}.btn_search_filtre[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{height:45px;width:100%;border:1px solid #000;border-left:0;border-radius:0 5px 5px 0;background-color:#f4f4f4;font-size:12px;color:#333}.btn_search_filtre[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;margin-top:1px;padding-left:5px}.loading_commande[_ngcontent-%COMP%]{padding:20px;text-align:center;color:#666}.double_commande[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.btn_search_filtre[_ngcontent-%COMP%]{position:relative}.btn_search_filtre[_ngcontent-%COMP%]   .dropdown_filter[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;width:150px;background:#fff;border:1px solid #ddd;border-radius:4px;box-shadow:0 2px 10px #0000001a;z-index:100;margin-top:5px;padding:0;list-style:none}.btn_search_filtre[_ngcontent-%COMP%]   .dropdown_filter[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 12px;cursor:pointer;transition:background .2s;font-size:14px}.btn_search_filtre[_ngcontent-%COMP%]   .dropdown_filter[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#f5f5f5}.status-paid[_ngcontent-%COMP%]{color:#28a745;font-weight:500;background-color:#28a7451a!important}.popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.popup[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:30px;border-radius:10px;text-align:center;box-shadow:0 4px 20px #00000026;max-width:400px;width:100%}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background:none;border:none;font-size:20px;cursor:pointer;color:#666}.titlh[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], .h6[_ngcontent-%COMP%]{font-size:16px;font-family:poppins,sans-serif;margin-bottom:15px;text-align:center;color:#333}.titlp[_ngcontent-%COMP%]{font-size:12px;font-family:poppins,sans-serif;margin-bottom:20px;text-align:center;color:#555}textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ddd;border-radius:4px;resize:vertical;font-size:12px;margin-bottom:15px;box-sizing:border-box}.pin-container[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px}.pin-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50px;height:50px;text-align:center;font-size:24px;border:2px solid #e0e0e0;border-radius:8px;transition:all .3s}.pin-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#0672e4;outline:none;box-shadow:0 0 5px #3477db80}button[_ngcontent-%COMP%]{border:none;cursor:pointer;font-size:1rem;transition:all .3s;background-color:#0672e4;color:#fff;border-radius:6px;font-size:16px}button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-10px)}75%{transform:translate(10px)}}.close-btn[_ngcontent-%COMP%]{position:absolute;top:15px;right:15px;background:none;border:none;font-size:24px;cursor:pointer;color:#888;padding:5px;border-radius:50%;width:36px;height:36px;display:flex;align-items:center;justify-content:center;transition:all .3s}.close-btn[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;color:#333}.close-btn[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #3498db4d}.btn-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:15px}.btn-cancel[_ngcontent-%COMP%]{border:none;border-radius:4px;cursor:pointer;font-size:1rem;transition:all .3s;background-color:#f44336;color:#fff;padding:4px 10px}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.btn-confirm[_ngcontent-%COMP%]{border:none;border-radius:4px;cursor:pointer;font-size:1rem;transition:all .3s;background-color:#0672e4;color:#fff;padding:4px 10px}.cyber-checkbox[_ngcontent-%COMP%]{--checkbox-size: 15px;--checkbox-color: #0672E4;--checkbox-check-color: #ffffff;--checkbox-hover-color: #0360c3;--checkbox-spark-offset: -20px;position:relative;display:inline-block;cursor:pointer;-webkit-user-select:none;user-select:none;margin-top:8px}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.cyber-checkbox__mark[_ngcontent-%COMP%]{position:relative;display:inline-block;width:var(--checkbox-size);height:var(--checkbox-size)}.cyber-checkbox__box[_ngcontent-%COMP%]{position:absolute;inset:0;border:1.5px solid var(--checkbox-color);border-radius:4px;background:transparent;transition:all .2s ease}.cyber-checkbox__check[_ngcontent-%COMP%]{position:absolute;inset:0;padding:2px;stroke:var(--checkbox-check-color);stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;fill:none;transform:scale(0);transition:transform .2s ease}.cyber-checkbox__effects[_ngcontent-%COMP%]{position:absolute;inset:var(--checkbox-spark-offset);pointer-events:none}.cyber-checkbox__spark[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:2px;height:2px;background:var(--checkbox-color);border-radius:50%;opacity:0;transform-origin:center center}.cyber-checkbox[_ngcontent-%COMP%]:hover   .cyber-checkbox__box[_ngcontent-%COMP%]{border-color:var(--checkbox-hover-color);box-shadow:0 0 0 2px #5c67ff1a}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .cyber-checkbox__box[_ngcontent-%COMP%]{background:var(--checkbox-color);border-color:var(--checkbox-color)}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .cyber-checkbox__check[_ngcontent-%COMP%]{transform:scale(1)}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .cyber-checkbox__spark[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spark .4s ease-out}.cyber-checkbox__spark[_ngcontent-%COMP%]:nth-child(1){transform:rotate(0) translate(var(--checkbox-spark-offset))}.cyber-checkbox__spark[_ngcontent-%COMP%]:nth-child(2){transform:rotate(90deg) translate(var(--checkbox-spark-offset))}.cyber-checkbox__spark[_ngcontent-%COMP%]:nth-child(3){transform:rotate(180deg) translate(var(--checkbox-spark-offset))}.cyber-checkbox__spark[_ngcontent-%COMP%]:nth-child(4){transform:rotate(270deg) translate(var(--checkbox-spark-offset))}@keyframes _ngcontent-%COMP%_spark{0%{opacity:0;transform:scale(0) rotate(0) translate(var(--checkbox-spark-offset))}50%{opacity:1}to{opacity:0;transform:scale(1) rotate(0) translate(calc(var(--checkbox-spark-offset) * 1.5))}}.cyber-checkbox[_ngcontent-%COMP%]:active   .cyber-checkbox__box[_ngcontent-%COMP%]{transform:scale(.9)}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + .cyber-checkbox__mark[_ngcontent-%COMP%]   .cyber-checkbox__box[_ngcontent-%COMP%]{box-shadow:0 0 0 4px #5c67ff33}.cyber-checkbox__particles[_ngcontent-%COMP%]{position:absolute;inset:-50%;pointer-events:none}.cyber-checkbox__particles[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:3px;height:3px;border-radius:50%;background:var(--checkbox-color);opacity:0}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-1 .4s ease-out forwards}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-2 .4s ease-out forwards .1s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-3[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-3 .4s ease-out forwards .15s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-4[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-4 .4s ease-out forwards .05s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-5[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-5 .4s ease-out forwards .12s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-6[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-6 .4s ease-out forwards .08s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-7[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-7 .4s ease-out forwards .18s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-8[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-8 .4s ease-out forwards .15s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:checked) + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-1[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-out-1 .4s ease-out forwards}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:checked) + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-2[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-out-2 .4s ease-out forwards .1s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:checked) + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-3[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-out-3 .4s ease-out forwards .15s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:checked) + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-4[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-out-4 .4s ease-out forwards .05s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:checked) + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-5[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-out-5 .4s ease-out forwards .12s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:checked) + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-6[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-out-6 .4s ease-out forwards .08s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:checked) + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-7[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-out-7 .4s ease-out forwards .18s}.cyber-checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:checked) + .cyber-checkbox__mark[_ngcontent-%COMP%]   .particle-8[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_particle-out-8 .4s ease-out forwards .15s}@keyframes _ngcontent-%COMP%_particle-1{0%{transform:translate(0) scale(0);opacity:0}50%{opacity:1}to{transform:translate(-20px,-20px) scale(1);opacity:0}}@keyframes _ngcontent-%COMP%_particle-2{0%{transform:translate(0) scale(0);opacity:0}50%{opacity:1}to{transform:translate(20px,-20px) scale(1);opacity:0}}@keyframes _ngcontent-%COMP%_particle-3{0%{transform:translate(0) scale(0);opacity:0}50%{opacity:1}to{transform:translate(20px,20px) scale(1);opacity:0}}@keyframes _ngcontent-%COMP%_particle-4{0%{transform:translate(0) scale(0);opacity:0}50%{opacity:1}to{transform:translate(-20px,20px) scale(1);opacity:0}}@keyframes _ngcontent-%COMP%_particle-5{0%{transform:translate(0) scale(0);opacity:0}50%{opacity:1}to{transform:translate(-30px) scale(1);opacity:0}}@keyframes _ngcontent-%COMP%_particle-6{0%{transform:translate(0) scale(0);opacity:0}50%{opacity:1}to{transform:translate(30px) scale(1);opacity:0}}@keyframes _ngcontent-%COMP%_particle-7{0%{transform:translate(0) scale(0);opacity:0}50%{opacity:1}to{transform:translateY(-30px) scale(1);opacity:0}}@keyframes _ngcontent-%COMP%_particle-8{0%{transform:translate(0) scale(0);opacity:0}50%{opacity:1}to{transform:translateY(30px) scale(1);opacity:0}}@keyframes _ngcontent-%COMP%_particle-out-1{0%{transform:translate(-20px,-20px) scale(1);opacity:0}50%{opacity:1}to{transform:translate(0) scale(0);opacity:0}}@keyframes _ngcontent-%COMP%_particle-out-2{0%{transform:translate(20px,-20px) scale(1);opacity:0}50%{opacity:1}to{transform:translate(0) scale(0);opacity:0}}@keyframes _ngcontent-%COMP%_particle-out-3{0%{transform:translate(20px,20px) scale(1);opacity:0}50%{opacity:1}to{transform:translate(0) scale(0);opacity:0}}@keyframes _ngcontent-%COMP%_particle-out-4{0%{transform:translate(-20px,20px) scale(1);opacity:0}50%{opacity:1}to{transform:translate(0) scale(0);opacity:0}}@keyframes _ngcontent-%COMP%_particle-out-5{0%{transform:translate(-30px) scale(1);opacity:0}50%{opacity:1}to{transform:translate(0) scale(0);opacity:0}}@keyframes _ngcontent-%COMP%_particle-out-6{0%{transform:translate(30px) scale(1);opacity:0}50%{opacity:1}to{transform:translate(0) scale(0);opacity:0}}@keyframes _ngcontent-%COMP%_particle-out-7{0%{transform:translateY(-30px) scale(1);opacity:0}50%{opacity:1}to{transform:translate(0) scale(0);opacity:0}}@keyframes _ngcontent-%COMP%_particle-out-8{0%{transform:translateY(30px) scale(1);opacity:0}50%{opacity:1}to{transform:translate(0) scale(0);opacity:0}}.li_list_produit_select.selected-item[_ngcontent-%COMP%]{background-color:#ff00001a;border-left:3px solid #ff0000}.double_commande[_ngcontent-%COMP%]   .nombre_select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:.7;text-decoration:line-through;margin-right:5px}.quantity-input[_ngcontent-%COMP%]{width:50px;padding:4px;border:1px solid #ddd;border-radius:4px;text-align:center}.quantity-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#0672e4}.icon_edit_quantite[_ngcontent-%COMP%]{cursor:pointer}.icon_edit_quantite[_ngcontent-%COMP%]:hover{color:#0672e4}.toast-container[_ngcontent-%COMP%]{position:fixed;top:60px;right:35px;z-index:9999}.toast-message-success[_ngcontent-%COMP%]{background-color:#d5e6de;border:1px solid #ACCEBC;color:#333;padding:10px;border-radius:8px;font-size:13px;box-shadow:0 4px 6px #0000001a;opacity:0;animation:_ngcontent-%COMP%_fadeInOut 4s ease-in-out;transform:translateY(-20px)}.toast-message-danger[_ngcontent-%COMP%]{background-color:#f3d8da;border:1px solid #E7B1B6;color:#333;padding:10px;border-radius:8px;font-size:13px;box-shadow:0 4px 6px #0000001a;opacity:0;animation:_ngcontent-%COMP%_fadeInOut 4s ease-in-out;transform:translateY(-20px)}@keyframes _ngcontent-%COMP%_fadeInOut{0%{opacity:0;transform:translateY(-20px)}20%{opacity:1;transform:translateY(0)}80%{opacity:1}to{opacity:0;transform:translateY(2px)}}.error[_ngcontent-%COMP%]{color:red;font-weight:700;margin-top:10px}.o_pager_previous[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .o_pager_next[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;padding:0 5px}.d-print-none[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid #000}.d-print-none[_ngcontent-%COMP%]   .o_pager_previous[_ngcontent-%COMP%]{border:1px solid #000;border-right:none;border-radius:5px 0 0 5px;background-color:#ddd;color:#333}.d-print-none[_ngcontent-%COMP%]   .o_pager_next[_ngcontent-%COMP%]{border:1px solid #000;border-left:1px solid #000;border-radius:0 5px 5px 0;background-color:#ddd;color:#333}.pager[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;justify-content:right}.empty-cart-message[_ngcontent-%COMP%]{padding-left:10px}']})}}return r})()},41731:(A,k,a)=>{a.d(k,{M:()=>v});var P=a(54438);let v=(()=>{class g{transform(m){return null==m||isNaN(m)?"N/A":`${m.toFixed(m%1!=0?2:0).replace(/\B(?=(\d{3})+(?!\d))/g,".")} FCFA`}static{this.\u0275fac=function(x){return new(x||g)}}static{this.\u0275pipe=P.EJ8({name:"cfaCurrency",type:g,pure:!0})}}return g})()},49293:(A,k,a)=>{a.d(k,{R:()=>z});var P=a(21626),v=a(84412),g=a(25558),f=a(18810),m=a(88141),x=a(99437),d=a(71985),C=a(22525),t=a(54438),j=a(88026);let z=(()=>{class E{constructor(u,_){this.http=u,this.usersService=_,this.apiUrl=C.c.apiBaseUrl,this.categoriesSubject=new v.t([]),this.categories$=this.categoriesSubject.asObservable()}ajouterCategorie(u){return this.usersService.getValidAccessToken().pipe((0,g.n)(_=>{if(!_)return console.error("\u26a0\ufe0f Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),(0,f.$)(()=>new Error("Aucun token valide trouv\xe9"));const O=new P.Lr({Authorization:`Bearer ${_}`});return this.http.post(`${this.apiUrl}/createCategory`,u,{headers:O}).pipe((0,m.M)(w=>{this.categoriesSubject.next([...this.categoriesSubject.value,w])}))}),(0,x.W)(_=>(console.error("Erreur lors de l'ajout de la cat\xe9gorie:",_),(0,f.$)(()=>_))))}getProduitsByCategorie(u,_=0,O=20){return this.usersService.getValidAccessToken().pipe((0,g.n)(w=>{if(!w)return console.error("\u26a0\ufe0f Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),new d.c;const S=(new P.Lr).set("Authorization",`Bearer ${w}`),$={page:_.toString(),size:O.toString()};return this.http.get(`${this.apiUrl}/categories/${u}/produits`,{headers:S,params:$})}),(0,x.W)(w=>(console.error("Erreur lors de la r\xe9cup\xe9ration des produits pagin\xe9s:",w),(0,f.$)(()=>w))))}deleteCategorie(u){return this.usersService.getValidAccessToken().pipe((0,g.n)(_=>{if(!_)return console.error("\u26a0\ufe0f Token JWT manquant pour suppression cat\xe9gorie."),(0,f.$)(()=>new Error("Token manquant"));const O=(new P.Lr).set("Authorization",`Bearer ${_}`);return console.log("\u{1f539} Token envoy\xe9 pour DELETE cat\xe9gorie :",O),this.http.delete(`${this.apiUrl}/deleteCategory/${u}`,{headers:O,responseType:"text"})}),(0,x.W)(_=>(console.error("\u274c Erreur API DELETE :",_),(0,f.$)(()=>_))))}getCategories(){return this.usersService.getValidAccessToken().pipe((0,g.n)(u=>{if(!u)return console.error("\u26a0\ufe0f Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),(0,f.$)(()=>new Error("Aucun token valide trouv\xe9"));const _=(new P.Lr).set("Authorization",`Bearer ${u}`);return this.http.get(`${this.apiUrl}/allCategory`,{headers:_}).pipe((0,m.M)(O=>{this.categoriesSubject.next(O)}))}),(0,x.W)(u=>(console.error("Erreur lors de la r\xe9cup\xe9ration des cat\xe9gories:",u),(0,f.$)(()=>u))))}getCategoriesWithCounts(){return this.usersService.getValidAccessToken().pipe((0,g.n)(u=>{if(!u)return console.error("\u26a0\ufe0f Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),(0,f.$)(()=>new Error("Aucun token valide trouv\xe9"));const _=(new P.Lr).set("Authorization",`Bearer ${u}`);return this.http.get(`${this.apiUrl}/categories/count`,{headers:_}).pipe((0,m.M)(O=>{console.log("\u{1f4ca} Compteurs de cat\xe9gories r\xe9cup\xe9r\xe9s:",O),this.categoriesSubject.next(O)}))}),(0,x.W)(u=>(console.error("Erreur lors de la r\xe9cup\xe9ration des compteurs de cat\xe9gories:",u),(0,f.$)(()=>u))))}static{this.\u0275fac=function(_){return new(_||E)(t.KVO(P.Qq),t.KVO(j.g))}}static{this.\u0275prov=t.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})()},17022:(A,k,a)=>{a.d(k,{f:()=>f});var P=a(84412),v=a(21413),g=a(54438);let f=(()=>{class m{constructor(){this.commandesMap=new Map,this.commandesIds=["001"],this.activeCommandeId=new P.t("001"),this.activeCommandeId$=this.activeCommandeId.asObservable(),this.commandesIdsSubject=new P.t(this.commandesIds),this.commandesIds$=this.commandesIdsSubject.asObservable(),this.commandeUpdated=new v.B,this.commandeUpdated$=this.commandeUpdated.asObservable(),this.commandesMap.set("001",{id:"001",cart:new Map,createdAt:new Date})}getCommandeDetails(d){return this.commandesMap.get(d)}updateCommandeTotals(d,C,t){const j=this.commandesMap.get(d);j&&(j.totalItems=C,j.totalAmount=t,this.commandesMap.set(d,j))}setActiveCommande(d){this.commandesMap.has(d)||(this.commandesMap.set(d,{id:d,cart:new Map,createdAt:new Date}),this.commandesIds.push(d)),this.activeCommandeId.next(d)}getActiveCart(){const d=this.activeCommandeId.getValue(),C=this.commandesMap.get(d);return C?C.cart:new Map}updateActiveCart(d){const C=this.activeCommandeId.getValue(),t=this.commandesMap.get(C);t&&(t.cart=new Map(d),this.commandesMap.set(C,t))}getAllCommandesIds(){return[...this.commandesIds]}addNewCommande(){const d=(this.commandesIds.length+1).toString().padStart(3,"0");return this.commandesMap.set(d,{id:d,cart:new Map,createdAt:new Date}),this.commandesIds.push(d),this.commandesIdsSubject.next([...this.commandesIds]),d}removeCommande(d){if("001"===d)return;this.commandesMap.delete(d),this.commandeUpdated.next();const C=this.commandesIds.indexOf(d);-1!==C&&this.commandesIds.splice(C,1),this.activeCommandeId.getValue()===d&&this.activeCommandeId.next(this.commandesIds[0]||"001"),this.commandesIdsSubject.next([...this.commandesIds])}getActiveCommandeId(){return this.activeCommandeId.getValue()}static{this.\u0275fac=function(C){return new(C||m)}}static{this.\u0275prov=g.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()}}]);