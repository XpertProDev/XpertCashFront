"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[8399],{8399:(E,k,l)=>{l.r(k),l.d(k,{PosVenteComponent:()=>tt});var m=l(177),u=l(9417),f=l(2525);class P{constructor(s={}){Object.assign(this,s)}}var g=l(7673),v=l(4412),M=l(6697),C=l(5558),x=l(8810),F=l(4572),b=l(9172),O=l(6354),a=l(980),p=l(850),_=l(8250),e=l(4438),j=l(9192),T=l(145),V=l(9293),I=l(7022),w=l(7746),$=l(8026),R=l(345),A=l(2120),G=l(6375),D=l(4413),S=l(7788),N=l(3);const B=()=>({standalone:!0});function X(i,s){if(1&i){const t=e.RV6();e.j41(0,"li",45),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.selectCategory(o.id))}),e.j41(1,"div",46)(2,"span"),e.EFF(3),e.k0s()(),e.j41(4,"div",47),e.EFF(5),e.k0s()()}if(2&i){const t=s.$implicit,n=e.XpG(2);e.AVh("selected",n.selectedCategoryId===t.id),e.R7$(3),e.JRh(t.nom),e.R7$(2),e.SpI(" ",t.produitCount||0," ")}}function L(i,s){if(1&i&&(e.j41(0,"ul",43),e.DNE(1,X,6,4,"li",44),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.categories)}}function Y(i,s){if(1&i&&(e.j41(0,"span",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(),e.SpI(" ",n.getSelectedQuantity(t.id)," ")}}function z(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",51),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.addToCart(o))})("pointerdown",function(o){const r=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.startPress(o,r))})("pointerup",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.endPress())})("pointerleave",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.endPress())}),e.DNE(1,Y,2,1,"span",52),e.nrm(2,"img",53),e.j41(3,"div",54)(4,"p",55),e.EFF(5),e.k0s(),e.j41(6,"p",56),e.EFF(7),e.k0s()(),e.j41(8,"div",57)(9,"div",58)(10,"p"),e.EFF(11),e.nI1(12,"currency"),e.k0s()(),e.j41(13,"button",59),e.bIt("click",function(o){const r=e.eBV(t).$implicit;return e.XpG(2).decreaseQuantity(r),e.Njj(o.stopPropagation())}),e.nrm(14,"i",60),e.k0s()()()}if(2&i){const t=s.$implicit,n=e.XpG(2);e.AVh("disabled",n.getAvailableStock(t)<=0),e.R7$(),e.Y8G("ngIf",n.getSelectedQuantity(t.id)>0),e.R7$(),e.Y8G("src",n.getProductImage(t.photo),e.B4B),e.R7$(3),e.JRh(t.nom),e.R7$(2),e.SpI("Stocks : ",n.getAvailableStock(t),""),e.R7$(4),e.JRh(e.ii3(12,7,t.prixVente,"CFA ","symbol","1.0-0"))}}function K(i,s){1&i&&(e.j41(0,"div",62),e.nrm(1,"i",63),e.EFF(2," Chargement des produits... "),e.k0s())}function q(i,s){if(1&i&&(e.j41(0,"div",48),e.DNE(1,z,15,12,"div",49)(2,K,3,0,"div",50),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.Y8G("ngForOf",t.displayedProducts),e.R7$(),e.Y8G("ngIf",!t.categories.length)}}function U(i,s){if(1&i&&(e.j41(0,"span",82),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,n=e.XpG(2);e.R7$(),e.SpI(" ",n.getSelectedQuantity(t.id)," ")}}function Q(i,s){if(1&i){const t=e.RV6();e.j41(0,"li",68),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.addToCart(o))})("pointerdown",function(o){const r=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.startPress(o,r))})("pointerup",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.endPress())})("pointerleave",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.endPress())}),e.j41(1,"div",69)(2,"div",70)(3,"div",71),e.nrm(4,"img",72),e.k0s(),e.j41(5,"div",73)(6,"p",74),e.EFF(7),e.k0s(),e.j41(8,"p",75),e.EFF(9),e.k0s()()()(),e.j41(10,"div",76)(11,"div",77)(12,"div",58)(13,"p"),e.EFF(14),e.nI1(15,"currency"),e.k0s()(),e.j41(16,"div",78),e.DNE(17,U,2,1,"span",79),e.k0s(),e.j41(18,"button",59),e.bIt("click",function(o){const r=e.eBV(t).$implicit;return e.XpG(2).decreaseQuantity(r),e.Njj(o.stopPropagation())}),e.nrm(19,"i",60),e.k0s(),e.j41(20,"div",80),e.nrm(21,"i",81),e.k0s()()()()}if(2&i){const t=s.$implicit,n=e.XpG(2);e.AVh("disabled",n.getAvailableStock(t)<=0),e.R7$(4),e.Y8G("src",n.getProductImage(t.photo),e.B4B),e.R7$(3),e.JRh(t.nom),e.R7$(2),e.SpI("Stocks : ",n.getAvailableStock(t),""),e.R7$(5),e.JRh(e.ii3(15,7,t.prixVente,"CFA ","symbol","1.0-0")),e.R7$(3),e.Y8G("ngIf",n.getSelectedQuantity(t.id)>0)}}function J(i,s){1&i&&(e.j41(0,"div",83),e.EFF(1," Aucun produit dans cette cat\xe9gorie "),e.k0s())}function W(i,s){if(1&i&&(e.j41(0,"div",64)(1,"ul",65),e.DNE(2,Q,22,12,"li",66),e.k0s(),e.DNE(3,J,2,0,"div",67),e.k0s()),2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.displayedProducts),e.R7$(),e.Y8G("ngIf",0===t.displayedProducts.length&&t.categories.length)}}function H(i,s){if(1&i){const t=e.RV6();e.j41(0,"li",84)(1,"div",70)(2,"div",85),e.EFF(3),e.k0s(),e.j41(4,"div",86)(5,"p",87),e.EFF(6),e.j41(7,"span"),e.EFF(8),e.nI1(9,"currency"),e.k0s()()()(),e.j41(10,"div",70)(11,"div",88),e.EFF(12),e.nI1(13,"currency"),e.k0s(),e.j41(14,"div",89),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.removeProduct(o.product.id))}),e.nrm(15,"i",90),e.k0s()()()}if(2&i){const t=s.$implicit;e.R7$(3),e.SpI(" ",t.quantity," "),e.R7$(3),e.SpI(" ",t.product.nom," "),e.R7$(2),e.SpI("(",e.ii3(9,4,t.product.prixVente,"CFA ","symbol","1.0-0"),")"),e.R7$(4),e.SpI(" ",e.ii3(13,9,t.quantity*t.product.prixVente,"CFA ","symbol","1.0-0")," ")}}function Z(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",91)(1,"div",92)(2,"div",93)(3,"button",94),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closePaymentPopup())}),e.nrm(4,"i",95),e.k0s()(),e.j41(5,"div",96)(6,"div",97)(7,"div",98)(8,"div",99)(9,"h1"),e.EFF(10),e.nI1(11,"currency"),e.k0s(),e.j41(12,"span"),e.EFF(13,"CFA"),e.k0s()(),e.j41(14,"div",100)(15,"div",101)(16,"p"),e.EFF(17),e.k0s()(),e.j41(18,"div",102)(19,"div",103)(20,"p"),e.EFF(21),e.nI1(22,"currency"),e.k0s(),e.j41(23,"i",104),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return o.enteredAmount="",e.Njj(o.calculatePayment())}),e.k0s()()()(),e.j41(24,"div",105)(25,"div",106)(26,"p"),e.EFF(27),e.k0s()(),e.j41(28,"div",102)(29,"div",103)(30,"p"),e.EFF(31),e.nI1(32,"currency"),e.k0s()()()(),e.j41(33,"div",107)(34,"button",108),e.EFF(35," CFA "),e.k0s(),e.nrm(36,"input",109),e.j41(37,"button",110),e.EFF(38," % "),e.k0s()(),e.j41(39,"div",111)(40,"p"),e.EFF(41,"Remise par produit"),e.k0s()()()(),e.j41(42,"div",112)(43,"div",19)(44,"div",113)(45,"div",114),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.selectPaymentMethod("Esp\xe8ces"))}),e.j41(46,"div",115),e.nrm(47,"img",116),e.k0s(),e.j41(48,"div",117)(49,"p"),e.EFF(50,"Esp\xe8ces"),e.k0s()()(),e.j41(51,"div",114),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.selectPaymentMethod("Carte"))}),e.j41(52,"div",118),e.nrm(53,"img",119),e.k0s(),e.j41(54,"div",117)(55,"p"),e.EFF(56,"Carte"),e.k0s()()(),e.j41(57,"div",114),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.selectPaymentMethod("Compte client"))}),e.j41(58,"div",120),e.nrm(59,"img",121),e.k0s(),e.j41(60,"div",117)(61,"p"),e.EFF(62,"Compte client"),e.k0s()()()()(),e.j41(63,"div",122)(64,"div",26)(65,"div",123)(66,"p"),e.EFF(67,"Client"),e.k0s()(),e.j41(68,"div",28)(69,"p"),e.EFF(70,"Facture"),e.k0s(),e.nrm(71,"input",29),e.k0s()()(),e.j41(72,"div",124)(73,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("1"))}),e.EFF(74,"1"),e.k0s(),e.j41(75,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("2"))}),e.EFF(76,"2"),e.k0s(),e.j41(77,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("3"))}),e.EFF(78,"3"),e.k0s(),e.j41(79,"button"),e.EFF(80,"Qt\xe9"),e.k0s(),e.j41(81,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("4"))}),e.EFF(82,"4"),e.k0s(),e.j41(83,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("5"))}),e.EFF(84,"5"),e.k0s(),e.j41(85,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("6"))}),e.EFF(86,"6"),e.k0s(),e.j41(87,"button"),e.EFF(88,"%"),e.k0s(),e.j41(89,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("7"))}),e.EFF(90,"7"),e.k0s(),e.j41(91,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("8"))}),e.EFF(92,"8"),e.k0s(),e.j41(93,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("9"))}),e.EFF(94,"9"),e.k0s(),e.j41(95,"button"),e.EFF(96,"Prix"),e.k0s(),e.j41(97,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("+/-"))}),e.EFF(98,"+/-"),e.k0s(),e.j41(99,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("0"))}),e.EFF(100,"0"),e.k0s(),e.j41(101,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress(","))}),e.EFF(102,","),e.k0s(),e.j41(103,"button",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.handlePaymentKeyPress("backspace"))}),e.nrm(104,"i",36),e.k0s()(),e.j41(105,"div",37)(106,"button",125),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.completePayment())}),e.EFF(107," Valider Paiement "),e.k0s()()()()()()}if(2&i){const t=e.XpG();e.R7$(10),e.JRh(e.ii3(11,16,t.totalAmount,"CFA ","symbol","1.0-0")),e.R7$(7),e.JRh(t.selectedPaymentMethod),e.R7$(4),e.JRh(e.ii3(22,21,t.paymentAmount,"CFA ","symbol","1.0-0")),e.R7$(5),e.xc7("color",t.paymentAmount>=t.totalAmount?"#008000":"#ff0000"),e.R7$(),e.SpI(" ",t.paymentAmount>=t.totalAmount?"Monnaie":"Restant"," "),e.R7$(3),e.xc7("color",t.paymentAmount>=t.totalAmount?"#008000":"#ff0000"),e.R7$(),e.SpI(" ",e.ii3(32,26,t.changeDue,"CFA ","symbol","1.0-0")," "),e.R7$(14),e.AVh("selected_mode_pay","Esp\xe8ces"===t.selectedPaymentMethod),e.R7$(6),e.AVh("selected_mode_pay","card"===t.selectedPaymentMethod),e.R7$(6),e.AVh("selected_mode_pay","account"===t.selectedPaymentMethod),e.R7$(49),e.Y8G("disabled",!t.isAmountEntered)}}function ee(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",93)(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"button",94),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.closeDetailPopup())}),e.nrm(4,"i",95),e.k0s()()}if(2&i){const t=e.XpG(2);e.R7$(2),e.SpI("Information [",t.selectedProductForDetail.codeGenerique,"]")}}function te(i,s){1&i&&(e.qex(0),e.EFF(1,"\u26a0\ufe0f"),e.bVm())}function ne(i,s){if(1&i&&(e.j41(0,"div",137)(1,"span",138),e.EFF(2,"Code barre"),e.k0s(),e.j41(3,"span",139),e.nrm(4,"ngx-barcode6",145),e.k0s()()),2&i){const t=e.XpG(3);e.R7$(4),e.Y8G("bc-value",t.selectedProductForDetail.codeBare)("bc-line-color","#000000")("bc-width",1)("bc-height",30)("bc-font-size",10)("bc-display-value",!0)}}function oe(i,s){if(1&i&&(e.j41(0,"div",132)(1,"div",133),e.nrm(2,"img",134),e.k0s(),e.j41(3,"div",135)(4,"div",136)(5,"div",137)(6,"span",138),e.EFF(7,"Nom produit"),e.k0s(),e.j41(8,"span",139),e.EFF(9),e.k0s()(),e.j41(10,"div",137)(11,"span",138),e.EFF(12,"Prix de vente"),e.k0s(),e.j41(13,"span",139),e.EFF(14),e.nI1(15,"number"),e.k0s()(),e.j41(16,"div",137)(17,"span",138),e.EFF(18,"Cat\xe9gorie"),e.k0s(),e.j41(19,"span",139),e.EFF(20),e.k0s()(),e.j41(21,"div",137)(22,"span",138),e.EFF(23,"Unit\xe9 de mesure"),e.k0s(),e.j41(24,"span",139),e.EFF(25),e.k0s()()(),e.j41(26,"div",140)(27,"div",137)(28,"span",138),e.EFF(29,"Stocks actuel"),e.k0s(),e.j41(30,"span",141),e.EFF(31),e.DNE(32,te,2,0,"ng-container",142),e.k0s()(),e.j41(33,"div",137)(34,"span",138),e.EFF(35,"Boutique"),e.k0s(),e.j41(36,"span",139),e.EFF(37),e.k0s()(),e.j41(38,"div",137)(39,"span",138),e.EFF(40,"Code"),e.k0s(),e.j41(41,"span",139),e.EFF(42),e.k0s()(),e.DNE(43,ne,5,6,"div",143),e.k0s()(),e.j41(44,"div",144)(45,"span",138),e.EFF(46,"Description:"),e.k0s(),e.nrm(47,"br"),e.EFF(48),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("src",t.selectedProductForDetail?t.getProductImage(t.selectedProductForDetail.photo):"",e.B4B),e.R7$(7),e.JRh(t.selectedProductForDetail.nom),e.R7$(5),e.SpI("",e.bMT(15,12,t.selectedProductForDetail.prixVente)," CFA"),e.R7$(6),e.JRh(t.selectedProductForDetail.nomCategorie),e.R7$(5),e.JRh(t.selectedProductForDetail.nomUnite),e.R7$(5),e.Y8G("ngClass",t.getQuantiteClass(t.selectedProductForDetail)),e.R7$(),e.SpI(" ",t.getQuantiteDansBoutiqueCourante(t.selectedProductForDetail)," "),e.R7$(),e.Y8G("ngIf",t.isQuantiteCritique(t.selectedProductForDetail)),e.R7$(5),e.JRh(t.getNomBoutiqueCourante(t.selectedProductForDetail)),e.R7$(5),e.JRh(t.selectedProductForDetail.codeGenerique),e.R7$(),e.Y8G("ngIf",t.selectedProductForDetail.codeBare),e.R7$(5),e.SpI(" ",t.selectedProductForDetail.description||"Pas de description"," ")}}function ie(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",126)(1,"div",127),e.DNE(2,ee,5,1,"div",128)(3,oe,49,14,"div",129),e.j41(4,"div",130)(5,"button",131),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return o.addToCart(o.selectedProductForDetail),e.Njj(o.closeDetailPopup())}),e.EFF(6," Ajouter au panier "),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",t.showDetailPopup&&t.selectedProductForDetail),e.R7$(),e.Y8G("ngIf",t.showDetailPopup&&t.selectedProductForDetail)}}function re(i,s){if(1&i&&e.nrm(0,"span",166),2&i){const t=e.XpG().$implicit,n=e.XpG(3);e.Y8G("innerHTML",n.highlightMatch(t.nomComplet),e.npT)}}function se(i,s){1&i&&(e.j41(0,"span",167),e.EFF(1,"Nom est vide"),e.k0s())}function ce(i,s){if(1&i&&(e.j41(0,"span",166),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,n=e.XpG(3);e.Y8G("innerHTML",n.highlightMatch(t.email),e.npT),e.R7$(),e.JRh(t.email)}}function le(i,s){1&i&&(e.j41(0,"span",167),e.EFF(1,"Non email"),e.k0s())}function pe(i,s){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.adresse)}}function ae(i,s){1&i&&(e.j41(0,"span",167),e.EFF(1,"Non adresse"),e.k0s())}function de(i,s){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.telephone)}}function ue(i,s){1&i&&(e.j41(0,"span",167),e.EFF(1,"Non num\xe9ro de t\xe9l\xe9phone"),e.k0s())}function _e(i,s){1&i&&(e.j41(0,"div",168),e.nrm(1,"i",169),e.k0s())}function me(i,s){}function ge(i,s){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,t.createdAt,"dd/MM/yyyy"))}}function fe(i,s){1&i&&(e.j41(0,"span",167),e.EFF(1,"Non date"),e.k0s())}function he(i,s){if(1&i){const t=e.RV6();e.j41(0,"tr",151),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.selectClient(o))}),e.j41(1,"td")(2,"div",161),e.nrm(3,"img",162),e.k0s()(),e.j41(4,"td"),e.DNE(5,re,1,1,"span",163)(6,se,2,0,"ng-template",null,0,e.C5r),e.k0s(),e.j41(8,"td"),e.DNE(9,ce,2,2,"span",163)(10,le,2,0,"ng-template",null,1,e.C5r),e.k0s(),e.j41(12,"td"),e.DNE(13,pe,2,1,"span",164)(14,ae,2,0,"ng-template",null,2,e.C5r),e.k0s(),e.j41(16,"td"),e.DNE(17,de,2,1,"span",164)(18,ue,2,0,"ng-template",null,3,e.C5r),e.k0s(),e.j41(20,"td"),e.DNE(21,_e,2,0,"div",165)(22,me,0,0,"ng-template",null,4,e.C5r),e.k0s(),e.j41(24,"td"),e.DNE(25,ge,3,4,"span",164)(26,fe,2,0,"ng-template",null,5,e.C5r),e.k0s()()}if(2&i){const t=s.$implicit,n=e.sdS(7),o=e.sdS(11),r=e.sdS(15),c=e.sdS(19),d=e.sdS(23),h=e.sdS(27);e.R7$(3),e.Y8G("src",t.photo,e.B4B),e.R7$(2),e.Y8G("ngIf",t.nomComplet)("ngIfElse",n),e.R7$(4),e.Y8G("ngIf",t.email)("ngIfElse",o),e.R7$(4),e.Y8G("ngIf",t.adresse)("ngIfElse",r),e.R7$(4),e.Y8G("ngIf",t.telephone)("ngIfElse",c),e.R7$(4),e.Y8G("ngIf",t.entrepriseClient)("ngIfElse",d),e.R7$(4),e.Y8G("ngIf",t.createdAt)("ngIfElse",h)}}function Pe(i,s){1&i&&(e.j41(0,"tr")(1,"td",170),e.EFF(2,"Aucun client trouv\xe9"),e.k0s()())}function Ce(i,s){if(1&i&&(e.j41(0,"table"),e.nrm(1,"thead"),e.j41(2,"tbody"),e.DNE(3,he,28,13,"tr",160)(4,Pe,3,0,"tr",142),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",t.filteredClients),e.R7$(),e.Y8G("ngIf",0===t.filteredClients.length)}}function be(i,s){if(1&i&&(e.j41(0,"span",166),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,n=e.XpG(3);e.Y8G("innerHTML",n.highlightMatch(t.nom),e.npT),e.R7$(),e.JRh(t.nom)}}function ve(i,s){1&i&&(e.j41(0,"span",167),e.EFF(1,"Nom vide"),e.k0s())}function xe(i,s){if(1&i&&(e.j41(0,"span",166),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit,n=e.XpG(3);e.Y8G("innerHTML",n.highlightMatch(t.email),e.npT),e.R7$(),e.JRh(t.email)}}function ye(i,s){1&i&&(e.j41(0,"span",167),e.EFF(1,"Non email"),e.k0s())}function ke(i,s){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.adresse)}}function Me(i,s){1&i&&(e.j41(0,"span",167),e.EFF(1,"Non adresse"),e.k0s())}function Fe(i,s){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(t.telephone)}}function Oe(i,s){1&i&&(e.j41(0,"span",167),e.EFF(1,"Non t\xe9l\xe9phone"),e.k0s())}function Ee(i,s){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.JRh(e.i5U(2,1,t.createdAt,"dd/MM/yyyy"))}}function je(i,s){1&i&&(e.j41(0,"span",167),e.EFF(1,"Non date"),e.k0s())}function Te(i,s){if(1&i){const t=e.RV6();e.j41(0,"tr",151),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.XpG(3);return e.Njj(r.selectEntreprise(o))}),e.j41(1,"td")(2,"div",161),e.nrm(3,"img",171),e.k0s()(),e.j41(4,"td"),e.DNE(5,be,2,2,"span",163)(6,ve,2,0,"ng-template",null,6,e.C5r),e.k0s(),e.j41(8,"td"),e.DNE(9,xe,2,2,"span",163)(10,ye,2,0,"ng-template",null,1,e.C5r),e.k0s(),e.j41(12,"td"),e.DNE(13,ke,2,1,"span",164)(14,Me,2,0,"ng-template",null,2,e.C5r),e.k0s(),e.j41(16,"td"),e.DNE(17,Fe,2,1,"span",164)(18,Oe,2,0,"ng-template",null,3,e.C5r),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.DNE(27,Ee,3,4,"span",164)(28,je,2,0,"ng-template",null,5,e.C5r),e.k0s()()}if(2&i){const t=s.$implicit,n=e.sdS(7),o=e.sdS(11),r=e.sdS(15),c=e.sdS(19),d=e.sdS(29);e.R7$(5),e.Y8G("ngIf",t.nom)("ngIfElse",n),e.R7$(4),e.Y8G("ngIf",t.email)("ngIfElse",o),e.R7$(4),e.Y8G("ngIf",t.adresse)("ngIfElse",r),e.R7$(4),e.Y8G("ngIf",t.telephone)("ngIfElse",c),e.R7$(4),e.JRh(t.pays||"--"),e.R7$(2),e.JRh(t.siege||"--"),e.R7$(2),e.JRh(t.secteur||"--"),e.R7$(2),e.Y8G("ngIf",t.createdAt)("ngIfElse",d)}}function Ve(i,s){if(1&i&&(e.j41(0,"table")(1,"tbody"),e.DNE(2,Te,30,13,"tr",160),e.k0s()()),2&i){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.filteredEntreprisesPopup)}}function Ie(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",146)(1,"div",147)(2,"div",93)(3,"h6",148),e.EFF(4),e.k0s(),e.j41(5,"div",149)(6,"div",150)(7,"button",151),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.openAddClient())}),e.EFF(8," Ajouter Client "),e.k0s()(),e.nrm(9,"div",152),e.j41(10,"div",153),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.setListTypePopup("clients"))}),e.nrm(11,"i",154),e.j41(12,"div",155)(13,"span"),e.EFF(14),e.k0s()()(),e.nrm(15,"div",152),e.j41(16,"div",153),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.setListTypePopup("entreprises"))}),e.nrm(17,"i",156),e.j41(18,"div",155)(19,"span"),e.EFF(20),e.k0s()()(),e.nrm(21,"div",152),e.j41(22,"div",157),e.nrm(23,"i",158),e.j41(24,"input",159),e.mxI("ngModelChange",function(o){e.eBV(t);const r=e.XpG();return e.DH7(r.searchText,o)||(r.searchText=o),e.Njj(o)}),e.k0s()(),e.j41(25,"button",94),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeListClientPopup())}),e.nrm(26,"i",95),e.k0s()()(),e.DNE(27,Ce,5,2,"table",142)(28,Ve,3,1,"table",142),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(4),e.SpI(" ","clients"===t.currentListTypePopup?"Client individuel":"Client entreprise"," "),e.R7$(6),e.AVh("active","clients"===t.currentListTypePopup),e.R7$(4),e.JRh(t.clients.length),e.R7$(2),e.AVh("active","entreprises"===t.currentListTypePopup),e.R7$(4),e.JRh(t.entreprisesPopup.length),e.R7$(4),e.R50("ngModel",t.searchText),e.R7$(3),e.Y8G("ngIf","clients"===t.currentListTypePopup),e.R7$(),e.Y8G("ngIf","entreprises"===t.currentListTypePopup)}}function we(i,s){1&i&&(e.j41(0,"small"),e.EFF(1,"Champ requis."),e.k0s())}function $e(i,s){1&i&&(e.j41(0,"small"),e.EFF(1,"Au moins 2 caract\xe8res."),e.k0s())}function Re(i,s){if(1&i&&(e.j41(0,"div",211),e.DNE(1,we,2,0,"small",142)(2,$e,2,0,"small",142),e.k0s()),2&i){let t,n;const o=e.XpG(3);e.R7$(),e.Y8G("ngIf",null==(t=o.clientForm.get("nomComplet"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==(n=o.clientForm.get("nomComplet"))||null==n.errors?null:n.errors.minlength)}}function Ae(i,s){1&i&&(e.j41(0,"small"),e.EFF(1,"Format invalide."),e.k0s())}function Ge(i,s){if(1&i&&(e.j41(0,"div",211),e.DNE(1,Ae,2,0,"small",142),e.k0s()),2&i){let t;const n=e.XpG(3);e.R7$(),e.Y8G("ngIf",null==(t=n.clientForm.get("email"))||null==t.errors?null:t.errors.email)}}function De(i,s){if(1&i&&(e.j41(0,"option",212),e.EFF(1),e.k0s()),2&i){const t=s.$implicit,n=e.XpG(3);e.Y8G("value",t),e.R7$(),e.Lme(" ",t," (",n.paysIndicatifs[t].indicatif,") ")}}function Se(i,s){1&i&&(e.j41(0,"div",211)(1,"small"),e.EFF(2,"Ce champ est requis"),e.k0s()())}function Ne(i,s){if(1&i&&(e.j41(0,"div",211)(1,"small"),e.EFF(2),e.k0s()()),2&i){const t=s.ngIf,n=e.XpG(3);e.R7$(2),e.Lme(" Le num\xe9ro doit contenir ",n.paysIndicatifs[t].longueur," chiffres apr\xe8s l\u2019indicatif ",n.paysIndicatifs[t].indicatif.trim(),". ")}}function Be(i,s){1&i&&(e.j41(0,"div",211)(1,"small"),e.EFF(2,"Le t\xe9l\xe9phone est requis."),e.k0s()())}function Xe(i,s){if(1&i&&(e.j41(0,"mat-option",212)(1,"div",215),e.EFF(2),e.k0s()()),2&i){const t=s.$implicit;e.Y8G("value",t),e.R7$(2),e.SpI(" ",t.nom," ")}}function Le(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",183),e.nrm(1,"input",213),e.j41(2,"mat-autocomplete",214,7),e.bIt("optionSelected",function(o){e.eBV(t);const r=e.XpG(3);return e.Njj(r.onEntrepriseSelected(o))}),e.DNE(4,Xe,3,2,"mat-option",197),e.nI1(5,"async"),e.k0s()()}if(2&i){const t=e.sdS(3),n=e.XpG(3);e.R7$(),e.Y8G("formControl",n.control)("matAutocomplete",t),e.R7$(),e.Y8G("displayWith",n.displayFnEntreprise),e.R7$(2),e.Y8G("ngForOf",e.bMT(5,4,n.filteredOptions))}}function Ye(i,s){if(1&i){const t=e.RV6();e.j41(0,"form",181)(1,"div",182)(2,"div",183),e.nrm(3,"input",184),e.j41(4,"label",185),e.EFF(5,"Nom et pr\xe9nom"),e.k0s(),e.DNE(6,Re,3,2,"div",186),e.k0s(),e.j41(7,"div",183),e.nrm(8,"input",187),e.j41(9,"label",188),e.EFF(10,"Email"),e.k0s(),e.DNE(11,Ge,2,1,"div",186),e.k0s()(),e.j41(12,"div",182)(13,"div",183),e.nrm(14,"input",189),e.j41(15,"label",190),e.EFF(16,"Adresse"),e.k0s()(),e.j41(17,"div",183),e.nrm(18,"input",191),e.j41(19,"label",192),e.EFF(20,"Poste"),e.k0s()()(),e.j41(21,"div",193)(22,"div",194)(23,"select",195),e.bIt("change",function(o){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onPaysChange(o))}),e.j41(24,"option",196),e.EFF(25,"Pays"),e.k0s(),e.DNE(26,De,2,3,"option",197),e.k0s(),e.j41(27,"label",198),e.EFF(28,"Pays"),e.k0s(),e.DNE(29,Se,3,0,"div",186),e.k0s(),e.j41(30,"div",199)(31,"input",200),e.bIt("input",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.formatPhoneNumber())}),e.k0s(),e.j41(32,"label",201),e.EFF(33,"T\xe9l\xe9phone"),e.k0s(),e.DNE(34,Ne,3,2,"div",186)(35,Be,3,0,"div",186),e.k0s(),e.j41(36,"div",202),e.nrm(37,"input",203),e.j41(38,"label",204),e.EFF(39,"Ville"),e.k0s()()(),e.j41(40,"div",205)(41,"h5"),e.EFF(42,"Entreprise"),e.k0s(),e.j41(43,"div",206)(44,"p"),e.EFF(45,"J'appartient \xe0 une entreprise"),e.k0s(),e.j41(46,"label",207)(47,"input",208),e.mxI("ngModelChange",function(o){e.eBV(t);const r=e.XpG(2);return e.DH7(r.isEntrepriseSelected,o)||(r.isEntrepriseSelected=o),e.Njj(o)}),e.k0s(),e.nrm(48,"span",209),e.k0s()()(),e.DNE(49,Le,6,6,"div",210),e.k0s()}if(2&i){let t,n,o,r,c;const d=e.XpG(2);e.Y8G("formGroup",d.clientForm),e.R7$(6),e.Y8G("ngIf",(null==(t=d.clientForm.get("nomComplet"))?null:t.touched)&&(null==(t=d.clientForm.get("nomComplet"))?null:t.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(n=d.clientForm.get("email"))?null:n.touched)&&(null==(n=d.clientForm.get("email"))?null:n.invalid)),e.R7$(15),e.Y8G("ngForOf",d.paysKeys),e.R7$(3),e.Y8G("ngIf",(null==(o=d.clientForm.get("pays"))?null:o.invalid)&&(null==(o=d.clientForm.get("pays"))?null:o.touched)),e.R7$(5),e.Y8G("ngIf",(null==(r=d.clientForm.get("telephone"))?null:r.touched)&&(null==(r=d.clientForm.get("telephone"))||null==r.errors?null:r.errors.pattern)&&(null==(r=d.clientForm.get("pays"))?null:r.value)),e.R7$(),e.Y8G("ngIf",(null==(c=d.clientForm.get("telephone"))?null:c.touched)&&(null==(c=d.clientForm.get("telephone"))||null==c.errors?null:c.errors.required)),e.R7$(12),e.R50("ngModel",d.isEntrepriseSelected),e.Y8G("ngModelOptions",e.lJ4(10,B)),e.R7$(2),e.Y8G("ngIf",d.isEntrepriseSelected)}}function ze(i,s){1&i&&(e.j41(0,"small"),e.EFF(1,"Champ requis."),e.k0s())}function Ke(i,s){1&i&&(e.j41(0,"small"),e.EFF(1,"Au moins 2 caract\xe8res."),e.k0s())}function qe(i,s){if(1&i&&(e.j41(0,"div",211),e.DNE(1,ze,2,0,"small",142)(2,Ke,2,0,"small",142),e.k0s()),2&i){let t,n;const o=e.XpG(3);e.R7$(),e.Y8G("ngIf",null==(t=o.entrepriseForm.get("nom"))||null==t.errors?null:t.errors.required),e.R7$(),e.Y8G("ngIf",null==(n=o.entrepriseForm.get("nom"))||null==n.errors?null:n.errors.minlength)}}function Ue(i,s){1&i&&(e.j41(0,"small"),e.EFF(1,"Format invalide."),e.k0s())}function Qe(i,s){if(1&i&&(e.j41(0,"div",211),e.DNE(1,Ue,2,0,"small",142),e.k0s()),2&i){let t;const n=e.XpG(3);e.R7$(),e.Y8G("ngIf",null==(t=n.entrepriseForm.get("email"))||null==t.errors?null:t.errors.email)}}function Je(i,s){if(1&i&&(e.j41(0,"option",212),e.EFF(1),e.k0s()),2&i){const t=s.$implicit,n=e.XpG(3);e.Y8G("value",t),e.R7$(),e.Lme(" ",t," (",n.paysIndicatifs[t].indicatif,") ")}}function We(i,s){if(1&i&&(e.j41(0,"div",211)(1,"small"),e.EFF(2),e.k0s()()),2&i){const t=s.ngIf,n=e.XpG(3);e.R7$(2),e.Lme(" Le num\xe9ro doit contenir ",n.paysIndicatifs[t].longueur," chiffres apr\xe8s l'indicatif ",n.paysIndicatifs[t].indicatif.trim(),". ")}}function He(i,s){1&i&&(e.j41(0,"div",211)(1,"small"),e.EFF(2,"Le t\xe9l\xe9phone est requis."),e.k0s()())}function Ze(i,s){if(1&i){const t=e.RV6();e.j41(0,"form",181)(1,"div",182)(2,"div",183),e.nrm(3,"input",216),e.j41(4,"label",217),e.EFF(5,"Nom d'entreprise"),e.k0s(),e.DNE(6,qe,3,2,"div",186),e.k0s(),e.j41(7,"div",183),e.nrm(8,"input",187),e.j41(9,"label",188),e.EFF(10,"Email"),e.k0s(),e.DNE(11,Qe,2,1,"div",186),e.k0s()(),e.j41(12,"div",182)(13,"div",183),e.nrm(14,"input",189),e.j41(15,"label",190),e.EFF(16,"Adresse"),e.k0s()(),e.j41(17,"div",183),e.nrm(18,"input",218),e.j41(19,"label",219),e.EFF(20,"Si\xe8ge"),e.k0s()()(),e.j41(21,"div",193)(22,"div",194)(23,"select",195),e.bIt("change",function(o){e.eBV(t);const r=e.XpG(2);return e.Njj(r.onEntreprisePaysChange(o))}),e.j41(24,"option",196),e.EFF(25,"Pays"),e.k0s(),e.DNE(26,Je,2,3,"option",197),e.k0s(),e.j41(27,"label",198),e.EFF(28,"Pays"),e.k0s()(),e.j41(29,"div",199)(30,"input",200),e.bIt("input",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.formatEntreprisePhoneNumber())}),e.k0s(),e.j41(31,"label",201),e.EFF(32,"T\xe9l\xe9phone"),e.k0s(),e.DNE(33,We,3,2,"div",186)(34,He,3,0,"div",186),e.k0s(),e.j41(35,"div",202),e.nrm(36,"input",220),e.j41(37,"label",221),e.EFF(38,"Secteur"),e.k0s()()()()}if(2&i){let t,n,o,r;const c=e.XpG(2);e.Y8G("formGroup",c.entrepriseForm),e.R7$(6),e.Y8G("ngIf",(null==(t=c.entrepriseForm.get("nom"))?null:t.touched)&&(null==(t=c.entrepriseForm.get("nom"))?null:t.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(n=c.entrepriseForm.get("email"))?null:n.touched)&&(null==(n=c.entrepriseForm.get("email"))?null:n.invalid)),e.R7$(15),e.Y8G("ngForOf",c.paysKeys),e.R7$(7),e.Y8G("ngIf",(null==(o=c.entrepriseForm.get("telephone"))?null:o.touched)&&(null==(o=c.entrepriseForm.get("telephone"))||null==o.errors?null:o.errors.pattern)&&(null==(o=c.entrepriseForm.get("pays"))?null:o.value)),e.R7$(),e.Y8G("ngIf",(null==(r=c.entrepriseForm.get("telephone"))?null:r.touched)&&(null==(r=c.entrepriseForm.get("telephone"))||null==r.errors?null:r.errors.required))}}function et(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",172)(1,"div",173)(2,"div",93)(3,"h3"),e.EFF(4,"Ajouter un nouveau client"),e.k0s(),e.j41(5,"button",94),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeAddClientPopup())}),e.nrm(6,"i",95),e.k0s()(),e.j41(7,"div",132)(8,"div",174)(9,"div",175)(10,"label"),e.EFF(11,"Type de client"),e.k0s(),e.j41(12,"div",176)(13,"button",177),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.setClientType("individuel"))}),e.EFF(14," Individuel "),e.k0s(),e.j41(15,"button",177),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.setClientType("entreprise"))}),e.EFF(16," Entreprise "),e.k0s()()(),e.DNE(17,Ye,50,11,"form",178)(18,Ze,39,6,"form",178),e.k0s()(),e.j41(19,"div",130)(20,"button",179),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeAddClientPopup())}),e.EFF(21,"Annuler"),e.k0s(),e.j41(22,"button",180),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj("individuel"===o.clientType?o.ajouterClientDansPopup():o.ajouterEntrepriseDansPopup())}),e.EFF(23," Enregistrer "),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(13),e.AVh("active","individuel"===t.clientType),e.R7$(2),e.AVh("active","entreprise"===t.clientType),e.R7$(2),e.Y8G("ngIf","individuel"===t.clientType),e.R7$(),e.Y8G("ngIf","entreprise"===t.clientType),e.R7$(4),e.xc7("background-color",("individuel"===t.clientType?t.clientForm.valid:t.entrepriseForm.valid)?"#0672E4":"#0671e434")("color",("individuel"===t.clientType?t.clientForm.valid:t.entrepriseForm.valid)?"#ffffff":"#00000073")("cursor",("individuel"===t.clientType?t.clientForm.valid:t.entrepriseForm.valid)?"pointer":"no-drop"),e.Y8G("disabled","individuel"===t.clientType?t.clientForm.invalid:t.entrepriseForm.invalid)}}let tt=(()=>{class i{constructor(t,n,o,r,c,d,h,y,nt,ot,it,rt){this.router=t,this.viewState=n,this.categorieService=o,this.commandeState=r,this.clientService=c,this.usersService=d,this.sanitizer=h,this.fb=y,this.entrepriseService=nt,this.produitService=ot,this.venteService=it,this.boutiqueState=rt,this.isListView=!0,this.showDropdown=!1,this.showPaymentPopup=!1,this.categories=[],this.selectedCategoryId=null,this.displayedProducts=[],this.currentQuantityInput="",this.selectedProduct=null,this.quantityMode=!0,this.showStockWarning=!1,this.cart=new Map,this.totalAmount=0,this.selectedPaymentMethod="Esp\xe8ces",this.enteredAmount="",this.paymentAmount=0,this.changeDue=0,this.isAmountEntered=!1,this.longPressTimer=null,this.selectedProductForDetail=null,this.showDetailPopup=!1,this.showClientPopup=!1,this.lastTap=0,this.tapDelay=300,this.allProducts=[],this.clientType="individuel",this.entrepriseIndicatif="",this.entrepriseMaxPhoneLength=0,this.clients=[],this.searchText="",this.sortField="nomComplet",this.sortDirection="asc",this.currentListTypePopup="clients",this.entreprisesPopup=[],this.isEntrepriseSelected=!1,this.showAddClientPopup=!1,this.paysIndicatifs={Mali:{indicatif:"+223",longueur:8},S\u00e9n\u00e9gal:{indicatif:"+221",longueur:9},"C\xf4te d'Ivoire":{indicatif:"+225",longueur:10},"Burkina Faso":{indicatif:"+226",longueur:8},Niger:{indicatif:"+227",longueur:8},France:{indicatif:"+33",longueur:9},Belgique:{indicatif:"+32",longueur:9},Suisse:{indicatif:"+41",longueur:9},Canada:{indicatif:"+1",longueur:10},"\xc9tats-Unis":{indicatif:"+1",longueur:10},Maroc:{indicatif:"+212",longueur:9},Alg\u00e9rie:{indicatif:"+213",longueur:9},Tunisie:{indicatif:"+216",longueur:8},Togo:{indicatif:"+228",longueur:8},B\u00e9nin:{indicatif:"+229",longueur:8},Guin\u00e9e:{indicatif:"+224",longueur:9},Tchad:{indicatif:"+235",longueur:8},Cameroun:{indicatif:"+237",longueur:9},RDC:{indicatif:"+243",longueur:9},Gabon:{indicatif:"+241",longueur:9},"Afrique du Sud":{indicatif:"+27",longueur:9},Rwanda:{indicatif:"+250",longueur:9},Kenya:{indicatif:"+254",longueur:9},Nig\u00e9ria:{indicatif:"+234",longueur:10},Ghana:{indicatif:"+233",longueur:9},\u00c9thiopie:{indicatif:"+251",longueur:9},\u00c9gypte:{indicatif:"+20",longueur:10},Inde:{indicatif:"+91",longueur:10},Chine:{indicatif:"+86",longueur:11},Mexique:{indicatif:"+52",longueur:10},Allemagne:{indicatif:"+49",longueur:10},Espagne:{indicatif:"+34",longueur:9},Italie:{indicatif:"+39",longueur:10},"Royaume-Uni":{indicatif:"+44",longueur:10},"Pays-Bas":{indicatif:"+31",longueur:9},Portugal:{indicatif:"+351",longueur:9}},this.paysKeys=Object.keys(this.paysIndicatifs),this.indicatif="",this.maxPhoneLength=0,this.control=new u.MJ,this.filteredOptions=(0,g.of)([]),this.optionsEntreprise$=new v.t([]),this.currentListType="clients",this.selectedBoutiqueId=null,this.isSubmittingVente=!1,this.venteErrorMessage=null,this.commandeState.activeCommandeId$.subscribe(()=>{this.loadActiveCart()}),this.initClientForm(),this.initForms()}initForms(){this.initClientForm(),this.initEntrepriseForm()}initClientForm(){this.clientForm=this.fb.group({nomComplet:["",[u.k0.required,u.k0.minLength(2)]],email:["",[u.k0.email]],telephone:["",u.k0.required],adresse:[""],poste:[""],pays:[""],ville:[""]})}initEntrepriseForm(){this.entrepriseForm=this.fb.group({nom:["",[u.k0.required,u.k0.minLength(2)]],adresse:[""],email:["",[u.k0.email]],telephone:["",u.k0.required],pays:[""],siege:[""],secteur:[""]})}ngOnInit(){const t=localStorage.getItem("viewPreference");this.isListView=!t||"list"===t,this.loadActiveCart(),this.viewState.isListView$.subscribe(n=>{this.isListView=n}),this.categories.length||this.loadCategories(),this.boutiqueState.selectedBoutique$.pipe((0,M.s)(1)).subscribe(n=>{this.selectedBoutiqueId=n}),this.boutiqueState.selectedBoutique$.subscribe(n=>this.selectedBoutiqueId=n)}loadActiveCart(){this.cart=new Map(this.commandeState.getActiveCart())}saveActiveCart(){this.commandeState.updateActiveCart(this.cart)}loadCategories(){this.categorieService.getCategories().subscribe({next:t=>{this.categories=t,this.allProducts=[],this.categories.forEach(n=>{n.produits&&this.allProducts.push(...n.produits)}),this.showAllProducts()},error:t=>{console.error("Erreur lors du chargement des cat\xe9gories",t)}})}showAllProducts(){this.selectedCategoryId=null,this.displayedProducts=[],this.categories.forEach(t=>{t.produits&&(this.displayedProducts=[...this.displayedProducts,...t.produits])})}selectCategory(t){if(void 0===t)return;this.selectedCategoryId=t;const n=this.categories.find(o=>o.id===t);this.displayedProducts=n&&n.produits?n.produits:[]}getProductImage(t){return t&&""!==t?t.startsWith("http")?t:t.startsWith("/uploads")?f.c.imgUrl.replace("/api","")+t:t:"assets/img/default-product.png"}openPaymentPopup(){this.showPaymentPopup=!0,this.totalAmount=this.getTotalCart(),this.enteredAmount="",this.paymentAmount=0,this.changeDue=0,this.isAmountEntered=!1,this.selectedPaymentMethod="Esp\xe8ces"}handlePaymentKeyPress(t){switch(t){case"backspace":this.enteredAmount=this.enteredAmount.slice(0,-1);break;case",":this.enteredAmount.includes(",")||(this.enteredAmount+=",");break;case"+/-":break;default:this.enteredAmount.length<10&&(this.enteredAmount+=t)}this.calculatePayment()}calculatePayment(){const t=parseFloat(this.enteredAmount.replace(",","."))||0;this.paymentAmount=t,this.isAmountEntered=t>0,this.changeDue=Math.abs(this.totalAmount-this.paymentAmount)}selectPaymentMethod(t){this.selectedPaymentMethod=t}completePayment(){console.log("Paiement compl\xe9t\xe9:",{method:this.selectedPaymentMethod,amount:this.paymentAmount,change:this.changeDue}),this.submitVente(),this.closePaymentPopup(),this.cart.clear(),this.saveActiveCart()}closePaymentPopup(){this.showPaymentPopup=!1}addToCart(t){if(this.getAvailableStock(t)<=0)return;this.currentQuantityInput="";const n=this.cart.get(t.id)||0;this.cart.set(t.id,n+1),this.selectedProduct=t,this.saveActiveCart(),this.updateCommandeTotals()}decreaseQuantity(t){const n=this.cart.get(t.id)||0;if(n>0){const o=n-1;this.cart.set(t.id,o),this.selectedProduct?.id===t.id&&(this.currentQuantityInput=o>0?o.toString():"")}this.saveActiveCart(),this.updateCommandeTotals()}getSelectedQuantity(t){return this.cart.get(t)||0}removeProduct(t){this.cart.delete(t),this.saveActiveCart(),this.selectedProduct?.id===t&&(this.currentQuantityInput=""),this.updateCommandeTotals()}updateCommandeTotals(){const t=this.getTotalItems(),n=this.getTotalCart(),o=this.commandeState.getActiveCommandeId();this.commandeState.updateCommandeTotals(o,t,n)}getTotalItems(){let t=0;return this.cart.forEach(n=>t+=n),t}getCartItems(){const t=[];for(const[n,o]of this.cart.entries())if(o>0){const r=this.allProducts.find(c=>c.id===n);r&&t.push({product:r,quantity:o})}return t}getAvailableStock(t){const n=this.getSelectedQuantity(t.id);return t.quantite-n}getTotalCart(){let t=0;return this.cart.forEach((n,o)=>{const r=this.allProducts.find(c=>c.id===o);r&&(t+=n*r.prixVente)}),t}handleKeyPress(t){if(this.selectedProduct&&this.quantityMode){switch(t){case"backspace":this.currentQuantityInput=this.currentQuantityInput.slice(0,-1);break;case"+/-":break;default:this.currentQuantityInput.length<5&&(this.currentQuantityInput+=t)}this.applyQuantityToProduct()}}applyQuantityToProduct(){if(!this.selectedProduct||""===this.currentQuantityInput)return;const t=parseInt(this.currentQuantityInput,10);if(isNaN(t))return;const n=this.selectedProduct.quantite;t>0&&t<=n?this.cart.set(this.selectedProduct.id,t):(this.cart.set(this.selectedProduct.id,n),this.currentQuantityInput=n.toString(),this.showStockWarning=!0,setTimeout(()=>this.showStockWarning=!1,3e3)),this.saveActiveCart()}startPress(t,n){this.getAvailableStock(n)<=0||(this.longPressTimer=setTimeout(()=>{this.produitService.getProduitById(n.id).subscribe({next:o=>{const r=new P({...o,categorieId:o.categorieId??0,seuilAlert:o.seuilAlert??0,nomCategorie:o.nomCategorie??"",nomUnite:o.nomUnite??"",typeProduit:o.typeProduit??"",createdAt:o.createdAt??"",lastUpdated:o.lastUpdated??"",datePreemption:o.datePreemption??null,boutiqueId:o.boutiqueId??null,description:o.description??"",codeBare:o.codeBare??"",codeGenerique:o.codeGenerique??""});this.selectedProductForDetail=r,this.showDetailPopup=!0},error:o=>{console.error("Erreur lors de la r\xe9cup\xe9ration du produit :",o)}}),this.longPressTimer=null},500))}getNomBoutiqueCourante(t){return t.boutiques?.find(o=>o.id===t.boutiqueId)?.nom||"Boutique inconnue"}isQuantiteCritique(t){const n=this.getQuantiteDansBoutiqueCourante(t);return null==t.seuilAlert||0===t.seuilAlert||n<=t.seuilAlert}getQuantiteClass(t){return this.isQuantiteCritique(t)?"alert-low-stock":"safe-stock"}getQuantiteDansBoutiqueCourante(t){return t.boutiques?.find(o=>o.id===t.boutiqueId)?.quantite??0}endPress(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)}goTopaiement(){this.router.navigate(["/pos-accueil/paiement"])}closeDetailPopup(){this.showDetailPopup=!1,this.selectedProductForDetail=null}loadClients(){this.usersService.getValidAccessToken().pipe((0,C.n)(t=>t?this.clientService.getListClients():(0,x.$)(()=>new Error("Aucun token trouv\xe9")))).subscribe({next:t=>{this.clients=t.map(n=>({...n,photo:n.photo?`${f.c.imgUrl}${n.photo}`:"assets/img/profil.png",entrepriseClient:n.entrepriseClient?{id:n.entrepriseClient.id}:null})).sort((n,o)=>{const r=n.createdAt?new Date(n.createdAt).getTime():0;return(o.createdAt?new Date(o.createdAt).getTime():0)-r})},error:t=>{console.error("Erreur r\xe9cup\xe9ration clients :",t)}})}closeListClientPopup(){this.showClientPopup=!1}highlightMatch(t){if(!t)return"";if(!this.searchText.trim())return t;const n=this.searchText.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),o=new RegExp(`(${n})`,"gi");return this.sanitizer.bypassSecurityTrustHtml(t.replace(o,"<mark>$1</mark>"))}get filteredClients(){let t=this.clients;if(this.searchText.trim()){const n=this.searchText.toLowerCase().trim();t=t.filter(o=>o.nomComplet?.toLowerCase().includes(n)||o.email?.toLowerCase().includes(n)||o.adresse?.toLowerCase().includes(n)||o.telephone?.includes(n))}return t.sort((n,o)=>{const r=n.createdAt?new Date(n.createdAt).getTime():0;return(o.createdAt?new Date(o.createdAt).getTime():0)-r})}sort(t){this.sortField===t?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortField=t,this.sortDirection="asc"),this.clients.sort((n,o)=>{const r="asc"===this.sortDirection?1:-1,c=n[t]?.toString().toLowerCase()??"",d=o[t]?.toString().toLowerCase()??"";return c.localeCompare(d)*r})}selectClient(t){console.log("Client s\xe9lectionn\xe9:",t),this.closeListClientPopup()}onPaysChange(t){const o=this.paysIndicatifs[t.target.value];if(!o)return;this.indicatif=o.indicatif,this.maxPhoneLength=o.longueur;const r=this.clientForm.get("telephone");let c=r?.value??"";const d=this.indicatif.replace(/\D/g,""),h=c.replace(/\D/g,"");if(h.startsWith(d)){const y=h.slice(d.length,d.length+this.maxPhoneLength);r?.setValue(this.indicatif+y)}else r?.setValue(this.indicatif);this.updatePhoneValidator(o.longueur)}updatePhoneValidator(t){const n=this.clientForm.get("telephone"),o=new RegExp(`^\\${this.indicatif}\\s?\\d{${t}}$`);n?.setValidators([u.k0.required,u.k0.pattern(o)]),n?.updateValueAndValidity()}formatPhoneNumber(){let t=this.clientForm.get("telephone")?.value;if(!t.startsWith(this.indicatif))return void this.clientForm.get("telephone")?.setValue(this.indicatif);const n=t.replace(this.indicatif,"").replace(/\D/g,""),o=this.indicatif+n;this.clientForm.get("telephone")?.setValue(o.slice(0,this.indicatif.length+this.maxPhoneLength))}loadEntreprises(){this.usersService.getValidAccessToken().pipe((0,C.n)(t=>t?this.entrepriseService.getListEntreprise():(console.error("Aucun token valide trouv\xe9 !"),(0,x.$)(()=>new Error("Aucun token trouv\xe9"))))).subscribe({next:t=>{this.optionsEntreprise$.next(t),this.setupAutocomplete()},error:t=>{console.error("Erreur lors de la r\xe9cup\xe9ration des entreprises :",t)}})}setupAutocomplete(){this.filteredOptions=(0,F.z)([this.control.valueChanges.pipe((0,b.Z)(""),(0,O.T)(t=>"string"==typeof t?t:t?.nom)),this.optionsEntreprise$]).pipe((0,O.T)(([t,n])=>t?this._filter(t,n):n))}_filter(t,n){const o=t.toLowerCase();return n.filter(r=>r.nom.toLowerCase().includes(o))}displayFnEntreprise(t){return t?t.nom:""}onEntrepriseSelected(t){}openAddClient(){this.showAddClientPopup=!0,this.loadEntreprises()}closeAddClientPopup(){this.showAddClientPopup=!1,this.clientForm.reset()}ajouterClientDansPopup(){if(this.clientForm.invalid)return;const t=this.clientForm.value;if(this.isEntrepriseSelected){const n=this.control.value;n&&n.id&&(t.entrepriseClient={id:n.id})}this.clientService.addClient(t).subscribe({next:n=>{const o={...t,id:n.id,createdAt:new Date};this.closeAddClientPopup(),this.clients=[o,...this.clients],this.currentListTypePopup="clients",this.searchText=""},error:n=>{console.error("Erreur lors de l'ajout du client:",n)}})}setClientType(t){this.clientType=t}onEntreprisePaysChange(t){const o=this.paysIndicatifs[t.target.value];if(!o)return;this.entrepriseIndicatif=o.indicatif,this.entrepriseMaxPhoneLength=o.longueur;const r=this.entrepriseForm.get("telephone");let c=r?.value??"";const d=this.entrepriseIndicatif.replace(/\D/g,""),h=c.replace(/\D/g,"");if(h.startsWith(d)){const y=h.slice(d.length,d.length+this.entrepriseMaxPhoneLength);r?.setValue(this.entrepriseIndicatif+y)}else r?.setValue(this.entrepriseIndicatif);this.updateEntreprisePhoneValidator(o.longueur)}updateEntreprisePhoneValidator(t){const n=this.entrepriseForm.get("telephone"),o=new RegExp(`^\\${this.entrepriseIndicatif}\\s?\\d{${t}}$`);n?.setValidators([u.k0.required,u.k0.pattern(o)]),n?.updateValueAndValidity()}formatEntreprisePhoneNumber(){let t=this.entrepriseForm.get("telephone")?.value;if(!t.startsWith(this.entrepriseIndicatif))return void this.entrepriseForm.get("telephone")?.setValue(this.entrepriseIndicatif);const n=t.replace(this.entrepriseIndicatif,"").replace(/\D/g,""),o=this.entrepriseIndicatif+n;this.entrepriseForm.get("telephone")?.setValue(o.slice(0,this.entrepriseIndicatif.length+this.entrepriseMaxPhoneLength))}ajouterEntrepriseDansPopup(){this.entrepriseForm.invalid||this.entrepriseService.addEntreprise(this.entrepriseForm.value).subscribe({next:n=>{this.closeAddClientPopup(),this.entreprisesPopup=[n,...this.entreprisesPopup],this.currentListTypePopup="entreprises",this.searchText=""},error:n=>{console.error("Erreur lors de l'ajout de l'entreprise:",n)}})}loadEntreprisesForPopup(){this.usersService.getValidAccessToken().pipe((0,C.n)(t=>t?this.entrepriseService.getListEntreprises():(console.error("Aucun token valide trouv\xe9 !"),(0,x.$)(()=>new Error("Aucun token trouv\xe9"))))).subscribe({next:t=>{this.entreprisesPopup=t.sort((n,o)=>{const r=n.createdAt?new Date(n.createdAt).getTime():0;return(o.createdAt?new Date(o.createdAt).getTime():0)-r})},error:t=>{console.error("Erreur r\xe9cup\xe9ration entreprises :",t)}})}setListTypePopup(t){this.currentListTypePopup=t,this.searchText=""}get filteredEntreprisesPopup(){let t=this.entreprisesPopup;if(this.searchText.trim()){const n=this.searchText.toLowerCase().trim();t=t.filter(o=>o.nom?.toLowerCase().includes(n)||o.email?.toLowerCase().includes(n)||o.adresse?.toLowerCase().includes(n)||o.telephone?.includes(n))}return t.sort((n,o)=>{const r=n.createdAt?new Date(n.createdAt).getTime():0;return(o.createdAt?new Date(o.createdAt).getTime():0)-r})}openListClientPopup(){this.showClientPopup=!0,this.loadClients(),this.loadEntreprisesForPopup()}selectEntreprise(t){console.log("Entreprise s\xe9lectionn\xe9e:",t),this.closeListClientPopup()}handleKeyboardEvent(t){this.showPaymentPopup?this.handlePaymentKeyPressPhysical(t):this.handleKeyPressPhysical(t)}handleKeyPressPhysical(t){if(this.showDetailPopup||this.showClientPopup||this.showAddClientPopup)return;const n=t.key;switch(n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.handleKeyPress(n);break;case",":case".":this.handleKeyPress(",");break;case"Backspace":this.handleKeyPress("backspace");break;case"-":case"+":this.handleKeyPress("+/-")}}handlePaymentKeyPressPhysical(t){const n=t.key;switch(n){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.handlePaymentKeyPress(n);break;case",":case".":this.handlePaymentKeyPress(",");break;case"Backspace":this.handlePaymentKeyPress("backspace");break;case"-":case"+":this.handlePaymentKeyPress("+/-");break;case"Enter":this.isAmountEntered&&this.completePayment()}}buildVenteRequestFromCart(){if(!this.selectedBoutiqueId)return this.venteErrorMessage="Aucune boutique s\xe9lectionn\xe9e.",null;const t={};if(this.cart.forEach((r,c)=>{r>0&&(t[String(c)]=r)}),0===Object.keys(t).length)return this.venteErrorMessage="Le panier est vide.",null;const n=this.mapPaymentMethodToEnum(this.selectedPaymentMethod);return{boutiqueId:this.selectedBoutiqueId,produitsQuantites:t,description:"Vente POS",nomClient:void 0,telClient:void 0,modePaiement:n??void 0}}submitVente(){this.venteErrorMessage=null;const t=this.buildVenteRequestFromCart();t&&(console.log("\u2192 Envoi de la requ\xeate vente:",t),console.log("selectedBoutiqueId=",this.selectedBoutiqueId,"cart=",Array.from(this.cart.entries())),this.isSubmittingVente=!0,this.venteService.enregistrerVente(t).pipe((0,a.j)(()=>this.isSubmittingVente=!1)).subscribe({next:n=>{console.log("Vente enregistr\xe9e",n),this.cart.clear(),this.saveActiveCart(),this.updateCommandeTotals(),this.router.navigate(["/pos-accueil/paiement"],{state:{vente:n,paymentAmount:this.paymentAmount,changeDue:this.changeDue,paymentMethod:this.selectedPaymentMethod}}),this.showPaymentPopup=!1},error:n=>{console.error("Erreur enregistrement vente (subscribe) :",n);const o=n?.original??n;let r=null;o?.error&&(r=o.error.error||o.error.message||o.message),this.venteErrorMessage=r||n?.message||"Erreur inconnue lors de l'enregistrement de la vente",alert("Erreur : "+this.venteErrorMessage)}}))}mapPaymentMethodToEnum(t){if(!t)return null;const n=t.trim().toLowerCase();return"esp\xe8ces"===n||"esp\xe8ces "===n||"especes"===n||"especes"===n||"esp\xe8ces"===n?"ESPECES":"carte"===n||"card"===n?"CARTE":"mobile money"===n||"mobile_money"===n||n.includes("mobile")?"MOBILE_MONEY":"ch\xe8que"===n||"cheque"===n||"cheque"===n?"CHEQUE":(n.includes("compte")||n.includes("client")||n.includes("compte client"),"AUTRE")}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(j.Ix),e.rXU(T.C),e.rXU(V.R),e.rXU(I.f),e.rXU(w.X),e.rXU($.g),e.rXU(R.up),e.rXU(u.ok),e.rXU(A.r),e.rXU(G.D),e.rXU(D.W),e.rXU(S.j))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-pos-vente"]],hostBindings:function(n,o){1&n&&e.bIt("keydown",function(c){return o.handleKeyboardEvent(c)},!1,e.EBC)},decls:76,vars:16,consts:[["noNomComplet",""],["noEmail",""],["noAdresse",""],["noPhone",""],["noEntreprise",""],["noDate",""],["noNom",""],["auto","matAutocomplete"],[1,"section_contenu_container"],[1,"section_contenu_left"],[1,"section_favory_produit"],[1,"section_favory"],[1,"titre_categorie"],[1,"allCate",3,"click"],["class","ul_name_categorie",4,"ngIf"],[1,"section_produit"],["class","cadre_produit product-grid",4,"ngIf"],["class","cadre_produit_list product-list",4,"ngIf"],[1,"section_contenu_right",2,"background-color","#ffffff","height","100vh","box-shadow","rgba(0, 0, 0, 0.04) 0px 3px 5px"],[1,"list_produit_select"],[1,"ul_list_produit_select"],["class","li_list_produit_select",4,"ngFor","ngForOf"],[1,"summary_panel"],[1,"double_row"],[1,"double_row","total"],[1,"client_facture",2,"padding-top","5px"],[1,"double_client_facture"],[1,"paiement_btn","btn_client",3,"click"],[1,"paiement_btn","btn_facture"],["type","checkbox"],[1,"keypad"],["tabindex","-1",3,"click"],["tabindex","-1",1,"btn_keypad_action","btn_keypad_active"],[1,"btn_keypad_action"],["tabindex","-1",1,"btn_keypad_action"],["tabindex","-1",1,"backspace",3,"click"],[1,"ri-delete-back-2-line"],[1,"btn_content"],[1,"btn-payment",3,"click"],["class","payment-popup-overlay",4,"ngIf"],["class","detail-popup-overlay",4,"ngIf"],["class","list-client-popup-overlay",4,"ngIf"],["class","add-client-popup-overlay",4,"ngIf"],[1,"ul_name_categorie"],["class","ul_li_name_categorie",3,"selected","click",4,"ngFor","ngForOf"],[1,"ul_li_name_categorie",3,"click"],[1,"name_categorie"],[1,"nombre"],[1,"cadre_produit","product-grid"],["class","product-card",3,"disabled","click","pointerdown","pointerup","pointerleave",4,"ngFor","ngForOf"],["class","loading-indicator",4,"ngIf"],[1,"product-card",3,"click","pointerdown","pointerup","pointerleave"],["class","stock-badge",4,"ngIf"],["alt","",1,"product-img",3,"src"],[1,"card-body"],[1,"product-name"],[1,"product-stock"],[1,"bottom_price_sub"],[1,"product-price"],[1,"btn-decrement",3,"click"],[1,"ri-subtract-line"],[1,"stock-badge"],[1,"loading-indicator"],[1,"ri-loader-4-line"],[1,"cadre_produit_list","product-list"],[1,"ul_list"],["class","li_list",3,"disabled","click","pointerdown","pointerup","pointerleave",4,"ngFor","ngForOf"],["class","empty-category",4,"ngIf"],[1,"li_list",3,"click","pointerdown","pointerup","pointerleave"],[1,"list_left"],[1,"double"],[1,"img_product_list"],["alt","",3,"src"],[1,"name_stock_list"],[1,"product-name-list"],[1,"product-stock-list"],[1,"list_right"],[1,"double",2,"gap","15px"],[1,"btn_badge"],["class","stock-badge-list",4,"ngIf"],[1,"btn_fovory"],[1,"ri-heart-line","favorite-icon-list"],[1,"stock-badge-list"],[1,"empty-category"],[1,"li_list_produit_select"],[1,"nombre_select"],[1,"name_produit_select"],[2,"margin","0"],[1,"price_produit"],[1,"icon_close_select",3,"click"],[1,"ri-close-circle-fill"],[1,"payment-popup-overlay"],[1,"payment-popup"],[1,"popup-header"],[1,"close-btn",3,"click"],[1,"ri-close-line"],[1,"section_popup_paiement"],[1,"cadre_section_contenu_left_prise"],[1,"section_contenu_left_prise"],[1,"montant_paiement"],[1,"moyen_paiement_price"],[1,"moyen_paiement"],[1,"moyen_prise_du"],[1,"price_du"],[1,"ri-close-line","clear-icon",3,"click"],[1,"paiement_restant"],[1,"moyen_paiement_restant"],[1,"discount-input"],[1,"btn-currency"],["type","text","placeholder","0",1,"input-discount"],[1,"btn-percent"],[1,"discount-label"],[1,"section_contenu_right",2,"background-color","#ffffff","height","80vh","box-shadow","rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"],[1,"methode_paiement"],[1,"cadre_paiement",3,"click"],[1,"img_paiement"],["src","assets/img/payer.png","alt",""],[1,"title_paiement"],[1,"img_paiement","img_paiement_carte"],["src","assets/img/carte-de-credit.png","alt",""],[1,"img_paiement","img_paiement_compte"],["src","assets/img/compte-rendu.png","alt",""],[1,"client_facture"],[1,"paiement_btn","btn_client"],[1,"keypad",2,"padding-top","5px"],[1,"btn-payment-pop",3,"click","disabled"],[1,"detail-popup-overlay"],[1,"detail-popup"],["class","popup-header",4,"ngIf"],["class","popup-body",4,"ngIf"],[1,"popup-actions"],[1,"btn-add",3,"click"],[1,"popup-body"],[1,"detail-image"],["alt","Image produit",3,"src"],[1,"detail-info"],[1,"detail_info_left"],[1,"info-row"],[1,"label"],[1,"value"],[1,"detail_info_right"],[1,"value",3,"ngClass"],[4,"ngIf"],["class","info-row",4,"ngIf"],[1,"detail-description"],["bc-format","CODE128",1,"barcode-shifted",3,"bc-value","bc-line-color","bc-width","bc-height","bc-font-size","bc-display-value"],[1,"list-client-popup-overlay"],[1,"list-client-popup"],[1,"title",2,"margin-bottom","0","font-size","16px","letter-spacing","0.65px"],[1,"double",2,"gap","10px"],[1,"btnAddClient"],[3,"click"],[1,"barre"],[1,"contentIcon",3,"click"],[1,"ri-folder-user-line"],[1,"nombreCount"],[1,"ri-building-line"],[1,"inputSearch"],[1,"ri-search-2-line"],["type","text","placeholder","Recherche un client",3,"ngModelChange","ngModel"],[3,"click",4,"ngFor","ngForOf"],[1,"imgClient"],["alt","Photo client",3,"src"],[3,"innerHTML",4,"ngIf","ngIfElse"],[4,"ngIf","ngIfElse"],["class","iconEntrepriseList",4,"ngIf","ngIfElse"],[3,"innerHTML"],[1,"no-phone-text"],[1,"iconEntrepriseList"],["title","Affiliation d'Entreprise",1,"ri-git-branch-fill"],["colspan","7",1,"no-client-message"],["src","assets/img/office_building.png","alt","Logo entreprise"],[1,"add-client-popup-overlay"],[1,"add-client-popup"],[1,"add-client-form"],[1,"form-group"],[1,"client-type-selector"],["type","button",1,"client-type-btn",3,"click"],["class","add-client-form",3,"formGroup",4,"ngIf"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click","disabled"],[1,"add-client-form",3,"formGroup"],[1,"double_input"],[1,"champ_input"],["type","text","id","nomComplet","formControlName","nomComplet","name","nomComplet","placeholder","Saisis le nom et pr\xe9nom",1,"input_focus"],["for","nomComplet",1,"label"],["class","error",4,"ngIf"],["type","email","id","email","formControlName","email","name","email","placeholder","Saisis l'email",1,"input_focus"],["for","email",1,"label"],["id","adresse","formControlName","adresse","name","adresse","placeholder","Saisis l'adresse",1,"input_focus"],["for","adresse",1,"label"],["id","poste","formControlName","poste","name","poste","placeholder","Saisissez votre poste ",1,"input_focus"],["for","poste",1,"label"],[1,"grid_colonne"],[1,"champ_input","div1"],["formControlName","pays",1,"input_focus",3,"change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","pays",1,"label"],[1,"champ_input","div2"],["type","tel","id","telephone","formControlName","telephone","name","telephone","placeholder","Saisis le num\xe9ro de t\xe9l\xe9phone",1,"input_focus",3,"input"],["for","telephone",1,"label"],[1,"champ_input","div3"],["id","ville","formControlName","ville","name","ville","placeholder","Saisis la ville",1,"input_focus"],["for","ville",1,"label"],[1,"info_titre_input",2,"margin-top","20px"],[1,"champ_input_inventaire"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel","ngModelOptions"],[1,"slider","round"],["class","champ_input",4,"ngIf"],[1,"error"],[3,"value"],["type","text","placeholder","Selectionner une entreprise",1,"input_focus","input_cursor",3,"formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[1,"option-content"],["type","text","id","nom","formControlName","nom","name","nom","placeholder","Saisis le nom d'entreprise",1,"input_focus"],["for","nom",1,"label"],["id","siege","formControlName","siege","name","siege","placeholder","Saisis le si\xe8ge",1,"input_focus"],["for","siege",1,"label"],["id","secteur","formControlName","secteur","name","secteur","placeholder","Saisis le secteur",1,"input_focus"],["for","secteur",1,"label"]],template:function(n,o){1&n&&(e.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"p",13),e.bIt("click",function(){return o.showAllProducts()}),e.EFF(6," Toutes les cat\xe9gories"),e.k0s()(),e.DNE(7,L,2,1,"ul",14),e.k0s(),e.j41(8,"div",15),e.DNE(9,q,3,2,"div",16)(10,W,4,2,"div",17),e.k0s()()(),e.j41(11,"div",18)(12,"div",19)(13,"ul",20),e.DNE(14,H,16,14,"li",21),e.k0s()(),e.j41(15,"div",22)(16,"div",23)(17,"span"),e.EFF(18,"Taxes"),e.k0s(),e.j41(19,"span"),e.EFF(20,"00 CFA"),e.k0s()(),e.j41(21,"div",24)(22,"strong"),e.EFF(23,"Total"),e.k0s(),e.j41(24,"strong"),e.EFF(25),e.nI1(26,"currency"),e.k0s()()(),e.j41(27,"div",25)(28,"div",26)(29,"div",27),e.bIt("click",function(){return o.openListClientPopup()}),e.j41(30,"p"),e.EFF(31,"Client"),e.k0s()(),e.j41(32,"div",28)(33,"p"),e.EFF(34,"Facture"),e.k0s(),e.nrm(35,"input",29),e.k0s()()(),e.j41(36,"div",30)(37,"button",31),e.bIt("click",function(){return o.handleKeyPress("1")}),e.EFF(38,"1"),e.k0s(),e.j41(39,"button",31),e.bIt("click",function(){return o.handleKeyPress("2")}),e.EFF(40,"2"),e.k0s(),e.j41(41,"button",31),e.bIt("click",function(){return o.handleKeyPress("3")}),e.EFF(42,"3"),e.k0s(),e.j41(43,"button",32),e.EFF(44,"Qt\xe9"),e.k0s(),e.j41(45,"button",31),e.bIt("click",function(){return o.handleKeyPress("4")}),e.EFF(46,"4"),e.k0s(),e.j41(47,"button",31),e.bIt("click",function(){return o.handleKeyPress("5")}),e.EFF(48,"5"),e.k0s(),e.j41(49,"button",31),e.bIt("click",function(){return o.handleKeyPress("6")}),e.EFF(50,"6"),e.k0s(),e.j41(51,"button",33),e.EFF(52,"%"),e.k0s(),e.j41(53,"button",31),e.bIt("click",function(){return o.handleKeyPress("7")}),e.EFF(54,"7"),e.k0s(),e.j41(55,"button",31),e.bIt("click",function(){return o.handleKeyPress("8")}),e.EFF(56,"8"),e.k0s(),e.j41(57,"button",31),e.bIt("click",function(){return o.handleKeyPress("9")}),e.EFF(58,"9"),e.k0s(),e.j41(59,"button",34),e.EFF(60,"Prix"),e.k0s(),e.j41(61,"button",31),e.bIt("click",function(){return o.handleKeyPress("+/-")}),e.EFF(62,"+/-"),e.k0s(),e.j41(63,"button",31),e.bIt("click",function(){return o.handleKeyPress("0")}),e.EFF(64,"0"),e.k0s(),e.j41(65,"button",31),e.bIt("click",function(){return o.handleKeyPress(",")}),e.EFF(66,","),e.k0s(),e.j41(67,"button",35),e.bIt("click",function(){return o.handleKeyPress("backspace")}),e.nrm(68,"i",36),e.k0s()(),e.j41(69,"div",37)(70,"button",38),e.bIt("click",function(){return o.openPaymentPopup()}),e.EFF(71,"Paiement"),e.k0s()()()(),e.DNE(72,Z,108,31,"div",39)(73,ie,7,2,"div",40)(74,Ie,29,10,"div",41)(75,et,24,13,"div",42)),2&n&&(e.R7$(4),e.AVh("selected",null===o.selectedCategoryId),e.R7$(3),e.Y8G("ngIf",o.categories.length),e.R7$(2),e.Y8G("ngIf",o.isListView),e.R7$(),e.Y8G("ngIf",!o.isListView),e.R7$(4),e.Y8G("ngForOf",o.getCartItems()),e.R7$(11),e.JRh(e.ii3(26,11,o.getTotalCart(),"CFA ","symbol","1.0-0")),e.R7$(47),e.Y8G("ngIf",o.showPaymentPopup),e.R7$(),e.Y8G("ngIf",o.showDetailPopup),e.R7$(),e.Y8G("ngIf",o.showClientPopup),e.R7$(),e.Y8G("ngIf",o.showAddClientPopup))},dependencies:[u.YN,u.qT,u.xH,u.y7,u.me,u.Zm,u.wz,u.BC,u.cb,u.vS,m.MD,m.YU,m.Sq,m.bT,m.Jj,m.QX,m.oe,m.vh,u.X1,u.l_,u.j4,u.JD,p.jL,p.$3,N.wT,p.pN,_.c,_.N],styles:['@charset "UTF-8";.payment-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1000}.payment-popup[_ngcontent-%COMP%]{background-color:#fff;width:85%;height:90vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden;position:relative}.payment-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer;transition:color .2s}.payment-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.list-client-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1000}.list-client-popup[_ngcontent-%COMP%]{background-color:#fff;width:90%;height:90vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden;position:relative}.list-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.list-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer;transition:color .2s}.list-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.detail-popup-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:flex-start;padding:2rem 0;z-index:1000}.detail-image[_ngcontent-%COMP%]{height:100px;width:100px}.detail-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;border-radius:4px}.detail-popup[_ngcontent-%COMP%]{background:#fff;width:90%;max-width:900px;border-radius:8px;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 5px 15px #0000004d}.detail-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #e5e5e5}.detail-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px}.detail-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]{padding:1.5rem}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .shop-name[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:16px;font-weight:500}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:1.5rem;margin-bottom:1.5rem}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 250px 1fr;row-gap:.75rem;column-gap:4rem;margin-top:15px;margin-bottom:15px}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;line-height:25px}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#555}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#222}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-description[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:1rem 0;border-top:1px solid #e5e5e5}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-description[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#555}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-description[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-style:italic;color:#333}.detail-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#f8f9fa;text-align:right}.detail-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{background:#0672e4;border:none;color:#fff;padding:.6rem 1.2rem;border-radius:4px;cursor:pointer;transition:background .2s}.detail-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover{background:#45a049}.btn-payment-pop[_ngcontent-%COMP%]:disabled{background-color:#f4f4f4;cursor:not-allowed;color:#acacac}.btnAddClient[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.btnAddClient[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:#0672e4;padding:8px 20px;border-radius:5px;color:#fff;font-size:12px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}tr[_ngcontent-%COMP%]{font-size:13px}td[_ngcontent-%COMP%]{padding:18px 15px;border-bottom:1px solid rgba(221,221,221,.5803921569)}th[_ngcontent-%COMP%]{background-color:#f2f2f2;border-bottom:1px solid rgba(221,221,221,.5803921569);padding:12px 8px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.imgClient[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;box-shadow:0 4px 6px #0000001a;cursor:pointer}.imgClient[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:80%;border-radius:50%;object-fit:cover;transition:transform .2s}.imgClient[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.no-client-message[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#888}.inputSearch[_ngcontent-%COMP%]{position:relative;width:250px;height:35px;display:flex;align-items:center}.inputSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding-left:10px;border-radius:5px;border:1px solid #000;font-size:13px}.inputSearch[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:15px;font-size:17px}.add-client-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1001}.add-client-popup[_ngcontent-%COMP%]{position:relative;background-color:#fff;width:700px;height:83vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;padding:15px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0003;border-radius:3px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:10px 15px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;font-size:13px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#0672e4;box-shadow:0 0 0 .2rem #0672e440}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:80px;resize:vertical}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .client-type-selector[_ngcontent-%COMP%]{display:flex}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .client-type-selector[_ngcontent-%COMP%]   .client-type-btn[_ngcontent-%COMP%]{flex:1;padding:8px;background:#f1f1f1;border:none;border-radius:4px;cursor:pointer;transition:all .2s}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .client-type-selector[_ngcontent-%COMP%]   .client-type-btn.active[_ngcontent-%COMP%]{background:#0672e4;color:#fff}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   .photo-placeholder[_ngcontent-%COMP%]{height:100px;border:1px dashed #ced4da;border-radius:4px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   .photo-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px;color:#6c757d}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   .photo-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#6c757d}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:15px 20px;background-color:#f8f9fa;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;box-shadow:0 -2px 5px #0000001a}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;padding:8px 16px;border:none;border-radius:4px;font-size:14px;cursor:pointer}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{padding:8px 30px;border:none;border-radius:5px;background-color:red;color:#fff}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d70404}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background-color:#0672e4;color:#fff}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#055cb9}.double_input[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:10px}.grid_colonne[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:20px}.champ_input[_ngcontent-%COMP%]{position:relative;margin-bottom:10px}.input_focus[_ngcontent-%COMP%]{width:100%;height:49px;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:14px;background:none;color:#695c5c}.champ_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:4px;pointer-events:none;color:#6b6666}.input_focus[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.input_focus[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:5px;left:0;transition:all .3s ease-in-out;background:none;font-size:11px;padding:0}.input_focus[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:12px;transition:all .2s ease-in-out}.champ_input_inventaire[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.champ_input_inventaire[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:24px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#0672e4}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.input_cursor[_ngcontent-%COMP%]{cursor:pointer}.client-type-selector[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px}.client-type-selector[_ngcontent-%COMP%]   .client-type-btn[_ngcontent-%COMP%]{flex:1;padding:10px;background:#f1f1f1;border:none;border-radius:4px;cursor:pointer;transition:all .2s;text-align:center}.client-type-selector[_ngcontent-%COMP%]   .client-type-btn.active[_ngcontent-%COMP%]{background:#0672e4;color:#fff}.nombreCount[_ngcontent-%COMP%]{border-radius:50%;position:absolute;top:-15px;background-color:#ddd;width:18px;height:18px;display:flex;align-items:center;justify-content:center;right:-9px}.nombreCount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;border-radius:50%;font-size:9px}.barre[_ngcontent-%COMP%]{height:25px;width:1px;background-color:#0000003f;margin:8px 10px}.contentIcon[_ngcontent-%COMP%]{position:relative;cursor:pointer;transition:all .3s ease;padding:0 5px;border-radius:4px;display:flex;align-items:center;justify-content:center}.contentIcon.active[_ngcontent-%COMP%]{background-color:#e6f7ff;border:1px solid #1890ff}.contentIcon.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1890ff}.contentIcon[_ngcontent-%COMP%]:hover:not(.active){background-color:#f5f5f5}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.section_contenu_container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 380px;flex:1;min-height:0}.section_contenu_left[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0}.section_favory_produit[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;margin-top:12px;flex:1;min-height:0}.section_favory[_ngcontent-%COMP%]{border-right:1px solid #d1d1d1;height:100vh}.section_favory[_ngcontent-%COMP%]   .ul_section_favory[_ngcontent-%COMP%]   .li_section_favory[_ngcontent-%COMP%]{background-color:#cde3fa;padding:5px 10px}.double[_ngcontent-%COMP%]   .icon_favory[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.title_favory[_ngcontent-%COMP%]{margin:0}.titre_categorie[_ngcontent-%COMP%]{padding-left:10px}.titre_categorie[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:10px;font-weight:600}.ul_li_name_categorie[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:7px 10px;margin-bottom:8px;font-size:15px;cursor:pointer}.ul_li_name_categorie[_ngcontent-%COMP%]:hover{background-color:#cde3fa}.allCate[_ngcontent-%COMP%]{cursor:pointer;padding:10px 0;letter-spacing:.6px;font-weight:500}.section_produit[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(100vh - 75px);min-height:0}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:2px}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0672e433;border-radius:5px}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.li_list_produit_select[_ngcontent-%COMP%]{background-color:#f4f4f4;display:flex;align-items:center;justify-content:space-between;padding:8px 10px;margin:6px 8px;border-radius:5px}.nombre_select[_ngcontent-%COMP%], .name_produit_select[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price_produit[_ngcontent-%COMP%]{font-size:12px}.icon_close_select[_ngcontent-%COMP%]{cursor:pointer}.icon_close_select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.icon_close_select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem;padding:0 10px 10px}.product-card[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:8px;box-shadow:0 2px 5px #0000000d;overflow:hidden;display:flex;flex-direction:column;align-items:center;padding-bottom:10px}.stock-badge[_ngcontent-%COMP%]{position:absolute;top:8px;left:5px;background:#fde047;color:#333;font-size:.8rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.product-card.disabled[_ngcontent-%COMP%], .li_list.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;pointer-events:none}.stock-badge-list[_ngcontent-%COMP%]{background:#fde047;color:#333;font-size:.8rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.product-img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;margin-top:10px;box-shadow:#0000001a 0 1px 2px}.favorite-icon[_ngcontent-%COMP%]{position:absolute;top:2px;right:3px;font-size:1.2rem;color:#0672e4;cursor:pointer}.favorite-icon.ri-heart-fill[_ngcontent-%COMP%]{color:#0672e4}.favorite-icon-list[_ngcontent-%COMP%]{font-size:1.2rem;color:#0672e4;cursor:pointer}.favorite-icon-list.ri-heart-fill[_ngcontent-%COMP%]{color:#0672e4}.card-body[_ngcontent-%COMP%]{text-align:center;margin:.5rem 0;flex:1}.product-name[_ngcontent-%COMP%]{font-weight:500;margin:.25rem 0}.product-stock[_ngcontent-%COMP%]{font-size:10px;color:#666;margin:.15rem 0}.product-price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;margin:0;font-size:13px}.btn-decrement[_ngcontent-%COMP%]{border:none;background:#f3f4f6;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;pointer-events:auto!important;z-index:10}.btn-decrement[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}.bottom_price_sub[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:0 10px}.section_contenu_right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;box-shadow:#0000000a 0 3px 5px;padding-bottom:10px}.list_produit_select[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.summary_panel[_ngcontent-%COMP%]{background:#f1f5f9;padding:4px 10px;margin:0 10px}.summary_panel[_ngcontent-%COMP%]   .double_row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.25rem 0;border-bottom:1px solid #e2e8f0}.summary_panel[_ngcontent-%COMP%]   .double_row.total[_ngcontent-%COMP%]{font-size:1.1rem;padding-top:.5rem;border-bottom:none}.double_row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.double_row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px}.keypad[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:5px;padding:5px 10px}.keypad[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3.5rem;background:#f1f5f9;border:none;font-size:1rem;cursor:pointer;border-radius:4px}.keypad[_ngcontent-%COMP%]   button.backspace[_ngcontent-%COMP%]{font-size:1.2rem}.btn_content[_ngcontent-%COMP%]{margin:0 10px}.btn-payment[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:68px;background:#2978f2;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.name_stock_list[_ngcontent-%COMP%]{line-height:1.5;padding:10px}.product-stock-list[_ngcontent-%COMP%]{font-size:10px;color:#666}.name_stock_list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .moyen_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price_du[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .moyen_paiement_restant[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .paiement_btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}ul.ul_list[_ngcontent-%COMP%]{margin:0 10px}.li_list[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;box-shadow:#64646f10 0 7px 29px;padding:0 10px;border-radius:5px;margin-bottom:10px}.img_product_list[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;justify-content:center;margin:5px 0}.img_product_list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px;cursor:pointer;box-shadow:#0000000d 0 0 0 1px}.section_popup_paiement[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;flex:1;min-height:0;margin:30px 80px}.btn-payment-pop[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#2978f2;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.methode_paiement[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:15px;margin:20px 10px}.cadre_paiement[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;height:135px;box-shadow:#0000000d 0 6px 24px,#00000014 0 0 0 1px;padding:10px 0;cursor:pointer}.cadre_paiement[_ngcontent-%COMP%]:hover{border:.5px solid #0672e4}.img_paiement[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;margin:0 auto;display:flex;justify-content:center;align-items:center}.img_paiement[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.title_paiement[_ngcontent-%COMP%]{margin-top:22px}.title_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center}.montant_paiement[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.double[_ngcontent-%COMP%]{display:flex;align-items:center}.cadre_section_contenu_left_prise[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;border-radius:8px;align-items:center}.section_contenu_left_prise[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.montant_paiement[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;gap:8px}.montant_paiement[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:600;margin:0}.montant_paiement[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#666}.moyen_paiement_price[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#cde3fa;gap:16px;border-radius:5px;padding:10px}.moyen_paiement[_ngcontent-%COMP%]{background:#e6f3ff;border:1px solid #C1E0FF;border-radius:8px;padding:8px 16px;text-align:center;cursor:pointer}.moyen_paiement.selected[_ngcontent-%COMP%]{background:#d0ebff;border-color:#90cdf4}.moyen_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.moyen_prise_du[_ngcontent-%COMP%]   .price_du[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;color:#333}.clear-icon[_ngcontent-%COMP%]{font-size:18px;color:#e53e3e;cursor:pointer}.discount-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;border-bottom:1px solid #ccc;padding-bottom:8px}.btn-currency[_ngcontent-%COMP%], .btn-percent[_ngcontent-%COMP%]{background:#f0f0f0;border:none;border-radius:4px;font-size:16px;cursor:pointer}.btn-currency[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px!important}.btn-percent[_ngcontent-%COMP%]{padding:3px 15px;background-color:#cde3fa;border:1px solid #0672e4}.input-discount[_ngcontent-%COMP%]{width:100px;border:none;outline:none;text-align:right;font-size:16px;text-align:center}.discount-unit[_ngcontent-%COMP%]{font-size:18px;color:#333}.discount-label[_ngcontent-%COMP%]{text-align:center;position:relative;top:-18px}.discount-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;font-size:10px;color:#666}.paiement_restant[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 30px}.btn_facture[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.btn_facture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.paiement_btn[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:12px;border-radius:5px}.paiement_btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}.btn_client[_ngcontent-%COMP%]{cursor:pointer}.btn_client[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.double_client_facture[_ngcontent-%COMP%]{gap:5px;display:grid;grid-template-columns:repeat(2,1fr);padding:0 10px}.selected[_ngcontent-%COMP%]{background-color:#0672e4!important;color:#fff!important}.selected[_ngcontent-%COMP%]   .name_categorie[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{color:#fff!important}.selected_mode_pay[_ngcontent-%COMP%]{border:1px solid #2f7dd1}.keypad[_ngcontent-%COMP%]   button.btn_keypad_active[_ngcontent-%COMP%]{border:1px solid #2f7dd1;background-color:#e0efff}.cadre_paiement.selected[_ngcontent-%COMP%]{border:2px solid #4CAF50;background-color:#f0fff4}.price_du[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em}.alert-low-stock[_ngcontent-%COMP%]{color:red!important;font-weight:700}.safe-stock[_ngcontent-%COMP%]{color:green!important;font-weight:700}.barcode-shifted[_ngcontent-%COMP%]{left:11px;position:relative}']})}}return i})()},2120:(E,k,l)=>{l.d(k,{r:()=>F});var m=l(1626),u=l(4412),f=l(5558),P=l(9437),g=l(8810),v=l(8141),M=l(2525),C=l(4438),x=l(8026);let F=(()=>{class b{constructor(a,p){this.http=a,this.usersService=p,this.apiUrl=M.c.apiBaseUrl,this.entrepriseSubject=new u.t([]),this.entreprise$=this.entrepriseSubject.asObservable()}getListEntreprises(){return this.usersService.getValidAccessToken().pipe((0,f.n)(a=>{const p=new m.Lr({Authorization:`Bearer ${a}`,"Content-Type":"application/json"});return this.http.get(`${this.apiUrl}/entreprises`,{headers:p})}),(0,P.W)(a=>{let p="Erreur inconnue";return a.error instanceof ErrorEvent?p=`Erreur: ${a.error.message}`:404===a.status&&(p="Aucune entreprise trouv\xe9e"),(0,g.$)(()=>new Error(p))}))}addEntreprise(a){return this.usersService.getValidAccessToken().pipe((0,f.n)(p=>{const _=new m.Lr({Authorization:`Bearer ${p}`,"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/entreprise-clients`,a,{headers:_})}),(0,v.M)(p=>{this.entrepriseSubject.next([...this.entrepriseSubject.value,p])}),(0,P.W)(p=>{let _="Erreur inconnue";return p.error instanceof ErrorEvent?_=`Erreur: ${p.error.message}`:400===p.status&&(_=p.error||"Donn\xe9es invalides"),(0,g.$)(()=>new Error(_))}))}getListEntreprise(){return this.usersService.getValidAccessToken().pipe((0,f.n)(a=>{if(!a)return console.error("Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),(0,g.$)(()=>new Error("Token manquant"));const p=(new m.Lr).set("Authorization",`Bearer ${a}`);return console.log("En-t\xeates envoy\xe9s : ",p),this.http.get(`${this.apiUrl}/entreprises`,{headers:p})}),(0,v.M)(a=>{this.entrepriseSubject.next(a)}),(0,P.W)(a=>(console.error("Erreur lors de la r\xe9cup\xe9ration des entreprises:",a),(0,g.$)(()=>a))))}getEntrepriseById(a){return this.usersService.getValidAccessToken().pipe((0,f.n)(p=>{if(!p)return console.error("Token manquant"),(0,g.$)(()=>new Error("Token manquant"));const _=new m.Lr({Authorization:`Bearer ${p}`,"Content-Type":"application/json"});return this.http.get(`${this.apiUrl}/entreprises/${a}`,{headers:_})}),(0,P.W)(p=>{let _="Erreur inconnue";return p.error instanceof ErrorEvent?_=`Erreur: ${p.error.message}`:404===p.status&&(_="Entreprise non trouv\xe9e"),(0,g.$)(()=>new Error(_))}))}updateEntreprise(a,p){return this.usersService.getValidAccessToken().pipe((0,f.n)(_=>{if(!_)return(0,g.$)(()=>new Error("Token manquant"));const e=new m.Lr({Authorization:`Bearer ${_}`});return this.http.patch(`${this.apiUrl}/updateEntreprise/${a}`,p,{headers:e,responseType:"text"})}),(0,P.W)(_=>{let e="Erreur inconnue";return _.error instanceof ErrorEvent?e=`Erreur: ${_.error.message}`:400===_.status&&(e=_.error||"Donn\xe9es invalides"),(0,g.$)(()=>new Error(e))}))}getEntrepriseInfo(){return this.usersService.getValidAccessToken().pipe((0,f.n)(a=>{if(!a)return(0,g.$)(()=>new Error("Aucun token trouv\xe9"));const p=new m.Lr({Authorization:`Bearer ${a}`});return this.http.get(`${this.apiUrl}/myEntreprise`,{headers:p}).pipe((0,v.M)(_=>{localStorage.setItem("entreprise",JSON.stringify(_))}))}),(0,P.W)(a=>(console.error("Erreur r\xe9cup\xe9ration info entreprise:",a),(0,g.$)(()=>a))))}decodeJwt(a){return JSON.parse(atob(a.split(".")[1]))}isTokenExpired(a){return new Date(1e3*a.exp)<new Date}getNewTokenFromApi(){const a=localStorage.getItem("refreshToken");return this.http.post(`${this.apiUrl}/refresh-token`,{refreshToken:a})}static{this.\u0275fac=function(p){return new(p||b)(C.KVO(m.Qq),C.KVO(x.g))}}static{this.\u0275prov=C.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})()}}]);