{"version":3,"file":"src_app_admin-page_facture_facture_component_ts.js","mappings":"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","sources":["./src/app/admin-page/SERVICES/facture.service.ts","./src/app/admin-page/facture/facture.component.ts","./src/app/admin-page/facture/facture.component.html"],"sourcesContent":["import { HttpClient, HttpErrorResponse, HttpHeaders } from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\nimport { Facture } from \"../MODELS/facture.model\";\nimport { catchError, map, Observable, of, switchMap, throwError } from \"rxjs\";\nimport { environment } from \"src/environments/environment\";\nimport { UsersService } from \"./users.service\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FactureService {\n private apiUrl = environment.apiBaseUrl;\n  private boutiques: any[] = []; // Ajouter la propriété boutiques\n\n  constructor(private http: HttpClient, private usersService: UsersService) { }\n\n getFactures(): Observable<Facture[]> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      const headers = new HttpHeaders({\n        Authorization: `Bearer ${token}`\n      });\n      return this.http.get<Facture[]>(`${this.apiUrl}/factures`, { headers });\n    }),\n    catchError(error => {\n      console.error('Erreur lors de la récupération des factures:', error);\n      return throwError(() => error);\n    })\n  );\n}\n\n\n  getFacturesByBoutique(boutiqueId: number): Observable<Facture[]> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      const headers = new HttpHeaders({\n        Authorization: `Bearer ${token}`\n      });\n      return this.http.get<Facture[]>(`${this.apiUrl}/factures/${boutiqueId}`, { headers }).pipe(\n        map((factures: Facture[]) => factures || []),\n        catchError((error: HttpErrorResponse) => {\n          if (error.status === 404) return of([]);\n          return throwError(() => error);\n        })\n      );\n    }),\n    catchError(error => {\n      console.error('Erreur lors de la récupération des factures par boutique:', error);\n      return throwError(() => error);\n    })\n  );\n}\n\n\n  private getBoutiqueNameById(id: number): string {\n    const boutique = this.boutiques.find((b: any) => b.id === id); // Ajouter le type\n    return boutique?.nomBoutique || 'Boutique inconnue';\n  }\n\n  // Ajouter une méthode pour initialiser les boutiques\n  setBoutiques(boutiques: any[]): void {\n    this.boutiques = boutiques;\n  }\n\n}","// import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {AfterViewInit, ChangeDetectionStrategy, ChangeDetectorRef, Component, HostListener, signal, ViewChild} from '@angular/core';\nimport {MatButtonModule} from '@angular/material/button';\nimport {provideNativeDateAdapter} from '@angular/material/core';\nimport {MatDatepickerModule} from '@angular/material/datepicker';\nimport {MatExpansionModule} from '@angular/material/expansion';\nimport {MatFormFieldModule} from '@angular/material/form-field';\nimport {MatIconModule} from '@angular/material/icon';\nimport {MatInputModule} from '@angular/material/input';\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\nimport { ActivatedRoute, Router, RouterLink } from '@angular/router';\nimport { ProduitService } from '../SERVICES/produit.service';\n// import { SharedDataService } from '../SERVICES/shared-data.service';\nimport { StockService } from '../SERVICES/stocks.service';\nimport { UsersService } from '../SERVICES/users.service';\nimport { Produit } from '../MODELS/produit.model';\nimport { Stock } from '../MODELS/stock.model';\nimport { Facture, ProduitFacture } from '../MODELS/facture.model';\nimport { FactureService } from '../SERVICES/facture.service';\nimport { ViewChildren, QueryList } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { CustomNumberPipe } from '../MODELS/customNumberPipe';\nimport jsPDF from 'jspdf';\nimport 'jspdf-autotable';\nimport { FactureWithDataSource } from '../MODELS/facture-with-data-source';\nimport { SuspendedBoutiqueDialogComponent } from '../produits/suspended-boutique-dialog.component';\nimport { forkJoin } from 'rxjs';\nimport { MatDialog } from '@angular/material/dialog';\nimport { environment } from 'src/environments/environment';\n\n//FactureWithDataSource\n\n\nexport interface PeriodicElement {\n  codeGenerique: string;\n  nomProduit: string;\n  stockActuel: number;\n  quantiteAjoute: number;\n  quantiteRetirer: number;\n  stockApres: number;\n  codeFournisseur: string\n\n}\n\n// const ELEMENT_DATA: PeriodicElement[] = [\n//   {codeGenerique: 'P-0000', nomProduit: 'NIDO', stockActuel: 200, quantiteAjoute: 89, quantiteRetirer: 20, stockApres: 234},\n//   {codeGenerique: 'P-0001', nomProduit: 'Bic', stockActuel: 200, quantiteAjoute: 89, quantiteRetirer: 20, stockApres: 234},\n//   {codeGenerique: 'P-0002', nomProduit: 'Chocolat', stockActuel: 200, quantiteAjoute: 89, quantiteRetirer: 20, stockApres: 234},\n// ];\n\n@Component({\n  selector: 'app-facture',\n  providers: [provideNativeDateAdapter()],\n  imports: [\n    MatExpansionModule,\n    MatIconModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatButtonModule,\n    MatDatepickerModule,\n    MatTableModule, \n    MatPaginatorModule,\n    CommonModule,\n    FormsModule,\n    CustomNumberPipe\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  templateUrl: './facture.component.html',\n  styleUrl: './facture.component.scss'\n})\n\n\nexport class FactureComponent  implements AfterViewInit {\n\n  boutiqueName: string = '';\n  nomComplet: string = '';\n  nomEntreprise = '';\n  email: string = '';\n  produit: Produit | undefined;\n  stockHistory: any[] = [];\n\n  showNoFactureMessage = false;\n  noFacturesMessage = 'Aucune facture disponible.';\n  factures: FactureWithDataSource[] = [];\n\n  // Ajouter ces nouvelles propriétés\n  searchTerm: string = '';\n  filteredFactures: FactureWithDataSource[] = [];\n\n  // Dropdown pour l'export\n  showExportDropdown = false;\n  showDescription = true;\n  \n  // Liste filtrée des stocks ajustés\n  adjustedStocks: Stock[] = [];\n  stock: Stock | null = null\n  factureDataSource = new MatTableDataSource<any>();\n  selectedBoutique: any = null;\n  boutiques: any[] = [];\n  entrepriseId!: number;\n\n  userInfo: any;\n\n  factureCounts: { [boutiqueId: number]: number } = {};\n  totalAllFactures: number = 0;\n\n  private apiUrl = environment.imgUrl;\n  \n\n   constructor(\n         private userService: UsersService,\n        //  private produitService: ProduitService,\n        //  private sharedDataService: SharedDataService,\n        //  private stockService: StockService,\n        //  private router: Router,\n        //  private route: ActivatedRoute,\n         private factureService: FactureService,\n         private changeDetectorRef: ChangeDetectorRef,\n        private dialog: MatDialog\n      ) {\n        this.dataSource = new MatTableDataSource<ProduitFacture>();\n       }\n\n  // Pagination\n  displayedColumns: string[] = ['codeGenerique', 'nomProduit', 'prixUnitair', 'quantite', 'total'];\n  dataSource: MatTableDataSource<ProduitFacture>;\n\n  // @ViewChild(MatPaginator) paginator!: MatPaginator;\n  @ViewChildren(MatPaginator) paginators!: QueryList<MatPaginator>;\n  \n  totalFactures = 0;\n  pageSize = 10;\n  currentPage = 0;\n  paginatedFactures: FactureWithDataSource[] = [];\n\n  onPageChange(event: any): void {\n    this.currentPage = event.pageIndex;\n    this.pageSize = event.pageSize;\n    this.updatePaginatedFactures();\n  }\n\n  // Ajouter cette méthode\n  private updatePaginatedFactures(): void {\n    const startIndex = this.currentPage * this.pageSize;\n    const endIndex = startIndex + this.pageSize;\n    this.paginatedFactures = this.filteredFactures.slice(startIndex, endIndex);\n    \n    // Forcer la mise à jour du paginator\n    this.changeDetectorRef.detectChanges();\n  }\n\n  ngAfterViewInit() {\n    this.paginators.changes.subscribe(() => {\n      // Associe chaque paginator à la dataSource de la facture correspondante\n      this.factures.forEach((facture, index) => {\n        const paginator = this.paginators.toArray()[index];\n        if (facture.dataSource && paginator) {\n          facture.dataSource.paginator = paginator;\n        }\n      });\n    }); \n  }\n\n  // Collaste \n  step = signal(-1);\n\n  setStep(index: number) {\n    this.step.set(index);\n  }\n\n  // nextStep() {\n  //   this.step.update(i => i + 1);\n  // }\n\n  // prevStep() {\n  //   this.step.update(i => i - 1);\n  // }\n\n  // Affichage/Masquage du dropdown d'export\n  \n  toggleExportDropdown(event: Event) {\n    event.stopPropagation(); \n    this.showExportDropdown = !this.showExportDropdown;\n  }\n  \n  // Masque le dropdown si l'utilisateur clique en dehors\n  @HostListener('document:click', ['$event'])\n  onClickOutside(event: MouseEvent) {\n    const target = event.target as HTMLElement;\n    if (!target.closest('.export-container')) {\n      this.showExportDropdown = false;\n    }\n  }\n\n  // Méthode pour inverser l'état d'affichage\n  toggleDescription(event: Event) {\n    event.stopPropagation();\n    this.showDescription = !this.showDescription;\n  }\n\n  ngOnInit(): void {\n    this.getBoutiqueName();\n    this.getUserInfo();\n    // this.getPartageInfoUser();\n    // List des factures \n    // this.loadFactures();\n  }\n\n  boutiquePhone: string = '';\n  boutiqueEmail: string = '';\n\n  // Boutique Name\n  getBoutiqueName() {\n    this.userService.getUserInfo().subscribe(\n      (userInfo) => {\n        console.log(userInfo);\n        if (userInfo && userInfo.boutiques && userInfo.boutiques.length > 0) {\n          const boutique = userInfo.boutiques[0];\n          this.boutiqueName = boutique.nomBoutique || 'Nom de la boutique non trouvé';\n          this.boutiquePhone = boutique.telephone || 'Téléphone non trouvé';\n          this.boutiqueEmail = boutique.email || 'Email non trouvé';\n        } else {\n          console.error('Aucune boutique trouvée pour cet utilisateur');\n          this.boutiqueName = 'Aucune boutique';\n          this.boutiquePhone = 'N/A';\n          this.boutiqueEmail = 'N/A';\n        }\n      },\n      (error) => {\n        console.error('Erreur lors de la récupération des informations utilisateur', error);\n      }\n    );\n  }\n\n  @ViewChild(MatPaginator) paginator!: MatPaginator;\n\n  // Ajouter la méthode de filtrage\n  applyFilter() {\n    if (!this.searchTerm) {\n      this.filteredFactures = [...this.factures];\n    } else {\n      const searchTermLower = this.searchTerm.toLowerCase();\n      this.filteredFactures = this.factures.filter(facture => \n        facture.numeroFacture.toLowerCase().includes(searchTermLower)\n      );\n    }\n    this.currentPage = 0;\n    this.updatePaginatedFactures();\n    \n    // Réinitialiser le paginator\n    if (this.paginator) {\n      this.paginator.firstPage();\n    }\n  }\n\n  // Méthode pour obtenir les produits formatés\n  getFormattedProduits(facture: Facture): any[] {\n    return facture.produits.map(p => ({\n      ...p,\n      quantiteAjoute: facture.type === 'AJOUT' ? p.quantite : 0,\n      quantiteRetirer: facture.type === 'RETRAIT' ? p.quantite : 0\n    }));\n  }\n\n\n  // Permet de mettre en évidence le texte recherché\n  highlightMatch(text: string): string {\n    if (!this.searchTerm) return text;\n    const regex = new RegExp(`(${this.searchTerm})`, 'gi');\n    return text.replace(regex, '<mark>$1</mark>');\n  }\n\n  getColor(type: string): string {\n    if (type === 'AJOUTER') {\n      return '#008000';\n    } else if (type === 'Réduction') {\n      return '#ff0000';\n    }\n    return '#000';\n  }  \n\n  getBoutiqueNamesForFacture(facture: FactureWithDataSource): string {\n    // Si une boutique spécifique est sélectionnée\n    if (this.selectedBoutique) {\n      return this.selectedBoutique.nomBoutique;\n    }\n    \n    // Pour \"Toutes les boutiques\", utiliser les IDs de la facture\n    if (facture.boutiqueIds?.length > 0) {\n      return facture.boutiqueIds\n        .map(id => this.boutiques.find(b => b.id === id)?.nomBoutique || 'Boutique inconnue')\n        .join(', ');\n    }\n    \n    // Fallback si aucune information n'est disponible\n    return 'Non spécifié';\n  }\n\n  // Nouvelle méthode pour mettre à jour les données paginées\n  private updatePagination() {\n    this.totalFactures = this.filteredFactures.length;\n    const startIndex = this.currentPage * this.pageSize;\n    this.paginatedFactures = this.filteredFactures.slice(startIndex, startIndex + this.pageSize);\n  }\n\n// Fonction principale pour charger l'image en base64\nasync loadImageAsBase64(url: string): Promise<string> {\n  try {\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error('Erreur de chargement de l\\'image: ' + response.statusText);\n    }\n\n    const blob = await response.blob();\n    const mimeType = blob.type;\n\n    // Vérifie si l'image est un PNG\n    if (mimeType !== 'image/png' && mimeType !== 'image/jpeg' && mimeType !== 'image/webp'  && mimeType !== 'image/jpg'  && mimeType !== 'image/avif') {\n      throw new Error('Le fichier n\\'est ni PNG, ni JPEG, ni WEBP');\n    }\n\n    const base64String = await this.blobToBase64(blob);\n    return base64String;\n  } catch (error) {\n    console.error('Erreur lors du chargement de l\\'image:', error);\n    throw error;\n  }\n}\n\n\n// Helper pour convertir un Blob en Base64\nblobToBase64(blob: Blob): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onloadend = () => resolve(reader.result as string);  // Convertir en base64\n    reader.onerror = (error) => reject('Erreur de lecture du fichier : ' + error);  // Gérer les erreurs de lecture\n    reader.readAsDataURL(blob);\n  });\n}\n\n  \n  \n\n  \n  \n\n  async downloadPDFWithJsPDF(facture: any, boutiqueName: string): Promise<void> {\n    const boutiqueNames = facture.boutiqueNames?.join(', ') || 'Toutes les boutiques';\n    const doc = new jsPDF();\n    doc.setFontSize(9);\n\n    const logoPath = this.userInfo?.logoEntreprise;\n\n    if (logoPath) {\n      const fullLogoUrl = `${this.apiUrl}${logoPath}`;\n\n      const logoWidth = 20; \n       const logoHeight = 15;\n  \n      try {\n        const logoBase64 = await this.loadImageAsBase64(fullLogoUrl);\n  \n        // Forcer le type MIME pour le PNG\n        doc.addImage(logoBase64, 'jpg', 170, 10, logoWidth, logoHeight);\n      } catch (error) {\n        console.error('Erreur lors de l\\'ajout du logo au PDF:', error);\n      }\n    } else {\n      console.warn('Logo de l’entreprise non disponible.');\n    }\n    \n    \n\n\n\n    const transform = (value: number): string => {\n      if (value == null) return '';\n      return value.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, '.');\n  };\n\n    let y = 15;\n    doc.setFont('helvetica', 'bold');\n    doc.text('Facture No :', 10, y);\n    doc.setTextColor(6, 114, 228);\n    doc.text(facture?.numeroFacture || 'FAC-XXXXXX', 30, y);\n    \n    y += 8;\n    doc.setTextColor(0, 0, 0);\n    doc.text('Informations de la boutique', 10, y);\n    \n    y += 5;\n    doc.line(10, y, 200, y);\n    y += 10;\n\n    doc.setFont('helvetica', 'bold');\n    doc.text('Boutique :', 10, y);\n    doc.setFont('helvetica', 'normal');\n    doc.setTextColor(6, 114, 228);\n    doc.text(boutiqueName || 'N/A', 30, y);\n\n    y += 8;\n    doc.setFont('helvetica', 'bold');\n    doc.setTextColor(0, 0, 0);\n    doc.text('Téléphone :', 10, y);\n    doc.setFont('helvetica', 'normal');\n    doc.text(this.boutiquePhone || 'N/A', 30, y);\n\n    y += 8;\n    doc.setFont('helvetica', 'bold');\n    doc.text('Email :', 10, y);\n    doc.setFont('helvetica', 'normal');\n    doc.text(this.boutiqueEmail || 'N/A', 22, y);\n\n    y += 8;\n    doc.setFont('helvetica', 'bold');\n    doc.setTextColor(0, 0, 0);\n    doc.text('Date de création :', 10, y);\n    doc.setFont('helvetica', 'normal');\n    \n    const formatDate = (dateString: string): string => {\n        const date = new Date(dateString);\n        return new Intl.DateTimeFormat('fr-FR', {\n            year: 'numeric',\n            month: 'long',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit'\n        }).format(date);\n    };\n    \n    doc.text(formatDate(facture?.dateFacture || ''), 40, y);\n\n    y += 8;\n    doc.setFont('helvetica', 'bold');\n    doc.text('Créé par:', 10, y);\n    doc.setFont('helvetica', 'normal');\n    doc.text(facture?.nomUtilisateur || 'N/A', 27, y);\n\n    y += 8;\n    doc.setFont('helvetica', 'bold');\n    doc.text('Type de mouvement :', 10, y);\n    doc.setFont('helvetica', 'normal');\n\n    let typeMouvement = facture?.type || 'N/A';\n    const couleurMouvement: [number, number, number] = \n        typeMouvement === 'AJOUTER' ? [0, 150, 0] : [255, 0, 0];\n\n    doc.setTextColor(...couleurMouvement);\n    doc.text(typeMouvement, 45, y);\n    doc.setTextColor(0, 0, 0);\n\n    y += 12;\n    doc.setFont('helvetica', 'bold');\n    doc.text('Informations sur les produits', 10, y);\n    \n    y += 5;\n    doc.line(10, y, 200, y);\n    y += 10;\n\n    \n    doc.setTextColor(153, 153, 153);\n    doc.text('Produits', 10, y);\n    y += 10;\n\n\n    doc.setFillColor(6, 114, 228);\n    doc.setTextColor(255, 255, 255);\n    doc.rect(10, y, 190, 10, 'F');\n    doc.text('Code', 15, y + 7);\n    doc.text('Désignation', 50, y + 7);\n    doc.text('Prix unitaire', 100, y + 7);\n    doc.text('Quantité', 140, y + 7);\n    doc.text('Total', 170, y + 7);\n\n    y += 15;\n    doc.setTextColor(0, 0, 0);\n    const produits = facture?.produits || [];\n    produits.forEach((produit: { codeGenerique: any; nomProduit: any; prixUnitair: number; quantite: { toString: () => any; }; total: any; }, index: number) => {\n        doc.text(produit.codeGenerique || `P-${index + 1}`, 15, y);\n        doc.text(produit.nomProduit, 50, y);\n        doc.text(transform(Number(produit.prixUnitair.toFixed(3))), 100, y);\n        doc.text(produit.quantite.toString(), 140, y);\n        doc.setTextColor(255, 0, 0);\n        doc.text(transform(Number((produit.total || 0).toFixed(3))), 170, y);\n        doc.setTextColor(0, 0, 0);\n        y += 10;\n    });\n\n    y += 10;\n    doc.line(10, y, 200, y);\n    y += 15;\n\n    doc.setFont('helvetica', 'bold');\n    doc.text('Signature', 20, y);\n    doc.text('Approuvé par', 90, y);\n    doc.text('Reçu par', 160, y);\n\n    // Générer un PDF avec un nom unique\n    doc.save(`Facture_${facture?.numeroFacture || 'XXXXXX'}.pdf`);\n  }\n\n  getUserInfo(): void {\n      this.userService.getUserInfo().subscribe({\n        next: (user) => {\n          this.userInfo = user;\n          this.boutiques = user.boutiques;\n          this.entrepriseId = user.entrepriseId;\n          this.factureService.setBoutiques(this.boutiques);\n          \n          if (this.boutiques.length > 0) {\n            this.selectedBoutique = null;\n            this.showNoFactureMessage = false; // Ajouter cette ligne\n            this.loadAllFactures();\n          } else {\n            this.noFacturesMessage = 'Aucune boutique trouvée.'; // Modifier cette ligne\n            this.showNoFactureMessage = true; // Modifier cette ligne\n          }\n          this.showNoFactureMessage = false;\n        },\n        error: (err) => {\n          console.error(\"Erreur lors de la récupération des informations utilisateur :\", err);\n          this.showNoFactureMessage = true; // Ajouter cette ligne\n        }\n      });\n    }\n\n  selectBoutique(boutique: any | null): void {\n    if (boutique && !boutique.actif) {\n      this.showSuspendedBoutiqueDialog();\n      return;\n    }\n    this.selectedBoutique = boutique;\n    if (boutique === null) {\n      this.loadAllFactures();\n    } else {\n      this.loadFactures(boutique.id);\n    }\n    this.currentPage = 0;\n  }\n\n  // Dans loadFactures()\n  loadFactures(boutiqueId: number): void {\n    this.showNoFactureMessage = false;\n    this.factureService.getFacturesByBoutique(boutiqueId).subscribe({\n      next: (data) => {\n        const facturesWithBoutique = data.map(f => ({\n          ...f,\n          boutiqueIds: [boutiqueId] // Ajoute l'ID de la boutique à chaque facture\n        }));\n        this.factureCounts[boutiqueId] = data.length;\n        this.processFactures(facturesWithBoutique);\n      },\n      error: (error) => {\n        console.error('Erreur:', error);\n        this.processFactures([]);\n        this.showNoFactureMessage = true;\n      }\n    });\n  }\n\n  // Dans loadAllFactures()\n  loadAllFactures(): void {\n    this.showNoFactureMessage = false;\n    const requests = this.boutiques.map(b => \n      this.factureService.getFacturesByBoutique(b.id)\n    );\n    forkJoin(requests).subscribe({\n      next: (responses) => {\n        const allFactures = responses.flatMap((factures, index) => {\n          const boutiqueId = this.boutiques[index].id;\n          return factures.map(f => ({\n            ...f,\n            boutiqueIds: [boutiqueId] // Ajoute l'ID de la boutique à chaque facture\n          }));\n        });\n\n        // Calculer les comptages\n        const counts: { [id: number]: number } = {};\n        responses.forEach((factures, index) => {\n          const boutiqueId = this.boutiques[index].id;\n          counts[boutiqueId] = factures.length;\n        });\n        this.factureCounts = counts;\n        this.totalAllFactures = responses.reduce((acc, factures) => acc + factures.length, 0);\n\n        this.processFactures(allFactures);\n      },\n      error: (error) => {\n        console.error('Erreur:', error);\n        this.showNoFactureMessage = true;\n      }\n    });\n  }\n\n  private processFactures(data: Facture[] | null): void {\n    if (!data || !Array.isArray(data)) {\n      this.showNoFactureMessage = true;\n      // this.noFacturesAvailable = true;\n      this.factures = [];\n      this.filteredFactures = [];\n      return;\n    }\n  \n    this.factures = data.reverse().map(facture => ({\n      ...facture,\n      boutiqueIds: facture.boutiqueIds || [],\n      boutiqueNames: this.getBoutiqueNames(facture.boutiqueIds),\n      dataSource: new MatTableDataSource(this.getFormattedProduits(facture)),\n      totalSum: this.getFormattedProduits(facture).reduce((acc, p) => acc + (p.total || 0), 0)\n    }));\n  \n    this.filteredFactures = [...this.factures];\n    this.showNoFactureMessage = this.factures.length === 0;\n    this.updatePaginatedFactures();\n  }\n\n  private getBoutiqueNames(ids: number[] = []): string[] {\n    return ids\n      .map(id => this.boutiques.find(b => b.id === id)?.nomBoutique || 'Boutique inconnue' )\n      .filter(name => !!name) as string[];\n  }\n\n  // facture.component.ts\n  showSuspendedBoutiqueDialog(): void {\n    this.dialog.open(SuspendedBoutiqueDialogComponent, {\n      width: '400px',\n      disableClose: true,\n      data: { onClose: () => this.selectedBoutique = null }\n    });\n  }\n\n\n}\n\n\n","<div class=\"global_container_facture\">\n    <div class=\"container_facture\">\n\n        <!-- <div class=\"title\">\n            <h3>Mes facture</h3>\n        </div> -->\n\n\n        <div class=\"tasks-header\">\n          <h1 class=\"title\">Factures</h1>\n          \n          <div class=\"actions\">\n            <!--Les recherche-->\n            <div class=\"inputSearch\">\n              <i class=\"ri-search-2-line\"></i>\n              <input \n                type=\"text\" \n                placeholder=\"Recherche....\" \n                [(ngModel)]=\"searchTerm\" \n                (input)=\"applyFilter()\"\n              />\n            </div>\n          </div>\n        </div>\n\n        <!-- facture-component.html -->\n        <div class=\"container_list_boutique\">\n          <div class=\"content_list_boutique\">\n            <div class=\"name_boutique\">\n              <ng-container *ngIf=\"(boutiques?.length || 0) > 0;\">\n                <div class=\"all_boutique\" \n                    [class.name_boutique_active]=\"selectedBoutique === null\"\n                    (click)=\"selectBoutique(null)\">\n                  <!-- <p class=\"all_boutique\">Toutes les boutiques</p> -->\n                   <p class=\"all_boutique\" style=\"display: flex; align-items: center;\">\n                      Toutes les boutiques\n                      <span *ngIf=\"totalAllFactures > 0\" class=\"facture-count\">\n                        {{ totalAllFactures }}\n                      </span>\n                    </p>\n                </div>\n                <ng-container *ngFor=\"let boutique of boutiques; let i = index\">\n                  <!-- <p \n                    [class.name_boutique_active]=\"boutique.id === selectedBoutique?.id && boutique.actif\"\n                    [class.suspended-boutique]=\"!boutique.actif\"\n                    (click)=\"boutique.actif ? selectBoutique(boutique) : showSuspendedBoutiqueDialog()\">\n                    {{ boutique.nomBoutique }}\n                    <i *ngIf=\"!boutique.actif\" class=\"ri-error-warning-line warning-icon\"></i>\n                  </p> -->\n                  <p \n                    [class.name_boutique_active]=\"boutique.id === selectedBoutique?.id && boutique.actif\"\n                    [class.suspended-boutique]=\"!boutique.actif\"\n                    (click)=\"boutique.actif ? selectBoutique(boutique) : showSuspendedBoutiqueDialog()\"\n                    style=\"display: flex; align-items: center;\">\n                    {{ boutique.nomBoutique }}\n                    <span *ngIf=\"factureCounts[boutique.id] > 0\" class=\"facture-count\">\n                      {{ factureCounts[boutique.id] }}\n                    </span>\n                    <i *ngIf=\"!boutique.actif\" class=\"ri-error-warning-line warning-icon\"></i>\n                  </p>\n                  <div *ngIf=\"i !== boutiques.length - 1\" class=\"barre\"></div>\n                </ng-container>\n              </ng-container>\n              <!-- <ng-template #noBoutiques>\n                <p class=\"no-boutiques-message\">Aucune boutique trouvée</p>\n              </ng-template> -->\n            </div>\n          </div>\n        </div>\n\n         <!-- Message quand il n'y a pas de factures -->\n        <div *ngIf=\"showNoFactureMessage\" class=\"no-facture-message\">\n           {{ noFacturesMessage }}\n        </div>\n\n        <!-- Message quand la recherche ne donne rien -->\n        <div *ngIf=\"!showNoFactureMessage && filteredFactures.length === 0 && searchTerm\" class=\"no-facture-message\">\n          Aucune facture trouvée pour le numéro \"{{ searchTerm }}\"\n        </div>\n\n        <div class=\"factures\">\n            <mat-accordion *ngIf=\"!showNoFactureMessage\" class=\"example-headers-align\">\n                <mat-expansion-panel #panel class=\"cadre_panel\" *ngFor=\"let facture of paginatedFactures; let i = index\" [expanded]=\"step() === i\" (opened)=\"setStep(i)\" hideToggle>\n                    <!-- // header facture  -->\n                    <mat-expansion-panel-header>\n                      <mat-panel-title class=\"title_facture\">\n                        <!-- // Date de création (Toujours affiché) -->\n                        <div class=\"personnage\" *ngIf=\"!panel.expanded\">\n                            Date : <span class=\"title_facture_info\">{{ facture.dateFacture | date:'dd/MM/yyyy' }}</span>\n                        </div>\n                    \n                        <!-- // barre (Toujours affichée) -->\n                        <div class=\"barre\" *ngIf=\"!panel.expanded\"></div>\n                    \n                        <!-- // Numéro de facture (Toujours affiché) -->\n                        <div class=\"numFacture\">\n                            Facture : <span class=\"title_facture_code\" [innerHTML]=\"highlightMatch(facture.numeroFacture || '')\" ></span> \n                        </div>\n                    \n                        <!-- // Afficher la barre SEULEMENT si Nº Fournisseur est affiché -->\n                        <div class=\"barre\" *ngIf=\"facture.type === 'AJOUTER'\"></div>\n                    \n                        <!-- // Nº Fournisseur (Seulement pour AJOUTER) -->\n                        <div class=\"Facture\" *ngIf=\"facture.type === 'AJOUTER'\">\n                            Nº Fournisseur : <span class=\"title_facture_codeFournisseur\" [innerHTML]=\"highlightMatch(facture.codeFournisseur || '****')\"></span> \n                        </div>\n                    \n                        <!-- // Afficher la barre SEULEMENT si \"Créé par\" suit directement -->\n                        <div class=\"barre\" *ngIf=\"!panel.expanded\"></div>\n                    \n                        <!-- // Créé par (Toujours affiché) -->\n                        <div class=\"personnage\" *ngIf=\"!panel.expanded\">\n                            Créé par : <span class=\"title_facture_info\">{{ facture.nomUtilisateur }}</span>\n                        </div>\n                    \n                        <!-- // barre (Toujours affichée) -->\n                        <div class=\"barre\" *ngIf=\"!panel.expanded\"></div>\n                    \n                        <!-- // Type de mouvement (Toujours affiché) -->\n                        <div class=\"personnage\" *ngIf=\"!panel.expanded\">\n                            Type de mouvement : \n                            <span [style.color]=\"getColor(facture.type)\" style=\"font-weight: 600; text-transform: uppercase;\">\n                                {{ facture.type }}\n                            </span>\n                        </div>\n                    </mat-panel-title>\n                    \n                        <!-- icon arrow icon_arrow -->\n                        <div class=\"icon_export\">\n                            <div class=\"export-container\" style=\"display: flex; align-items: center;\">\n                                <!-- Icon pour afficher/masquer la description -->\n                                <div class=\"iconDrop\" style=\"margin-right: 20px;\" (click)=\"toggleDescription($event)\">\n                                    <i class=\"ri-chat-check-line\" *ngIf=\"!showDescription; else openIcon\" title=\"Afficher la description\"></i>\n                                    <ng-template #openIcon>\n                                        <i class=\"ri-chat-off-line\" title=\"Fermer la description\"></i>\n                                    </ng-template>\n                                </div>\n                        \n                                <!-- Autres icônes -->\n                                <div class=\"iconDrop\">\n                                    <i class=\"ri-printer-cloud-line\" (click)=\"toggleExportDropdown($event)\"></i>\n                                </div>\n                                <div class=\"export-dropdown\" *ngIf=\"showExportDropdown\">\n                                  <div class=\"export-option\" (click)=\"downloadPDFWithJsPDF(facture, boutiqueName)\">Télécharger en PDF</div>\n                                    <div class=\"export-option\">Imprimer</div>\n                                </div>\n                        \n                                <!-- Flèche -->\n                                <div class=\"iconDrop\" style=\"margin-left: 20px;\">\n                                    <i class=\"ri-arrow-down-s-fill\"></i>\n                                </div>\n                            </div>\n                        </div>\n                        \n                    </mat-expansion-panel-header>\n              \n                    <!-- // contenu de la facture  -->\n                     <div class=\"content_facture\">\n\n                        <div class=\"bare\"></div>\n\n                        <!-- // info de produit  -->\n                        <div class=\"title_produit\">\n                            <h4>Informations de la boutique</h4>\n                        </div>\n\n                        <div class=\"bare\"></div>\n\n                        <!-- // Imprimate  -->\n                        <div class=\"container_imprimate\">\n                            <div class=\"content_imprimate\">\n                    \n                            <!-- Les autres infos restent inchangées -->\n                            <div class=\"double_info_content\">\n                                <!-- // left  -->\n                                <div class=\"info_content\">\n                                    <div class=\"info\">\n                                      <p class=\"info_title\">Boutique :</p>\n                                      <div *ngIf=\"selectedBoutique; else allBoutiques\">\n                                        <p class=\"info_value\" style=\"color: #0672E4;\">{{ selectedBoutique.nomBoutique }}</p>\n                                      </div>\n                                      <ng-template #allBoutiques>\n                                        <!-- <p class=\"info_value\" style=\"color: #0672E4;\">\n                                          {{ facture.boutiqueNames?.join(', ') || 'Non spécifié' }}\n                                        </p> -->\n                                        <p class=\"info_value\" style=\"color: #0672E4;\">\n                                          {{ getBoutiqueNamesForFacture(facture) || 'Non spécifié' }}\n                                        </p>\n                                      </ng-template>\n                                    </div>\n                                    <div class=\"info\">\n                                      <p class=\"info_title\">Date de creation :</p>\n                                      <p class=\"info_value\">{{ facture.dateFacture | date:'dd/MM/yyyy à HH:mm' }}</p>\n                                    </div>\n                                    <div class=\"info\">\n                                      <p class=\"info_title\">Créé par :</p>\n                                      <p class=\"info_value\">{{ facture.nomUtilisateur }}</p>\n                                    </div>\n                                    <div class=\"info\">\n                                      <p class=\"info_title\">Téléphone :</p>\n                                      <p class=\"info_value\">{{ boutiquePhone }}</p>\n                                    </div>\n\n                                    <div class=\"info\">\n                                      <p class=\"info_title\">Email :</p>\n                                      <p class=\"info_value\">{{ boutiqueEmail }}</p>\n                                    </div>\n\n                                    <div class=\"info\">\n                                      <p class=\"info_title\">Type de mouvement :</p>\n                                      <p class=\"info_value\" [style.color]=\"getColor(facture.type)\" style=\"font-weight: 600; text-transform: uppercase;\">\n                                        {{ facture.type }}\n                                      </p>                                      \n                                    </div>                                    \n                                </div>\n\n                                <!-- //  right  -->\n                                 <!-- Description : affichage conditionnel -->\n                                <div class=\"description_detail\" *ngIf=\"showDescription\">\n                                    <textarea readonly >{{ facture.description || 'sans description' }}</textarea>\n                                </div>\n                            </div>\n\n                            <!-- // barre  -->\n                            <div class=\"bare\"></div>\n\n                            <!-- // info de produit  -->\n                            <div class=\"title_produit\" style=\"margin-top: 17px;\">\n                                <h4>Informations sur les produits</h4>\n                            </div>\n\n                            <!-- // barre  -->\n                            <div class=\"bare\"></div>\n\n                          </div>\n                    \n                            <!-- Le reste du template (table, signature, etc.) -->\n                            <div class=\"containerTable\">\n                              \n                              <div class=\"mat-elevation-z8\">\n                                <table mat-table [dataSource]=\"facture.dataSource\">\n                                  <!-- Colonnes existantes -->\n                                  <ng-container matColumnDef=\"codeGenerique\">\n                                    <th mat-header-cell *matHeaderCellDef>Code</th>\n                                    <td mat-cell *matCellDef=\"let p\">{{ p.codeGenerique }}</td>\n                                    <td mat-footer-cell *matFooterCellDef> Total</td>\n                                  </ng-container>\n                                \n                                  <ng-container matColumnDef=\"nomProduit\">\n                                    <th mat-header-cell *matHeaderCellDef>Désignation</th>\n                                    <td mat-cell *matCellDef=\"let p\">{{ p.nomProduit }}</td>\n                                    <td mat-footer-cell *matFooterCellDef>....</td>\n                                  </ng-container>\n                                \n                                  <ng-container matColumnDef=\"prixUnitair\">\n                                    <th mat-header-cell *matHeaderCellDef>Prix unitaire</th>\n                                    <td mat-cell *matCellDef=\"let p\">{{ p.prixUnitair | customNumber}}</td>\n                                    <td mat-footer-cell *matFooterCellDef>....</td>\n                                  </ng-container>\n                                \n                                  <ng-container matColumnDef=\"quantite\">\n                                    <th mat-header-cell *matHeaderCellDef>Quantité</th>\n                                    <td mat-cell *matCellDef=\"let p\">{{ p.quantite | customNumber}}</td>\n                                    <td mat-footer-cell *matFooterCellDef>....</td>\n                                  </ng-container>\n                                \n                                  <ng-container matColumnDef=\"total\">\n                                    <th mat-header-cell *matHeaderCellDef>Total</th>\n                                    <td mat-cell *matCellDef=\"let p\" style=\"color: #ff0000;\">{{ p.total | customNumber }}</td>\n                                    <td mat-footer-cell *matFooterCellDef style=\"color: #000000; font-weight: bold;\">{{ facture.totalSum | customNumber }}</td>\n                                  </ng-container>\n                                \n                                  <!-- Ajouter la ligne de pied de tableau -->\n                                  <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n                                  <tr mat-row *matRowDef=\"let row; columns: displayedColumns\"></tr>\n                                  <tr mat-footer-row *matFooterRowDef=\"displayedColumns\"></tr>\n                                </table>\n                              \n                                <!-- Ici, vous devez avoir un paginator pour chaque table -->\n                                <!-- <mat-paginator [pageSizeOptions]=\"[5, 10, 20]\" showFirstLastButtons aria-label=\"Select page of produits\"\n                                  #paginator>\n                                </mat-paginator> -->\n                              </div>\n                              \n                            </div>\n                    \n                            <!-- Signature -->\n                            <!-- <div class=\"container_signature\">\n                              <div class=\"content_signature\">\n                                <div class=\"signature\">\n                                  <p>Signature</p>\n                                </div>\n                                <div class=\"approuve\">\n                                  <p>Approuvé par</p>\n                                </div>\n                                <div class=\"recu\">\n                                  <p>Reçu par</p>\n                                </div>\n                              </div>\n                            </div> -->\n                        </div>\n\n                     </div>\n                </mat-expansion-panel>\n                <!-- // new mat-expansion-panel  -->\n                <!-- <div class=\"icon_more\">\n                    <i class=\"ri-more-2-fill\"></i>\n                </div> -->\n                \n            </mat-accordion>\n\n        </div>\n\n        <!-- Pagination -->\n        <div class=\"pagination\">\n          <mat-paginator *ngIf=\"filteredFactures.length > 5\"\n            [length]=\"filteredFactures.length\"\n            [pageSize]=\"pageSize\"\n            [pageIndex]=\"currentPage\"\n            [pageSizeOptions]=\"[5, 10, 25, 100]\"\n            (page)=\"onPageChange($event)\">\n          </mat-paginator>\n        </div>\n        \n    </div>\n</div>\n"],"names":["HttpHeaders","catchError","map","of","switchMap","throwError","environment","FactureService","constructor","http","usersService","apiUrl","apiBaseUrl","boutiques","getFactures","getValidAccessToken","pipe","token","headers","Authorization","get","error","console","getFacturesByBoutique","boutiqueId","factures","status","getBoutiqueNameById","id","boutique","find","b","nomBoutique","setBoutiques","i0","ɵɵinject","i1","HttpClient","i2","UsersService","factory","ɵfac","providedIn","CommonModule","signal","MatButtonModule","provideNativeDateAdapter","MatDatepickerModule","MatExpansionModule","MatFormFieldModule","MatIconModule","MatInputModule","MatPaginator","MatPaginatorModule","MatTableDataSource","MatTableModule","FormsModule","CustomNumberPipe","jsPDF","SuspendedBoutiqueDialogComponent","forkJoin","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r1","totalAllFactures","factureCounts","boutique_r4","ɵɵelement","ɵɵelementContainerStart","ɵɵlistener","FactureComponent_ng_container_12_ng_container_5_Template_p_click_1_listener","ɵɵrestoreView","_r3","$implicit","ɵɵnextContext","ɵɵresetView","actif","selectBoutique","showSuspendedBoutiqueDialog","ɵɵtemplate","FactureComponent_ng_container_12_ng_container_5_span_3_Template","FactureComponent_ng_container_12_ng_container_5_i_4_Template","FactureComponent_ng_container_12_ng_container_5_div_5_Template","ɵɵclassProp","selectedBoutique","ɵɵproperty","i_r5","length","FactureComponent_ng_container_12_Template_div_click_1_listener","_r1","FactureComponent_ng_container_12_span_4_Template","FactureComponent_ng_container_12_ng_container_5_Template","noFacturesMessage","searchTerm","ɵɵtextInterpolate","ɵɵpipeBind2","facture_r8","dateFacture","highlightMatch","codeFournisseur","ɵɵsanitizeHtml","nomUtilisateur","ɵɵstyleProp","getColor","type","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_23_Template_div_click_1_listener","_r9","downloadPDFWithJsPDF","boutiqueName","getBoutiqueNamesForFacture","description","p_r10","codeGenerique","p_r11","nomProduit","ɵɵpipeBind1","p_r12","prixUnitair","p_r13","quantite","p_r14","total","totalSum","FactureComponent_mat_accordion_16_mat_expansion_panel_1_Template_mat_expansion_panel_opened_0_listener","i_r7","_r6","index","setStep","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_4_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_5_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_9_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_10_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_11_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_12_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_13_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_14_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_Template_div_click_17_listener","$event","toggleDescription","FactureComponent_mat_accordion_16_mat_expansion_panel_1_i_18_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_ng_template_19_Template","ɵɵtemplateRefExtractor","FactureComponent_mat_accordion_16_mat_expansion_panel_1_Template_i_click_22_listener","toggleExportDropdown","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_23_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_39_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_ng_template_40_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_div_68_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_th_78_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_td_79_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_td_80_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_th_82_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_td_83_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_td_84_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_th_86_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_td_87_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_td_88_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_th_90_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_td_91_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_td_92_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_th_94_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_td_95_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_td_96_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_tr_97_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_tr_98_Template","FactureComponent_mat_accordion_16_mat_expansion_panel_1_tr_99_Template","step","panel_r15","expanded","numeroFacture","showDescription","openIcon_r16","showExportDropdown","allBoutiques_r17","boutiquePhone","boutiqueEmail","dataSource","displayedColumns","FactureComponent_mat_accordion_16_mat_expansion_panel_1_Template","paginatedFactures","FactureComponent_mat_paginator_18_Template_mat_paginator_page_0_listener","_r18","onPageChange","filteredFactures","pageSize","currentPage","ɵɵpureFunction0","_c0","FactureComponent","userService","factureService","changeDetectorRef","dialog","nomComplet","nomEntreprise","email","stockHistory","showNoFactureMessage","adjustedStocks","stock","factureDataSource","imgUrl","totalFactures","event","pageIndex","updatePaginatedFactures","startIndex","endIndex","slice","detectChanges","ngAfterViewInit","paginators","changes","subscribe","forEach","facture","paginator","toArray","set","stopPropagation","onClickOutside","target","closest","ngOnInit","getBoutiqueName","getUserInfo","userInfo","log","telephone","applyFilter","searchTermLower","toLowerCase","filter","includes","firstPage","getFormattedProduits","produits","p","quantiteAjoute","quantiteRetirer","text","regex","RegExp","replace","boutiqueIds","join","updatePagination","loadImageAsBase64","url","_this","_asyncToGenerator","response","fetch","ok","Error","statusText","blob","mimeType","base64String","blobToBase64","Promise","resolve","reject","reader","FileReader","onloadend","result","onerror","readAsDataURL","_this2","boutiqueNames","doc","setFontSize","logoPath","logoEntreprise","fullLogoUrl","logoWidth","logoHeight","logoBase64","addImage","warn","transform","value","toString","y","setFont","setTextColor","line","formatDate","dateString","date","Date","Intl","DateTimeFormat","year","month","day","hour","minute","format","typeMouvement","couleurMouvement","setFillColor","rect","produit","Number","toFixed","save","next","user","entrepriseId","loadAllFactures","err","loadFactures","data","facturesWithBoutique","f","processFactures","requests","responses","allFactures","flatMap","counts","reduce","acc","Array","isArray","reverse","getBoutiqueNames","ids","name","open","width","disableClose","onClose","ɵɵdirectiveInject","ChangeDetectorRef","i3","MatDialog","selectors","viewQuery","FactureComponent_Query","rf","ctx","FactureComponent_click_HostBindingHandler","ɵɵresolveDocument","decls","vars","consts","template","FactureComponent_Template","ɵɵtwoWayListener","FactureComponent_Template_input_ngModelChange_8_listener","ɵɵtwoWayBindingSet","FactureComponent_Template_input_input_8_listener","FactureComponent_ng_container_12_Template","FactureComponent_div_13_Template","FactureComponent_div_14_Template","FactureComponent_mat_accordion_16_Template","FactureComponent_mat_paginator_18_Template","ɵɵtwoWayProperty","i4","MatAccordion","MatExpansionPanel","MatExpansionPanelHeader","MatExpansionPanelTitle","i5","MatTable","MatHeaderCellDef","MatHeaderRowDef","MatColumnDef","MatCellDef","MatRowDef","MatFooterCellDef","MatFooterRowDef","MatHeaderCell","MatCell","MatFooterCell","MatHeaderRow","MatRow","MatFooterRow","i6","i7","NgForOf","NgIf","DatePipe","i8","DefaultValueAccessor","NgControlStatus","NgModel","styles","changeDetection"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}