{"version":3,"file":"src_app_admin-page_profil_profil_component_ts.js","mappings":"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","sources":["./src/app/admin-page/profil/profil.component.ts","./src/app/admin-page/profil/profil.component.html"],"sourcesContent":["import { ChangeDetectorRef, Component, ElementRef, HostListener, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, FormsModule, ReactiveFormsModule, ValidationErrors, Validators } from '@angular/forms';\nimport { AuthService } from '../SERVICES/auth.service';\nimport { UpdateUserRequest } from '../MODELS/profil.model';\nimport { ProfilService } from '../SERVICES/profil.service';\nimport { CommonModule } from '@angular/common';\nimport { UsersService } from '../SERVICES/users.service';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { environment } from 'src/environments/environment';\nimport imageCompression from 'browser-image-compression';\n\n@Component({\n  selector: 'app-profil',\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    FormsModule,\n  ],\n  templateUrl: './profil.component.html',\n  styleUrl: './profil.component.scss'\n})\nexport class ProfilComponent  implements OnInit{\n  passwordForm!: FormGroup;\n  nomBoutiqueForm!: FormGroup;\n  nomCompletForm!: FormGroup;\n  isLoading = false;\n  errorMessage: string | null = null;\n  successMessage: string | null = null;\n  userId!: number;\n  nomComplet: string = '';\n  password: string = '';\n  photo: string | null = null;\n\n\n  imageFile: File | null = null;\n\n  userName: string = '';\n  nomEntreprise: string = '';\n  email: string = '';\n  phone: string = '';\n  roleType: string = '';\n  pays: string = '';\n  nomBoutique: string = '';\n  boutiqueAdresse: string = '';\n  flagPays: string = '';\n  personalCode: string = '';\n  qrCodeUrl: string = '';\n  isNomBoutiqueFormVisible = false;\n  isUserFormVisible = false;\n  boutiques: any[] = [];\n\n  private imgUrl = environment.imgUrl;\n\n  newPhotoUrl: string | null = null;\n\n\n  isModalOpen = false;\n\n  paysFlags: { [key: string]: string } = {\n    'Mali': '🇲🇱',\n    'Sénégal': '🇸🇳',\n    'Côte d\\'Ivoire': '🇨\\u200D',\n    'Guinée': '🇬🇳',\n    'Burkina Faso': '🇧🇫',\n    'Togo': '🇹🇬',\n    'Niger': '🇳\\u200D',\n    'Bénin': '🇧🇯',\n    'Mauritanie': '🇲🇷',\n    'Gabon': '🇬🇦',\n    'Cameroun': '🇨🇲',\n  };\n\n  // Methode de eye\n  showCurrentPassword: boolean = false;\n  showNewPassword: boolean = false;\n  showConfirmPassword: boolean = false;\n\n  // Methode pour cadre From\n  isPasswordFormVisible = false;\n\n  toggleCurrentPasswordVisibility() {\n    this.showCurrentPassword = !this.showCurrentPassword;\n  }\n  \n  toggleNewPasswordVisibility() {\n    this.showNewPassword = !this.showNewPassword;\n  }\n  \n  toggleConfirmPasswordVisibility() {\n    this.showConfirmPassword = !this.showConfirmPassword;\n  }\n\n  togglePasswordForm() {\n    this.isPasswordFormVisible = !this.isPasswordFormVisible;\n  }\n\n  // toggleNomBoutiqueForm() {\n  //   this.isNomBoutiqueFormVisible = !this.isNomBoutiqueFormVisible;\n  // }\n\n  toggleUserForm() {\n    this.isUserFormVisible = !this.isUserFormVisible;\n  }\n\n  constructor(\n    private fb: FormBuilder,\n    private profilService: ProfilService,\n    private usersService: UsersService,\n    private cd: ChangeDetectorRef,\n  ) {}\n\n  ngOnInit(): void {\n    this.initForm();\n    this.getConnectedUserId();\n    this.getUserInfo();\n\n     const savedPhoto = localStorage.getItem('photo');\n      if (savedPhoto) {\n        this.photo = savedPhoto;\n      }\n      const savedQrCode = localStorage.getItem('qrCodeUrl');\n      if (savedQrCode) {\n        this.qrCodeUrl = savedQrCode;\n      }\n  }\n\n  private initForm(): void {\n    this.passwordForm = this.fb.group({\n      currentPassword: ['', [Validators.required]],\n      newPassword: ['', [Validators.required, Validators.minLength(8)]],\n      confirmPassword: ['', [Validators.required]]\n    }, { validators: this.passwordMatchValidator });\n\n    this.nomBoutiqueForm = this.fb.group({\n      selectedBoutique: ['', [Validators.required]],\n      nomBoutique: ['', [Validators.required]],\n      adresse: ['']\n    });\n\n    this.nomCompletForm = this.fb.group({\n      nomComplet: ['', [Validators.required]],\n      phone: ['', [Validators.required, Validators.pattern('^\\\\+?[0-9]{7,15}$')]], // Numéro valide\n      password: ['', [Validators.required, Validators.minLength(6)]] // Mot de passe avec min 6 caractères\n    });\n    \n  }\n\n  // Récupère l'id de l'utilisateur connecté via UsersService ou le localStorage\n  private getConnectedUserId(): void {\n    this.usersService.getUserInfo().subscribe({\n      next: (userInfo) => {\n        if (userInfo && (userInfo as any).id) {\n          this.userId = (userInfo as any).id;\n        } else {\n          const storedUser = JSON.parse(localStorage.getItem('user') || '{}');\n          if (storedUser && storedUser.id) {\n            this.userId = storedUser.id;\n          } else {\n            this.errorMessage = \"Utilisateur non authentifié.\";\n          }\n        }\n      },\n      error: (err) => {\n        console.error(\"Erreur lors de la récupération des infos utilisateur:\", err);\n        this.errorMessage = \"Impossible de récupérer l'utilisateur connecté.\";\n      }\n    });\n  }\n\n  get currentPassword() {\n    return this.passwordForm.get('currentPassword');\n  }\n  \n  get newPassword() {\n    return this.passwordForm.get('newPassword');\n  }\n  \n  get confirmPassword() {\n    return this.passwordForm.get('confirmPassword');\n  }\n\n  get nomBoutiqueControl() {\n    return this.nomBoutiqueForm.get('nomBoutique');\n  }\n\n  get adresseControl() {\n    return this.nomBoutiqueForm.get('adresse');\n  }\n\n  get nomCompletControl() {\n    return this.nomCompletForm.get('nomComplet');\n  }\n\n  get phoneControl() {\n    return this.nomCompletForm.get('phone');\n  }\n\n  get passwordControl() {\n    return this.nomCompletForm.get('password');\n  }\n  \n\n  // Validator pour vérifier que les deux nouveaux mots de passe correspondent\n  private passwordMatchValidator(form: FormGroup): ValidationErrors | null {\n    const newPassword = form.get('newPassword')?.value;\n    const confirmPassword = form.get('confirmPassword')?.value;\n    return newPassword === confirmPassword ? null : { mismatch: true };\n  }\n\n  // Méthode appelée lors de la soumission du formulaire\n  onSubmit(): void {\n    // Réinitialise les messages\n    this.errorMessage = null;\n    this.successMessage = null;\n  \n    // Vérifie la validité du formulaire\n    if (this.passwordForm.invalid) {\n      this.errorMessage = \"Veuillez remplir tous les champs correctement\";\n      return;\n    }\n  \n    const { currentPassword, newPassword, confirmPassword } = this.passwordForm.value;\n  \n    // Double vérification de la correspondance des mots de passe\n    if (newPassword !== confirmPassword) {\n      this.errorMessage = \"Les nouveaux mots de passe ne correspondent pas\";\n      return;\n    }\n  \n    // Active l'état de chargement\n    // this.isLoading = true;\n  \n    // Prépare la requête\n    const request: UpdateUserRequest = {\n      password: currentPassword,\n      newPassword: newPassword\n    };\n  \n    // Appel au service\n    this.profilService.updatePassword(this.userId, request).subscribe({\n      next: (response) => {\n        // Si le serveur retourne du texte, le traiter ici\n        this.successMessage = response.includes('succès') ? response : \"Mot de passe modifié !\";\n        this.isPasswordFormVisible = false;\n        this.passwordForm.reset();\n        setTimeout(() => this.successMessage = null, 10000);\n      },\n      error: (error) => {\n        // Gérer les erreurs de parsing ou autres\n        if (error instanceof HttpErrorResponse) {\n          this.errorMessage = error.error.message || error.error || \"Erreur inconnue\";\n        }\n        setTimeout(() => this.errorMessage = null, 10000);\n      },\n      // complete: () => {\n      //   this.isLoading = false;\n      // }\n    });\n  }\n\n  getUserInfo(): void {\n    this.usersService.getUserInfo().subscribe({\n      next: (user) => {\n        this.userName = user.nomComplet;\n        this.personalCode = user.personalCode;\n        this.nomEntreprise = user.nomEntreprise\n        this.email = user.email;\n        this.phone = user.phone;\n        this.photo = user.photo ? `${this.imgUrl}${user.photo}` : '';\n        this.qrCodeUrl = user.qrCodeUrl ? `${this.imgUrl}${user.qrCodeUrl}` : '';\n        this.roleType = user.roleType;\n        this.pays = user.pays;\n        this.nomBoutique = user.boutiques?.length ? user.boutiques[0].nomBoutique : 'Aucune boutique';\n        this.flagPays = this.paysFlags[this.pays] || '';\n        this.boutiques = user.boutiques || [];\n        console.log(\"Liste des boutiques:\", this.boutiques);\n        console.log(\"Infos utilisateur récupérées :\", user);\n        console.log(\"QR Code URL construite :\", this.qrCodeUrl);\n\n        \n      },\n      error: (err) => {\n        console.error(\"Erreur lors de la récupération des infos utilisateur :\", err);\n      }\n    });\n  }\n\n  onBoutiqueSelect() {\n    const boutiqueId = this.nomBoutiqueForm.get('selectedBoutique')?.value;\n    const selectedBoutique = this.boutiques.find(b => b.id === boutiqueId);\n    \n    if (selectedBoutique) {\n      this.nomBoutiqueForm.patchValue({\n        nomBoutique: selectedBoutique.nomBoutique,\n        adresse: selectedBoutique.adresse\n      });\n    }\n  }\n\n  // onSubmitNomBoutique(): void {\n  //   this.errorMessage = null;\n  //   this.successMessage = null;\n    \n  //   if (this.nomBoutiqueForm.invalid) {\n  //     this.errorMessage = \"Veuillez remplir tous les champs correctement\";\n  //     return;\n  //   }\n  \n  //   const boutiqueId = this.nomBoutiqueForm.value.selectedBoutique;\n  //   const nomBoutique = this.nomBoutiqueForm.value.nomBoutique;\n  //   const adresse = this.nomBoutiqueForm.value.adresse;\n  \n  //   this.usersService.updateBoutique(boutiqueId, { nomBoutique, adresse }).subscribe({\n  //     next: (response) => {\n  //       // Mettre à jour le tableau local\n  //       const index = this.boutiques.findIndex(b => b.id === boutiqueId);\n  //       if (index > -1) {\n  //         this.boutiques[index] = { \n  //           ...this.boutiques[index], \n  //           nomBoutique: nomBoutique,\n  //           adresse: adresse \n  //         };\n  //       }\n  \n  //       this.successMessage = \"Boutique mise à jour avec succès !\";\n  //       this.isNomBoutiqueFormVisible = false;\n  //       this.nomBoutiqueForm.reset();\n  //       setTimeout(() => this.successMessage = null, 10000);\n  //     },\n  //     error: (error) => {\n  //       if (error instanceof HttpErrorResponse) {\n  //         this.errorMessage = error.error.message || error.error || \"Erreur inconnue\";\n  //       }\n  //       setTimeout(() => this.errorMessage = null, 10000);\n  //     },\n  //   });\n  // }\n\n  // private refreshBoutiques(): void {\n  //   this.usersService.getUserInfo().subscribe({\n  //     next: (user) => {\n  //       this.boutiques = user.boutiques || [];\n  //     },\n  //     error: (err) => {\n  //       console.error(\"Erreur rafraîchissement boutiques:\", err);\n  //     }\n  //   });\n  // }\n\n  updateBoutique(id: number, nomBoutique: string, adresse: string): void {\n    const updates = { nomBoutique, adresse };\n    this.usersService.updateBoutique(id, updates).subscribe(\n      response => {\n        if (response.message) {\n          console.log(response.message);\n        } else if (response.error) {\n          console.error(response.error);\n        }\n      },\n      error => {\n        console.error('Erreur lors de la mise à jour de la boutique:', error);\n      }\n    );\n  }\n\n  onSubmitUpdateUser(): void {\n    this.errorMessage = null;\n    this.successMessage = null;\n\n    if (this.nomCompletForm.invalid) {\n      this.errorMessage = \"Veuillez remplir tous les champs correctement\";\n      return;\n    }\n\n    const { nomComplet, phone, password } = this.nomCompletForm.value;\n\n    // Création de l'objet DTO à envoyer\n    const userData = {\n      nomComplet,\n      phone,\n      password\n    };\n\n    // Construction du FormData\n    const formData = new FormData();\n    formData.append('user', JSON.stringify(userData)); // 'user' correspond à @RequestPart(\"user\") côté Spring\n\n    if (this.imageFile) {\n      formData.append('photo', this.imageFile); // 'photo' correspond à @RequestPart(\"photo\") côté Spring\n    }\n\n    this.usersService.updateUser(this.userId, formData).subscribe({\n      next: (response) => {\n        console.log(\"✅ Réponse backend :\", response);\n        this.successMessage = typeof response === 'string'\n          ? response\n          : response?.message || \"Profil mis à jour avec succès !\";\n\n        this.nomCompletForm.reset();\n        this.isUserFormVisible = false;\n        setTimeout(() => this.successMessage = null, 10000);\n      },\n      error: (error) => {\n        console.error(\"❌ Erreur update :\", error);\n        if (error instanceof HttpErrorResponse) {\n          this.errorMessage = error.error.message || error.error || \"Erreur inconnue\";\n        }\n        setTimeout(() => this.errorMessage = null, 10000);\n      }\n    });\n  }\n\n   async testImageCompression(file: File): Promise<File | null> {\n  if (!file) {\n    console.log('Aucun fichier sélectionné.');\n    return null;\n  }\n\n  console.log('Taille originale:', file.size / 1024, 'Ko');\n\n  const options = {\n    maxSizeMB: 1,\n    maxWidthOrHeight: 1000,\n    useWebWorker: true,\n  };\n\n  try {\n    const compressedFile = await imageCompression(file, options);\n    console.log('Taille après compression:', compressedFile.size / 1024, 'Ko');\n\n    if (!compressedFile.type.startsWith('image/')) {\n      console.error('Le fichier compressé n\\'est pas un format d\\'image valide.');\n      this.errorMessage = 'Erreur de compression : Le fichier n\\'est pas une image.';\n      return null;\n    }\n\n\n    return compressedFile;\n\n  } catch (error) {\n    console.error('Erreur lors de la compression:', error);\n    return null;\n  }\n  }\n\n\nasync onFileSelected(event: Event): Promise<void> {\n  const input = event.target as HTMLInputElement;\n\n  if (input.files && input.files[0]) {\n    const file = input.files[0];\n\n    try {\n      const compressedFile = await this.testImageCompression(file);\n\n      if (!compressedFile) {\n        console.error(\"Compression échouée ou image invalide.\");\n        return;\n      }\n\n      this.imageFile = compressedFile;\n\n      const reader = new FileReader();\n      reader.onload = (e: any) => {\n        const base64 = e.target.result;\n        this.photo = base64;\n        localStorage.setItem('photo', base64);\n        window.dispatchEvent(new Event('storage-photo-update'));\n      };\n      reader.readAsDataURL(compressedFile);\n\n      const formData = new FormData();\n\n      // Récupérer l'extension du fichier d'origine\n      const extension = file.name.split('.').pop();\n      const nomFichierFinal = `photo_profil_${Date.now()}.${extension}`;\n\n      // Ajouter le fichier avec un nom explicite\n      formData.append('photo', this.imageFile, nomFichierFinal);\n\n      this.usersService.updateUser(this.userId, formData).subscribe({\n        next: (response) => {\n          console.log(\"✅ Image mise à jour :\", response);\n          if (response.photo) {\n            this.photo = response.photo;\n          }\n          this.successMessage = \"Photo de profil mise à jour avec succès !\";\n          setTimeout(() => this.successMessage = null, 5000);\n        },\n        error: (error) => {\n          console.error(\"❌ Erreur mise à jour :\", error);\n          this.errorMessage = \"Échec de la mise à jour de la photo.\";\n          setTimeout(() => this.errorMessage = null, 5000);\n        }\n      });\n\n    } catch (error) {\n      console.error(\"Erreur lors de la compression ou de l'envoi :\", error);\n      this.errorMessage = \"Erreur lors de la compression ou de l'envoi.\";\n      setTimeout(() => this.errorMessage = null, 5000);\n    }\n  }\n}\n\n\n  changerPhoto(event: Event) {\n    event.stopPropagation();\n    const fileInput = document.getElementById('fileInput') as HTMLInputElement;\n    fileInput.click();\n  }\n\n  visualiserPhoto(event: Event) {\n    const target = event.target as HTMLElement;\n    if (target.classList.contains('camera-icon')) return;\n\n    this.isModalOpen = true;\n  }\n\n  fermerModal() {\n    this.isModalOpen = false;\n  }\n  \n  showCode = false;\n   toggleCodeVisibility() {\n    this.showCode = !this.showCode;\n  }\n\n\n@HostListener('document:click', ['$event'])\nonDocumentClick(event: MouseEvent): void {\n  const target = event.target as HTMLElement;\n  const clickedInside = target.closest('.profile-img-wrapper, .dropdown-menu');\n\n  if (!clickedInside) {\n    this.menuOuvert = false;\n  }\n}\n\nmenuOuvert: boolean = false;\ntoggleMenu(event: MouseEvent): void {\n  event.stopPropagation(); \n  this.menuOuvert = !this.menuOuvert;\n}\n\nafficherConfirmation: boolean = false;\n\nsupprimerPhoto(event: MouseEvent): void {\n  event.stopPropagation();\n  this.afficherConfirmation = true;\n}\n\nconfirmerSuppression(): void {\n  const formData = new FormData();\n  formData.append('deletePhoto', 'true');\n  formData.append('user', JSON.stringify({}));\n\n  this.usersService.updateUser(this.userId, formData).subscribe({\n    next: () => {\n      this.photo = null;\n      localStorage.removeItem('photo');\n      window.dispatchEvent(new Event('storage-photo-update'));\n      this.afficherConfirmation = false;\n    },\n    error: (err) => {\n      console.error('Erreur suppression photo', err);\n      this.afficherConfirmation = false;\n    }\n  });\n}\n\nannulerSuppression(): void {\n  this.afficherConfirmation = false;\n}\n\n@ViewChild('video') videoElement!: ElementRef;\n@ViewChild('canvas') canvasElement!: ElementRef;\n\n\ncameraActive = false;\nouvrirCamera(event: MouseEvent): void {\n  event.stopPropagation();\n  this.cameraActive = true;\n\n  navigator.mediaDevices.getUserMedia({ video: true })\n    .then((stream) => {\n      this.videoElement.nativeElement.srcObject = stream;\n    })\n    .catch((err) => {\n      console.error(\"Erreur ouverture caméra :\", err);\n    });\n}\nfermerCamera(): void {\n  this.cameraActive = false;\n\n  const stream = this.videoElement.nativeElement.srcObject;\n  const tracks = stream?.getTracks();\n\n  tracks?.forEach((track: any) => track.stop());\n  this.videoElement.nativeElement.srcObject = null;\n}\n\nasync prendrePhoto(): Promise<void> {\n  const video = this.videoElement.nativeElement;\n  const canvas = this.canvasElement.nativeElement;\n\n  const width = video.videoWidth;\n  const height = video.videoHeight;\n\n  canvas.width = width;\n  canvas.height = height;\n\n  const ctx = canvas.getContext('2d');\n  ctx.drawImage(video, 0, 0, width, height);\n\n  // Récupère l'image en base64\n  const base64DataUrl = canvas.toDataURL('image/jpeg');\n\n  // Convertir base64 → Blob → File\n  const blob = await (await fetch(base64DataUrl)).blob();\n  const file = new File([blob], `photo_profil_${Date.now()}.jpg`, {\n    type: 'image/jpeg'\n  });\n\n  try {\n    const compressedFile = await this.testImageCompression(file);\n\n    if (!compressedFile) {\n      console.error(\"Compression échouée ou image invalide.\");\n      return;\n    }\n\n    this.imageFile = compressedFile;\n\n    // Affichage dans le profil (base64 preview)\n    const reader = new FileReader();\n    reader.onload = (e: any) => {\n      const base64 = e.target.result;\n      this.photo = base64;\n      localStorage.setItem('photo', base64);\n      window.dispatchEvent(new Event('storage-photo-update'));\n    };\n    reader.readAsDataURL(compressedFile);\n\n    const formData = new FormData();\n    formData.append('photo', this.imageFile, this.imageFile.name);\n\n    this.usersService.updateUser(this.userId, formData).subscribe({\n      next: (response) => {\n        console.log(\"✅ Image mise à jour depuis caméra :\", response);\n        this.successMessage = \"Photo prise et mise à jour avec succès !\";\n        this.fermerCamera();\n        setTimeout(() => this.successMessage = null, 5000);\n      },\n      error: (error) => {\n        console.error(\"❌ Erreur de mise à jour :\", error);\n        this.errorMessage = \"Erreur lors de l'envoi de la photo.\";\n        setTimeout(() => this.errorMessage = null, 5000);\n      }\n    });\n\n  } catch (error) {\n    console.error(\"Erreur lors du traitement de la photo :\", error);\n    this.errorMessage = \"Erreur lors de la prise ou de l'envoi.\";\n    setTimeout(() => this.errorMessage = null, 5000);\n  }\n}\n\n  \nisExpanded = false;\n\ntoggleExpand(event: Event) {\n    event.stopPropagation();\n    this.isExpanded = !this.isExpanded;\n  }\n\n  @HostListener('document:click')\n  onClick() {\n    if (this.isExpanded) {\n      this.isExpanded = false;\n    }\n  }\n}\n","<div class=\"toast-container\">\n\n  <div *ngIf=\"errorMessage\" class=\"alert alert-danger toast-message-danger\">\n    {{ errorMessage }}\n  </div>\n  <div *ngIf=\"successMessage\" class=\"alert alert-success toast-message-success\">\n    {{ successMessage }}\n  </div>\n\n</div>\n\n\n<div class=\"tab-content\">\n    <div class=\"container_compte_profil\">\n        <div class=\"champ_grid_double\">\n            <!-- // Cadre photo left -->\n            <div class=\"setting_profil cadre_photo\">\n                <div class=\"content_setting_profil profile\">\n                    <!-- // titre de profil  -->\n                    <div class=\"tilte_profil\">\n                        <h4>Page profil</h4>\n                        <p>Changez votre photo de profil à partir d'ici</p>\n                    </div>\n\n                    <!-- // Img de profil  -->\n                    <div class=\"profile-img-wrapper\">\n                        <img\n                          [src]=\"photo || 'assets/img/profil.png'\"\n                          (error)=\"photo = 'assets/img/profil.png'\"\n                          alt=\"Photo de profil\"\n                          class=\"profile-img\"\n                          (click)=\"visualiserPhoto($event)\" />\n\n                        <!-- Icône en haut à droite -->\n                        <div class=\"menu-button\" (click)=\"toggleMenu($event)\">\n                         <div class=\"in\">\n                          <i class=\"far fa-image\" aria-hidden=\"true\"></i>\n                          <span>changer la <br>\n                            photo de\n                             <br> profil</span>\n                        </div>\n\n                        </div>\n\n                    </div>\n                  <!-- Dropdown -->\n                      <div class=\"dropdown-menu\" *ngIf=\"menuOuvert\">\n                          <button (click)=\"visualiserPhoto($event)\">\n                            <i class=\"fa fa-eye icon-in-menu\"></i>\n                            Voir la photo\n                          </button>\n\n                           <button (click)=\"ouvrirCamera($event)\">\n                            <i class=\"fa fa-camera icon-in-menu\"></i>\n                            Prendre une photo\n                          </button>\n\n                          <button (click)=\"changerPhoto($event)\">\n                            <i class=\"fa fa-folder-open icon-in-menu\"></i>\n                            Importer une photo\n                          </button>\n\n                        <button class=\"danger-btn\" (click)=\"supprimerPhoto($event)\">\n                          <i class=\"fas fa-trash icon-in-menu\"></i>\n                          Supprimer la photo\n                        </button>\n\n                      </div>\n                    <input\n                      type=\"file\"\n                      id=\"fileInput\"\n                      accept=\"image/*\"\n                      (change)=\"onFileSelected($event)\"\n                      hidden />\n\n                       <!-- Modale de confirmation suppression -->\n                        <div class=\"confirmation-modal-aver\" *ngIf=\"afficherConfirmation\">\n                          <div class=\"modal-content-aver\">\n                            <!-- <h4 style=\"font-size: 16px; margin-bottom: 10px;\">Informations</h4> -->\n                            <p style=\"margin: 0; font-size: 12px;\">\n                              Voulez-vous supprimer votre  votre <br />\n                              photo de profil ?\n                            </p>\n                            <div class=\"modal-actions-aver\">\n                              <button class=\"btn-confirm\" style=\"font-size: 12px;\" (click)=\"confirmerSuppression()\">Oui</button>\n                              <button class=\"btn-cancel\" style=\"font-size: 12px;\" (click)=\"annulerSuppression()\">Non</button>\n                            </div>\n                          </div>\n                        </div>\n\n                        \n                        <!-- MODALE CAMERA -->\n                        <div class=\"camera-modal\" *ngIf=\"cameraActive\">\n                          <div class=\"camera-content\">\n                            <video #video autoplay></video>\n\n                          <!-- Annuler -->\n                          <button class=\"close-camera-btn\" (click)=\"fermerCamera()\">\n                            <i class=\"fas fa-times\"></i>\n                          </button>\n\n                          <!-- Capturer -->\n                          <div class=\"capture-btn-wrapper\">\n                            <button class=\"capture-btn pulse\" (click)=\"prendrePhoto()\">\n                              <i class=\"fas fa-camera\"></i>\n                            </button>\n                          </div>\n\n\n                            <canvas #canvas hidden></canvas>\n                          </div>\n                        </div>\n\n\n\n                    <!-- Lightbox de visualisation -->\n                    <div class=\"photo-modal\" *ngIf=\"isModalOpen\" (click)=\"fermerModal()\">\n                      <div class=\"photo-modal-content\" (click)=\"$event.stopPropagation()\">\n                        <img [src]=\"photo || 'assets/img/profil.png'\"(error)=\"photo = 'assets/img/profil.png'\">\n                        <button class=\"fermer-btn\" (click)=\"fermerModal()\">✕</button>\n                      </div>\n                    </div>\n\n                    <!-- // Qr code  -->\n                    <div>\n                      <img [src]=\"qrCodeUrl\" \n                          alt=\"qrCodeUrl code\" \n                          class=\"qrcode-img\" \n                          [class.expanded]=\"isExpanded\"\n                          (click)=\"toggleExpand($event)\" />\n                    </div>\n\n\n                 \n                    <h2>{{ userName }}</h2>\n                    \n                    <p class=\"profil_email\">{{ email }}</p>\n\n                    <h5 style=\"color: #0672E4; letter-spacing: 0.60px;\">{{ roleType }}</h5>\n\n                    <div class=\"stats\">\n                      <div>Code Personnel<br>\n                        <span class=\"showCode\" [ngClass]=\"{ 'blurred': !showCode }\" >{{ personalCode }}</span>\n                          <button class=\"btnC\"\n                          (click)=\"toggleCodeVisibility()\" \n                          style=\"background: none; border: none; cursor: pointer;\"\n                          aria-label=\"Afficher/Masquer le code\"\n                        >\n                          <i class=\"fa\" [ngClass]=\"showCode ? 'fa-eye-slash' : 'fa-eye'\"></i>\n                        </button>\n                      </div>\n                    </div>\n                   \n                </div>\n            </div>\n            <!-- // Cadre password right -->\n            <div class=\"setting_profil cadre_password\">\n                <!-- // titre de profil  -->\n                <div class=\"tilte_profil\">\n                    <h5>Information personnel</h5>\n                    <p>Pour changer les informations vous pouvez  <br>le faire dans paramètre</p>\n                </div>\n\n                <!-- // Input pour changer mot de passe  -->\n                <div class=\"info_titre_input\">\n                    <!-- <h5>Modifier mot de passe</h5> -->\n\n                    <!-- Nom de entreprise -->\n                    <div class=\"champ_input\">\n                        <input id=\"company\" value=\"{{nomEntreprise}}\" disabled class=\"input_focus\" style=\"cursor: no-drop;\">\n                        <label for=\"company\" class=\"label labelColor\">Votre email</label>\n                    </div>\n\n                    <!-- Emial de entreprise  -->\n                    <div class=\"champ_input\">\n                        <input id=\"email\" value=\"{{email}}\" disabled class=\"input_focus\" style=\"cursor: no-drop;\">\n                        <label for=\"email\" class=\"label labelColor\">Votre email</label>\n                    </div>\n\n                    <!-- Pays et telephone -->\n                    <div class=\"champ_grid\">\n                      <!-- Pays  -->\n                      <div class=\"champ_input\">\n                          <input id=\"city\" value=\"{{pays}} {{ flagPays }}\" disabled class=\"input_focus\" style=\"cursor: no-drop;\">\n                          <label for=\"city\" class=\"label labelColor\">Pays</label>\n                      </div>\n                      <!-- Telephone  -->\n                      <div class=\"champ_input\">\n                          <input id=\"lastName\" value=\"{{phone || 'Aucun numéro'}}\" disabled class=\"input_focus\" style=\"cursor: no-drop;\">\n                          <label for=\"lastName\" class=\"label labelColor\">Numéro téléphone</label>\n                      </div>\n                    </div>\n\n                    <!-- Les boutiques  -->\n                     <div class=\"form-row\" style=\"margin-top: 20px;\"> \n                      <label for=\"boutiques\">Boutiques</label>\n                      <div id=\"boutiques\" class=\"boutiques-list\">\n                        <span *ngFor=\"let boutique of boutiques\" class=\"boutique-tag\">\n                          {{ boutique.nomBoutique }}\n                        </span>\n                        <span *ngIf=\"boutiques.length === 0\">Aucune boutique</span>\n                      </div>\n                    </div>\n                </div>\n                \n            </div>\n        </div>\n        <!-- // Reste de l'information de user pour la modification  -->\n        <div class=\"info_personnel\">\n            <!-- // titre de profil  -->\n            <div class=\"tilte_profil\">\n                <h5>Détails personnels</h5>\n                <p>Pour modifier vos informations personnelles, modifiez-les et enregistrez-les ici</p>\n            </div>\n        </div>\n        \n         \n    </div>\n</div>\n\n"],"names":["FormsModule","ReactiveFormsModule","Validators","CommonModule","HttpErrorResponse","environment","imageCompression","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","errorMessage","successMessage","ɵɵlistener","ProfilComponent_div_24_Template_button_click_1_listener","$event","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","visualiserPhoto","ɵɵelement","ProfilComponent_div_24_Template_button_click_4_listener","ouvrirCamera","ProfilComponent_div_24_Template_button_click_7_listener","changerPhoto","ProfilComponent_div_24_Template_button_click_10_listener","supprimerPhoto","ProfilComponent_div_26_Template_button_click_7_listener","_r3","confirmerSuppression","ProfilComponent_div_26_Template_button_click_9_listener","annulerSuppression","ProfilComponent_div_27_Template_button_click_4_listener","_r4","fermerCamera","ProfilComponent_div_27_Template_button_click_7_listener","prendrePhoto","ProfilComponent_div_28_Template_div_click_0_listener","_r5","fermerModal","ProfilComponent_div_28_Template_div_click_1_listener","stopPropagation","ProfilComponent_div_28_Template_img_error_2_listener","photo","ProfilComponent_div_28_Template_button_click_3_listener","ɵɵproperty","ɵɵsanitizeUrl","boutique_r6","nomBoutique","ProfilComponent","toggleCurrentPasswordVisibility","showCurrentPassword","toggleNewPasswordVisibility","showNewPassword","toggleConfirmPasswordVisibility","showConfirmPassword","togglePasswordForm","isPasswordFormVisible","toggleUserForm","isUserFormVisible","constructor","fb","profilService","usersService","cd","isLoading","nomComplet","password","imageFile","userName","nomEntreprise","email","phone","roleType","pays","boutiqueAdresse","flagPays","personalCode","qrCodeUrl","isNomBoutiqueFormVisible","boutiques","imgUrl","newPhotoUrl","isModalOpen","paysFlags","showCode","menuOuvert","afficherConfirmation","cameraActive","isExpanded","ngOnInit","initForm","getConnectedUserId","getUserInfo","savedPhoto","localStorage","getItem","savedQrCode","passwordForm","group","currentPassword","required","newPassword","minLength","confirmPassword","validators","passwordMatchValidator","nomBoutiqueForm","selectedBoutique","adresse","nomCompletForm","pattern","subscribe","next","userInfo","id","userId","storedUser","JSON","parse","error","err","console","get","nomBoutiqueControl","adresseControl","nomCompletControl","phoneControl","passwordControl","form","value","mismatch","onSubmit","invalid","request","updatePassword","response","includes","reset","setTimeout","message","user","length","log","onBoutiqueSelect","boutiqueId","find","b","patchValue","updateBoutique","updates","onSubmitUpdateUser","userData","formData","FormData","append","stringify","updateUser","testImageCompression","file","_this","_asyncToGenerator","size","options","maxSizeMB","maxWidthOrHeight","useWebWorker","compressedFile","type","startsWith","onFileSelected","event","_this2","input","target","files","reader","FileReader","onload","e","base64","result","setItem","window","dispatchEvent","Event","readAsDataURL","extension","name","split","pop","nomFichierFinal","Date","now","fileInput","document","getElementById","click","classList","contains","toggleCodeVisibility","onDocumentClick","clickedInside","closest","toggleMenu","removeItem","navigator","mediaDevices","getUserMedia","video","then","stream","videoElement","nativeElement","srcObject","catch","tracks","getTracks","forEach","track","stop","_this3","canvas","canvasElement","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","base64DataUrl","toDataURL","blob","fetch","File","toggleExpand","onClick","ɵɵdirectiveInject","i1","FormBuilder","i2","ProfilService","i3","UsersService","ChangeDetectorRef","selectors","viewQuery","ProfilComponent_Query","rf","ProfilComponent_click_HostBindingHandler","ɵɵresolveDocument","ɵɵtemplate","ProfilComponent_div_1_Template","ProfilComponent_div_2_Template","ProfilComponent_Template_img_error_14_listener","ProfilComponent_Template_img_click_14_listener","ProfilComponent_Template_div_click_15_listener","ProfilComponent_div_24_Template","ProfilComponent_Template_input_change_25_listener","ProfilComponent_div_26_Template","ProfilComponent_div_27_Template","ProfilComponent_div_28_Template","ProfilComponent_Template_img_click_30_listener","ProfilComponent_Template_button_click_43_listener","ProfilComponent_span_75_Template","ProfilComponent_span_76_Template","ɵɵclassProp","ɵɵtextInterpolate","ɵɵpureFunction1","_c2","ɵɵpropertyInterpolate","ɵɵpropertyInterpolate2","i4","NgClass","NgForOf","NgIf","styles"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}