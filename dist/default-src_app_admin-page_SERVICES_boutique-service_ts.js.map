{"version":3,"file":"default-src_app_admin-page_SERVICES_boutique-service_ts.js","mappings":"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","sources":["./src/app/admin-page/SERVICES/boutique-service.ts"],"sourcesContent":["import { HttpClient, HttpHeaders, HttpParams } from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\nimport { Boutique } from \"../MODELS/boutique-model\";\nimport { catchError, map, Observable, switchMap, throwError } from \"rxjs\";\nimport { environment } from \"src/environments/environment\";\nimport { Produit } from \"../MODELS/produit.model\";\nimport { Users } from \"../MODELS/utilisateur.model\";\nimport { UsersService } from \"./users.service\";\nimport { AssignerVendeurRequest } from \"../MODELS/AssignerVendeurRequest\";\nimport { ProduitStockPaginatedResponse } from \"./produit.service\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BoutiqueService {\n  private apiUrl = environment.apiBaseUrl;\n\n  constructor(private http: HttpClient, private usersService: UsersService) { }\n\n  updateBoutique(\n  id: number, \n  updates: { nomBoutique: string; adresse: string; telephone: string; email: string }\n): Observable<{ message?: string; error?: string }> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Aucun token trouvé');\n        return throwError(() => new Error('Aucun token trouvé'));\n      }\n\n      const headers = new HttpHeaders({\n        Authorization: `Bearer ${token}`\n      });\n\n      return this.http.put<{ message?: string; error?: string }>(\n        `${this.apiUrl}/updatedBoutique/${id}`, \n        updates, \n        { headers }\n      );\n    }),\n    catchError(error => {\n      console.error('Erreur lors de la mise à jour de la boutique:', error);\n      return throwError(() => error);\n    })\n  );\n}\n\n\n  // LL recuperation de boutique dans e/ses\n getBoutiquesByEntreprise(): Observable<any[]> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Aucun token trouvé');\n        return throwError(() => new Error('Aucun token trouvé'));\n      }\n\n      const headers = new HttpHeaders({\n        Authorization: `Bearer ${token}`\n      });\n\n      return this.http.get<any[]>(`${this.apiUrl}/boutiqueEntreprise`, { headers });\n    }),\n    catchError(error => {\n      console.error('Erreur lors de la récupération des boutiques:', error);\n      return throwError(() => error);\n    })\n  );\n  }\n\n  // Nouvelle méthode pour récupérer les détails d'un produit par son ID\n getBoutiqueById(id: number): Observable<Boutique> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Aucun token trouvé');\n        return throwError(() => new Error('Aucun token trouvé'));\n      }\n      const headers = new HttpHeaders({ 'Authorization': `Bearer ${token}` });\n      return this.http.get<Boutique>(`${this.apiUrl}/boutique/${id}`, { headers });\n    }),\n    catchError(error => {\n      console.error('Erreur lors de la récupération de la boutique:', error);\n      return throwError(() => error);\n    })\n  );\n  }\n\n  activerBoutique(id: number): Observable<any> {\n    return this.usersService.getValidAccessToken().pipe(\n      switchMap(token => {\n        if (!token) {\n          console.error('Aucun token trouvé');\n          return throwError(() => new Error('Aucun token trouvé'));\n        }\n        const headers = new HttpHeaders({ 'Authorization': `Bearer ${token}` });\n        return this.http.put(`${this.apiUrl}/activerBoutique/${id}`, {}, { headers });\n      }),\n      catchError(error => {\n        console.error('Erreur lors de l\\'activation de la boutique:', error);\n        return throwError(() => error);\n      })\n    );\n  }\n    \n  desactiverBoutique(id: number): Observable<any> {\n    return this.usersService.getValidAccessToken().pipe(\n      switchMap(token => {\n        if (!token) {\n          console.error('Aucun token trouvé');\n          return throwError(() => new Error('Aucun token trouvé'));\n        }\n        const headers = new HttpHeaders({ 'Authorization': `Bearer ${token}` });\n        return this.http.put(`${this.apiUrl}/desactiverBoutique/${id}`, {}, { headers });\n      }),\n      catchError(error => {\n        console.error('Erreur lors de la désactivation de la boutique:', error);\n        return throwError(() => error);\n      })\n    );\n  }\n\n  //Delet\n  deleteBoutique(id: number): Observable<any> {\n    return this.usersService.getValidAccessToken().pipe(\n      switchMap(token => {\n        if (!token) {\n          console.error('Aucun token trouvé');\n          return throwError(() => new Error('Aucun token trouvé'));\n        }\n        const headers = new HttpHeaders({ 'Authorization': `Bearer ${token}` });\n        return this.http.delete(`${this.apiUrl}/boutique/${id}`, { headers });\n      }),\n      catchError(error => {\n        console.error('Erreur lors de la suppression de la boutique:', error);\n        return throwError(() => error);\n      })\n    );\n  }\n\n  // getProductsByBoutiqueId(id: number): Observable<any> {\n  //   return this.http.get<any>(`${this.apiUrl}/boutiques/${id}/produits`);\n  // }\n\n  getProductsByBoutiqueId(id: number): Observable<Produit[]> {\n    return this.usersService.getValidAccessToken().pipe(\n      switchMap(token => {\n        if (!token) {\n          console.error('Aucun token trouvé');\n          return throwError(() => new Error('Aucun token trouvé'));\n        }\n        const headers = new HttpHeaders({ Authorization: `Bearer ${token}` });\n        return this.http.get<Produit[]>(`${this.apiUrl}/boutique/${id}/produits`, { headers });\n      }),\n      catchError(error => {\n        console.error('Erreur lors de la récupération des produits:', error);\n        return throwError(() => error);\n      })\n    );\n  }\n\n/*  getVendeursByBoutiqueId(id: number): Observable<Users[]> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Aucun token trouvé');\n        return throwError(() => new Error('Aucun token trouvé'));\n      }\n      const headers = new HttpHeaders({ Authorization: `Bearer ${token}` });\n      return this.http.get<Users[]>(`${this.apiUrl}/${id}/vendeurs`, { headers });\n    }),\n    catchError(error => {\n      console.error('Erreur lors de la récupération des vendeurs:', error);\n      return throwError(() => error);\n    })\n  );\n}\n*/\n  \n copierProduits(detailsCopie: {\n  boutiqueSourceId: number;\n  boutiqueDestinationId: number;\n  toutCopier: boolean;\n  produitIds?: number[];\n}): Observable<any> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        return throwError(() => new Error('Aucun token trouvé'));\n      }\n\n        const headers = new HttpHeaders({\n          Authorization: `Bearer ${token}`\n        });\n\n        return this.http.post(\n          `${this.apiUrl}/copier-produits`, \n          detailsCopie, \n          { \n            headers,\n            responseType: 'json' \n          }\n        );\n      }),\n      catchError(error => {\n        if (error.error && typeof error.error === 'string') {\n          try {\n            const parsedError = JSON.parse(error.error);\n            return throwError(() => parsedError);\n          } catch (e) {\n            return throwError(() => ({ message: error.error }));\n          }\n        }\n        return throwError(() => error);\n      })\n    );\n  }\n\n  mettreEnCorbeille(produitId: number): Observable<{ message: string; status: string }> {\n    return this.usersService.getValidAccessToken().pipe(\n      switchMap(token => {\n        if (!token) {\n          return throwError(() => new Error('Aucun token trouvé'));\n        }\n\n        const headers = new HttpHeaders({\n          Authorization: `Bearer ${token}`\n        });\n\n        return this.http.delete<{ message: string; status: string }>(\n          `${this.apiUrl}/corbeille/${produitId}`,\n          { headers }\n        );\n      }),\n      catchError(error => {\n        let errorMsg = 'Erreur lors de la mise en corbeille';\n        if (error.error?.message) {\n          errorMsg = error.error.message;\n        } else if (error.message) {\n          errorMsg = error.message;\n        }\n        return throwError(() => new Error(errorMsg));\n      })\n    );\n  }\n\n  associateUserToBoutique(boutiqueId: number, userId: number): Observable<any> {\n    return this.http.post(`${this.apiUrl}/boutiques/${boutiqueId}/users/${userId}`, {});\n  }\n\n\n  // Assignation des vendeur\n\n  assignerVendeur(request: AssignerVendeurRequest): Observable<any> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Aucun token trouvé');\n        return throwError(() => new Error('Aucun token trouvé'));\n      }\n\n      const headers = new HttpHeaders({ 'Authorization': `Bearer ${token}` });\n\n      // Appel à l'API backend pour assigner les vendeurs\n      return this.http.post(`${this.apiUrl}/assigner-vendeur`, request, { headers });\n    }),\n    catchError(error => {\n      console.error('Erreur lors de l\\'assignation du vendeur:', error);\n      return throwError(() => error);\n    })\n  );\n}\n\n// Retirer vendeur\nretirerVendeur(request: AssignerVendeurRequest): Observable<any>{\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Aucun token trouvé');\n        return throwError(() => new Error('Aucun token trouvé'));\n      }\n      const headers = new HttpHeaders({ 'Authorization': `Bearer ${token}` });\n      return this.http.post(`${this.apiUrl}/retirer-vendeur`, request, { headers });\n    }),\n    catchError(error => {\n      console.error('Erreur lors de l\\'assignation du vendeur:', error);\n      return throwError(() => error);\n    })\n  );\n\n}\n\n// Get Vendeurs d'une boutique\ngetVendeursDeBoutique(boutiqueId: number): Observable<any> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap(token => {\n      if (!token) {\n        console.error('Aucun token trouvé');\n        return throwError(() => new Error('Aucun token trouvé'));\n      }\n      const headers = new HttpHeaders({ 'Authorization': `Bearer ${token}` });\n\n      return this.http.get(`${this.apiUrl}/vendeurs/${boutiqueId}`, { headers }).pipe(\n        catchError(error => {\n          console.error('Erreur lors de la récupération des vendeurs:', error);\n          return throwError(() => error);\n        })\n      );\n    })\n  );\n}\n\n// Remplacer l'ancienne méthode par celle-ci\ngetProduitsBoutiquePaginated(boutiqueId: number, page: number = 0, size: number = 20): Observable<ProduitStockPaginatedResponse> {\n  return this.usersService.getValidAccessToken().pipe(\n    switchMap((token: string) => {\n      const headers = new HttpHeaders({ Authorization: `Bearer ${token}` });\n      const params = new HttpParams()\n        .set('page', page.toString())\n        .set('size', size.toString());\n      \n      return this.http.get<ProduitStockPaginatedResponse>(\n        `${this.apiUrl}/boutique/${boutiqueId}/produits/paginated`, \n        { headers, params }\n      ).pipe(\n        catchError(error => {\n          if (error.status === 400 && error.error?.error === 'Cette boutique est désactivée, ses produits ne sont pas accessibles !') {\n            return throwError(() => new Error('BOUTIQUE_DESACTIVEE'));\n          }\n          return throwError(() => error);\n        })\n      );\n    })\n  );\n}\n\n\n\n}"],"names":["HttpHeaders","HttpParams","catchError","switchMap","throwError","environment","BoutiqueService","constructor","http","usersService","apiUrl","apiBaseUrl","updateBoutique","id","updates","getValidAccessToken","pipe","token","console","error","Error","headers","Authorization","put","getBoutiquesByEntreprise","get","getBoutiqueById","activerBoutique","desactiverBoutique","deleteBoutique","delete","getProductsByBoutiqueId","copierProduits","detailsCopie","post","responseType","parsedError","JSON","parse","e","message","mettreEnCorbeille","produitId","errorMsg","associateUserToBoutique","boutiqueId","userId","assignerVendeur","request","retirerVendeur","getVendeursDeBoutique","getProduitsBoutiquePaginated","page","size","params","set","toString","status","i0","ɵɵinject","i1","HttpClient","i2","UsersService","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}