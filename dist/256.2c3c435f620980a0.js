"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[256],{80145:(u,o,i)=>{i.d(o,{C:()=>r});var n=i(84412),c=i(54438);let r=(()=>{class s{constructor(){this.isListViewSubject=new n.t(!0),this.isListView$=this.isListViewSubject.asObservable()}setViewPreference(t){this.isListViewSubject.next(t),localStorage.setItem("viewPreference",t?"list":"grid")}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=c.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},41731:(u,o,i)=>{i.d(o,{M:()=>c});var n=i(54438);let c=(()=>{class r{transform(l){return null==l||isNaN(l)?"N/A":`${l.toFixed(l%1!=0?2:0).replace(/\B(?=(\d{3})+(?!\d))/g,".")} FCFA`}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275pipe=n.EJ8({name:"cfaCurrency",type:r,pure:!0})}}return r})()},37788:(u,o,i)=>{i.d(o,{j:()=>r});var n=i(84412),c=i(54438);let r=(()=>{class s{constructor(){this.STORAGE_KEY="selectedBoutiqueId",this.selectedBoutiqueSubject=new n.t(this.loadInitial()),this.selectedBoutique$=this.selectedBoutiqueSubject.asObservable()}loadInitial(){const t=localStorage.getItem(this.STORAGE_KEY);if(null!==t){try{sessionStorage.setItem(this.STORAGE_KEY,t)}catch(a){console.warn("Impossible de migrer la boutique depuis localStorage",a)}localStorage.removeItem(this.STORAGE_KEY)}const e=sessionStorage.getItem(this.STORAGE_KEY);return null!==e?Number(e):null}setSelectedBoutique(t){null!==t?sessionStorage.setItem(this.STORAGE_KEY,t.toString()):sessionStorage.removeItem(this.STORAGE_KEY),this.selectedBoutiqueSubject.next(t)}getCurrentValue(){const t=sessionStorage.getItem(this.STORAGE_KEY);return null!==t?Number(t):null}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=c.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},90612:(u,o,i)=>{i.d(o,{S:()=>r});var n=i(84412),c=i(54438);let r=(()=>{class s{constructor(){this.searchSubject=new n.t(""),this.search$=this.searchSubject.asObservable()}setSearch(t){this.searchSubject.next(t)}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=c.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},68420:(u,o,i)=>{i.d(o,{C:()=>r});var n=i(84412),c=i(54438);let r=(()=>{class s{constructor(){this.state=this.createInitialState(),this._solarDisplay="0000",this._isActive=new n.t(!1),this.isActive$=this._isActive.asObservable()}createInitialState(){return{display:"0",operand:null,operator:null,waitingForOperand:!1,memory:0,gtAccumulator:0,lastMemoryRecall:!1}}get display(){return this.state.display}get solarDisplay(){return this._solarDisplay}setActive(t){this._isActive.next(t)}handleKey(t){if(t){if(/^[0-9]|^00$/.test(t))return void this.inputDigit(t);switch(t){case".":return void this.inputDot();case"+":case"\u2212":case"-":case"\xd7":case"*":case"\xf7":case"/":return void this.onOperator("*"===t?"\xd7":"/"===t?"\xf7":"-"===t?"\u2212":t);case"=":return void this.onEquals();case"ON/AC":return void this.allClear();case"C.CE":return void this.clearEntry();case"\u25b6":return void this.backspace();case"+/-":return void this.toggleSign();case"\u221a":return void this.sqrt();case"%":return void this.percent();case"M+":return void this.memoryAdd();case"M-":return void this.memorySub();case"MC":return void this.memoryClear();case"MR":return void this.memoryRecall();case"MRC":return void this.memoryRecallClearToggle();case"GT":return void this.getGrandTotal();case"00":return void this.inputDigit("00");default:return}}}inputDigit(t){if(this.state.waitingForOperand)return this.state.display="00"===t?"0":t,void(this.state.waitingForOperand=!1);if("00"!==t)this.state.display="0"===this.state.display?t:this.state.display+t;else{if("0"===this.state.display)return;this.state.display=this.state.display+"00"}}inputDot(){if(this.state.waitingForOperand)return this.state.display="0.",void(this.state.waitingForOperand=!1);this.state.display.includes(".")||(this.state.display=this.state.display+".")}clearEntry(){this.state.display="0",this.state.waitingForOperand=!0}allClear(){this.state=this.createInitialState(),this._solarDisplay="0000"}toggleSign(){"0"!==this.state.display&&(this.state.display=this.state.display.startsWith("-")?this.state.display.slice(1):"-"+this.state.display)}backspace(){if(this.state.waitingForOperand)return;const t=this.state.display;this.state.display=t.length<=1||2===t.length&&t.startsWith("-")?"0":t.slice(0,-1)}performOperator(t){const e=parseFloat(this.state.display);if(null==this.state.operand)this.state.operand=e;else if(this.state.operator){const a=this.calculate(this.state.operand,e,this.state.operator);this.state.display=this.formatResult(a),this.state.operand=a,("="===t||"="===this.state.operator)&&(this.state.gtAccumulator+=a)}this.state.operator="="===t?null:t,this.state.waitingForOperand=!0}calculate(t,e,a){switch(a){case"+":return t+e;case"\u2212":case"-":return t-e;case"\xd7":return t*e;case"\xf7":return 0===e?NaN:t/e;default:return e}}percent(){const t=parseFloat(this.state.display);null!=this.state.operand?(this.state.display=this.formatResult(this.state.operand*t/100),this.state.waitingForOperand=!0):(this.state.display=this.formatResult(t/100),this.state.waitingForOperand=!0)}sqrt(){const t=parseFloat(this.state.display);t<0?this.state.display="Erreur":(this.state.display=this.formatResult(Math.sqrt(t)),this.state.waitingForOperand=!0)}exp(){const t=parseFloat(this.state.display);this.state.display=this.formatResult(Math.exp(t)),this.state.waitingForOperand=!0}placeholderMU(){}onOperator(t){const e=parseFloat(this.state.display);if(null==this.state.operand)this.state.operand=isNaN(e)?0:e;else if(!this.state.waitingForOperand&&this.state.operator){const a=this.calculate(this.state.operand,e,this.state.operator);this.state.operand=a}this._solarDisplay=this.formatResult(this.state.operand??0),this.state.display="0",this.state.waitingForOperand=!0,this.state.operator=t}onEquals(){const t=parseFloat(this.state.display);if(null==this.state.operand||!this.state.operator)return;const e=this.calculate(this.state.operand,t,this.state.operator);this._solarDisplay=`${this.formatResult(this.state.operand)} ${this.state.operator} ${this.formatResult(t)} =`,this.state.display=this.formatResult(e),this.state.operand=e,this.state.operator=null,this.state.waitingForOperand=!0}memoryAdd(){this.state.memory+=parseFloat(this.state.display),this.state.lastMemoryRecall=!1}memorySub(){this.state.memory-=parseFloat(this.state.display),this.state.lastMemoryRecall=!1}memoryClear(){this.state.memory=0,this.state.lastMemoryRecall=!1}memoryRecall(){this.state.display=this.formatResult(this.state.memory),this.state.lastMemoryRecall=!0,this.state.waitingForOperand=!0}memoryRecallClearToggle(){this.state.lastMemoryRecall?this.memoryClear():this.memoryRecall()}getGrandTotal(){this.state.display=this.formatResult(this.state.gtAccumulator),this.state.waitingForOperand=!0}formatResult(t){if(!isFinite(t))return"Erreur";const e=Number.parseFloat(String(t)).toPrecision(12);return parseFloat(e).toString()}handleComputerKeyboard(t){if(!this._isActive.value)return;const e=t.key,a={Enter:"=",Escape:"ON/AC",Backspace:"\u25b6","+":"+","-":"\u2212","*":"\xd7","/":"\xf7",".":".","%":"%"};if(!/^[0-9]$/.test(e))return a[e]?(this.handleKey(a[e]),void t.preventDefault()):void("0"===e&&t.shiftKey&&(this.inputDigit("00"),t.preventDefault()));this.inputDigit(e)}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=c.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},36406:(u,o,i)=>{i.d(o,{I:()=>r});var n=i(21413),c=i(54438);let r=(()=>{class s{constructor(){this.scanSubject=new n.B,this.scanningSubject=new n.B,this.barcode="",this.isEnabled=!0,this.isUserTyping=!1,this.lastKeyTime=0,this.SCAN_TIMEOUT=100,this.isScanning=!1,this.setupScannerListener()}setupScannerListener(){document.addEventListener("keydown",t=>{this.handleKeyEvent(t)},!0)}handleKeyEvent(t){if(!this.isEnabled||this.isScanning)return;const e=Date.now(),a=e-this.lastKeyTime;this.lastKeyTime=e;const h=t.target;if(!h||"INPUT"!==h.tagName&&"TEXTAREA"!==h.tagName&&!h.isContentEditable){if(a>200)return console.log("Scanner: Ignor\xe9 - utilisateur tape normalement"),void this.resetScan();if(a<this.SCAN_TIMEOUT){console.log("Scanner: \xc9v\xe9nement de scan d\xe9tect\xe9, d\xe9lai:",a,"ms");const d=this.mapAzertyKey(t.key);"Enter"===d?(this.barcode.length>=3?(console.log("Scanner: Code complet d\xe9tect\xe9:",this.barcode),this.isScanning=!0,this.scanningSubject.next(!0),this.scanSubject.next(this.barcode),setTimeout(()=>{this.scanningSubject.next(!1),this.isScanning=!1,this.resetScan()},100)):this.isScanning?console.log("Scanner: Scan d\xe9j\xe0 en cours, ignor\xe9"):console.log("Scanner: Code trop court:",this.barcode),this.resetScan()):1===d.length&&!t.ctrlKey&&!t.metaKey&&(this.barcode+=d,console.log("Scanner: Caract\xe8re ajout\xe9:",d,"Buffer:",this.barcode),clearTimeout(this.timer),this.timer=setTimeout(()=>{console.log("Scanner: Timeout, reset buffer"),this.resetScan()},500))}}else console.log("Scanner: Ignor\xe9 - dans un champ de saisie")}mapAzertyKey(t){return{"&":"1",\u00e9:"2",'"':"3","'":"4","(":"5","-":"6",\u00e8:"7",_:"8",\u00e7:"9",\u00e0:"0",\u00f9:"0","\xb2":"2","\xb0":"0"}[t]||t}resetScan(){this.barcode="",clearTimeout(this.timer),this.isScanning=!1}getScanObservable(){return this.scanSubject.asObservable()}getScanningObservable(){return this.scanningSubject.asObservable()}setUserTyping(t){this.isUserTyping=t,console.log("Scanner: User typing:",t)}enableScanner(){this.isEnabled=!0,console.log("Scanner: Activ\xe9")}disableScanner(){this.isEnabled=!1,console.log("Scanner: D\xe9sactiv\xe9")}simulateScan(t){console.log("Scanner: Simulation de scan avec:",t),this.scanSubject.next(t)}destroy(){this.timer&&clearTimeout(this.timer),console.log("Scanner: Service d\xe9truit")}static{this.\u0275fac=function(e){return new(e||s)}}static{this.\u0275prov=c.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})()},17022:(u,o,i)=>{i.d(o,{f:()=>s});var n=i(84412),c=i(21413),r=i(54438);let s=(()=>{class l{constructor(){this.commandesMap=new Map,this.commandesIds=["001"],this.activeCommandeId=new n.t("001"),this.activeCommandeId$=this.activeCommandeId.asObservable(),this.commandesIdsSubject=new n.t(this.commandesIds),this.commandesIds$=this.commandesIdsSubject.asObservable(),this.commandeUpdated=new c.B,this.commandeUpdated$=this.commandeUpdated.asObservable(),this.commandesMap.set("001",{id:"001",cart:new Map,createdAt:new Date})}getCommandeDetails(e){return this.commandesMap.get(e)}updateCommandeTotals(e,a,h){const d=this.commandesMap.get(e);d&&(d.totalItems=a,d.totalAmount=h,this.commandesMap.set(e,d))}setActiveCommande(e){this.commandesMap.has(e)||(this.commandesMap.set(e,{id:e,cart:new Map,createdAt:new Date}),this.commandesIds.push(e)),this.activeCommandeId.next(e)}getActiveCart(){const e=this.activeCommandeId.getValue(),a=this.commandesMap.get(e);return a?a.cart:new Map}updateActiveCart(e){const a=this.activeCommandeId.getValue(),h=this.commandesMap.get(a);h&&(h.cart=new Map(e),this.commandesMap.set(a,h))}getAllCommandesIds(){return[...this.commandesIds]}addNewCommande(){const e=(this.commandesIds.length+1).toString().padStart(3,"0");return this.commandesMap.set(e,{id:e,cart:new Map,createdAt:new Date}),this.commandesIds.push(e),this.commandesIdsSubject.next([...this.commandesIds]),e}removeCommande(e){if("001"===e)return;this.commandesMap.delete(e),this.commandeUpdated.next();const a=this.commandesIds.indexOf(e);-1!==a&&this.commandesIds.splice(a,1),this.activeCommandeId.getValue()===e&&this.activeCommandeId.next(this.commandesIds[0]||"001"),this.commandesIdsSubject.next([...this.commandesIds])}getActiveCommandeId(){return this.activeCommandeId.getValue()}static{this.\u0275fac=function(a){return new(a||l)}}static{this.\u0275prov=r.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()}}]);