"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[1166],{6375:(k,O,r)=>{r.d(O,{D:()=>t});var c=r(1626),f=r(9437),C=r(8810),P=r(2525),M=r(4438);let t=(()=>{class h{constructor(o){this.http=o,this.apiUrl=P.c.apiBaseUrl}ajouterProduit(o,s,d,g,l,b){const x=`${this.apiUrl}/create?addToStock=${b}`,_=new FormData;_.append("boutiqueIds",JSON.stringify(o)),_.append("quantites",JSON.stringify(s)),_.append("produit",JSON.stringify(g)),_.append("seuilAlert",JSON.stringify(d)),l&&_.append("image",l,l.name);const v=localStorage.getItem("authToken")||"",E=new c.Lr({Authorization:`Bearer ${v}`});return this.http.post(x,_,{headers:E})}modifierProduit(o,s){const d=localStorage.getItem("authToken")||"",g=new c.Lr({Authorization:`Bearer ${d}`}),l=new FormData,{id:b,...x}=o;return l.append("produit",JSON.stringify(x)),l.append("addToStock",o.enStock?"true":"false"),s&&l.append("image",s,s.name),this.http.patch(`${this.apiUrl}/updateProduit/${o.id}`,l,{headers:g})}getProduitById(o){const s=localStorage.getItem("authToken")||"",d=new c.Lr({Authorization:`Bearer ${s}`});return this.http.get(`${this.apiUrl}/produits/${o}`,{headers:d})}getProduitsEntreprise(o){const s=localStorage.getItem("authToken"),d=new c.Lr({Authorization:`Bearer ${s}`});return this.http.get(`${this.apiUrl}/produits/${o}/stock`,{headers:d}).pipe((0,f.W)(g=>(0,C.$)(400===g.status&&"Cette boutique est d\xe9sactiv\xe9e, ses produits ne sont pas accessibles !"===g.error?.error?()=>new Error("BOUTIQUE_DESACTIVEE"):()=>g)))}getProduitBoutique(o){const s=localStorage.getItem("authToken");if(!s)return console.error("Aucun token trouv\xe9"),(0,C.$)("Aucun token trouv\xe9");const d=new c.Lr({Authorization:`Bearer ${s}`});return this.http.get(`${this.apiUrl}/produits/${o}/totaux-stock`,{headers:d})}getProduitsByEntrepriseId(o){return this.http.get(`${this.apiUrl}/produits/entreprise/${o}`)}getProduitsParEntreprise(o){return this.http.get(`${this.apiUrl}/produits/entreprise/${o}`)}getFournisseurs(){const o=localStorage.getItem("authToken")||"",s=new c.Lr({Authorization:`Bearer ${o}`});return this.http.get(`${this.apiUrl}/get-fournisseurs`,{headers:s})}static{this.\u0275fac=function(s){return new(s||h)(M.KVO(c.Qq))}}static{this.\u0275prov=M.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}}return h})()},1166:(k,O,r)=>{r.r(O),r.d(O,{FournisseursComponent:()=>E});var c=r(177),f=r(9417),C=r(9192),P=r(3509),M=r(5698),t=r(4438),h=r(6375),F=r(8026),o=r(933),s=r(1856);const d=()=>[6,10,25,100];function g(i,m){if(1&i){const n=t.RV6();t.j41(0,"div",16)(1,"div",17),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.toggleView("list"))}),t.EFF(2),t.k0s(),t.j41(3,"div",17),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.toggleView("grid"))}),t.EFF(4),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(2),t.SpI(" Liste ",n.isListView?"\u2713":""," "),t.R7$(2),t.SpI(" Cadre ",n.isListView?"":"\u2713"," ")}}function l(i,m){if(1&i){const n=t.RV6();t.j41(0,"tr",18),t.bIt("click",function(){const e=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.openDetail(e.id))}),t.j41(1,"td")(2,"div",20),t.nrm(3,"img",21),t.k0s()(),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.EFF(9),t.k0s(),t.j41(10,"td"),t.EFF(11),t.k0s(),t.j41(12,"td"),t.EFF(13),t.nI1(14,"date"),t.k0s()()}if(2&i){const n=m.$implicit;t.R7$(5),t.JRh(n.nomComplet||"Non renseign\xe9"),t.R7$(2),t.JRh(n.email||"Non renseign\xe9"),t.R7$(2),t.JRh(n.adresse||"Non renseign\xe9"),t.R7$(2),t.JRh(n.telephone||"Non renseign\xe9"),t.R7$(2),t.JRh(t.i5U(14,5,n.createdAt,"dd/MM/yyyy"))}}function b(i,m){if(1&i){const n=t.RV6();t.j41(0,"table")(1,"thead")(2,"th"),t.EFF(3,"Photo"),t.k0s(),t.j41(4,"th"),t.EFF(5,"Nom"),t.k0s(),t.j41(6,"th",18),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.sort("email"))}),t.EFF(7," Email "),t.nrm(8,"i"),t.k0s(),t.j41(9,"th",18),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.sort("adresse"))}),t.EFF(10,"Adresse"),t.k0s(),t.j41(11,"th",18),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.sort("telephone"))}),t.EFF(12,"T\xe9l\xe9phone"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Date Cr\xe9ation"),t.k0s()(),t.j41(15,"tbody"),t.DNE(16,l,15,8,"tr",19),t.k0s()()}if(2&i){const n=t.XpG();t.R7$(8),t.HbH("email"===n.sortField?"asc"===n.sortDirection?"ri-arrow-up-s-line":"ri-arrow-down-s-line":"ri-arrow-up-down-line"),t.R7$(8),t.Y8G("ngForOf",n.paginatedFournisseurs)}}function x(i,m){if(1&i){const n=t.RV6();t.j41(0,"div",25),t.bIt("click",function(){const e=t.eBV(n).$implicit,p=t.XpG(2);return t.Njj(p.openDetail(e.id))}),t.j41(1,"div",26)(2,"div",27),t.nrm(3,"img",28),t.k0s(),t.j41(4,"div",29)(5,"div",30)(6,"h3"),t.EFF(7),t.k0s()(),t.j41(8,"div",31)(9,"p",32),t.nrm(10,"i",33),t.EFF(11),t.nI1(12,"truncateEmail"),t.k0s()()()(),t.j41(13,"div",34)(14,"p",35),t.nrm(15,"i",36),t.EFF(16),t.k0s()(),t.j41(17,"div",37)(18,"p",38),t.nrm(19,"i",39),t.EFF(20),t.k0s()()()}if(2&i){const n=m.$implicit;t.R7$(7),t.JRh(n.nomComplet),t.R7$(4),t.SpI(" ",n.email?t.bMT(12,4,n.email):"Non renseign\xe9"," "),t.R7$(5),t.SpI(" ",n.telephone||"Non renseign\xe9",""),t.R7$(4),t.SpI(" ",n.adresse||"Non renseign\xe9","")}}function _(i,m){if(1&i&&(t.j41(0,"div",22)(1,"div",23),t.DNE(2,x,21,6,"div",24),t.k0s()()),2&i){const n=t.XpG();t.R7$(2),t.Y8G("ngForOf",n.paginatedFournisseurs)}}function v(i,m){1&i&&(t.j41(0,"div",40),t.EFF(1," Aucun fournisseur trouv\xe9 "),t.k0s())}let E=(()=>{class i{constructor(n,a,e,p,u,w,I){this.produitService=n,this.fb=a,this.router=e,this.usersService=p,this.stockService=u,this.cdRef=w,this.transfertService=I,this.isListView=!0,this.showDropdown=!1,this.searchQuery="",this.pageSize=6,this.currentPage=0,this.sortField="nom",this.sortDirection="asc",this.fournisseurs=[]}ngOnInit(){const n=localStorage.getItem("fournisseurView");this.isListView="grid"!==n,this.loadFournisseurs()}loadFournisseurs(){this.produitService.getFournisseurs().subscribe({next:n=>{this.fournisseurs=n.reverse(),console.log("Fournisseurs:",this.fournisseurs)},error:n=>{console.error("Erreur lors de la r\xe9cup\xe9ration des fournisseurs",n),this.fournisseurs=[]}})}toggleView(n){this.isListView="list"===n,localStorage.setItem("fournisseurView",n)}sort(n){this.sortField===n?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortField=n,this.sortDirection="asc"),this.fournisseurs.sort((a,e)=>{const p=a[n]?.toString().toLowerCase()??"",u=e[n]?.toString().toLowerCase()??"";return p.localeCompare(u)*("asc"===this.sortDirection?1:-1)})}applyFilter(){}onPageChange(n){this.currentPage=n.pageIndex,this.pageSize=n.pageSize}get paginatedFournisseurs(){const n=this.currentPage*this.pageSize;return this.fournisseurs.slice(n,n+this.pageSize)}openDetail(n){this.router.navigate(["/detail-fournisseur",n])}static{this.\u0275fac=function(a){return new(a||i)(t.rXU(h.D),t.rXU(f.ok),t.rXU(C.Ix),t.rXU(F.g),t.rXU(o.Q),t.rXU(t.gRc),t.rXU(s.r))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-fournisseurs"]],decls:20,vars:11,consts:[[1,"containerTable"],[1,"tasks-header"],[1,"title"],[1,"actions"],["routerLink","/ajouter-fournisseur",1,"add-task"],[1,"barre"],["clickOutside","",1,"contentIcon",3,"click","clickOutside"],["class","view-dropdown",4,"ngIf"],[1,"inputSearch"],[1,"ri-search-2-line"],["type","text","placeholder","Recherche....",3,"ngModelChange","input","ngModel"],[4,"ngIf"],["class","container_cadre",4,"ngIf"],["class","no-client-message",4,"ngIf"],[1,"pagination"],[3,"page","length","pageSize","pageSizeOptions"],[1,"view-dropdown"],[1,"dropdown-item",3,"click"],[3,"click"],[3,"click",4,"ngFor","ngForOf"],[1,"imgClient"],["src","assets/img/profil.png","alt","Photo fournisseur"],[1,"container_cadre"],[1,"grid-view"],["class","client-card",3,"click",4,"ngFor","ngForOf"],[1,"client-card",3,"click"],[1,"content_img_info"],[1,"imgFourni_grid"],["src","assets/img/profil.png","alt","Icon fournisseur"],[1,"info_fourni"],[1,"info_name"],[1,"info_email"],[2,"margin","0","font-size","12px"],[1,"ri-mail-line"],[1,"info_tel"],[2,"font-size","12px","margin-bottom","0"],[1,"ri-phone-line"],[1,"info_adresse"],[2,"font-size","12px","margin","0"],[1,"ri-map-pin-line"],[1,"no-client-message"]],template:function(a,e){1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3,"Mes Fournisseurs"),t.k0s(),t.j41(4,"div",3)(5,"button",4),t.EFF(6," Cr\xe9er un fournisseur "),t.k0s(),t.nrm(7,"div",5),t.j41(8,"div",6),t.bIt("click",function(){return e.showDropdown=!e.showDropdown})("clickOutside",function(){return e.showDropdown=!1}),t.nrm(9,"i"),t.DNE(10,g,5,2,"div",7),t.k0s(),t.nrm(11,"div",5),t.j41(12,"div",8),t.nrm(13,"i",9),t.j41(14,"input",10),t.mxI("ngModelChange",function(u){return t.DH7(e.searchQuery,u)||(e.searchQuery=u),u}),t.bIt("input",function(){return e.applyFilter()}),t.k0s()()()(),t.DNE(15,b,17,3,"table",11)(16,_,3,1,"div",12)(17,v,2,0,"div",13),t.j41(18,"div",14)(19,"mat-paginator",15),t.bIt("page",function(u){return e.onPageChange(u)}),t.k0s()()()),2&a&&(t.R7$(9),t.HbH(e.isListView?"ri-list-check":"ri-apps-fill"),t.R7$(),t.Y8G("ngIf",e.showDropdown),t.R7$(4),t.R50("ngModel",e.searchQuery),t.R7$(),t.Y8G("ngIf",e.isListView),t.R7$(),t.Y8G("ngIf",!e.isListView),t.R7$(),t.Y8G("ngIf",0===e.fournisseurs.length),t.R7$(2),t.Y8G("length",e.fournisseurs.length)("pageSize",e.pageSize)("pageSizeOptions",t.lJ4(10,d)))},dependencies:[f.YN,f.me,f.BC,f.vS,c.MD,c.Sq,c.bT,c.vh,P.Ou,P.iy,C.Wk,M.B],styles:['@charset "UTF-8";.containerTable[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px}.content_cadre_double[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.imgFourni_grid[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;cursor:pointer}.imgFourni_grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%}.content_img_info[_ngcontent-%COMP%]{display:flex;align-items:center}.info_email[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.info_fourni[_ngcontent-%COMP%]{margin-left:10px}.info_name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.imgClient[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;box-shadow:0 4px 6px #0000001a;cursor:pointer}.imgClient[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:80%;object-fit:cover;border-radius:50%;transition:transform .2s}.imgClient[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.tete[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.imgClient2[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;box-shadow:0 4px 6px #0000001a;cursor:pointer}.imgClient2[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;border-radius:50%;transition:transform .2s}.imgClient_grid[_ngcontent-%COMP%]{width:90px;height:90px;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer;border:none}.imgClient_grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .2s}.title[_ngcontent-%COMP%]{font-size:18px;margin:0}.tasks-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.add-task[_ngcontent-%COMP%]{padding:10px 30px;background-color:#0672e4;color:#fff;border-radius:5px;border:none}.inputSearch[_ngcontent-%COMP%]{position:relative;width:250px;height:40px;display:flex;align-items:center}.inputSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding-left:10px;border-radius:5px}.inputSearch[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:15px;font-size:17px}.contentIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px;cursor:pointer;position:relative}.actions[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000}.barre[_ngcontent-%COMP%]{height:25px;width:1px;background-color:#0000003f;margin:8px 15px}.titleTableProduit[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:12px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}tr[_ngcontent-%COMP%]{font-size:13px}td[_ngcontent-%COMP%]{padding:18px 8px;border-bottom:1px solid rgba(221,221,221,.5803921569)}th[_ngcontent-%COMP%]{background-color:#f2f2f2;border-bottom:1px solid rgba(221,221,221,.5803921569);padding:12px 8px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.contentIcon[_ngcontent-%COMP%]{position:relative;cursor:pointer}.view-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #ddd;border-radius:4px;box-shadow:0 2px 5px #0000001a;z-index:100;min-width:150px}.dropdown-item[_ngcontent-%COMP%]{padding:8px 12px;font-size:14px;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.grid-view[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}.client-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:10px 15px;box-shadow:0 4px 6px #0000000d;transition:transform .2s ease;border:1px solid #e0e0e0;margin:20px 0 -20px}.client-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 6px 12px #0000000a}.client-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:16px;margin:0;font-weight:600}.name_icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #eee;margin:0 0 12px;padding-bottom:10px}.name_icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;cursor:pointer}.client-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:14px;color:#666;display:flex;align-items:center;gap:8px}.client-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#0672e4}.view-dropdown[_ngcontent-%COMP%]{transform-origin:top right;animation:_ngcontent-%COMP%_scaleIn .15s ease-out}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}.dropdown-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;transition:background .2s ease}.dropdown-item[_ngcontent-%COMP%]:after{content:"\\2713";opacity:0;color:#0672e4}.dropdown-item.active[_ngcontent-%COMP%]:after{opacity:1}.status-badge[_ngcontent-%COMP%]{padding:4px 8px;border-radius:12px;font-size:12px;display:inline-block}.status-active[_ngcontent-%COMP%]{background:#e3fcef;color:#064}.status-inactive[_ngcontent-%COMP%]{background:#faeae5;color:#bf360c}@media (max-width: 768px){.tasks-header[_ngcontent-%COMP%]{display:block;justify-content:space-between;gap:15px}.inputSearch[_ngcontent-%COMP%]{width:100%}.grid-view[_ngcontent-%COMP%]{display:block}.client-card[_ngcontent-%COMP%]{margin-bottom:15px}}@media (min-width: 769px){.mobile-only[_ngcontent-%COMP%]{display:none!important}}.pagination[_ngcontent-%COMP%]{justify-content:right;margin-top:30px}mat-paginator[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px}.no-phone-text[_ngcontent-%COMP%]{color:#c3c3c3;font-style:italic}.info_cadre[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000}.no-client-message[_ngcontent-%COMP%]{text-align:center;padding:40px;font-size:13px;color:#666;background-color:#f8f9fa;border-radius:8px;margin:20px;box-shadow:0 2px 4px #0000001a}.iconEntrepriseList[_ngcontent-%COMP%]{padding-left:20px}.iconEntrepriseList[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;cursor:pointer}.no-entreprise-text[_ngcontent-%COMP%]{color:#666;font-size:.9em;font-style:italic}.popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.popup-content[_ngcontent-%COMP%]{background:#fff;padding:15px 20px;border-radius:8px;width:25%}.popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;margin-top:-5px}.popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.cadreChoix[_ngcontent-%COMP%]{background-color:#0672e4;box-shadow:0 6px 12px #0000001a;padding:10px;border-radius:5px;cursor:pointer;color:#fff}.sizeBox[_ngcontent-%COMP%]{margin:10px 0}.dateCreat[_ngcontent-%COMP%]{font-size:10px;font-style:italic;margin-left:auto}']})}}return i})()}}]);