{"version":3,"file":"src_app_POS_pos-accueil_pos-accueil_component_ts.js","mappings":"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","sources":["./src/app/POS/pos-accueil/pos-accueil.component.ts","./src/app/POS/pos-accueil/pos-accueil.component.html","./src/app/admin-page/SERVICES/CaisseService/pos-caisse-service.ts"],"sourcesContent":["import { CommonModule } from '@angular/common';\nimport { Component, ElementRef, HostListener, Renderer2, ViewChild } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Router, RouterModule } from '@angular/router';\nimport { ClickOutsideDirective } from 'src/app/admin-page/MODELS/click-outside.directive';\nimport { environment } from 'src/environments/environment';\nimport { ViewStateService } from './view-state.service';\nimport { Observable, Subscription } from 'rxjs';\nimport { UsersService } from 'src/app/admin-page/SERVICES/users.service';\nimport { CommandeStateService } from 'src/app/admin-page/SERVICES/commande-state.service';\nimport { PosCaisseService } from 'src/app/admin-page/SERVICES/CaisseService/pos-caisse-service';\nimport { FermerCaisseRequest } from 'src/app/admin-page/MODELS/CaisseModel/caisse.model';\nimport { BoutiqueStateService } from 'src/app/admin-page/SERVICES/CaisseService/boutique-state.service';\nimport { BoutiqueService } from 'src/app/admin-page/SERVICES/boutique-service';\nimport { CfaCurrencyPipe } from 'src/app/admin-page/MODELS/cfa-currency.pipe';\nimport { ScannerService } from 'src/app/admin-page/SERVICES/VenteService/scanner.service';\nimport { SearchService } from 'src/app/admin-page/SERVICES/SearchService';\nimport { CalculatorService } from 'src/app/admin-page/SERVICES/VenteService/calculator.service';\n\n@Component({\n  selector: 'app-pos-accueil',\n  standalone: true,\n  imports: [ FormsModule, CommonModule, RouterModule, ClickOutsideDirective, CfaCurrencyPipe ],\n  templateUrl: './pos-accueil.component.html',\n  styleUrl: './pos-accueil.component.scss'\n})\nexport class PosAccueilComponent {\n  private apiUrl = environment.imgUrl;\n  // isListView = true;\n  showDropdown = false;\n  public isListView$: Observable<boolean>;\n  activeButton: 'vente' | 'commande' = 'vente';\n  showMenuDropdown = false;\n  userName: string = '';\n  nomEntreprise = '';\n  photo: string | null = null;\n  photoUrl: string | null = null;\n  commandes: string[] = ['001']; // Liste initiale\n  activeCommande: string = '001'; // Commande active\n  // showCommandeDropdown = false;\n  showCommandePopup = false;\n  private commandeSubscription: Subscription;\n\n  private boutiqueSub?: Subscription;\n  private boutiques: any[] = [];\n\n  selectedBoutiqueId: number | null = null;\n  selectedBoutiqueName: string = '';\n  private boutiquesLoaded = false;\n  isBoutiqueNameLoaded = false;\n\n  scanInProgress = false;\n\n\n  isDraggingPopup = false;\n  startXPopup = 0;\n  startYPopup = 0;\n  initialXPopup = 0;\n  initialYPopup = 0;\n  popupOffsetPopup = { x: 0, y: 0 };\n\n  showFermerCaissePopup = false;\n  caisseDetails: any = null;\n  isLoadingCaisseDetails = false;\n  fermetureErrorMessage: string | null = null;\n\n  showCalculatorPopup = false;\n\n  @ViewChild('calculatorRef', { static: false }) calculatorRef?: ElementRef<HTMLDivElement>;\n  @ViewChild('calcElement', { static: false }) calcElement?: ElementRef<HTMLElement>;\n\n\n  private baseWidth = 420; \n  private baseHeight = 480;\n\n  calcWidth = 420;\n  calcHeight = 480;\n\n  calcScale = 1;\n  hoverResizeCorner: 'br' | 'bl' | null = null;\n  // seuil (en px) pour détecter la zone de redimensionnement près des coins\n  private readonly cornerThreshold = 18;\n\n  // resize state\n  private isResizing = false;\n  private resizeCorner: 'br' | 'bl' | null = null;\n  private startXResize = 0;\n  private startYResize = 0;\n  private initialWidth = 0;\n  private initialHeight = 0;\n  private initialPopupX = 0;\n  private initialPopupY = 0;\n\n  // min / max\n  private minWidth = 160;\n  private minHeight = 200;\n  private maxWidth = window.innerWidth - 40;\n  private maxHeight = window.innerHeight - 40;\n\n  // handlers references\n  private pointerMoveHandler: any;\n  private pointerUpHandler: any;\n\n  // Ajoutez ces propriétés à votre classe\n  isCalculatorMinimized = false;\n  calculatorPosition = { x: 100, y: 100 };\n  isCalculatorActive = false;\n  private calculatorActiveSub: Subscription;\n\n  constructor(\n    private router: Router,\n    private viewState: ViewStateService,\n    private userService: UsersService,\n    private posCaisseService: PosCaisseService,\n    private commandeState: CommandeStateService,\n    private boutiqueState: BoutiqueStateService,\n    private boutiqueService: BoutiqueService,\n     private searchService: SearchService,\n    private calculator: CalculatorService,\n    private scannerService: ScannerService,\n    private renderer: Renderer2, \n  ) {\n    this.isListView$ = this.viewState.isListView$;\n    \n    // Initialiser avec les commandes actuelles\n    this.commandes = this.commandeState.getAllCommandesIds();\n    \n    // S'abonner aux mises à jour des commandes\n    this.commandeState.commandeUpdated$.subscribe(() => {\n      this.commandes = this.commandeState.getAllCommandesIds();\n    });\n\n    this.commandeState.activeCommandeId$.subscribe(id => {\n      this.activeCommande = id;\n    });\n    \n    this.commandeSubscription = this.commandeState.activeCommandeId$.subscribe(id => {\n      this.activeCommande = id;\n    });\n\n    this.calculatorActiveSub = this.calculator.isActive$.subscribe(isActive => {\n      this.isCalculatorActive = isActive;\n    });\n  }\n\n  ngOnInit() {\n\n    const currentRoute = this.router.url;\n    this.activeButton = currentRoute.includes('/commandes') ? 'commande' : 'vente';\n    this.getUserInfo();\n\n    this.loadBoutiques();\n\n    // Charger toutes les boutiques une fois (pour résoudre id -> nom)\n    this.boutiqueService.getBoutiquesByEntreprise().subscribe({\n      next: (list) => {\n        this.boutiques = list || [];\n        this.boutiquesLoaded = true;\n        // si on avait déjà un id, mettre à jour le nom\n        if (this.selectedBoutiqueId !== null) {\n          this.updateBoutiqueName(this.selectedBoutiqueId);\n        }\n      },\n      error: (err) => console.error('Erreur chargement boutiques', err)\n    });\n\n    // S'abonner aux changements de boutique\n    this.boutiqueSub = this.boutiqueState.selectedBoutique$.subscribe(id => {\n      this.selectedBoutiqueId = id;\n      if (id === null) {\n        this.selectedBoutiqueName = 'Sélectionnez une boutique';\n      } else {\n        this.updateBoutiqueName(id);\n      }\n    });\n\n    // Si on arrive par navigation avec une caisse passée en state, on peut setter aussi\n    const nav = this.router.getCurrentNavigation()?.extras?.state as any;\n    if (nav?.caisse?.boutiqueId) {\n      this.boutiqueState.setSelectedBoutique(nav.caisse.boutiqueId);\n    }\n\n    // S'abonner aux événements de scan\n    this.scannerService.getScanningObservable().subscribe(scanning => {\n      this.scanInProgress = scanning;\n    });\n  }\n\n  private loadBoutiques(): void {\n    this.boutiqueService.getBoutiquesByEntreprise().subscribe({\n      next: (list) => {\n        this.boutiques = list || [];\n        this.boutiquesLoaded = true;\n        \n        // Vérifier si une boutique est déjà sélectionnée dans le state\n        const currentBoutiqueId = this.boutiqueState.getCurrentValue();\n        if (currentBoutiqueId) {\n          this.updateBoutiqueName(currentBoutiqueId);\n        }\n      },\n      error: (err) => console.error('Erreur chargement boutiques', err)\n    });\n  }\n\n  private updateBoutiqueName(id: number): void {\n    // reset du flag pendant le chargement\n    this.isBoutiqueNameLoaded = false;\n    const found = this.boutiques.find(b => b.id === id);\n    if (found) {\n      this.selectedBoutiqueName = found.nomBoutique || '';\n      this.isBoutiqueNameLoaded = true;\n    } else {\n      // Si non trouvée, tenter une requête directe\n      this.boutiqueService.getBoutiqueById(id).subscribe({\n        next: (boutique) => {\n          this.selectedBoutiqueName = boutique?.nomBoutique || 'Boutique inconnue';\n          this.isBoutiqueNameLoaded = true;\n        },\n        error: () => {\n          this.selectedBoutiqueName = 'Boutique inconnue';\n          this.isBoutiqueNameLoaded = true;\n        }\n      });\n    }\n  }\n\n  ngOnDestroy() {\n    this.removeResizeListeners();\n    this.boutiqueSub?.unsubscribe();\n    this.commandeSubscription?.unsubscribe();\n    this.calculatorActiveSub?.unsubscribe();\n  }\n\n  // ngOnDestroy() {\n  //   // Nettoyer la souscription\n  //   if (this.commandeSubscription) {\n  //     this.commandeSubscription.unsubscribe();\n  //   }\n  // }\n\n  toggleView(viewType: 'grid' | 'list') {\n    this.viewState.setViewPreference(viewType === 'grid');\n    this.showDropdown = true;\n  }\n\n  onClickCommandes() {\n    this.activeButton = 'commande';\n    this.router.navigate(['/pos-accueil/commandes']);\n  }\n\n  onClickVente() {\n    this.activeButton = 'vente';\n    this.router.navigate(['/pos-accueil']);\n  }\n\n  toggleMenuDropdown() {\n    this.showMenuDropdown = !this.showMenuDropdown;\n  }\n\n  addCommande() {\n    const newId = this.commandeState.addNewCommande();\n    // Récupère la liste mise à jour du service\n    this.commandes = this.commandeState.getAllCommandesIds(); \n    this.setActiveCommande(newId);\n    this.showCommandePopup = false;\n  }\n\n  // addCommande() {\n  //   const newId = this.commandeState.addNewCommande();\n  //   this.commandes.push(newId);\n  //   this.setActiveCommande(newId);\n  // }\n\n  setActiveCommande(cmd: string) {\n    this.commandeState.setActiveCommande(cmd);\n    this.activeCommande = cmd;\n    this.showCommandePopup = false; // Fermer le popup après sélection\n  }\n\n  get visibleCommandes() {\n    const start = Math.max(0, this.commandes.length - 6);\n    return this.commandes.slice(start);\n  }\n\n  get hiddenCommandes() {\n    // Commandes non visibles dans la barre principale\n    return this.commandes.length > 6 \n      ? this.commandes.slice(0, this.commandes.length - 6) \n      : [];\n  }\n    \n  getUserInfo(): void {\n    this.userService.getUserInfo().subscribe({\n      next: (user) => {\n      this.userName = user.nomComplet.charAt(0).toUpperCase();\n        this.nomEntreprise = user.nomEntreprise;\n      },\n      error: (err) => {\n        console.error(\"Erreur lors de la récupération des infos utilisateur :\", err);\n      }\n    });\n  }\n \n  onLogout(): void {\n    console.log(\"Début de la procédure de déconnexion...\");\n\n    // Récupérer l'ID de la boutique active depuis le service BoutiqueStateService\n    const boutiqueId = this.boutiqueState.getCurrentValue();\n\n    if (!boutiqueId) {\n      console.error(\"Aucune boutique active détectée.\");\n      this.router.navigate(['/analytics']);\n      return;\n    }\n\n    this.userService.getUserInfo().subscribe({\n      next: (user) => {\n        console.log('Utilisateur récupéré:', user);\n        const userPermissions = user.permissions; \n\n        // Vérifier si l'utilisateur a uniquement la permission \"VENDRE_PRODUITS\"\n        if (userPermissions.length === 1 && userPermissions.includes(\"VENDRE_PRODUITS\")) {\n          console.log('L\\'utilisateur a uniquement la permission \"VENDRE_PRODUITS\". Tentative de fermeture de la caisse...');\n          \n          // Fermer la caisse pour la boutique active\n          this.posCaisseService.fermerCaisse(boutiqueId).subscribe({\n            next: (response) => {\n              console.log('Caisse fermée avec succès:', response);\n              // Déconnexion de l'utilisateur\n              this.userService.logoutUser();  \n              console.log('Déconnexion de l\\'utilisateur...');\n              this.router.navigate(['/connexion']).then(success => {\n                console.log(\"Déconnexion réussie ?\", success);\n              });\n            },\n            error: (err) => {\n              console.error('Erreur lors de la fermeture de la caisse:', err.message);\n              // Si une erreur se produit lors de la fermeture de la caisse, rediriger vers la page d'analytics.\n              this.router.navigate(['/analytics']).then(success => {\n                console.log(\"Navigation vers analytics réussie ?\", success);\n              });\n            }\n          });\n        } else {\n          console.log('L\\'utilisateur n\\'a pas uniquement la permission \"VENDRE_PRODUITS\", fermeture de la caisse et redirection vers analytics...');\n          \n          // Fermer la caisse pour la boutique active\n          this.posCaisseService.fermerCaisse(boutiqueId).subscribe({\n            next: (response) => {\n              console.log('Caisse fermée avec succès:', response);\n              // Redirection vers analytics après fermeture de la caisse\n              this.router.navigate(['/analytics']).then(success => {\n                console.log(\"Navigation vers analytics réussie ?\", success);\n              });\n            },\n            error: (err) => {\n              console.error('Erreur lors de la fermeture de la caisse:', err.message);\n              // Si une erreur se produit lors de la fermeture de la caisse, rediriger vers la page d'analytics.\n              this.router.navigate(['/analytics']).then(success => {\n                console.log(\"Navigation vers analytics réussie ?\", success);\n              });\n            }\n          });\n        }\n      },\n      error: (err) => {\n        console.error('Erreur lors de la récupération des informations utilisateur:', err);\n        // Gestion des erreurs de récupération des infos utilisateur\n        this.router.navigate(['/analytics']);\n      }\n    });\n  }\n\n  prepareFermerCaisse(): void {\n    this.isLoadingCaisseDetails = true;\n    this.fermetureErrorMessage = null;\n    this.caisseDetails = null;\n    \n    const boutiqueId = this.boutiqueState.getCurrentValue();\n    \n    if (!boutiqueId) {\n      this.fermetureErrorMessage = \"Aucune boutique sélectionnée\";\n      this.isLoadingCaisseDetails = false;\n      return;\n    }\n\n    this.posCaisseService.getDerniereCaisseVendeur(boutiqueId).subscribe({\n      next: (response) => {\n        if (typeof response === 'string') {\n          this.fermetureErrorMessage = response;\n        } else {\n          this.caisseDetails = response;\n          // Vérifier si la caisse est ouverte\n          if (this.caisseDetails.statut !== 'OUVERTE') {\n            this.fermetureErrorMessage = \"Aucune caisse ouverte pour cette boutique\";\n          } else {\n            this.showFermerCaissePopup = true;\n          }\n        }\n        this.isLoadingCaisseDetails = false;\n      },\n      error: (err) => {\n        this.fermetureErrorMessage = \"Erreur lors du chargement des détails de la caisse: \" + err.message;\n        this.isLoadingCaisseDetails = false;\n      }\n    });\n  }\n\n  formatDate(dateString: string | Date | null): string {\n    if (!dateString) return 'N/A';\n    \n    const date = new Date(dateString);\n    if (isNaN(date.getTime())) return 'Date invalide';\n    \n    return date.toLocaleString('fr-FR', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  }\n\n  // Nouvelle méthode pour confirmer la fermeture\n  confirmFermerCaisse(): void {\n    if (!this.caisseDetails?.id) return;\n    \n    const caisseId = this.caisseDetails.id;\n    this.isLoadingCaisseDetails = true;\n    \n    this.posCaisseService.fermerCaisse(caisseId).subscribe({\n      next: (response) => {\n        this.showFermerCaissePopup = false;\n        this.handlePostFermeture();\n      },\n      error: (err) => {\n        this.fermetureErrorMessage = \"Échec de la fermeture de la caisse\";\n        this.isLoadingCaisseDetails = false;\n      }\n    });\n  }\n\n  // Méthode pour gérer la redirection après fermeture\n  private handlePostFermeture(): void {\n    this.userService.getUserInfo().subscribe({\n      next: (user) => {\n        const permissions = user.permissions;\n        if (permissions.length === 1 && permissions.includes(\"VENDRE_PRODUITS\")) {\n          this.userService.logoutUser();\n          this.router.navigate(['/connexion']);\n        } else {\n          this.router.navigate(['/analytics']);\n        }\n      },\n      error: () => this.router.navigate(['/analytics'])\n    });\n  }\n\n  // Méthode pour redirection\n  handleAnalytique(): void {\n    this.userService.getUserInfo().subscribe({\n      next: (user) => {\n        const permissions = user.permissions;\n        if (permissions.length === 1 && permissions.includes(\"VENDRE_PRODUITS\")) {\n          this.userService.logoutUser();\n          this.router.navigate(['/pos-accueil']);\n        } else {\n          this.router.navigate(['/analytics']);\n        }\n      },\n      error: () => this.router.navigate(['/analytics'])\n    });\n  }\n  \n\n  startDragPopup(event: MouseEvent): void {\n    event.preventDefault();\n    event.stopPropagation(); // Empêche la propagation à l'overlay\n    \n    this.isDraggingPopup = true;\n    this.startXPopup = event.clientX;\n    this.startYPopup = event.clientY;\n    this.initialXPopup = this.popupOffsetPopup.x;\n    this.initialYPopup = this.popupOffsetPopup.y;\n\n    document.addEventListener('mousemove', this.onMouseMovePopup);\n    document.addEventListener('mouseup', this.onMouseUpPopup);\n  }\n\n  onMouseMovePopup = (event: MouseEvent): void => {\n    if (!this.isDraggingPopup) return;\n    \n    requestAnimationFrame(() => {\n      const deltaX = event.clientX - this.startXPopup;\n      const deltaY = event.clientY - this.startYPopup;\n      this.popupOffsetPopup.x = this.initialXPopup + deltaX;\n      this.popupOffsetPopup.y = this.initialYPopup + deltaY;\n    });\n  }\n\n  onMouseUpPopup = (): void => {\n    this.isDraggingPopup = false;\n    document.removeEventListener('mousemove', this.onMouseMovePopup);\n    document.removeEventListener('mouseup', this.onMouseUpPopup);\n  }\n\n  closePopup(event?: MouseEvent) {\n    if (event) event.stopPropagation();\n    this.showCommandePopup = false;\n  }\n\n  getMontantObtenu(): number {\n    if (!this.caisseDetails) return 0;\n    return (this.caisseDetails.montantCourant || 0) - (this.caisseDetails.montantInitial || 0);\n  }\n\n  // toggleCalculator(): void {\n  //   this.showCalculatorPopup = !this.showCalculatorPopup;\n  //   if (this.showCalculatorPopup) {\n  //     this.isCalculatorMinimized = false;\n  //     this.calcWidth = this.baseWidth;\n  //     this.calcHeight = this.baseHeight;\n  //     this.calcScale = 1;\n  //     if (this.calcElement?.nativeElement) {\n  //       this.renderer.setStyle(this.calcElement.nativeElement, 'transform', `scale(1)`);\n  //     }\n  //   }\n  // }\n\n// pos-accueil.component.ts\ntoggleCalculator(): void {\n  this.showCalculatorPopup = !this.showCalculatorPopup;\n  \n  if (this.showCalculatorPopup) {\n    this.calculator.setActive(true);\n    this.scannerService.disableScanner();\n  } else {\n    this.calculator.setActive(false);\n    this.scannerService.enableScanner();\n  }\n}\n  // Ajoutez aussi cette méthode pour fermer proprement\n  closeCalculator(): void {\n    this.showCalculatorPopup = false;\n    this.scannerService.enableScanner();\n  }\n\n  // Méthode appelée depuis le template\n  onCalcKey(key: string) {\n    this.calculator.handleKey(key);\n  }\n\n  // expose l'affichage pour le template\n  get calcDisplay(): string {\n    return this.calculator.display;\n  }\n\n  get calcSolarDisplay(): string {\n    return this.calculator.solarDisplay;\n  }\n\n  // Optionnel : gestion clavier global pour la calculatrice\n  @HostListener('window:keydown', ['$event'])\n  handleKeyDown(event: KeyboardEvent) {\n    // Si la calculatrice n'est pas visible, on ne fait rien.\n    if (!this.showCalculatorPopup) {\n      return;\n    }\n\n    // Si l'utilisateur tape dans un input, textarea, etc., on désactive la calculatrice\n    // et on laisse l'événement se propager normalement.\n    const target = event.target as HTMLElement | null;\n    const isTypingInInput = !!target && (\n      target.tagName === 'INPUT' ||\n      target.tagName === 'TEXTAREA' ||\n      target.isContentEditable\n    );\n\n    if (isTypingInInput) {\n      this.calculator.setActive(false); // Désactive la calculatrice\n      return; // Ne pas traiter l'événement pour la calculatrice\n    }\n\n    // Si la calculatrice est active, on lui envoie la touche\n    if (this.isCalculatorActive) {\n      this.calculator.handleComputerKeyboard(event);\n    }\n  }\n\n  /** Réactive la calculatrice lors d'un clic dessus */\n  onCalculatorClick(): void {\n    this.calculator.setActive(true);\n  }\n\n  ngAfterViewInit(): void {\n    // mesurer la taille réelle de .calc pour établir la base\n    setTimeout(() => {\n      if (this.calcElement?.nativeElement) {\n        const el = this.calcElement.nativeElement;\n        this.baseWidth = el.offsetWidth || 420;\n        this.baseHeight = el.offsetHeight || 480;\n\n        // initialiser les dimensions actuelles à la base\n        this.calcWidth = this.baseWidth;\n        this.calcHeight = this.baseHeight;\n        this.calcScale = 1;\n      }\n      // recalculer max selon fenêtre actuelle\n      this.maxWidth = Math.max(400, window.innerWidth - 40);\n      this.maxHeight = Math.max(400, window.innerHeight - 40);\n    }, 0);\n  }\n\n  // Unified start (mouse) — délègue au startResizeFromCoords\n  startResize(event: MouseEvent, corner: 'br' | 'bl'): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.startResizeFromCoords(corner, event.clientX, event.clientY);\n  }\n\n  // start pour touch\n  startResizeTouch(touch: Touch, corner: 'br' | 'bl'): void {\n    this.startResizeFromCoords(corner, touch.clientX, touch.clientY);\n  }\n\n    // point d'entrée commun\n  private startResizeFromCoords(corner: 'br' | 'bl', clientX: number, clientY: number): void {\n    this.isResizing = true;\n    this.resizeCorner = corner;\n    this.startXResize = clientX;\n    this.startYResize = clientY;\n    this.initialWidth = this.calcWidth;\n    this.initialHeight = this.calcHeight;\n    this.initialPopupX = this.popupOffsetPopup.x;\n    this.initialPopupY = this.popupOffsetPopup.y;\n\n    // handlers unifiés pour mouse & touch\n    this.pointerMoveHandler = (e: any) => {\n      // empêcher scroll mobile quand on redimensionne\n      if (e.type === 'touchmove') e.preventDefault();\n      const { clientX, clientY } = this.extractClientFromEvent(e);\n      this.handlePointerMove(clientX, clientY);\n    };\n    this.pointerUpHandler = (e: any) => {\n      this.handlePointerUp();\n    };\n\n    document.addEventListener('mousemove', this.pointerMoveHandler, { passive: false });\n    document.addEventListener('mouseup', this.pointerUpHandler);\n    document.addEventListener('touchmove', this.pointerMoveHandler, { passive: false });\n    document.addEventListener('touchend', this.pointerUpHandler);\n  }\n\n  // extraction client coords pour mouse/touch\n  private extractClientFromEvent(e: any): { clientX: number, clientY: number } {\n    if (!e) return { clientX: 0, clientY: 0 };\n    if (e.type && e.type.startsWith('touch')) {\n      const t = e.touches && e.touches[0] ? e.touches[0] : (e.changedTouches && e.changedTouches[0] ? e.changedTouches[0] : null);\n      if (t) return { clientX: t.clientX, clientY: t.clientY };\n    } else if (e.clientX !== undefined) {\n      return { clientX: e.clientX, clientY: e.clientY };\n    }\n    // fallback\n    return { clientX: this.startXResize, clientY: this.startYResize };\n  }\n\n  // logique principale: on garde scale uniforme (même ratio), container suit le scale\n  private handlePointerMove(clientX: number, clientY: number): void {\n    if (!this.isResizing || !this.resizeCorner) return;\n\n    const deltaX = clientX - this.startXResize;\n    const deltaY = clientY - this.startYResize;\n\n    // calcul des candidats selon coin\n    let candidateWidth = this.initialWidth;\n    let candidateHeight = this.initialHeight;\n\n    if (this.resizeCorner === 'br') {\n      candidateWidth = this.initialWidth + deltaX;\n    } else if (this.resizeCorner === 'bl') {\n      candidateWidth = this.initialWidth - deltaX; // mouvement du coin gauche inverse\n    }\n    candidateHeight = this.initialHeight + deltaY;\n\n    // éviter valeurs négatives\n    candidateWidth = Math.max(10, candidateWidth);\n    candidateHeight = Math.max(10, candidateHeight);\n\n    // échelles relatives\n    const scaleX = candidateWidth / this.initialWidth;\n    const scaleY = candidateHeight / this.initialHeight;\n\n    // choisir le scale qui respecte à la fois deltaX et deltaY sans déformer (on prend le plus restrictif)\n    // ainsi largeur et hauteur changent ensemble en gardant le ratio initial\n    let newScale = Math.min(scaleX, scaleY);\n\n    // clamp scale global\n    newScale = Math.max(0.4, Math.min(2.5, newScale));\n\n    // nouvelles dimensions basées sur la base (ratio initial)\n    const newWidth = Math.round(this.baseWidth * newScale);\n    const newHeight = Math.round(this.baseHeight * newScale);\n\n    // clamp dimensions sur min/max en px\n    const clampedWidth = Math.max(this.minWidth, Math.min(this.maxWidth, newWidth));\n    const clampedHeight = Math.max(this.minHeight, Math.min(this.maxHeight, newHeight));\n\n    // recalc scale si les dimensions clampées ont changé\n    const finalScaleW = clampedWidth / this.baseWidth;\n    const finalScaleH = clampedHeight / this.baseHeight;\n    // garder le plus petit pour éviter débordements\n    const finalScale = Math.min(finalScaleW, finalScaleH);\n\n    // appliquer\n    this.calcScale = finalScale;\n    this.calcWidth = Math.round(this.baseWidth * finalScale);\n    this.calcHeight = Math.round(this.baseHeight * finalScale);\n\n    // ajuster position si coin gauche (bl) : le left doit bouger pour suivre le coin\n    if (this.resizeCorner === 'bl') {\n      // quand le width diminue, left augmente; quand width augmente, left diminue\n      this.popupOffsetPopup.x = Math.round(this.initialPopupX + (this.initialWidth - this.calcWidth));\n    } else {\n      this.popupOffsetPopup.x = this.initialPopupX;\n    }\n\n    // appliquer le scale au contenu\n    if (this.calcElement?.nativeElement) {\n      const el = this.calcElement.nativeElement;\n      el.style.transformOrigin = 'top left';\n      el.style.transform = `scale(${this.calcScale})`;\n    }\n  }\n\n  private onMouseMoveResize(event: MouseEvent): void {\n    if (!this.isResizing || !this.resizeCorner) return;\n    // calcul deltas\n    const deltaX = event.clientX - this.startXResize;\n    const deltaY = event.clientY - this.startYResize;\n\n    let newWidth = this.initialWidth;\n    let newHeight = this.initialHeight;\n    let newPopupX = this.initialPopupX;\n\n    if (this.resizeCorner === 'br') {\n      newWidth = this.initialWidth + deltaX;\n      newPopupX = this.initialPopupX; // gauche fixe\n    } else if (this.resizeCorner === 'bl') {\n      // left handle bouge -> on déplace aussi popupOffsetPopup.x\n      newWidth = this.initialWidth - deltaX;\n      newPopupX = this.initialPopupX + deltaX;\n    }\n\n    newHeight = this.initialHeight + deltaY;\n\n    // clamp\n    newWidth = Math.max(this.minWidth, Math.min(this.maxWidth, newWidth));\n    newHeight = Math.max(this.minHeight, Math.min(this.maxHeight, newHeight));\n\n    // appliquer\n    this.calcWidth = Math.round(newWidth);\n    this.calcHeight = Math.round(newHeight);\n    this.popupOffsetPopup.x = Math.round(newPopupX);\n\n    // recalculer scale du contenu pour conserver proportions et éviter débordements\n    const scaleX = this.calcWidth / this.baseWidth;\n    const scaleY = this.calcHeight / this.baseHeight;\n    // on prend le min pour garder le contenu entier visible\n    this.calcScale = Math.max(0.4, Math.min(2.5, Math.min(scaleX, scaleY)));\n\n    // appliquer scale directement via style sur l'élément\n    if (this.calcElement?.nativeElement) {\n      const el = this.calcElement.nativeElement;\n      el.style.transformOrigin = 'top left';\n      el.style.transform = `scale(${this.calcScale})`;\n      // pour éviter que le contenu dépasse lors du scale, on peut ajuster la hauteur du container\n      // si tu veux que le container suive exactement le contenu scaled, décommente :\n      // this.calcHeight = Math.round(this.baseHeight * this.calcScale);\n    }\n  }\n\n  private onMouseUpResize(): void {\n    this.isResizing = false;\n    this.resizeCorner = null;\n    this.removeResizeListeners();\n  }\n\n  // Si tu veux gérer le redimensionnement sur changement de fenêtre :\n  @HostListener('window:resize', ['$event'])\n  onWindowResize() {\n    this.maxWidth = Math.max(300, window.innerWidth - 40);\n    this.maxHeight = Math.max(300, window.innerHeight - 40);\n    // clamp des valeurs actuelles\n    this.calcWidth = Math.min(this.calcWidth, this.maxWidth);\n    this.calcHeight = Math.min(this.calcHeight, this.maxHeight);\n  }\n\n  onCalculatorMouseMove(event: MouseEvent): void {\n  const el = this.calculatorRef?.nativeElement;\n  if (!el) return;\n\n  const rect = el.getBoundingClientRect();\n  const x = event.clientX - rect.left; // position locale\n  const y = event.clientY - rect.top;\n\n  const nearRight = (rect.width - x) <= this.cornerThreshold;\n  const nearLeft = x <= this.cornerThreshold;\n  const nearBottom = (rect.height - y) <= this.cornerThreshold;\n\n  // détecte coin bas-droit ou bas-gauche\n  if (nearBottom && nearRight) {\n    this.hoverResizeCorner = 'br';\n    el.style.cursor = 'nwse-resize';\n  } else if (nearBottom && nearLeft) {\n    this.hoverResizeCorner = 'bl';\n    el.style.cursor = 'nesw-resize';\n  } else {\n    // pas près d'un coin\n    this.hoverResizeCorner = null;\n    el.style.cursor = 'default';\n  }\n}\n\n\n// reset du curseur quand on sort du cadre\nonCalculatorMouseLeave(_: MouseEvent): void {\n  const el = this.calculatorRef?.nativeElement;\n  if (el) el.style.cursor = 'default';\n  this.hoverResizeCorner = null;\n}\n\n// fin du pointer\nprivate handlePointerUp(): void {\n  this.isResizing = false;\n  this.resizeCorner = null;\n  // remove listeners\n  document.removeEventListener('mousemove', this.pointerMoveHandler);\n  document.removeEventListener('mouseup', this.pointerUpHandler);\n  document.removeEventListener('touchmove', this.pointerMoveHandler);\n  document.removeEventListener('touchend', this.pointerUpHandler);\n  this.pointerMoveHandler = undefined;\n  this.pointerUpHandler = undefined;\n}\n\n// ancien removeResizeListeners - on peut garder ou supprimer selon usage\nprivate removeResizeListeners(): void {\n  if (this.pointerMoveHandler) {\n    document.removeEventListener('mousemove', this.pointerMoveHandler);\n    document.removeEventListener('touchmove', this.pointerMoveHandler);\n    this.pointerMoveHandler = undefined;\n  }\n  if (this.pointerUpHandler) {\n    document.removeEventListener('mouseup', this.pointerUpHandler);\n    document.removeEventListener('touchend', this.pointerUpHandler);\n    this.pointerUpHandler = undefined;\n  }\n}\n\n// -----------------------------------------------------------\n// mouse flow resto — remplace onCalculatorMouseDown & add touch start\nonCalculatorMouseDown(event: MouseEvent): void {\n  const target = event.target as HTMLElement;\n  // si click sur un bouton/clavier => laisser l'action normale\n  if (target.closest('.key') || target.tagName === 'BUTTON' || target.tagName === 'INPUT') {\n    return;\n  }\n\n  // si déjà près d'un coin\n  if (this.hoverResizeCorner) {\n    this.startResize(event, this.hoverResizeCorner);\n    return;\n  }\n\n  // sinon drag\n  this.startDragPopup(event);\n}\n\n// tactile: touchstart\nonCalculatorTouchStart(ev: TouchEvent): void {\n  // si multiple touches -> ignore\n  if (!ev || !ev.touches || ev.touches.length === 0) return;\n\n  const touch = ev.touches[0];\n  const el = this.calculatorRef?.nativeElement;\n  if (!el) return;\n\n  const rect = el.getBoundingClientRect();\n  const x = touch.clientX - rect.left;\n  const y = touch.clientY - rect.top;\n\n  const nearRight = (rect.width - x) <= this.cornerThreshold;\n  const nearLeft = x <= this.cornerThreshold;\n  const nearBottom = (rect.height - y) <= this.cornerThreshold;\n\n  // si on commence un resize tactile\n  if (nearBottom && (nearRight || nearLeft)) {\n    const corner = nearRight ? 'br' : 'bl';\n    // preventDefault pour éviter le scroll\n    ev.preventDefault();\n    this.startResizeTouch(touch, corner);\n    return;\n  }\n\n  // sinon si on touche sur une zone non interactive -> démarrer drag\n  const target = ev.target as HTMLElement;\n  if (target && (target.closest('.key') || target.tagName === 'BUTTON' || target.tagName === 'INPUT')) {\n    // laisser interaction normale\n    return;\n  }\n\n  // simuler startDragPopup via start coords (on convertit touch à mouse event)\n  const fakeMouseEvent = new MouseEvent('mousedown', {\n    clientX: touch.clientX,\n    clientY: touch.clientY,\n    bubbles: true\n  });\n  this.startDragPopup(fakeMouseEvent);\n}\n\n// Méthode pour réduire la calculatrice\nminimizeCalculator(): void {\n  this.isCalculatorMinimized = !this.isCalculatorMinimized;\n\n  if (this.isCalculatorMinimized) {\n    // Sauvegarder la position actuelle\n    this.calculatorPosition.x = this.popupOffsetPopup.x;\n    this.calculatorPosition.y = this.popupOffsetPopup.y;\n\n    // Réduire la taille du container\n    this.calcWidth = 200;\n    this.calcHeight = 40;\n\n    // Calculer un scale basé sur la baseWidth pour garder les proportions\n    this.calcScale = Math.max(0.1, Math.min(1, this.calcWidth / this.baseWidth));\n\n    // Appliquer transform au contenu .calc\n    if (this.calcElement?.nativeElement) {\n      this.renderer.setStyle(this.calcElement.nativeElement, 'transformOrigin', 'top left');\n      this.renderer.setStyle(this.calcElement.nativeElement, 'transform', `scale(${this.calcScale})`);\n    }\n  } else {\n    // Restaurer la taille normale\n    this.calcWidth = this.baseWidth;\n    this.calcHeight = this.baseHeight;\n    this.calcScale = 1;\n\n    if (this.calcElement?.nativeElement) {\n      this.renderer.setStyle(this.calcElement.nativeElement, 'transform', `scale(${this.calcScale})`);\n    }\n\n    // Restaurer la position\n    this.popupOffsetPopup.x = this.calculatorPosition.x;\n    this.popupOffsetPopup.y = this.calculatorPosition.y;\n  }\n}\n\n\n onSearch(event: Event) {\n    const input = event.target as HTMLInputElement;\n    this.calculator.setActive(false); // Désactive la calculatrice lors de la recherche\n    console.log('Recherche:', input.value);\n     this.searchTerm = input.value;\n    this.searchService.setSearch(input.value);\n  }\n\n  searchTerm: string = '';\n\n  clearSearch() {\n    this.searchTerm = '';\n    this.searchService.setSearch('');\n  }\n}","<!-- pos-accueil.component.html -->\n<div class=\"pos_container\">\n  <div class=\"pos_content\">\n    <!-- // DEBUT DE HEADER  -->\n    <div class=\"pos_header\">\n      <nav class=\"navBar\">\n        <!-- // COTE LEFT  -->\n        <div class=\"header_left\">\n          <!-- // btn vente pos  -->\n          <div class=\"btn_vente_pos\" (click)=\"onClickVente()\">\n            <button class=\"btn btn_default\" [class.btn_active]=\"activeButton === 'vente'\">\n              Ventes POS\n            </button>\n          </div>\n          <!-- // btn commande pos  -->\n          <div class=\"btn_commande_pos\" (click)=\"onClickCommandes()\">\n            <button class=\"btn btn_default\" [class.btn_active]=\"activeButton === 'commande'\">\n              Commandes\n            </button>\n          </div>\n          <!-- // btn add commande  -->\n          <div class=\"btn_add_commande\">\n            <button class=\"btn\" (click)=\"addCommande()\">\n              <i class=\"ri-add-line\"></i>\n            </button>\n          </div>\n          <!-- // List des commande en onglet  -->\n          <ul class=\"list_commande\">\n            <li *ngFor=\"let cmd of visibleCommandes\" \n                [class.list_commande_active]=\"activeCommande === cmd\"\n                (click)=\"setActiveCommande(cmd)\">\n              {{ cmd }}\n            </li>\n            \n            <li *ngIf=\"commandes.length > 6\" \n                class=\"list_commande_plus\" \n                (click)=\"showCommandePopup = true\">\n              <i class=\"ri-arrow-down-s-line\"></i>\n            </li>\n          </ul>\n\n          <!-- pos-accueil.component.html -->\n          <div class=\"miin_loading\" *ngIf=\"scanInProgress\">\n            <i class=\"ri-barcode-line scan-indicator\"></i>\n          </div>\n\n          <!-- Popup au centre de l'écran -->\n          <div *ngIf=\"showCommandePopup\" class=\"commande-popup-overlay\">\n            <div class=\"commande-popup-content\" \n                [ngStyle]=\"{ 'transform': 'translate3d(' + popupOffsetPopup.x + 'px, ' + popupOffsetPopup.y + 'px, 0)' }\" (click)=\"$event.stopPropagation()\">\n              <!-- Déplacer l'événement startDragPopup uniquement sur le header -->\n              <div class=\"popup-header\" (mousedown)=\"startDragPopup($event)\">\n                <h3>Liste des commandes</h3>\n                <i class=\"ri-close-line\" (click)=\"closePopup($event)\"></i>\n              </div>\n              <div class=\"popup-commandes\">\n                <ul class=\"list_commande commandes-grid\">\n                  <li *ngFor=\"let cmd of commandes\" \n                      [class.active]=\"activeCommande === cmd\"\n                      (click)=\"setActiveCommande(cmd)\">\n                    {{ cmd }}\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <!-- // COTE RIGHT  -->\n        <div class=\"header_right\">\n\n          <!-- // Calculatrice -->\n          <div class=\"icon_calculatrice\" (click)=\"toggleCalculator()\">\n            <img src=\"assets/img/calculatrice-moderne.png\" alt=\"\">\n          </div>\n\n          <!-- // Name boutique  -->\n          <div class=\"name_boutique\">\n            <!-- Affiche le nom seulement une fois chargé ; sinon mini loader / rien -->\n            <ng-container *ngIf=\"isBoutiqueNameLoaded; else loadingBoutique\">\n              <p>{{ selectedBoutiqueName }}</p>\n            </ng-container>\n\n           \n\n            <ng-template #loadingBoutique>\n              <!-- tu peux afficher rien, un placeholder ou un petit spinner -->\n              <!-- Exemple : un petit texte discret -->\n              <p class=\"boutique-loading\">...</p>\n            </ng-template>\n          </div>\n\n          <!-- // Input de recherche  -->\n          <div class=\"inputSearch\">\n            <i \n              class=\"ri-search-2-line\" \n              *ngIf=\"!searchTerm\">\n            </i>\n\n            <i \n              class=\"ri-close-line\" \n              *ngIf=\"searchTerm\" \n              (click)=\"clearSearch()\">\n            </i>\n\n            <input type=\"text\" placeholder=\"Recherche des produits\" \n              [value]=\"searchTerm\"\n              (input)=\"onSearch($event)\"/>\n          </div>\n\n          <!-- // Icon de sort -->\n          <!-- <div class=\"icon_sort\">\n            <i class=\"ri-sort-asc\"></i>\n          </div> -->\n          <div class=\"icon_sort\" (click)=\"showDropdown = !showDropdown\" clickOutside (clickOutside)=\"showDropdown = false\">\n            <i [class]=\"(isListView$ | async) ? 'ri-apps-fill' : 'ri-list-check'\"></i>\n            \n            <div class=\"view-dropdown\" *ngIf=\"showDropdown\">\n              <div class=\"dropdown-item\" (click)=\"toggleView('grid')\">\n                Cadre {{ (isListView$ | async) ? '✓' : '' }}\n              </div>\n              <div class=\"dropdown-item\" (click)=\"toggleView('list')\">\n                Liste {{ !(isListView$ | async) ? '✓' : '' }}\n              </div>\n            </div>\n          </div>\n          <!-- // profil  -->\n          <div class=\"profil\">\n            <span>{{ userName }}</span>\n          </div>\n          <!-- // Menu  -->\n          <div class=\"menu\" \n              (click)=\"toggleMenuDropdown()\" \n              clickOutside \n              (clickOutside)=\"showMenuDropdown = false\">\n            <i class=\"ri-menu-line\"></i>\n            \n            <!-- Dropdown Menu -->\n            <div class=\"menu-dropdown\" *ngIf=\"showMenuDropdown\">\n              <div class=\"dropdown-item\">\n                <i class=\"ri-download-line\"></i>\n                Installer l'application\n              </div>\n              <div class=\"dropdown-item\" (click)=\"handleAnalytique()\">\n                <i class=\"ri-home-5-line\"></i>\n                Tableau de bord \n              </div>\n              <div class=\"dropdown-item\">\n                <i class=\"ri-restart-line\"></i>\n                Recharger les donnees\n              </div>\n              <div class=\"dropdown-item\" (click)=\"prepareFermerCaisse()\">\n                <i class=\"ri-money-euro-circle-line\"></i>\n                Fermer la caisse\n              </div> \n            </div>\n          </div>\n        </div>\n      </nav>\n    </div>\n    <!-- // FIN DE HEADER  -->\n    <!-- // DEBUT DE CONTENU  -->\n    <router-outlet></router-outlet>\n\n    <!-- // FIN DE CONTENU  -->\n    \n\n  </div>\n</div>\n\n\n\n\n\n<!-- Popup de fermeture de caisse -->\n<div *ngIf=\"showFermerCaissePopup\" class=\"commande-popup-overlay\">\n  <div class=\"commande-popup-content\" [ngStyle]=\"{ 'transform': 'translate3d(' + popupOffsetPopup.x + 'px, ' + popupOffsetPopup.y + 'px, 0)' }\" (click)=\"$event.stopPropagation()\">\n    <div class=\"popup-header\" (mousedown)=\"startDragPopup($event)\">\n      <h3>Fermer la caisse</h3>\n      <i class=\"ri-close-line\" (click)=\"showFermerCaissePopup = false\"></i>\n    </div>\n    \n    <div class=\"popup-body\">\n      <!-- État de chargement -->\n      <div *ngIf=\"isLoadingCaisseDetails\" class=\"loading-indicator\">\n        <i class=\"ri-loader-4-line spin\"></i> Chargement des détails...\n      </div>\n      \n      <!-- Détails de la caisse -->\n      <div *ngIf=\"caisseDetails && !isLoadingCaisseDetails\" class=\"caisse-details-container\">\n        <div class=\"caisse-info-header\">\n          <div class=\"profil\">\n            <span>{{ caisseDetails.nomVendeur ? caisseDetails.nomVendeur[0] : '?' }}</span>\n          </div>\n          <div>\n            <div class=\"caisse-info-title\">{{ caisseDetails.nomVendeur || 'Vendeur non spécifié' }}</div>\n            <div class=\"caisse-info-subtitle\">{{ caisseDetails.nomBoutique || 'Boutique non spécifiée' }}</div>\n          </div>\n        </div>\n        \n        <div class=\"caisse-details-grid\">\n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Statut:</span>\n            <span class=\"detail-value\" [class.text-success-status]=\"caisseDetails.statut === 'OUVERTE'\"\n                                 [class.text-danger]=\"caisseDetails.statut === 'FERMEE'\">\n              {{ caisseDetails.statut === 'OUVERTE' ? 'Ouverte' : 'Fermée' }}\n            </span>\n          </div>\n          \n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Montant initial :</span>\n            <span class=\"detail-value\">{{ caisseDetails.montantInitial | cfaCurrency }}</span>\n          </div>\n          \n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Montant courant :</span>\n            <span class=\"detail-value\">{{ caisseDetails.montantCourant | cfaCurrency }}</span>\n          </div>\n          \n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Ouverte le :</span>\n            <span class=\"detail-value\">{{ formatDate(caisseDetails.dateOuverture) }}</span>\n          </div>\n          \n          <div class=\"detail-item\" *ngIf=\"caisseDetails.dateFermeture\">\n            <span class=\"detail-label\">Fermée le :</span>\n            <span class=\"detail-value\">{{ formatDate(caisseDetails.dateFermeture) }}</span>\n          </div>\n          \n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Montant obtenu :</span>\n            <span class=\"detail-value\">{{ getMontantObtenu() | cfaCurrency }}</span>\n          </div>\n          \n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Nom Vendeur :</span>\n            <span class=\"detail-value\">{{ caisseDetails.nomVendeur || 'N/A' }}</span>\n          </div>\n          \n          <div class=\"detail-item\">\n            <span class=\"detail-label\">Nom Boutique :</span>\n            <span class=\"detail-value\">{{ caisseDetails.nomBoutique || 'N/A' }}</span>\n          </div>\n        </div>\n      </div>\n      \n      <!-- Messages d'erreur -->\n      <div *ngIf=\"fermetureErrorMessage\" class=\"error-message\">\n        <i class=\"ri-error-warning-line\"></i> {{ fermetureErrorMessage }}\n      </div>\n    </div>\n    \n    <div class=\"popup-footer\">\n      <button class=\"btn btn-cancel\" \n              (click)=\"showFermerCaissePopup = false\"\n              [disabled]=\"isLoadingCaisseDetails\">\n        Annuler\n      </button>\n      <button class=\"btn btn-confirm\" \n              (click)=\"onLogout()\"\n              [disabled]=\"isLoadingCaisseDetails || !caisseDetails\">\n        Confirmer la fermeture\n      </button>\n    </div>\n  </div>\n</div>\n\n<!-- Popup de calculatrice - Modifié pour ajouter les contrôles de fenêtre -->\n<div *ngIf=\"showCalculatorPopup\" class=\"calculate-popup-overlay\">\n  <!-- backdrop subtil mais non bloquant : on peut choisir pointer-events selon besoin -->\n  <div class=\"calc-backdrop\" (click)=\"minimizeCalculator()\" style=\"pointer-events: auto;\"></div>\n  <div class=\"calculator\"\n      #calculatorRef\n      (click)=\"$event.stopPropagation(); onCalculatorClick()\"\n      [ngStyle]=\"{\n        'transform': 'translate3d(' + popupOffsetPopup.x + 'px, ' + popupOffsetPopup.y + 'px, 0)',\n        'width.px': calcWidth,\n        'height.px': calcHeight\n      }\"\n      (mousemove)=\"onCalculatorMouseMove($event)\"\n      (mouseleave)=\"onCalculatorMouseLeave($event)\"\n      (mousedown)=\"onCalculatorMouseDown($event)\"\n      (touchstart)=\"onCalculatorTouchStart($event)\"\n    >\n    \n    <div class=\"total\">\n      <!-- Barre de titre avec contrôles de fenêtre -->\n      <div class=\"calculator-title-bar\" (mousedown)=\"startDragPopup($event)\">\n        <span>Calculatrice</span>\n        <div class=\"calculator-window-controls\">\n          <i class=\"ri-subtract-line\" (click)=\"minimizeCalculator(); $event.stopPropagation()\"></i>\n          <!-- <i class=\"ri-close-line\" (click)=\"showCalculatorPopup = false; $event.stopPropagation()\"></i> -->\n          <!-- Remplacer l'ancien bouton de fermeture -->\n          <i class=\"ri-close-line\" (click)=\"closeCalculator(); $event.stopPropagation()\"></i>\n        </div>\n      </div>\n      \n      <!-- Contenu de la calculatrice (masqué en mode réduit) -->\n      <div class=\"calculator-content\" [class.minimized]=\"isCalculatorMinimized\">\n        <!-- CALCULATOR BODY -->\n        <div class=\"calc\" #calcElement>\n          <!-- Top bar -->\n          <div class=\"calc-top\">\n            <div class=\"brand-img\">\n              <img src=\"assets/logo/tchakeda.png\" alt=\"\">\n            </div>\n            <span class=\"digits-badge\">12&nbsp;FICHES</span>\n          </div>\n\n          <!-- Screen -->\n          <div class=\"screen\">\n            <span class=\"screen-text\">{{ calcDisplay }}</span>\n          </div>\n\n          <!-- label -->\n          <div class=\"meta\">Dispositifs de calcul</div>\n\n          <!-- Solar + btn -->\n          <div class=\"meta-row\">\n            <div class=\"solar\">\n              <span class=\"screen-text-sub\">{{ calcSolarDisplay }}</span>\n            </div>\n            <div class=\"keys-true\">\n              <button class=\"key fn\" (click)=\"onCalcKey('+/-')\">+/-</button>\n              <button class=\"key fn\" (click)=\"onCalcKey('√')\">√</button>\n              <button class=\"key on\" style=\"font-size: 14px;\" (click)=\"onCalcKey('ON/AC')\">ON/AC</button>\n            </div>\n          </div>\n\n          <!-- Keys (extrait complet, adapte selon ton HTML existant) -->\n          <div class=\"keys\">\n            <button class=\"key fn\" (click)=\"onCalcKey('M+')\">M+</button>\n            <button class=\"key fn\" (click)=\"onCalcKey('M-')\">M-</button>\n            <button class=\"key fn\" (click)=\"onCalcKey('MRC')\">MRC</button>\n            <button class=\"key fn\" (click)=\"onCalcKey('GT')\">GT</button>\n            <button class=\"key fn\" (click)=\"onCalcKey('C.CE')\">C.CE</button>\n\n            <button class=\"key fn\" (click)=\"onCalcKey('MC')\">MC</button>\n            <button class=\"key fn\" (click)=\"onCalcKey('MR')\">MR</button>\n            <button class=\"key fn\" (click)=\"onCalcKey('Ex')\">Ex</button>\n            <button class=\"key op\" (click)=\"onCalcKey('÷')\">÷</button>\n            <button class=\"key fn\" (click)=\"onCalcKey('▶')\">▶</button>\n\n            <button class=\"key num\" (click)=\"onCalcKey('7')\">7</button>\n            <button class=\"key num\" (click)=\"onCalcKey('8')\">8</button>\n            <button class=\"key num\" (click)=\"onCalcKey('9')\">9</button>\n            <button class=\"key op\" (click)=\"onCalcKey('×')\">×</button>\n            <button class=\"key fn\" (click)=\"onCalcKey('%')\">%</button>\n\n            <button class=\"key num\" (click)=\"onCalcKey('4')\">4</button>\n            <button class=\"key num\" (click)=\"onCalcKey('5')\">5</button>\n            <button class=\"key num\" (click)=\"onCalcKey('6')\">6</button>\n            <button class=\"key op\" (click)=\"onCalcKey('−')\">−</button>\n            <button class=\"key fn\" (click)=\"onCalcKey('MU')\">MU</button>\n\n            <button class=\"key num\" (click)=\"onCalcKey('1')\">1</button>\n            <button class=\"key num\" (click)=\"onCalcKey('2')\">2</button>\n            <button class=\"key num\" (click)=\"onCalcKey('3')\">3</button>\n            <button class=\"key plus tall\" (click)=\"onCalcKey('+')\">+</button>\n            <button class=\"key equals tall\" (click)=\"onCalcKey('=')\">=</button>\n\n            <button class=\"key num wide0\" (click)=\"onCalcKey('0')\">0</button>\n            <button class=\"key num\" (click)=\"onCalcKey('00')\">00</button>\n            <button class=\"key num\" (click)=\"onCalcKey('.')\">.</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { Injectable } from \"@angular/core\";\nimport { HttpClient, HttpHeaders } from \"@angular/common/http\";\nimport { environment } from \"src/environments/environment\";\nimport { Observable, of, throwError } from \"rxjs\";\nimport { switchMap, catchError, map } from \"rxjs/operators\";\nimport { OuvrirCaisseRequest, CaisseResponse, FermerCaisseRequest } from \"../../MODELS/CaisseModel/caisse.model\";\nimport { UsersService } from \"../users.service\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PosCaisseService {\n  private apiUrl = environment.apiBaseUrl;\n  \n  constructor(\n    private http: HttpClient,\n    private usersService: UsersService\n  ) { }\n\n  ouvrirCaisse(request: OuvrirCaisseRequest): Observable<CaisseResponse> {\n    return this.usersService.getValidAccessToken().pipe(\n      switchMap(token => {\n        if (!token) {\n          throw new Error('Aucun token trouvé');\n        }\n\n        const headers = new HttpHeaders({\n          'Authorization': `Bearer ${token}`\n        });\n\n        return this.http.post<CaisseResponse>(\n          `${this.apiUrl}/ouvrir`, \n          request, \n          { headers }\n        );\n      }),\n        catchError(error => {\n            console.error('Erreur détaillée', error);\n            \n            // Essayez d'extraire le message d'erreur spécifique\n            let errorMsg = 'Erreur lors de l\\'ouverture de la caisse';\n            \n            if (error.error && error.error.error) {\n                errorMsg = error.error.error;\n            } else if (error.error && error.error.message) {\n                errorMsg = error.error.message;\n            } else if (error.message) {\n                errorMsg = error.message;\n            }\n            \n            return throwError(() => ({ \n                message: errorMsg,\n                originalError: error \n            }));\n        })\n    );\n  }\n\nfermerCaisse(boutiqueId: number): Observable<any> {\n  console.log('Tentative de récupération du token...'); // Log avant de récupérer le token\n\n  return this.usersService.getValidAccessToken().pipe( // On récupère le token valide de l'utilisateur\n    switchMap(token => {\n      if (!token) {\n        console.error('Aucun token trouvé');\n        throw new Error('Aucun token trouvé');\n      }\n\n      console.log('Token récupéré :', token); // Log du token récupéré\n\n      const headers = new HttpHeaders({\n        'Authorization': `Bearer ${token}` // Envoi du token d'authentification\n      });\n\n      // Préparation du corps de la requête avec boutiqueId\n      const body = {\n        boutiqueId: boutiqueId\n      };\n\n      console.log('Envoi de la requête POST pour fermer la caisse...'); // Log avant de faire la requête\n\n      return this.http.post<any>(`${this.apiUrl}/fermer`, body, { headers }).pipe(\n        catchError(error => {\n          console.error('Erreur lors de la requête pour fermer la caisse:', error);\n          return throwError(() => error);\n        })\n      );\n    }),\n    catchError(error => {\n      console.error('Erreur détaillée dans le service:', error);\n\n      // Gestion des erreurs\n      let errorMsg = 'Erreur lors de la fermeture de la caisse';\n      if (error.error && error.error.error) {\n        errorMsg = error.error.error;\n      } else if (error.error && error.error.message) {\n        errorMsg = error.error.message;\n      } else if (error.message) {\n        errorMsg = error.message;\n      }\n\n      return throwError(() => ({\n        message: errorMsg,\n        originalError: error\n      }));\n    })\n  );\n}\n\n  getDerniereCaisseVendeur(boutiqueId: number): Observable<CaisseResponse> {\n    return this.usersService.getValidAccessToken().pipe(\n      switchMap(token => {\n        if (!token) throw new Error('Aucun token trouvé');\n\n        const headers = new HttpHeaders({ 'Authorization': `Bearer ${token}` });\n\n        // pos-caisse-service.ts (extrait)\n        return this.http.get<CaisseResponse>(`${this.apiUrl}/caisse/derniere/${boutiqueId}`, { headers }).pipe(\n          map(resp => resp),\n          catchError(err => {\n            console.error('HTTP getDerniereCaisseVendeur error ->', err);\n\n            let msg = 'Erreur inconnue';\n            if (err?.error) {\n              if (typeof err.error === 'string') {\n                msg = err.error;                     // serveur renvoie directement un texte\n              } else if (err.error?.message) {\n                msg = err.error.message;             // structure { message: \"...\" }\n              } else {\n                try { msg = JSON.stringify(err.error); } catch { msg = String(err.error); }\n              }\n            } else if (err?.message) {\n              msg = err.message;\n            } else {\n              try { msg = JSON.stringify(err); } catch { msg = String(err); }\n            }\n\n            // Propager une string (évite new Error(obj) qui devient \"[object Object]\")\n            return throwError(() => msg);\n          })\n        );\n\n      })\n    );\n  }\n\n  getCaissesByBoutique(boutiqueId: number): Observable<CaisseResponse[]> {\n    return this.usersService.getValidAccessToken().pipe(\n      switchMap(token => {\n        if (!token) throw new Error('Aucun token trouvé');\n\n        const headers = new HttpHeaders({\n          'Authorization': `Bearer ${token}`\n        });\n\n        return this.http.get<CaisseResponse[]>(\n          `${this.apiUrl}/boutique/${boutiqueId}/caisses`, \n          { headers }\n        );\n      }),\n      catchError(error => {\n        // Gestion d'erreur détaillée\n        let errorMsg = 'Erreur lors du chargement des caisses';\n        if (error?.error?.error) errorMsg = error.error.error;\n        else if (error?.error?.message) errorMsg = error.error.message;\n        else if (error.message) errorMsg = error.message;\n        \n        return throwError(() => ({ \n          message: errorMsg,\n          originalError: error \n        }));\n      })\n    );\n  }\n\n  getHistoriqueCaissesByVendeur(vendeurId: number): Observable<CaisseResponse[]> {\n    return this.usersService.getValidAccessToken().pipe(\n      switchMap(token => {\n        if (!token) throw new Error('Aucun token trouvé');\n\n        const headers = new HttpHeaders({\n          'Authorization': `Bearer ${token}`\n        });\n\n        return this.http.get<CaisseResponse[]>(\n          `${this.apiUrl}/vendeur/${vendeurId}`, \n          { headers }\n        );\n      }),\n      catchError(error => {\n        let errorMsg = 'Erreur lors du chargement de l\\'historique des caisses';\n        if (error?.error?.error) errorMsg = error.error.error;\n        else if (error?.error?.message) errorMsg = error.error.message;\n        else if (error.message) errorMsg = error.message;\n        \n        return throwError(() => ({ \n          message: errorMsg,\n          originalError: error \n        }));\n      })\n    );\n  }\n  \n\n}"],"names":["CommonModule","FormsModule","RouterModule","ClickOutsideDirective","environment","CfaCurrencyPipe","i0","ɵɵelementStart","ɵɵlistener","PosAccueilComponent_li_15_Template_li_click_0_listener","cmd_r3","ɵɵrestoreView","_r2","$implicit","ctx_r3","ɵɵnextContext","ɵɵresetView","setActiveCommande","ɵɵtext","ɵɵelementEnd","ɵɵclassProp","activeCommande","ɵɵadvance","ɵɵtextInterpolate1","PosAccueilComponent_li_16_Template_li_click_0_listener","_r5","showCommandePopup","ɵɵelement","PosAccueilComponent_div_18_li_8_Template_li_click_0_listener","cmd_r8","_r7","PosAccueilComponent_div_18_Template_div_click_1_listener","$event","_r6","stopPropagation","PosAccueilComponent_div_18_Template_div_mousedown_2_listener","startDragPopup","PosAccueilComponent_div_18_Template_i_click_5_listener","closePopup","ɵɵtemplate","PosAccueilComponent_div_18_li_8_Template","ɵɵproperty","ɵɵpureFunction1","_c2","popupOffsetPopup","x","y","commandes","ɵɵelementContainerStart","ɵɵtextInterpolate","selectedBoutiqueName","PosAccueilComponent_i_28_Template_i_click_0_listener","_r9","clearSearch","PosAccueilComponent_div_33_Template_div_click_1_listener","_r10","toggleView","PosAccueilComponent_div_33_Template_div_click_4_listener","ɵɵpipeBind1","isListView$","PosAccueilComponent_div_39_Template_div_click_4_listener","_r11","handleAnalytique","PosAccueilComponent_div_39_Template_div_click_10_listener","prepareFermerCaisse","formatDate","caisseDetails","dateFermeture","PosAccueilComponent_div_41_div_8_div_33_Template","nomVendeur","nomBoutique","statut","montantInitial","montantCourant","dateOuverture","getMontantObtenu","fermetureErrorMessage","PosAccueilComponent_div_41_Template_div_click_1_listener","_r12","PosAccueilComponent_div_41_Template_div_mousedown_2_listener","PosAccueilComponent_div_41_Template_i_click_5_listener","showFermerCaissePopup","PosAccueilComponent_div_41_div_7_Template","PosAccueilComponent_div_41_div_8_Template","PosAccueilComponent_div_41_div_9_Template","PosAccueilComponent_div_41_Template_button_click_11_listener","PosAccueilComponent_div_41_Template_button_click_13_listener","onLogout","isLoadingCaisseDetails","PosAccueilComponent_div_42_Template_div_click_1_listener","_r13","minimizeCalculator","PosAccueilComponent_div_42_Template_div_click_2_listener","onCalculatorClick","PosAccueilComponent_div_42_Template_div_mousemove_2_listener","onCalculatorMouseMove","PosAccueilComponent_div_42_Template_div_mouseleave_2_listener","onCalculatorMouseLeave","PosAccueilComponent_div_42_Template_div_mousedown_2_listener","onCalculatorMouseDown","PosAccueilComponent_div_42_Template_div_touchstart_2_listener","onCalculatorTouchStart","PosAccueilComponent_div_42_Template_div_mousedown_5_listener","PosAccueilComponent_div_42_Template_i_click_9_listener","PosAccueilComponent_div_42_Template_i_click_10_listener","closeCalculator","PosAccueilComponent_div_42_Template_button_click_29_listener","onCalcKey","PosAccueilComponent_div_42_Template_button_click_31_listener","PosAccueilComponent_div_42_Template_button_click_33_listener","PosAccueilComponent_div_42_Template_button_click_36_listener","PosAccueilComponent_div_42_Template_button_click_38_listener","PosAccueilComponent_div_42_Template_button_click_40_listener","PosAccueilComponent_div_42_Template_button_click_42_listener","PosAccueilComponent_div_42_Template_button_click_44_listener","PosAccueilComponent_div_42_Template_button_click_46_listener","PosAccueilComponent_div_42_Template_button_click_48_listener","PosAccueilComponent_div_42_Template_button_click_50_listener","PosAccueilComponent_div_42_Template_button_click_52_listener","PosAccueilComponent_div_42_Template_button_click_54_listener","PosAccueilComponent_div_42_Template_button_click_56_listener","PosAccueilComponent_div_42_Template_button_click_58_listener","PosAccueilComponent_div_42_Template_button_click_60_listener","PosAccueilComponent_div_42_Template_button_click_62_listener","PosAccueilComponent_div_42_Template_button_click_64_listener","PosAccueilComponent_div_42_Template_button_click_66_listener","PosAccueilComponent_div_42_Template_button_click_68_listener","PosAccueilComponent_div_42_Template_button_click_70_listener","PosAccueilComponent_div_42_Template_button_click_72_listener","PosAccueilComponent_div_42_Template_button_click_74_listener","PosAccueilComponent_div_42_Template_button_click_76_listener","PosAccueilComponent_div_42_Template_button_click_78_listener","PosAccueilComponent_div_42_Template_button_click_80_listener","PosAccueilComponent_div_42_Template_button_click_82_listener","PosAccueilComponent_div_42_Template_button_click_84_listener","PosAccueilComponent_div_42_Template_button_click_86_listener","PosAccueilComponent_div_42_Template_button_click_88_listener","PosAccueilComponent_div_42_Template_button_click_90_listener","ɵɵpureFunction3","_c3","calcWidth","calcHeight","isCalculatorMinimized","calcDisplay","calcSolarDisplay","PosAccueilComponent","constructor","router","viewState","userService","posCaisseService","commandeState","boutiqueState","boutiqueService","searchService","calculator","scannerService","renderer","apiUrl","imgUrl","showDropdown","activeButton","showMenuDropdown","userName","nomEntreprise","photo","photoUrl","boutiques","selectedBoutiqueId","boutiquesLoaded","isBoutiqueNameLoaded","scanInProgress","isDraggingPopup","startXPopup","startYPopup","initialXPopup","initialYPopup","showCalculatorPopup","baseWidth","baseHeight","calcScale","hoverResizeCorner","cornerThreshold","isResizing","resizeCorner","startXResize","startYResize","initialWidth","initialHeight","initialPopupX","initialPopupY","minWidth","minHeight","maxWidth","window","innerWidth","maxHeight","innerHeight","calculatorPosition","isCalculatorActive","onMouseMovePopup","event","requestAnimationFrame","deltaX","clientX","deltaY","clientY","onMouseUpPopup","document","removeEventListener","searchTerm","getAllCommandesIds","commandeUpdated$","subscribe","activeCommandeId$","id","commandeSubscription","calculatorActiveSub","isActive$","isActive","ngOnInit","currentRoute","url","includes","getUserInfo","loadBoutiques","getBoutiquesByEntreprise","next","list","updateBoutiqueName","error","err","console","boutiqueSub","selectedBoutique$","nav","getCurrentNavigation","extras","state","caisse","boutiqueId","setSelectedBoutique","getScanningObservable","scanning","currentBoutiqueId","getCurrentValue","found","find","b","getBoutiqueById","boutique","ngOnDestroy","removeResizeListeners","unsubscribe","viewType","setViewPreference","onClickCommandes","navigate","onClickVente","toggleMenuDropdown","addCommande","newId","addNewCommande","cmd","visibleCommandes","start","Math","max","length","slice","hiddenCommandes","user","nomComplet","charAt","toUpperCase","log","userPermissions","permissions","fermerCaisse","response","logoutUser","then","success","message","getDerniereCaisseVendeur","dateString","date","Date","isNaN","getTime","toLocaleString","day","month","year","hour","minute","confirmFermerCaisse","caisseId","handlePostFermeture","preventDefault","addEventListener","toggleCalculator","setActive","disableScanner","enableScanner","key","handleKey","display","solarDisplay","handleKeyDown","target","isTypingInInput","tagName","isContentEditable","handleComputerKeyboard","ngAfterViewInit","setTimeout","calcElement","nativeElement","el","offsetWidth","offsetHeight","startResize","corner","startResizeFromCoords","startResizeTouch","touch","pointerMoveHandler","e","type","extractClientFromEvent","handlePointerMove","pointerUpHandler","handlePointerUp","passive","startsWith","t","touches","changedTouches","undefined","candidateWidth","candidateHeight","scaleX","scaleY","newScale","min","newWidth","round","newHeight","clampedWidth","clampedHeight","finalScaleW","finalScaleH","finalScale","style","transformOrigin","transform","onMouseMoveResize","newPopupX","onMouseUpResize","onWindowResize","calculatorRef","rect","getBoundingClientRect","left","top","nearRight","width","nearLeft","nearBottom","height","cursor","_","closest","ev","fakeMouseEvent","MouseEvent","bubbles","setStyle","onSearch","input","value","setSearch","ɵɵdirectiveInject","i1","Router","i2","ViewStateService","i3","UsersService","i4","PosCaisseService","i5","CommandeStateService","i6","BoutiqueStateService","i7","BoutiqueService","i8","SearchService","i9","CalculatorService","i10","ScannerService","Renderer2","selectors","viewQuery","PosAccueilComponent_Query","rf","ctx","PosAccueilComponent_keydown_HostBindingHandler","ɵɵresolveWindow","PosAccueilComponent_resize_HostBindingHandler","PosAccueilComponent_Template_div_click_5_listener","_r1","PosAccueilComponent_Template_div_click_8_listener","PosAccueilComponent_Template_button_click_12_listener","PosAccueilComponent_li_15_Template","PosAccueilComponent_li_16_Template","PosAccueilComponent_div_17_Template","PosAccueilComponent_div_18_Template","PosAccueilComponent_Template_div_click_20_listener","PosAccueilComponent_ng_container_23_Template","PosAccueilComponent_ng_template_24_Template","ɵɵtemplateRefExtractor","PosAccueilComponent_i_27_Template","PosAccueilComponent_i_28_Template","PosAccueilComponent_Template_input_input_29_listener","PosAccueilComponent_Template_div_click_30_listener","PosAccueilComponent_Template_div_clickOutside_30_listener","PosAccueilComponent_div_33_Template","PosAccueilComponent_Template_div_click_37_listener","PosAccueilComponent_Template_div_clickOutside_37_listener","PosAccueilComponent_div_39_Template","PosAccueilComponent_div_41_Template","PosAccueilComponent_div_42_Template","loadingBoutique_r14","ɵɵclassMap","i11","NgForOf","NgIf","NgStyle","AsyncPipe","RouterOutlet","styles","HttpHeaders","throwError","switchMap","catchError","map","http","usersService","apiBaseUrl","ouvrirCaisse","request","getValidAccessToken","pipe","token","Error","headers","post","errorMsg","originalError","body","get","resp","msg","JSON","stringify","String","getCaissesByBoutique","getHistoriqueCaissesByVendeur","vendeurId","ɵɵinject","HttpClient","factory","ɵfac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}