"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[6840],{66840:(ee,u,p)=>{p.r(u),p.d(u,{ConnexionPageComponent:()=>Z});var a=p(89417),g=p(10611),l=p(60177),e=p(54438),d=p(88026),m=p(71348),f=p(49192);const h=t=>({error:t});function x(t,s){1&t&&(e.j41(0,"div",22)(1,"div",23),e.nrm(2,"div",24),e.j41(3,"p"),e.EFF(4,"Connexion en cours..."),e.k0s()()())}function C(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Le mot de passe est requis"),e.k0s())}function v(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Au moins 8 caract\xe8res"),e.k0s())}function P(t,s){if(1&t&&(e.j41(0,"div",37),e.DNE(1,C,2,0,"span",7)(2,v,2,0,"span",7),e.k0s()),2&t){let n,i;const o=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(n=o.newPasswordForm.get("newPassword"))||null==n.errors?null:n.errors.required),e.R7$(),e.Y8G("ngIf",null==(i=o.newPasswordForm.get("newPassword"))||null==i.errors?null:i.errors.minlength)}}function E(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"La confirmation est requise"),e.k0s())}function M(t,s){if(1&t&&(e.j41(0,"div",37),e.DNE(1,E,2,0,"span",7),e.k0s()),2&t){let n;const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==(n=i.newPasswordForm.get("confirmPassword"))||null==n.errors?null:n.errors.required)}}function k(t,s){1&t&&(e.j41(0,"div",37),e.EFF(1," Les mots de passe ne correspondent pas "),e.k0s())}function F(t,s){if(1&t&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.otpErrorMessage," ")}}function O(t,s){if(1&t&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.otpSuccessMessage," ")}}function w(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"R\xe9initialiser le mot de passe"),e.k0s())}function b(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Traitement en cours..."),e.k0s())}function j(t,s){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"form",25)(2,"div",26)(3,"h2"),e.EFF(4,"R\xe9initialiser votre mot de passe"),e.k0s(),e.j41(5,"div",27),e.nrm(6,"input",28),e.j41(7,"label",29),e.EFF(8,"Nouveau mot de passe"),e.k0s(),e.DNE(9,P,3,2,"div",30),e.k0s(),e.j41(10,"div",27),e.nrm(11,"input",31),e.j41(12,"label",29),e.EFF(13,"Confirmation"),e.k0s(),e.DNE(14,M,2,1,"div",30)(15,k,2,0,"div",30),e.k0s(),e.DNE(16,F,2,1,"div",30)(17,O,2,1,"div",32),e.j41(18,"div",33)(19,"button",34),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.submitNewPasswordForm())}),e.DNE(20,w,2,0,"span",7)(21,b,2,0,"span",7),e.k0s()(),e.j41(22,"p",35)(23,"a",36),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.goBackToOtpVerification())}),e.EFF(24," \u2190 Retour \xe0 la v\xe9rification "),e.k0s()()()()()}if(2&t){let n,i;const o=e.XpG();e.R7$(),e.Y8G("formGroup",o.newPasswordForm),e.R7$(8),e.Y8G("ngIf",(null==(n=o.newPasswordForm.get("newPassword"))?null:n.touched)&&(null==(n=o.newPasswordForm.get("newPassword"))?null:n.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(i=o.newPasswordForm.get("confirmPassword"))?null:i.touched)&&(null==(i=o.newPasswordForm.get("confirmPassword"))?null:i.invalid)),e.R7$(),e.Y8G("ngIf",(null==o.newPasswordForm.errors?null:o.newPasswordForm.errors.mismatch)&&o.newPasswordForm.touched),e.R7$(),e.Y8G("ngIf",o.otpErrorMessage),e.R7$(),e.Y8G("ngIf",o.otpSuccessMessage),e.R7$(2),e.Y8G("disabled",o.isLoading||o.newPasswordForm.invalid),e.R7$(),e.Y8G("ngIf",!o.isLoading),e.R7$(),e.Y8G("ngIf",o.isLoading)}}function R(t,s){1&t&&(e.j41(0,"div",37),e.EFF(1," Veuillez saisir un code complet \xe0 6 chiffres "),e.k0s())}function T(t,s){if(1&t&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.otpErrorMessage," ")}}function I(t,s){if(1&t&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.otpSuccessMessage," ")}}function G(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Verify Email"),e.k0s())}function y(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"V\xe9rification en cours..."),e.k0s())}function N(t,s){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"form",25)(2,"div",26)(3,"h2"),e.EFF(4,"V\xe9rifiez votre adresse e-mail"),e.k0s(),e.j41(5,"p",39),e.EFF(6,"Nous avons envoy\xe9 un code \xe0 6 chiffres \xe0 votre adresse e-mail"),e.k0s(),e.j41(7,"p",39),e.EFF(8),e.k0s(),e.j41(9,"div",40)(10,"input",41),e.bIt("input",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpInput(1,o))})("keydown",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpBackspace(1,o))}),e.k0s(),e.j41(11,"input",42),e.bIt("input",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpInput(2,o))})("keydown",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpBackspace(2,o))}),e.k0s(),e.j41(12,"input",43),e.bIt("input",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpInput(3,o))})("keydown",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpBackspace(3,o))}),e.k0s(),e.j41(13,"input",44),e.bIt("input",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpInput(4,o))})("keydown",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpBackspace(4,o))}),e.k0s(),e.j41(14,"input",45),e.bIt("input",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpInput(5,o))})("keydown",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpBackspace(5,o))}),e.k0s(),e.j41(15,"input",46),e.bIt("input",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpInput(6,o))})("keydown",function(o){e.eBV(n);const r=e.XpG();return e.Njj(r.onOtpBackspace(6,o))}),e.k0s()(),e.DNE(16,R,2,0,"div",30)(17,T,2,1,"div",30)(18,I,2,1,"div",32),e.j41(19,"p",47),e.EFF(20," Vous souhaitez modifier votre adresse e-mail? "),e.j41(21,"a",36),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.goBackToReset())}),e.EFF(22," Cliquez ici. "),e.k0s()(),e.j41(23,"div",33)(24,"button",34),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.submitOtpForm())}),e.DNE(25,G,2,0,"span",7)(26,y,2,0,"span",7),e.k0s()(),e.j41(27,"div",48)(28,"p")(29,"a",49),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.goToLogin())}),e.EFF(30,"Connexion"),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("formGroup",n.otpForm),e.R7$(7),e.JRh(n.resetEmailForOtp),e.R7$(8),e.Y8G("ngIf",n.otpForm.invalid&&n.otpForm.touched),e.R7$(),e.Y8G("ngIf",n.otpErrorMessage),e.R7$(),e.Y8G("ngIf",n.otpSuccessMessage),e.R7$(6),e.Y8G("disabled",n.isLoading),e.R7$(),e.Y8G("ngIf",!n.isLoading),e.R7$(),e.Y8G("ngIf",n.isLoading)}}function V(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Email est vide."),e.k0s())}function $(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Email n'est pas valide."),e.k0s())}function S(t,s){if(1&t&&(e.j41(0,"div",37),e.DNE(1,V,2,0,"span",7)(2,$,2,0,"span",7),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.rf.resetEmail.errors?null:n.rf.resetEmail.errors.required),e.R7$(),e.Y8G("ngIf",null==n.rf.resetEmail.errors?null:n.rf.resetEmail.errors.email)}}function Y(t,s){if(1&t&&(e.j41(0,"div",38),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.resetSuccessMessage," ")}}function B(t,s){if(1&t&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.resetErrorMessage," ")}}function X(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Envoyer le code de v\xe9rification"),e.k0s())}function D(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Envoi en cours..."),e.k0s())}function L(t,s){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"form",25)(2,"div",26)(3,"h2"),e.EFF(4,"Mot de passe oubli\xe9 ?"),e.k0s(),e.j41(5,"p",39),e.EFF(6,"Indiquez votre adresse e-mail ci-dessous"),e.k0s(),e.j41(7,"p",39),e.EFF(8,"Un code de v\xe9rification \xe0 6 chiffres vous sera envoy\xe9 par e-mail afin de r\xe9initialiser votre "),e.nrm(9,"br"),e.EFF(10,"mot de passe."),e.k0s(),e.j41(11,"div",27),e.nrm(12,"input",50),e.j41(13,"label",29),e.EFF(14,"Adresse e-mail"),e.k0s(),e.DNE(15,S,3,2,"div",30),e.k0s(),e.DNE(16,Y,2,1,"div",32)(17,B,2,1,"div",30),e.j41(18,"div",33)(19,"button",34),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return o.submitResetForm(),e.Njj(o.resetOtpForm())}),e.DNE(20,X,2,0,"span",7)(21,D,2,0,"span",7),e.k0s()(),e.j41(22,"div",48)(23,"p")(24,"a",49),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.toggleResetPassword())}),e.EFF(25,"Connexion"),e.k0s()()()()()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("formGroup",n.resetForm),e.R7$(14),e.Y8G("ngIf",n.rf.resetEmail.touched&&n.rf.resetEmail.invalid),e.R7$(),e.Y8G("ngIf",n.resetSuccessMessage),e.R7$(),e.Y8G("ngIf",n.resetErrorMessage),e.R7$(2),e.Y8G("disabled",n.isLoading||n.resetForm.invalid),e.R7$(),e.Y8G("ngIf",!n.isLoading),e.R7$(),e.Y8G("ngIf",n.isLoading)}}function z(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Email est vide."),e.k0s())}function U(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Email n'est pas valide."),e.k0s())}function q(t,s){if(1&t&&(e.j41(0,"div",37),e.DNE(1,z,2,0,"span",7)(2,U,2,0,"span",7),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.f.email.errors?null:n.f.email.errors.required),e.R7$(),e.Y8G("ngIf",null==n.f.email.errors?null:n.f.email.errors.email)}}function A(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Mot de passe est vide."),e.k0s())}function K(t,s){1&t&&(e.j41(0,"span"),e.EFF(1,"Au moins 8 caract\xe8res."),e.k0s())}function W(t,s){if(1&t&&(e.j41(0,"div",37),e.DNE(1,A,2,0,"span",7)(2,K,2,0,"span",7),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",null==n.f.password.errors?null:n.f.password.errors.required),e.R7$(),e.Y8G("ngIf",null==n.f.password.errors?null:n.f.password.errors.minlength)}}function J(t,s){if(1&t&&(e.j41(0,"div",37),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2);e.R7$(),e.SpI(" ",n.errorMessage," ")}}function H(t,s){if(1&t){const n=e.RV6();e.j41(0,"div",56)(1,"div",57)(2,"div",58)(3,"div",59),e.nrm(4,"img",60),e.k0s(),e.j41(5,"h2"),e.EFF(6),e.k0s()(),e.j41(7,"p"),e.EFF(8),e.k0s(),e.j41(9,"button",54),e.bIt("click",function(){e.eBV(n);const o=e.XpG(2);return e.Njj(o.closePopup())}),e.EFF(10,"OK"),e.k0s()()()}if(2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.eq3(4,h,"error"===n.popupType)),e.R7$(3),e.Y8G("src",n.popupImage,e.B4B),e.R7$(2),e.JRh(n.popupTitle),e.R7$(2),e.JRh(n.popupMessage)}}function Q(t,s){if(1&t){const n=e.RV6();e.j41(0,"form",25)(1,"div",26)(2,"div",27),e.nrm(3,"input",51),e.j41(4,"label",29),e.EFF(5,"Votre email"),e.k0s(),e.DNE(6,q,3,2,"div",30),e.k0s(),e.j41(7,"div",27),e.nrm(8,"input",52),e.j41(9,"label",29),e.EFF(10,"Mot de passe"),e.k0s(),e.DNE(11,W,3,2,"div",30),e.k0s(),e.j41(12,"div",53)(13,"p",54),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.toggleResetPassword())}),e.EFF(14,"Mot de passe oubli\xe9"),e.k0s()(),e.DNE(15,J,2,1,"div",30),e.j41(16,"div",33)(17,"button",34),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.submitForm())})("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.submitForm())}),e.nrm(18,"span"),e.j41(19,"span"),e.EFF(20,"Se connecter"),e.k0s()()(),e.j41(21,"div",48)(22,"p"),e.EFF(23,"Vous n\u2019avez pas encore de compte ? "),e.j41(24,"a",49),e.bIt("click",function(){e.eBV(n);const o=e.XpG();return e.Njj(o.goToInscription())}),e.EFF(25,"Inscription"),e.k0s()()()(),e.DNE(26,H,11,6,"div",55),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("formGroup",n.loginForm),e.R7$(6),e.Y8G("ngIf",n.f.email.touched&&n.f.email.invalid),e.R7$(5),e.Y8G("ngIf",n.f.password.touched&&n.f.password.invalid),e.R7$(4),e.Y8G("ngIf",n.errorMessage),e.R7$(2),e.Y8G("disabled",n.isLoading),e.R7$(9),e.Y8G("ngIf",n.showPopup)}}let Z=(()=>{class t{constructor(n,i,o,r){this.fb=n,this.usersService=i,this.authService=o,this.router=r,this.errorMessage="",this.isResetPassword=!1,this.showPopup=!1,this.popupTitle="",this.popupMessage="",this.popupImage="",this.popupType="success",this.isLoading=!1,this.resetSuccessMessage=null,this.resetErrorMessage=null,this.showOtpVerification=!1,this.resetEmailForOtp="",this.otpErrorMessage="",this.otpSuccessMessage="",this.showPasswordResetForm=!1,this.resetToken=""}ngOnInit(){this.loginForm=this.fb.group({email:["",[a.k0.required,a.k0.email]],password:["",[a.k0.required,a.k0.minLength(8)]]}),this.resetForm=this.fb.group({resetEmail:["",[a.k0.required,a.k0.email]]}),this.initOptForm(),this.initNewPassword()}initNewPassword(){this.newPasswordForm=this.fb.group({newPassword:["",[a.k0.required,a.k0.minLength(8)]],confirmPassword:["",a.k0.required]},{validators:this.passwordMatchValidator})}passwordMatchValidator(n){return n.get("newPassword")?.value===n.get("confirmPassword")?.value?null:{mismatch:!0}}initOptForm(){this.otpForm=this.fb.group({digit1:["",[a.k0.required,a.k0.pattern(/[0-9]/)]],digit2:["",[a.k0.required,a.k0.pattern(/[0-9]/)]],digit3:["",[a.k0.required,a.k0.pattern(/[0-9]/)]],digit4:["",[a.k0.required,a.k0.pattern(/[0-9]/)]],digit5:["",[a.k0.required,a.k0.pattern(/[0-9]/)]],digit6:["",[a.k0.required,a.k0.pattern(/[0-9]/)]]}),this.otpErrorMessage="",this.otpSuccessMessage=""}onOtpBackspace(n,i){if("Backspace"===i.key&&!i.target.value&&n>1){const r=document.querySelector(`[formControlName="digit${n-1}"]`);r&&(r.focus(),r.select())}}get rf(){return this.resetForm.controls}goToInscription(){this.router.navigate(["/inscription"])}toggleResetPassword(){this.isResetPassword=!this.isResetPassword}openPopup(n,i,o){this.popupTitle=n,this.popupMessage=i,this.popupType=o,this.popupImage="success"===o?"assets/img/succcccc.png":"assets/img/error.png",this.showPopup=!0}closePopup(){this.showPopup=!1}submitForm(){if(this.loginForm.invalid)return void(this.errorMessage="Veuillez v\xe9rifier les informations saisies.");this.isLoading=!0;const n=this.loginForm.value;setTimeout(()=>{this.usersService.connexionUser(n).subscribe({next:i=>{this.isLoading=!1,i.accessToken&&i.refreshToken?(console.log("Access Token :",i.accessToken),console.log("Refresh Token :",i.refreshToken),this.authService.saveTokens(i.accessToken,i.refreshToken),this.usersService.getUserInfo().subscribe({next:o=>{const _=o.permissions;_.includes("VENDRE_PRODUITS")?_.length>1?this.router.navigate(["/analytics"]).then(c=>{console.log("Navigation vers analytics r\xe9ussie ?",c)}):this.router.navigate(["/pos-caisse"]).then(c=>{console.log("Navigation vers pos-caisse r\xe9ussie ?",c)}):_.includes("VENDRE_PRODUITS")?this.router.navigate(["/pos-caisse"]).then(c=>{console.log("Navigation vers pos-caisse r\xe9ussie ?",c)}):this.router.navigate(["/analytics"]).then(c=>{console.log("Navigation vers la page par d\xe9faut r\xe9ussie ?",c)})},error:o=>{console.error("Erreur lors de la r\xe9cup\xe9ration des infos utilisateur :",o),this.errorMessage="Impossible de r\xe9cup\xe9rer les informations utilisateur.",this.openPopup("Erreur",this.errorMessage,"error")}})):(this.errorMessage=i.error||"Erreur de connexion, veuillez r\xe9essayer.",this.openPopup("Erreur de connexion",this.errorMessage,"error"))},error:i=>{this.isLoading=!1,console.log("Erreur compl\xe8te :",i),console.log("R\xe9ponse API :",i.error);let o="Une erreur est survenue lors de la connexion.";(400===i.status||401===i.status)&&("string"==typeof i.error?o=i.error:i.error?.error&&(o=i.error.error)),this.openPopup("\u274c Oups, une erreur !",o,"error")}})},1e3)}get f(){return this.loginForm.controls}submitResetForm(){if(this.resetSuccessMessage=null,this.resetErrorMessage=null,this.resetForm.invalid)return void(this.resetErrorMessage="Veuillez saisir une adresse email valide.");const n=this.resetForm.get("resetEmail")?.value;this.isLoading=!0,this.usersService.forgotPassword(n).subscribe({next:i=>{this.isLoading=!1,this.resetSuccessMessage="Votre code de v\xe9rification a \xe9t\xe9 envoy\xe9 par e-mail.",this.resetEmailForOtp=n,this.resetForm.reset(),this.resetOtpForm(),setTimeout(()=>{this.isResetPassword=!1,this.showOtpVerification=!0,this.resetSuccessMessage=null},2e3)},error:i=>{this.isLoading=!1,this.resetErrorMessage=404===i.status?"Une erreur s'est produite. Veuillez r\xe9essayer plus tard.":"Aucun compte n'est associ\xe9 \xe0 cet email."}})}submitOtpForm(){if(this.otpForm.invalid)return void(this.otpErrorMessage="Veuillez saisir un code complet \xe0 6 chiffres");this.isLoading=!0,this.otpErrorMessage="";const n=Object.values(this.otpForm.value).join("");this.usersService.validateOtp(this.resetEmailForOtp,n).subscribe({next:i=>{this.isLoading=!1,this.otpSuccessMessage="Votre email a \xe9t\xe9 v\xe9rifi\xe9 avec succ\xe8s!",this.resetToken=i.token,this.otpForm.reset(),setTimeout(()=>{this.otpSuccessMessage="",this.showOtpVerification=!1,this.showPasswordResetForm=!0},2e3)},error:i=>{this.isLoading=!1,this.otpErrorMessage=i.error?.error||"Code invalide ou expir\xe9"}})}resetComponentState(){this.isResetPassword=!1,this.showOtpVerification=!1,this.showPasswordResetForm=!1,this.otpSuccessMessage="",this.otpErrorMessage="",this.resetSuccessMessage=null,this.resetErrorMessage=null,this.errorMessage="",this.loginForm.reset(),this.resetForm.reset(),this.otpForm.reset(),this.newPasswordForm.reset()}goBackToReset(){this.resetOtpForm(),this.resetForm.patchValue({resetEmail:this.resetEmailForOtp}),this.showOtpVerification=!1,this.isResetPassword=!0,this.otpErrorMessage="",this.otpSuccessMessage="",this.resetSuccessMessage=null}resetOtpForm(){this.otpForm.reset(),this.otpErrorMessage="",this.otpSuccessMessage=""}goToLogin(){this.isResetPassword=!1,this.showOtpVerification=!1,this.resetSuccessMessage=null,this.resetErrorMessage=null,this.otpErrorMessage="",this.otpSuccessMessage=""}onOtpInput(n,i){if(i.target.value&&n<6){const r=document.querySelector(`[formControlName="digit${n+1}"]`);r&&r.focus()}}goBackToOtpVerification(){this.showPasswordResetForm=!1,this.showOtpVerification=!0}submitNewPasswordForm(){if(this.newPasswordForm.invalid)return;const n=this.newPasswordForm.get("newPassword")?.value;this.isLoading=!0,this.usersService.resetPassword(this.resetToken,n).subscribe({next:()=>{this.isLoading=!1,this.otpSuccessMessage="Votre mot de passe a \xe9t\xe9 r\xe9initialis\xe9 avec succ\xe8s!",setTimeout(()=>{this.isResetPassword=!1,this.showOtpVerification=!1,this.showPasswordResetForm=!1,this.otpSuccessMessage="",this.otpErrorMessage="",this.resetSuccessMessage=null,this.resetErrorMessage=null,this.resetComponentState(),this.router.navigate(["/connexion"])},2e3)},error:i=>{this.isLoading=!1,this.otpErrorMessage=i.error?.error||"Erreur lors de la r\xe9initialisation du mot de passe."}})}static{this.\u0275fac=function(i){return new(i||t)(e.rXU(a.ok),e.rXU(d.g),e.rXU(m.u),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["app-connexion-page"]],decls:35,vars:5,consts:[[1,"container_global"],[1,"container_global_content"],["class","loading-overlay",4,"ngIf"],[1,"content_page"],[1,"title_form"],[1,"formulaire_img"],[1,"info_form_left"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"info_form_right"],[1,"image_header"],["src","assets/img/logout_img.png","alt",""],[1,"container_temoignage"],[1,"content_temoignage"],[1,"temoignage_left"],[1,"image_temoignage"],["src","assets/img/temoignage1.png","alt","Image de temoignage"],[1,"temoignage_right"],[1,"title"],[1,"contenue"],[1,"mes_footer"],[1,"copyRight"],[1,"loading-overlay"],[1,"loading-content"],[1,"spinner"],[3,"formGroup"],[1,"formulaire"],[1,"champ_input"],["type","password","formControlName","newPassword","placeholder","Nouveau mot de passe",1,"input_focus"],[1,"label"],["class","error-message",4,"ngIf"],["type","password","formControlName","confirmPassword","placeholder","Confirmer le mot de passe",1,"input_focus"],["class","success-message",4,"ngIf"],[1,"btn_contact"],["type","submit",3,"click","disabled"],[1,"reset-instructions",2,"text-align","center","margin-top","20px"],[2,"cursor","pointer","color","#0672E4","text-decoration","underline",3,"click"],[1,"error-message"],[1,"success-message"],[1,"reset-instructions"],[1,"otp-inputs"],["type","text","formControlName","digit1","maxlength","1",1,"otp-input",3,"input","keydown"],["type","text","formControlName","digit2","maxlength","1",1,"otp-input",3,"input","keydown"],["type","text","formControlName","digit3","maxlength","1",1,"otp-input",3,"input","keydown"],["type","text","formControlName","digit4","maxlength","1",1,"otp-input",3,"input","keydown"],["type","text","formControlName","digit5","maxlength","1",1,"otp-input",3,"input","keydown"],["type","text","formControlName","digit6","maxlength","1",1,"otp-input",3,"input","keydown"],[1,"reset-instructions",2,"font-size","12px","text-align","center"],[1,"registerPage"],[1,"logout",3,"click"],["type","email","formControlName","resetEmail","placeholder","Saisis votre email",1,"input_focus",2,"min-width","200px"],["type","email","formControlName","email","placeholder","Saisis votre email",1,"input_focus"],["type","password","formControlName","password","placeholder","****************",1,"input_focus"],[1,"resetPassword"],[3,"click"],["class","modal-overlay",4,"ngIf"],[1,"modal-overlay"],[1,"modal-content",3,"ngClass"],[1,"popup-header"],[1,"popup-img"],["alt","Icone",1,"popup-icon",3,"src"]],template:function(i,o){1&i&&(e.nrm(0,"app-header-nav"),e.j41(1,"div",0)(2,"div",1),e.DNE(3,x,5,0,"div",2),e.j41(4,"div",3)(5,"div",4)(6,"h2"),e.EFF(7,"Connexion"),e.k0s()(),e.j41(8,"section",5)(9,"div",6),e.DNE(10,j,25,9,"div",7)(11,N,31,8,"div",7)(12,L,26,7,"div",7)(13,Q,27,6,"form",8),e.k0s(),e.j41(14,"div",9)(15,"div",10),e.nrm(16,"img",11),e.k0s()()()()()(),e.j41(17,"div",12)(18,"div",13)(19,"div",14)(20,"div",15),e.nrm(21,"img",16),e.k0s()(),e.j41(22,"div",17)(23,"h2",18),e.EFF(24,"Une Exp\xe9rience Exceptionnelle !"),e.k0s(),e.j41(25,"div",19),e.EFF(26," J\u2019ai \xe9t\xe9 impressionn\xe9 par la qualit\xe9 du service et l\u2019attention port\xe9e aux d\xe9tails. D\xe8s le premier contact, j\u2019ai ressenti un r\xe9el professionnalisme et une \xe9coute attentive. "),e.j41(27,"ul")(28,"li"),e.EFF(29," Le processus a \xe9t\xe9 fluide, rapide et parfaitement adapt\xe9 \xe0 mes besoins. "),e.k0s(),e.j41(30,"li"),e.EFF(31," Je recommande vivement \xe0 toute personne cherchant une exp\xe9rience fiable et de grande qualit\xe9. Merci encore pour cette belle prestation ! "),e.k0s()()()()()(),e.j41(32,"footer",20)(33,"p",21),e.EFF(34," \xa9 Copyright Groupe XpertPro "),e.k0s()()),2&i&&(e.R7$(3),e.Y8G("ngIf",o.isLoading),e.R7$(7),e.Y8G("ngIf",o.showPasswordResetForm),e.R7$(),e.Y8G("ngIf",o.showOtpVerification),e.R7$(),e.Y8G("ngIf",o.isResetPassword&&!o.showOtpVerification),e.R7$(),e.Y8G("ngIf",!o.isResetPassword&&!o.showOtpVerification&&!o.showPasswordResetForm))},dependencies:[l.MD,l.YU,l.bT,a.X1,a.qT,a.me,a.BC,a.cb,a.tU,a.j4,a.JD,g.C],styles:['@charset "UTF-8";.container_global[_ngcontent-%COMP%]{margin-bottom:20px}.container_global_content[_ngcontent-%COMP%]{background-color:#f7f7f7}nav[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:80px;background-color:#0672e4;position:sticky;top:0;left:0;z-index:9999999999;border-bottom:1px solid #dcdcdc}#nav[_ngcontent-%COMP%]{position:fixed;width:100%}.menu-bars[_ngcontent-%COMP%], .menu-close[_ngcontent-%COMP%]{color:#141414e0;display:none}.logo[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:20px;margin-left:30px}.logos[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e9d421;cursor:pointer;font-size:30px}.nav-list[_ngcontent-%COMP%]{display:flex;position:relative;top:10px;margin-right:20px}.nav-items[_ngcontent-%COMP%]{list-style-type:none;padding:10px 20px}.nav__link[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}.nav__link[_ngcontent-%COMP%]:hover{color:#e9d421;transition:all ease-in-out .5s}.welcome[_ngcontent-%COMP%]{margin-top:90px}.welcome[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:25px;color:#0672e4}.welcome[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-top:20px}.content_page[_ngcontent-%COMP%]{margin-left:40px}.champ_input[_ngcontent-%COMP%]{position:relative;margin-bottom:20px}.inpuemail[_ngcontent-%COMP%]{margin-top:30px}.input_focus[_ngcontent-%COMP%]{width:100%;min-width:400px;height:49px;outline:none;border:none;margin:5px 0;transition:all .3s;font-size:16px;padding-left:10px;background-color:#fff;color:#000;box-shadow:#5a5e610e 0 8px 24px;border-radius:5px}.input_focus[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.afficheEntreprise[_ngcontent-%COMP%]{position:relative}.entreprseDomaine[_ngcontent-%COMP%]{position:absolute;bottom:-35px;left:5px;font-size:12px}.entreprseDomaineSite[_ngcontent-%COMP%]{color:#0672e4}.champ_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:10px;pointer-events:none;color:0}.input_focus[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:-6px;left:0;transition:all .3s ease-in-out;background:none;font-size:13px;background-color:#fff;border-top-left-radius:2px;border-top-right-radius:2px;padding:2px}.input_focus[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:15px;transition:all .2s ease-in-out}.double_input[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:20px}.icon_reseau_contact[_ngcontent-%COMP%]{margin-top:40px}.icon_reseau_contact[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#ffffff2c}.btn_contact[_ngcontent-%COMP%]{position:relative;margin-top:25px;background:none;margin-bottom:20px}.btn_contact[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 40px 10px 25px;font-size:15px;cursor:pointer;border-radius:10px;border:none;background-color:#0671e4c5;color:#fff;transition:all .3s;position:relative;width:100%}.registerPage[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;font-size:12px}.registerPage[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .logout[_ngcontent-%COMP%]{color:#0672e4;font-weight:500;cursor:pointer;color:#0361c5}.btn_contact[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0672e4;transition:all .5}.champ_input_margin[_ngcontent-%COMP%]{margin-left:30px}.title_form[_ngcontent-%COMP%]{margin-top:100px;margin-bottom:30px;text-align:center;color:#2b2929}.champ_input_login[_ngcontent-%COMP%]{margin-top:5px}.resetPassword[_ngcontent-%COMP%]{text-decoration:underline;position:relative;top:-12px}.resetPassword[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;text-decoration:underline;color:#1e1e1e;cursor:pointer}.resetPassword[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:#000;transition:all .5}.formulaire_img[_ngcontent-%COMP%]{margin-top:0;display:flex;align-items:center;justify-content:space-around}.info_form_right[_ngcontent-%COMP%]{margin-right:50px}.error-message[_ngcontent-%COMP%]{font-size:13px;color:red;font-weight:700;margin-top:10px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#0009;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:30px;border-radius:10px;text-align:center;width:90%;max-width:400px;box-shadow:0 5px 15px #0000004d;animation:_ngcontent-%COMP%_fadeInDown .3s ease;position:relative}.popup-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:20px}.popup-img[_ngcontent-%COMP%]{width:80px;height:80px;margin-bottom:10px}.popup-icon[_ngcontent-%COMP%]{width:100%;height:100%;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5em;color:#333}.modal-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#555;margin:20px 0}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#0672e4;color:#fff;border:none;padding:10px 20px;font-size:1em;border-radius:5px;cursor:pointer;transition:background .3s ease}.modal-content.error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#e53935}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0863c5}.modal-content.error[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#d32f2f}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}.container_temoignage[_ngcontent-%COMP%]{background-color:#0672e4;height:60vh}.content_temoignage[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,auto);align-items:center}.temoignage_left[_ngcontent-%COMP%]{margin-left:90px}.temoignage_right[_ngcontent-%COMP%]{margin-left:20px;margin-right:50px}.temoignage_right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;font-size:18px;letter-spacing:.5px}.temoignage_right[_ngcontent-%COMP%]   .contenue[_ngcontent-%COMP%]{color:#f0eeee;letter-spacing:1px;line-height:20px}.temoignage_right[_ngcontent-%COMP%]   .contenue[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:10px;width:90%}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;color:#fff;font-size:18px;z-index:1000}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid white;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.reset-instructions[_ngcontent-%COMP%]{margin-bottom:10px;font-size:14px;color:#555;line-height:1.5}.registerPage[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a.logout[_ngcontent-%COMP%]{color:#0672e4;font-weight:500;cursor:pointer;text-decoration:none}.registerPage[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a.logout[_ngcontent-%COMP%]:hover{text-decoration:underline}.success-message[_ngcontent-%COMP%]{color:#28a745;background-color:#d4edda;border:1px solid #c3e6cb;border-radius:4px;padding:10px;margin:15px 0;text-align:center}.error-message[_ngcontent-%COMP%]{color:#dc3545;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:4px;padding:10px;margin:15px 0;text-align:center}.otp-inputs[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;margin:25px 0}.otp-input[_ngcontent-%COMP%]{width:50px;height:50px;text-align:center;font-size:24px;font-weight:700;border:2px solid #0672E4;border-radius:8px;background-color:#f8f9fa;transition:all .3s}.otp-input[_ngcontent-%COMP%]:focus{border-color:#034b9e;box-shadow:0 0 0 3px #0672e433;outline:none}.otp-toggle-btn[_ngcontent-%COMP%]{background:none;border:none;color:#0672e4;text-decoration:underline;cursor:pointer;margin-top:15px;font-size:14px;padding:5px}.otp-toggle-btn[_ngcontent-%COMP%]:hover{color:#034b9e}@media (max-width: 768px){.otp-input[_ngcontent-%COMP%]{width:40px;height:40px;font-size:20px}}.mes_footer[_ngcontent-%COMP%]{height:10vh;background-color:#202020;width:100%;display:flex;justify-content:center;align-items:center}.copyRight[_ngcontent-%COMP%]{color:#fff;font-size:12px}']})}}return t})()}}]);