"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[2569],{6115:(j,F,r)=>{r.d(F,{v:()=>h});var u=r(4438);let h=(()=>{class b{transform(C){return null==C?"":C.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}static{this.\u0275fac=function(f){return new(f||b)}}static{this.\u0275pipe=u.EJ8({name:"customNumber",type:b,pure:!0})}}return b})()},2120:(j,F,r)=>{r.d(F,{r:()=>m});var u=r(1626),h=r(4412),b=r(9437),M=r(8810),C=r(8141),f=r(1985),w=r(5558),O=r(2525),c=r(4438);let m=(()=>{class t{constructor(d){this.http=d,this.apiUrl=O.c.apiBaseUrl,this.entrepriseSubject=new h.t([]),this.entreprise$=this.entrepriseSubject.asObservable()}getListEntreprises(){const d=localStorage.getItem("authToken")||"",x=new u.Lr({Authorization:`Bearer ${d}`,"Content-Type":"application/json"});return this.http.get(`${this.apiUrl}/entreprises`,{headers:x}).pipe((0,b.W)(y=>{let g="Erreur inconnue";return y.error instanceof ErrorEvent?g=`Erreur: ${y.error.message}`:404===y.status&&(g="Aucune entreprise trouv\xe9e"),(0,M.$)(()=>new Error(g))}))}addEntreprise(d){const x=localStorage.getItem("authToken")||"",y=new u.Lr({Authorization:`Bearer ${x}`,"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/entreprises`,d,{headers:y}).pipe((0,b.W)(g=>{let k="Erreur inconnue";return g.error instanceof ErrorEvent?k=`Erreur: ${g.error.message}`:400===g.status&&(k=g.error||"Donn\xe9es invalides"),(0,M.$)(()=>new Error(k))}),(0,C.M)(g=>{this.entrepriseSubject.next([...this.entrepriseSubject.value,g])}))}getListEntreprise(d){if(!d)return console.error("Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),new f.c;const x=(new u.Lr).set("Authorization",`Bearer ${d}`);return console.log("En-t\xeates envoy\xe9r : ",x),this.http.get(`${this.apiUrl}/entreprises`,{headers:x}).pipe((0,C.M)(y=>{this.entrepriseSubject.next(y)}))}getEntrepriseById(d){const x=localStorage.getItem("authToken")||"",y=new u.Lr({Authorization:`Bearer ${x}`,"Content-Type":"application/json"});return this.http.get(`${this.apiUrl}/entreprises/${d}`,{headers:y}).pipe((0,b.W)(g=>{let k="Erreur inconnue";return g.error instanceof ErrorEvent?k=`Erreur: ${g.error.message}`:404===g.status&&(k="Entreprise non trouv\xe9e"),(0,M.$)(()=>new Error(k))}))}updateEntreprise(d,x){const y=localStorage.getItem("authToken")||"",g=new u.Lr({Authorization:`Bearer ${y}`});return this.http.patch(`${this.apiUrl}/updateEntreprise/${d}`,x,{headers:g,responseType:"text"}).pipe((0,b.W)(k=>{let A="Erreur inconnue";return k.error instanceof ErrorEvent?A=`Erreur: ${k.error.message}`:400===k.status&&(A=k.error||"Donn\xe9es invalides"),(0,M.$)(()=>new Error(A))}))}getEntrepriseInfo(){const d=localStorage.getItem("authToken");if(!d)return console.error("Aucun token trouv\xe9"),(0,M.$)(()=>new Error("Aucun token trouv\xe9"));const x=this.decodeJwt(d);if(this.isTokenExpired(x))return this.getNewTokenFromApi().pipe((0,w.n)(g=>{localStorage.setItem("authToken",g.token);const k=new u.Lr({Authorization:`Bearer ${g.token}`});return this.http.get(`${this.apiUrl}/myEntreprise`,{headers:k}).pipe((0,C.M)(A=>{localStorage.setItem("entreprise",JSON.stringify(A))}))}));{const g=new u.Lr({Authorization:`Bearer ${d}`});return this.http.get(`${this.apiUrl}/myEntreprise`,{headers:g}).pipe((0,C.M)(k=>{localStorage.setItem("entreprise",JSON.stringify(k))}))}}decodeJwt(d){return JSON.parse(atob(d.split(".")[1]))}isTokenExpired(d){return new Date(1e3*d.exp)<new Date}getNewTokenFromApi(){const d=localStorage.getItem("refreshToken");return this.http.post(`${this.apiUrl}/refresh-token`,{refreshToken:d})}static{this.\u0275fac=function(x){return new(x||t)(c.KVO(u.Qq))}}static{this.\u0275prov=c.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})()},9732:(j,F,r)=>{r.r(F),r.d(F,{AccountSettingsComponent:()=>Vt});var u=r(177),h=r(9417),b=r(3),M=r(4114),C=r(1811),f=r(6850),w=r(9980),O=r(1626),c=r(2525),m=r(6115),t=r(4438),v=r(2120),d=r(1413),x=r(7673),y=r(8834),g=r(3291),k=r(9022),A=r(1680),X=r(9536),$=r(6697),K=r(6977),Q=r(2476),H=r(9327),L=r(8923);function J(i,p){if(1&i){const e=t.RV6();t.j41(0,"div",1)(1,"button",2),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.action())}),t.EFF(2),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(2),t.SpI(" ",e.data.action," ")}}const Z=["label"];function q(i,p){}const tt=Math.pow(2,31)-1;class B{_overlayRef;instance;containerInstance;_afterDismissed=new d.B;_afterOpened=new d.B;_onAction=new d.B;_durationTimeoutId;_dismissedByAction=!1;constructor(p,e){this._overlayRef=e,this.containerInstance=p,p._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(p){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(p,tt))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const z=new t.nKC("MatSnackBarData");class R{politeness="assertive";announcementMessage="";viewContainerRef;duration=0;panelClass;direction;data=null;horizontalPosition="center";verticalPosition="bottom"}let U=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275dir=t.FsC({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]})}return i})(),G=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275dir=t.FsC({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]})}return i})(),V=(()=>{class i{static \u0275fac=function(o){return new(o||i)};static \u0275dir=t.FsC({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]})}return i})(),et=(()=>{class i{snackBarRef=(0,t.WQX)(B);data=(0,t.WQX)(z);constructor(){}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=t.VBU({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(o,n){1&o&&(t.j41(0,"div",0),t.EFF(1),t.k0s(),t.DNE(2,J,3,1,"div",1)),2&o&&(t.R7$(),t.SpI(" ",n.data.message,"\n"),t.R7$(),t.vxM(n.hasAction?2:-1))},dependencies:[y.$z,U,G,V],styles:[".mat-mdc-simple-snack-bar{display:flex}\n"],encapsulation:2,changeDetection:0})}return i})();const D="_mat-snack-bar-enter",N="_mat-snack-bar-exit";let W=(()=>{class i extends g.B{_ngZone=(0,t.WQX)(t.SKi);_elementRef=(0,t.WQX)(t.aKT);_changeDetectorRef=(0,t.WQX)(t.gRc);_platform=(0,t.WQX)(X.P);_rendersRef;_animationsDisabled="NoopAnimations"===(0,t.WQX)(t.bc$,{optional:!0});snackBarConfig=(0,t.WQX)(R);_document=(0,t.WQX)(u.qQ);_trackedModals=new Set;_enterFallback;_exitFallback;_renders=new d.B;_announceDelay=150;_announceTimeoutId;_destroyed=!1;_portalOutlet;_onAnnounce=new d.B;_onExit=new d.B;_onEnter=new d.B;_animationState="void";_live;_label;_role;_liveElementId=(0,t.WQX)(k._).getId("mat-snack-bar-container-live-");constructor(){super();const e=this.snackBarConfig;this._live="assertive"!==e.politeness||e.announcementMessage?"off"===e.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert")),this._rendersRef=(0,t.Tzd)(()=>this._renders.next(),{manualCleanup:!0})}attachComponentPortal(e){this._assertNotAttached();const o=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),o}attachTemplatePortal(e){this._assertNotAttached();const o=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),o}attachDomPortal=e=>{this._assertNotAttached();const o=this._portalOutlet.attachDomPortal(e);return this._afterPortalAttached(),o};onAnimationEnd(e){e===N?this._completeExit():e===D&&(clearTimeout(this._enterFallback),this._ngZone.run(()=>{this._onEnter.next(),this._onEnter.complete()}))}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce(),this._animationsDisabled?this._renders.pipe((0,$.s)(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(D)))}):(clearTimeout(this._enterFallback),this._enterFallback=setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-snack-bar-fallback-visible"),this.onAnimationEnd(D)},200)))}exit(){return this._destroyed?(0,x.of)(void 0):(this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._animationsDisabled?this._renders.pipe((0,$.s)(1)).subscribe(()=>{this._ngZone.run(()=>queueMicrotask(()=>this.onAnimationEnd(N)))}):(clearTimeout(this._exitFallback),this._exitFallback=setTimeout(()=>this.onAnimationEnd(N),200))}),this._onExit)}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit(),this._renders.complete(),this._rendersRef.destroy()}_completeExit(){clearTimeout(this._exitFallback),queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){const e=this._elementRef.nativeElement,o=this.snackBarConfig.panelClass;o&&(Array.isArray(o)?o.forEach(a=>e.classList.add(a)):e.classList.add(o)),this._exposeToModals();const n=this._label.nativeElement,s="mdc-snackbar__label";n.classList.toggle(s,!n.querySelector(`.${s}`))}_exposeToModals(){const e=this._liveElementId,o=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let n=0;n<o.length;n++){const s=o[n],a=s.getAttribute("aria-owns");this._trackedModals.add(s),a?-1===a.indexOf(e)&&s.setAttribute("aria-owns",a+" "+e):s.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{const o=e.getAttribute("aria-owns");if(o){const n=o.replace(this._liveElementId,"").trim();n.length>0?e.setAttribute("aria-owns",n):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{if(this._destroyed)return;const e=this._elementRef.nativeElement,o=e.querySelector("[aria-hidden]"),n=e.querySelector("[aria-live]");if(o&&n){let s=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&o.contains(document.activeElement)&&(s=document.activeElement),o.removeAttribute("aria-hidden"),n.appendChild(o),s?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static \u0275fac=function(o){return new(o||i)};static \u0275cmp=t.VBU({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(o,n){if(1&o&&(t.GBs(g.f,7),t.GBs(Z,7)),2&o){let s;t.mGM(s=t.lsd())&&(n._portalOutlet=s.first),t.mGM(s=t.lsd())&&(n._label=s.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:6,hostBindings:function(o,n){1&o&&t.bIt("animationend",function(a){return n.onAnimationEnd(a.animationName)})("animationcancel",function(a){return n.onAnimationEnd(a.animationName)}),2&o&&t.AVh("mat-snack-bar-container-enter","visible"===n._animationState)("mat-snack-bar-container-exit","hidden"===n._animationState)("mat-snack-bar-container-animations-enabled",!n._animationsDisabled)},features:[t.Vt3],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(o,n){1&o&&(t.j41(0,"div",1)(1,"div",2,0)(3,"div",3),t.DNE(4,q,0,0,"ng-template",4),t.k0s(),t.nrm(5,"div"),t.k0s()()),2&o&&(t.R7$(5),t.BMQ("aria-live",n._live)("role",n._role)("id",n._liveElementId))},dependencies:[g.f],styles:["@keyframes _mat-snack-bar-enter{from{transform:scale(0.8);opacity:0}to{transform:scale(1);opacity:1}}@keyframes _mat-snack-bar-exit{from{opacity:1}to{opacity:0}}.mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-snack-bar-container-animations-enabled{opacity:0}.mat-snack-bar-container-animations-enabled.mat-snack-bar-fallback-visible{opacity:1}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-enter{animation:_mat-snack-bar-enter 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-snack-bar-container-animations-enabled.mat-snack-bar-container-exit{animation:_mat-snack-bar-exit 75ms cubic-bezier(0.4, 0, 1, 1) forwards}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}@media(forced-colors: active){.mat-mdc-snackbar-surface{outline:solid 1px}}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-sys-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-sys-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-sys-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-sys-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-sys-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled).mat-unthemed{color:var(--mat-snack-bar-button-color, var(--mat-sys-inverse-primary))}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}\n"],encapsulation:2})}return i})();const ot=new t.nKC("mat-snack-bar-default-options",{providedIn:"root",factory:function nt(){return new R}});let it=(()=>{class i{_overlay=(0,t.WQX)(L.a);_live=(0,t.WQX)(A.L);_injector=(0,t.WQX)(t.zZn);_breakpointObserver=(0,t.WQX)(Q.B);_parentSnackBar=(0,t.WQX)(i,{optional:!0,skipSelf:!0});_defaultConfig=(0,t.WQX)(ot);_snackBarRefAtThisLevel=null;simpleSnackBarComponent=et;snackBarContainerComponent=W;handsetCssClass="mat-mdc-snack-bar-handset";get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(){}openFromComponent(e,o){return this._attach(e,o)}openFromTemplate(e,o){return this._attach(e,o)}open(e,o="",n){const s={...this._defaultConfig,...n};return s.data={message:e,action:o},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,o){const s=t.zZn.create({parent:o&&o.viewContainerRef&&o.viewContainerRef.injector||this._injector,providers:[{provide:R,useValue:o}]}),a=new g.C(this.snackBarContainerComponent,o.viewContainerRef,s),l=e.attach(a);return l.instance.snackBarConfig=o,l.instance}_attach(e,o){const n={...new R,...this._defaultConfig,...o},s=this._createOverlay(n),a=this._attachSnackBarContainer(s,n),l=new B(a,s);if(e instanceof t.C4Q){const _=new g.T(e,null,{$implicit:n.data,snackBarRef:l});l.instance=a.attachTemplatePortal(_)}else{const _=this._createInjector(n,l),E=new g.C(e,void 0,_),I=a.attachComponentPortal(E);l.instance=I.instance}return this._breakpointObserver.observe(H.Rp.HandsetPortrait).pipe((0,K.Q)(s.detachments())).subscribe(_=>{s.overlayElement.classList.toggle(this.handsetCssClass,_.matches)}),n.announcementMessage&&a._onAnnounce.subscribe(()=>{this._live.announce(n.announcementMessage,n.politeness)}),this._animateSnackBar(l,n),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(e,o){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),o.announcementMessage&&this._live.clear()}),o.duration&&o.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(o.duration)),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter()}_createOverlay(e){const o=new L.f;o.direction=e.direction;let n=this._overlay.position().global();const s="rtl"===e.direction,a="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,l=!a&&"center"!==e.horizontalPosition;return a?n.left("0"):l?n.right("0"):n.centerHorizontally(),"top"===e.verticalPosition?n.top("0"):n.bottom("0"),o.positionStrategy=n,this._overlay.create(o)}_createInjector(e,o){return t.zZn.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:B,useValue:o},{provide:z,useValue:e.data}]})}static \u0275fac=function(o){return new(o||i)};static \u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var st=r(1860),rt=r(8026),at=r(4173);const ct=["fileInput"];function lt(i,p){1&i&&(t.j41(0,"div",108)(1,"div",109),t.nrm(2,"div",110),t.j41(3,"p"),t.EFF(4,"Modification en cours..."),t.k0s()()())}function dt(i,p){if(1&i){const e=t.RV6();t.j41(0,"div",111),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.fermerModal())}),t.j41(1,"div",112),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())}),t.nrm(2,"img",113),t.j41(3,"button",114),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.fermerModal())}),t.EFF(4,"\u2715"),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(2),t.Y8G("src",e.photo||"assets/img/profil.png",t.B4B)}}function pt(i,p){1&i&&(t.j41(0,"small",116),t.EFF(1," Ce champ est obligatoire "),t.k0s())}function mt(i,p){if(1&i&&(t.j41(0,"div"),t.DNE(1,pt,2,0,"small",115),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.currentPassword||null==e.currentPassword.errors?null:e.currentPassword.errors.required)}}function ut(i,p){1&i&&(t.j41(0,"div",117),t.nrm(1,"i",118),t.k0s())}function ht(i,p){1&i&&(t.j41(0,"div",119),t.nrm(1,"i",120),t.k0s())}function _t(i,p){1&i&&(t.j41(0,"small",116),t.EFF(1," Ce champ est obligatoire "),t.k0s())}function gt(i,p){1&i&&(t.j41(0,"small",116),t.EFF(1," Minimum 8 caract\xe8res "),t.k0s())}function ft(i,p){if(1&i&&(t.j41(0,"div"),t.DNE(1,_t,2,0,"small",115)(2,gt,2,0,"small",115),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.newPassword||null==e.newPassword.errors?null:e.newPassword.errors.required),t.R7$(),t.Y8G("ngIf",null==e.newPassword||null==e.newPassword.errors?null:e.newPassword.errors.minlength)}}function vt(i,p){1&i&&(t.j41(0,"div",117),t.nrm(1,"i",118),t.k0s())}function xt(i,p){1&i&&(t.j41(0,"div",119),t.nrm(1,"i",120),t.k0s())}function bt(i,p){1&i&&(t.j41(0,"small",116),t.EFF(1," Les mots de passe ne correspondent pas "),t.k0s())}function Ct(i,p){if(1&i&&(t.j41(0,"div"),t.DNE(1,bt,2,0,"small",115),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.passwordForm.errors?null:e.passwordForm.errors.mismatch)}}function kt(i,p){1&i&&(t.j41(0,"span"),t.EFF(1,"Confirmer"),t.k0s())}function Mt(i,p){1&i&&(t.j41(0,"span"),t.EFF(1,"Chargement..."),t.k0s())}function Pt(i,p){1&i&&(t.j41(0,"small",116),t.EFF(1," Ce champ est obligatoire "),t.k0s())}function Et(i,p){if(1&i&&(t.j41(0,"div"),t.DNE(1,Pt,2,0,"small",115),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngIf",null==e.phoneControl||null==e.phoneControl.errors?null:e.phoneControl.errors.required)}}function Ft(i,p){1&i&&(t.j41(0,"div",117),t.nrm(1,"i",118),t.k0s())}function yt(i,p){1&i&&(t.j41(0,"div",119),t.nrm(1,"i",120),t.k0s())}function wt(i,p){1&i&&(t.j41(0,"span"),t.EFF(1,"Confirmer"),t.k0s())}function It(i,p){1&i&&(t.j41(0,"span"),t.EFF(1,"Traitement..."),t.k0s())}function Ot(i,p){if(1&i&&(t.j41(0,"p")(1,"strong"),t.EFF(2),t.k0s()()),2&i){let e;const o=t.XpG();t.R7$(2),t.JRh(null==(e=o.form.get("siteWeb"))?null:e.value)}}function jt(i,p){if(1&i&&(t.j41(0,"div")(1,"em"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.JRh(e.getLegalInfo())}}function At(i,p){if(1&i&&(t.j41(0,"div")(1,"em"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.JRh(e.getAddressInfo())}}function St(i,p){1&i&&(t.j41(0,"div",24),t.nrm(1,"input",121),t.j41(2,"label",85),t.EFF(3,"Pr\xe9fixe de votre facture"),t.k0s()())}function Tt(i,p){1&i&&(t.j41(0,"div",24),t.nrm(1,"input",122),t.j41(2,"label",85),t.EFF(3,"Suffixe de votre facture"),t.k0s()())}function Rt(i,p){if(1&i&&(t.j41(0,"div",132),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" Restant : ",e.tempsRestantEssai," ")}}function Bt(i,p){if(1&i&&(t.j41(0,"div",133),t.EFF(1),t.nI1(2,"customNumber"),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,1,e.prix)," ")}}function Dt(i,p){if(1&i){const e=t.RV6();t.j41(0,"button",134),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG();return t.Njj(s.activerModule(n.code))}),t.EFF(1),t.k0s()}if(2&i){const e=t.XpG().$implicit;t.R7$(),t.SpI(" ",e.payant&&e.tempsRestantEssai&&"Termin\xe9"!==e.tempsRestantEssai?"Activer (Essai en cours)":"Activer","\n")}}function Nt(i,p){1&i&&(t.j41(0,"div",135),t.EFF(1," Activ\xe9\n"),t.k0s())}function $t(i,p){if(1&i&&(t.j41(0,"div",123),t.DNE(1,Rt,2,1,"div",124),t.j41(2,"div",125),t.nrm(3,"img",126),t.k0s(),t.j41(4,"h2",127),t.EFF(5),t.k0s(),t.j41(6,"p",128),t.EFF(7),t.k0s(),t.DNE(8,Bt,3,3,"div",129)(9,Dt,2,1,"button",130)(10,Nt,2,0,"div",131),t.k0s()),2&i){const e=p.$implicit;t.R7$(),t.Y8G("ngIf",e.tempsRestantEssai),t.R7$(2),t.FS9("alt",e.nom),t.Y8G("src","assets/modules/"+e.code.toLowerCase()+".png",t.B4B),t.R7$(2),t.JRh(e.nom),t.R7$(2),t.SpI(" ",e.description||"Module suppl\xe9mentaire pour votre entreprise"," "),t.R7$(),t.Y8G("ngIf",e.payant),t.R7$(),t.Y8G("ngIf",!e.actif||e.actif&&e.tempsRestantEssai&&"Termin\xe9"!==e.tempsRestantEssai),t.R7$(),t.Y8G("ngIf",e.actif&&(!e.tempsRestantEssai||"Termin\xe9"===e.tempsRestantEssai))}}function Lt(i,p){if(1&i&&(t.j41(0,"p")(1,"strong",147),t.EFF(2),t.k0s()()),2&i){let e;const o=t.XpG(2);t.R7$(2),t.JRh(null==(e=o.form.get("siteWeb"))?null:e.value)}}function zt(i,p){if(1&i&&(t.j41(0,"div")(1,"em",161),t.EFF(2),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.JRh(e.getLegalInfo())}}function Ut(i,p){if(1&i&&(t.j41(0,"div")(1,"em",161),t.EFF(2),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.JRh(e.getAddressInfo())}}function Gt(i,p){if(1&i){const e=t.RV6();t.j41(0,"div",136),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closePreview())}),t.j41(1,"div",137),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())}),t.j41(2,"div",138)(3,"div",139),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closePreview())}),t.nrm(4,"i",140),t.k0s(),t.j41(5,"div",47)(6,"div",48)(7,"div",141)(8,"img",50),t.bIt("error",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.logo="http://localhost:8080/assets/img/logo.jpeg")}),t.k0s()(),t.j41(9,"div",51)(10,"div",142)(11,"p",143),t.EFF(12),t.k0s(),t.j41(13,"p",144),t.EFF(14),t.k0s(),t.j41(15,"div",145),t.EFF(16,"Email : "),t.j41(17,"a",56),t.EFF(18),t.k0s(),t.EFF(19),t.k0s()()()(),t.nrm(20,"hr")(21,"hr"),t.j41(22,"div",57)(23,"h2",146),t.EFF(24,"Facture proforma: "),t.j41(25,"span",58),t.EFF(26),t.k0s()()(),t.j41(27,"div",59)(28,"p",147),t.EFF(29),t.k0s()(),t.j41(30,"div",148)(31,"h4"),t.EFF(32,"Client : "),t.k0s(),t.j41(33,"p"),t.EFF(34,"Nom de client "),t.k0s()(),t.j41(35,"div",149)(36,"h4"),t.EFF(37,"Objet :"),t.k0s(),t.j41(38,"p"),t.EFF(39,"Une petite description de l'objet"),t.k0s()(),t.j41(40,"table",150)(41,"thead")(42,"tr")(43,"th",151),t.EFF(44,"D\xe9signation"),t.k0s(),t.j41(45,"th",152),t.EFF(46,"Description"),t.k0s(),t.j41(47,"th",151),t.EFF(48,"PU"),t.k0s(),t.j41(49,"th",151),t.EFF(50,"Quantit\xe9"),t.k0s(),t.j41(51,"th",151),t.EFF(52,"Montant (FCFA)"),t.k0s()()(),t.j41(53,"tbody")(54,"tr")(55,"td",153),t.EFF(56,"Produit nom"),t.k0s(),t.j41(57,"td",153),t.EFF(58,"Desc..."),t.k0s(),t.j41(59,"td",154),t.EFF(60,"00"),t.k0s(),t.j41(61,"td",154),t.EFF(62,"00"),t.k0s(),t.j41(63,"td",154),t.EFF(64," 0000"),t.k0s()()(),t.j41(65,"tfoot")(66,"tr")(67,"td",155),t.EFF(68,"Total HT"),t.k0s(),t.j41(69,"td",154),t.EFF(70,"0000"),t.k0s()(),t.j41(71,"tr")(72,"td",155),t.EFF(73,"Remise 0 %"),t.k0s(),t.j41(74,"td",154),t.EFF(75," 0000 "),t.k0s()(),t.j41(76,"tr")(77,"td",155),t.EFF(78,"Montant commercial"),t.k0s(),t.j41(79,"td",154),t.EFF(80," 0000 "),t.k0s()(),t.j41(81,"tr")(82,"td",155),t.EFF(83),t.nI1(84,"number"),t.k0s(),t.j41(85,"td",154),t.EFF(86," 0000 "),t.k0s()(),t.j41(87,"tr")(88,"td",155),t.EFF(89,"Montant TTC"),t.k0s(),t.j41(90,"td",154),t.EFF(91," 0000 "),t.k0s()()()(),t.j41(92,"div",65)(93,"p",156)(94,"span",66),t.EFF(95,"Arr\xeat\xe9 la pr\xe9sente facture \xe0 la somme de : "),t.k0s(),t.EFF(96," Zero ....."),t.k0s()(),t.j41(97,"div",67),t.nrm(98,"div"),t.j41(99,"div",157)(100,"h6"),t.EFF(101),t.k0s(),t.j41(102,"h6",158),t.EFF(103),t.k0s(),t.j41(104,"span",159),t.EFF(105),t.k0s()()()(),t.j41(106,"div",71)(107,"div",72)(108,"div",71)(109,"div",160),t.nrm(110,"hr"),t.DNE(111,Lt,3,1,"p",27)(112,zt,3,1,"div",27)(113,Ut,3,1,"div",27),t.k0s()()()()()()()}if(2&i){let e,o,n,s,a,l,_,E,I,S,T;const P=t.XpG();t.R7$(8),t.Y8G("src",P.logo,t.B4B),t.R7$(4),t.JRh(null==(e=P.form.get("nom"))?null:e.value),t.R7$(2),t.SpI("Secterur: ",null==(o=P.form.get("secteur"))?null:o.value,""),t.R7$(4),t.SpI(" ",null==(n=P.form.get("email"))?null:n.value,""),t.R7$(),t.SpI(" T\xe9l\xe9phone : ",null==(s=P.form.get("telephone"))?null:s.value,""),t.R7$(7),t.Lme("",null==(a=P.form.get("prefixe"))?null:a.value,"-xxx-xx-xxxx ",null==(a=P.form.get("suffixe"))?null:a.value,""),t.R7$(3),t.SpI("",null==(l=P.form.get("siege"))?null:l.value,", le ..."),t.R7$(54),t.SpI("",t.i5U(84,15,100*(null==(_=P.form.get("tauxTva"))?null:_.value),"1.0-0"),"%"),t.R7$(18),t.JRh(null==(E=P.form.get("signataire"))?null:E.value),t.R7$(2),t.JRh(null==(I=P.form.get("signataireNom"))?null:I.value),t.R7$(2),t.SpI(" ",null==(S=P.form.get("signataireNom"))?null:S.value," "),t.R7$(6),t.Y8G("ngIf",null==(T=P.form.get("siteWeb"))?null:T.value),t.R7$(),t.Y8G("ngIf",P.getLegalInfo()),t.R7$(),t.Y8G("ngIf",P.getAddressInfo())}}let Vt=(()=>{class i{get currentPassword(){return this.passwordForm.get("currentPassword")}get newPassword(){return this.passwordForm.get("newPassword")}get confirmPassword(){return this.passwordForm.get("confirmPassword")}get nomBoutiqueControl(){return this.nomBoutiqueForm.get("nomBoutique")}get adresseControl(){return this.nomBoutiqueForm.get("adresse")}get nomCompletControl(){return this.nomCompletForm.get("nomComplet")}get phoneControl(){return this.nomCompletForm.get("phone")}get passwordControl(){return this.nomCompletForm.get("password")}toggleCurrentPasswordVisibility(){this.showCurrentPassword=!this.showCurrentPassword}toggleNewPasswordVisibility(){this.showNewPassword=!this.showNewPassword}toggleConfirmPasswordVisibility(){this.showConfirmPassword=!this.showConfirmPassword}togglePasswordForm(){this.isPasswordFormVisible=!this.isPasswordFormVisible}constructor(e,o,n,s,a,l,_,E){this.fb=e,this.entrepriseService=o,this.cdRef=n,this.snackBar=s,this.profilService=a,this.usersService=l,this.zone=_,this.moduleService=E,this.logo=null,this.selectedLogoFile=null,this.entrepriseId=null,this.isLoading=!1,this.showPreview=!1,this.successMessage=null,this.password="",this.photoUrl="assets/img/profil.png",this.photo="",this.isModalOpen=!1,this.photoRefreshToken=(new Date).getTime(),this.imageFile=null,this.showCurrentPassword=!1,this.showNewPassword=!1,this.showConfirmPassword=!1,this.errorMessage=null,this.isPasswordFormVisible=!1,this.userName="",this.nomEntreprise="",this.email="",this.phone="",this.roleType="",this.pays="",this.nomBoutique="",this.boutiqueAdresse="",this.flagPays="",this.personalCode="",this.isNomBoutiqueFormVisible=!1,this.isSending=!1,this.isUserFormVisible=!1,this.boutiques=[],this.showPasswordInPersonalForm=!1,this.apiUrl=c.c.imgUrl,this.fallbackLogo=`${this.apiUrl}/defaultLogo/Votre.png`,this.paysFlags={Mali:"\u{1f1f2}\u{1f1f1}",S\u00e9n\u00e9gal:"\u{1f1f8}\u{1f1f3}","C\xf4te d'Ivoire":"\u{1f1e8}\u{1f1ee}"},this.modules=[],this.errorMsg=""}ngOnInit(){this.initForm(),this.initForm(),this.getFormInit(),this.getEntrepriseInfo(),this.listenToPrefixSuffixChanges(),this.getConnectedUserId(),this.getUserInfo(),this.loadModules();const e=localStorage.getItem("photo");e&&(this.photo=e)}getConnectedUserId(){this.usersService.getUserInfo().subscribe({next:e=>{if(e&&e.id)this.userId=e.id;else{const o=JSON.parse(localStorage.getItem("user")||"{}");o&&o.id?this.userId=o.id:this.errorMessage="Utilisateur non authentifi\xe9."}},error:e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des infos utilisateur:",e),this.errorMessage="Impossible de r\xe9cup\xe9rer l'utilisateur connect\xe9."}})}getUserInfo(){this.usersService.getUserInfo().subscribe({next:e=>{const o=(new Date).getTime();this.photo=e.photo?`${this.apiUrl}${e.photo}?t=${o}`:"assets/img/profil.png",this.userName=e.nomComplet,this.personalCode=e.personalCode,this.nomEntreprise=e.nomEntreprise,this.email=e.email,this.phone=e.phone,this.photo=e.photo?`${this.apiUrl}${e.photo}`:"assets/img/profil.png",this.roleType=e.roleType,this.pays=e.pays,this.nomBoutique=e.boutiques?.length?e.boutiques[0].nomBoutique:"Aucune boutique",this.flagPays=this.paysFlags[this.pays]||"",this.boutiques=e.boutiques||[],console.log("Liste des boutiques:",this.boutiques),console.log("Infos utilisateur r\xe9cup\xe9r\xe9es :",e),this.nomCompletForm.patchValue({nomComplet:e.nomComplet,phone:e.phone,password:""}),this.cdRef.detectChanges()},error:e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des infos utilisateur :",e)}})}togglePasswordVisibilityInPersonalForm(){this.showPasswordInPersonalForm=!this.showPasswordInPersonalForm}initForm(){this.passwordForm=this.fb.group({currentPassword:["",[h.k0.required]],newPassword:["",[h.k0.required,h.k0.minLength(8)]],confirmPassword:["",[h.k0.required]]},{validators:this.passwordMatchValidator}),this.nomCompletForm=this.fb.group({nomComplet:[""],phone:["",[h.k0.pattern("^\\+?[0-9]{7,15}$")]],password:["",[h.k0.required,h.k0.minLength(6)]]})}passwordMatchValidator(e){const o=e.get("newPassword")?.value,n=e.get("confirmPassword")?.value;return o===n?null:{mismatch:!0}}get tauxTvaAffiche(){const e=this.form.get("tauxTva")?.value;return null!==e?Math.round(100*e):0}onTauxTvaInput(e){const n=parseFloat(e.target.value);isNaN(n)?this.form.get("tauxTva")?.setValue(null):this.form.get("tauxTva")?.setValue(n/100)}getFormInit(){this.form=this.fb.group({nom:["Entreprise"],secteur:["xxxx"],email:["example@gmail.com"],adresse:["xxxx"],pays:["Bamako-Mali"],telephone:["xx xx xx xx"],siteWeb:["www.xpertpro.com"],banque:["xxxx"],siege:["xxxx"],nina:["xxxx"],rccm:["xxxx"],nif:["xxxx"],signataire:["Monsieur X"],signataireNom:["Le Directeur G\xe9n\xe9ral"],prefixe:["xxxx"],suffixe:["xxxx"],tauxTva:[null]})}getEntrepriseInfo(){this.entrepriseService.getEntrepriseInfo().subscribe({next:e=>{this.entrepriseId=void 0!==e.id?e.id:null,this.form.patchValue({nom:e.nom,secteur:e.secteur,email:e.email,adresse:e.adresse,pays:e.pays,telephone:e.telephone,siteWeb:e.siteWeb,banque:e.banque,siege:e.siege,nina:e.nina,rccm:e.rccm,nif:e.nif,signataire:e.signataire,signataireNom:e.signataireNom,logo:e.logo,prefixe:e.prefixe,suffixe:e.suffixe,tauxTva:e.tauxTva}),console.log("Logo path from server:",e),console.log("Logo path from server:",e.logo),this.logo=`${this.apiUrl}${e.logo}`,this.cdRef.markForCheck()},error:e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des informations de l'entreprise",e)}})}onChangeLogoClick(){this.fileInput.nativeElement.click()}openPreview(){this.showPreview=!0}closePreview(){this.showPreview=!1}onFileSelected(e){const o=e.target.files[0];if(o){this.selectedLogoFile=o;const n=new FileReader;n.onload=s=>{const a=new Image;a.src=s.target.result,a.onload=()=>{const _=document.createElement("canvas"),E=_.getContext("2d");if(a.width>800||a.height>800){const I=Math.min(800/a.width,800/a.height);_.width=a.width*I,_.height=a.height*I,E?.drawImage(a,0,0,_.width,_.height),this.logo=_.toDataURL("image/jpeg",.8)}else this.logo=s.target.result;this.cdRef.markForCheck(),this.fileInput.nativeElement.value=""}},n.readAsDataURL(o)}}onSubmit(){if(!this.entrepriseId)return void console.error("ID de l'entreprise manquant");this.isLoading=!0;const e=new FormData;e.append("entreprise",JSON.stringify(this.form.value)),this.selectedLogoFile&&e.append("logo",this.selectedLogoFile),setTimeout(()=>{this.entrepriseService.updateEntreprise(this.entrepriseId,e).subscribe({next:n=>{this.isLoading=!1,this.snackBar.open(n,"Fermer",{duration:3e3}),this.getEntrepriseInfo(),this.selectedLogoFile=null},error:n=>{this.isLoading=!1,this.snackBar.open(n.error||"Erreur lors de la mise \xe0 jour","Fermer",{duration:3e3})}})},3e3)}shouldShowPrefixe(){return!this.form.get("suffixe")?.value}shouldShowSuffixe(){return!this.form.get("prefixe")?.value}listenToPrefixSuffixChanges(){this.form.get("prefixe")?.valueChanges.subscribe(()=>{this.cdRef.markForCheck()}),this.form.get("suffixe")?.valueChanges.subscribe(()=>{this.cdRef.markForCheck()})}getLegalInfo(){const e=[];return this.form.get("nina")?.value&&e.push(`NINA : ${this.form.get("nina")?.value}`),this.form.get("rccm")?.value&&e.push(`RCCM : ${this.form.get("rccm")?.value}`),this.form.get("nif")?.value&&e.push(`NIF : ${this.form.get("nif")?.value}`),this.form.get("banque")?.value&&e.push(`Banque : ${this.form.get("banque")?.value}`),e.join(" ; ")}getAddressInfo(){const e=this.form.get("adresse")?.value,o=this.form.get("pays")?.value;return e&&o?`Adresse : ${e} / ${o}`:e?`Adresse : ${e}`:o?`Adresse : ${o}`:""}updatePassword(){if(this.errorMessage=null,this.successMessage=null,this.passwordForm.invalid)return void this.snackBar.open("Veuillez remplir tous les champs correctement","Fermer",{duration:3e3});const{currentPassword:e,newPassword:o,confirmPassword:n}=this.passwordForm.value;o===n?(this.isLoading=!0,this.profilService.updatePassword(this.userId,{password:e,newPassword:o}).subscribe({next:a=>{this.isLoading=!1,this.cdRef.detectChanges();const l=a.includes("succ\xe8s")?a:"Mot de passe modifi\xe9 !";this.snackBar.open(l,"Fermer",{duration:3e3}),this.isPasswordFormVisible=!1,this.passwordForm.reset()},error:a=>{this.isLoading=!1;let l="Erreur inconnue";a instanceof O.yz&&(l=a.error.message||a.error||l),this.snackBar.open(l,"Fermer",{duration:3e3})}})):this.snackBar.open("Les nouveaux mots de passe ne correspondent pas","Fermer",{duration:3e3})}onSubmitUpdateUser(){if(this.errorMessage=null,this.successMessage=null,this.isLoading=!0,this.nomCompletForm.invalid)return this.errorMessage="Veuillez remplir tous les champs correctement",void(this.isLoading=!1);const{nomComplet:e,phone:o,password:n}=this.nomCompletForm.value,s={nomComplet:e,phone:o,password:n},a=new FormData;a.append("user",JSON.stringify(s)),this.imageFile&&a.append("photo",this.imageFile),this.usersService.updateUser(this.userId,a).subscribe({next:l=>{this.isLoading=!1,this.cdRef.detectChanges();const _="string"==typeof l?l:l?.message;this.zone.run(()=>{this.snackBar.open(_,"Fermer",{duration:3e3}),this.nomCompletForm.reset()})},error:l=>{this.isLoading=!1,this.cdRef.detectChanges();let _="Erreur lors de la mise \xe0 jour";l instanceof O.yz&&(_=l.error.message||l.error||_),this.zone.run(()=>{this.snackBar.open(_,"Fermer",{duration:3e3})})}})}changerPhoto(e){e.stopPropagation(),document.getElementById("profilePhotoInput").click()}visualiserPhoto(e){e.target.classList.contains("camera-icon")||(this.isModalOpen=!0)}fermerModal(){this.isModalOpen=!1}onProfilePhotoSelected(e){const o=e.target;if(o.files&&o.files[0]){const n=o.files[0];this.imageFile=n;const s=new FileReader;s.onload=l=>{const _=l.target.result;this.photo=_,localStorage.setItem("photo",_),window.dispatchEvent(new Event("storage-photo-update"))},s.readAsDataURL(n);const a=new FormData;a.append("photo",n),this.usersService.updateUser(this.userId,a).subscribe({next:l=>{this.snackBar.open("Photo mise \xe0 jour avec succ\xe8s","Fermer",{duration:3e3}),this.refreshPhoto()},error:l=>{this.snackBar.open("\xc9chec de la mise \xe0 jour","Fermer",{duration:3e3}),this.refreshPhoto()}})}}refreshPhoto(){const e=(new Date).getTime();this.usersService.getUserInfo().subscribe(o=>{this.photo=o.photo?`${this.apiUrl}${o.photo}?t=${e}`:"assets/img/profil.png",this.cdRef.detectChanges()})}loadModules(){this.moduleService.getModulesEntreprise().subscribe({next:e=>this.modules=e,error:e=>this.errorMsg="Erreur lors du chargement des modules"})}activerModule(e){console.log("Activation demand\xe9e pour le module :",e)}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(h.ok),t.rXU(v.r),t.rXU(t.gRc),t.rXU(it),t.rXU(st.O),t.rXU(rt.g),t.rXU(t.SKi),t.rXU(at.A))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-account-settings"]],viewQuery:function(o,n){if(1&o&&t.GBs(ct,5),2&o){let s;t.mGM(s=t.lsd())&&(n.fileInput=s.first)}},features:[t.Jv_([(0,b.aw)()])],decls:308,vars:47,consts:[["fileInput",""],[1,"account-settings"],["class","loading-overlay",4,"ngIf"],[1,"information_cadre"],[1,"section"],[1,"section_title"],[1,"section_navbar"],[1,"custom-tabs",3,"selectedIndex"],["label","Compte"],[1,"tab-content"],[1,"container_compte_profil"],[1,"champ_grid_double"],[1,"setting_profil","cadre_photo"],[1,"content_setting_profil"],[1,"tilte_profil"],[1,"profile-img-wrapper",3,"click"],["alt","Photo de profil",1,"profile-img",3,"error","src"],[1,"btn_changer_profil"],[1,"btn","camera-icon",3,"click"],["type","file","id","profilePhotoInput","accept","image/*","hidden","",3,"change"],["class","photo-modal",3,"click",4,"ngIf"],[1,"info_capacity_profil"],[1,"setting_profil","cadre_password"],[1,"info_titre_input",3,"formGroup"],[1,"champ_input"],["formControlName","currentPassword","placeholder","Saisis le mot de passe actuel",1,"input_focus",3,"type"],[1,"label","labelColor"],[4,"ngIf"],[1,"eye_container",3,"click"],["class","eye_ferme",4,"ngIf"],["class","eye_ouvre",4,"ngIf"],["formControlName","newPassword","placeholder","Saisis le nouveau mot de passe",1,"input_focus",3,"type"],["formControlName","confirmPassword","placeholder","Confirmer le nouveau mot de passe",1,"input_focus",3,"type"],[1,"btn_save"],["type","submit",1,"btn",3,"click","disabled"],[1,"info_personnel"],[1,"info_titre_input",3,"ngSubmit","formGroup"],["formControlName","nomComplet","placeholder","Saisissez votre nom complet",1,"input_focus"],["type","tel","formControlName","phone","placeholder","Saisissez votre num\xe9ro de t\xe9l\xe9phone",1,"input_focus"],["formControlName","password","placeholder","Saisissez votre mot de passe",1,"input_focus",3,"type"],[1,"btn_double"],["type","submit",1,"btn",3,"disabled"],["label","Notifications"],["label","Factures"],[1,"content_setting_facture"],[1,"contenu_left_facture"],[1,"facture_model"],[1,"content"],[1,"header_apercu"],[1,"logo_entreprise"],["alt","Logo de l'entreprise",3,"error","src"],[1,"entete_entreprise"],[1,"content_entete"],[1,"para1"],[1,"para2"],[1,"para3"],["href","mail"],[1,"titre"],[2,"color","#0000003e"],[1,"date"],[1,"droit"],[1,"object"],[2,"width","70px!important"],[1,"td_left"],["colspan","4"],[1,"contenu_bottom"],[2,"font-weight","600"],[1,"cachet_container"],[1,"cachet"],[1,"name_directeur"],[1,"cachetSign"],[1,"container_footer"],[1,"footer"],["title","Voir l'aper\xe7u de la facture",1,"voir_apercu",3,"click"],[1,"ri-eye-2-line"],[1,"champs_setting_facture"],[1,"content_edit_facture",3,"formGroup"],[1,"titre_champ"],["type","file","accept","image/*","id","uniqueFileInputId",2,"display","none",3,"change"],[1,"champ_grid",2,"margin","10px 0 15px","display","flex","align-items","center"],[2,"margin","0","font-size","12px","display","flex","align-items","center"],["href","javascript:void(0)","title","Changer le logo",2,"padding-left","8px","cursor","pointer","display","inline-flex","align-items","center",3,"click"],["src","assets/img/appareil.png","alt","Changer logo",2,"width","25px","height","25px"],[1,"champ_grid"],["type","text","formControlName","nom","readonly","","placeholder","Saisis le nom entreprise",1,"input_focus",2,"cursor","no-drop","color","#8f8f8f!important"],[1,"label"],["type","text","formControlName","secteur","placeholder","Saisis le secteur",1,"input_focus"],["type","email","formControlName","email","placeholder","Saisis l'email",1,"input_focus"],["type","telephone","formControlName","telephone","placeholder","00 00 00 00",1,"input_focus"],["type","text","formControlName","siege","placeholder","ex: Bamako",1,"input_focus"],["type","text","formControlName","pays","placeholder","Votre pays",1,"input_focus"],["class","champ_input",4,"ngIf"],["type","number",1,"input_focus",3,"input","value"],[1,"titre_champ",2,"margin-top","30px"],["type","text","formControlName","siteWeb","placeholder","Saisis le site web",1,"input_focus"],["type","text","formControlName","banque","placeholder","Saisis le banque",1,"input_focus"],["type","text","formControlName","nina","placeholder","Saisis le nina",1,"input_focus"],["type","text","formControlName","rccm","placeholder","Saisis l'rccm",1,"input_focus"],["type","text","formControlName","nif","placeholder","Saisis le nif",1,"input_focus"],["type","text","formControlName","adresse","placeholder","Saisis l'adresse",1,"input_focus"],["type","text","formControlName","signataireNom","placeholder","Saisis le nom du signataire",1,"input_focus"],["type","text","formControlName","signataire","placeholder","Saisis le post de signataire",1,"input_focus"],[1,"btn",3,"click"],["label","S\xe9curit\xe9"],["label","App"],[1,"module-grid"],["class","module-card",4,"ngFor","ngForOf"],["class","preview-overlay",3,"click",4,"ngIf"],[1,"loading-overlay"],[1,"loading-content"],[1,"spinner"],[1,"photo-modal",3,"click"],[1,"photo-modal-content",3,"click"],[3,"src"],[1,"fermer-btn",3,"click"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"eye_ferme"],[1,"ri-eye-close-line"],[1,"eye_ouvre"],[1,"ri-eye-line"],["type","text","formControlName","prefixe","placeholder","Saisis le prefixe de votre facture",1,"input_focus"],["type","text","formControlName","suffixe","placeholder","Saisis le suffixe de votre facture",1,"input_focus"],[1,"module-card"],["class","module-essai",4,"ngIf"],[1,"module-icon"],[3,"src","alt"],[1,"module-title"],[1,"module-description"],["class","module-price",4,"ngIf"],["class","module-btn",3,"click",4,"ngIf"],["class","module-actif",4,"ngIf"],[1,"module-essai"],[1,"module-price"],[1,"module-btn",3,"click"],[1,"module-actif"],[1,"preview-overlay",3,"click"],[1,"preview-content",3,"click"],[1,"facture_model_preview"],[1,"preview-close",3,"click"],[1,"ri-close-large-fill"],[1,"logo_entreprise_preview"],[1,"content_entete","content_entete_preview"],[1,"para1","para_preview"],[1,"para2","para_preview"],[1,"para3","para_preview"],[2,"font-size","12px"],[2,"font-size","10px"],[1,"droit","droit_preview"],[1,"object","droit_preview"],[1,"table"],[1,"th"],[1,"th",2,"width","70px!important"],[1,"td_left","td"],[1,"td"],["colspan","4",1,"td"],[2,"font-size","8px"],[1,"cachet_preview"],[1,"name_directeur_preview"],[1,"cachetSignP"],[1,"footer",2,"line-height","12px"],[1,"em_footer"]],template:function(o,n){if(1&o){const s=t.RV6();t.j41(0,"div",1),t.DNE(1,lt,5,0,"div",2),t.j41(2,"div",3)(3,"div",4)(4,"h6",5),t.EFF(5,"Param\xe8tres du compte"),t.k0s()()(),t.j41(6,"div",3)(7,"div",6)(8,"mat-tab-group",7)(9,"mat-tab",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"h5"),t.EFF(17,"Changer de profil"),t.k0s(),t.j41(18,"p"),t.EFF(19,"Changez votre photo de profil \xe0 partir d'ici"),t.k0s()(),t.j41(20,"div",15),t.bIt("click",function(l){return t.eBV(s),t.Njj(n.visualiserPhoto(l))}),t.j41(21,"img",16),t.bIt("error",function(){return t.eBV(s),t.Njj(n.photo="assets/img/profil.png")}),t.k0s()(),t.j41(22,"div",17)(23,"button",18),t.bIt("click",function(l){return t.eBV(s),t.Njj(n.changerPhoto(l))}),t.EFF(24," Changer la photo "),t.k0s()(),t.j41(25,"input",19),t.bIt("change",function(l){return t.eBV(s),t.Njj(n.onProfilePhotoSelected(l))}),t.k0s(),t.DNE(26,dt,5,1,"div",20),t.j41(27,"div",21)(28,"p"),t.EFF(29,"Formats JPG, GIF ou PNG autoris\xe9s. Taille "),t.nrm(30,"br"),t.EFF(31," maximale : 800 Ko."),t.k0s()()()(),t.j41(32,"div",22)(33,"div",14)(34,"h5"),t.EFF(35,"Changer le mot de passe"),t.k0s(),t.j41(36,"p"),t.EFF(37,"Pour changer votre mot de passe, veuillez "),t.nrm(38,"br"),t.EFF(39," confirmer ici"),t.k0s()(),t.j41(40,"form",23)(41,"div",24),t.nrm(42,"input",25),t.j41(43,"label",26),t.EFF(44,"Mot de passe actuel"),t.k0s(),t.DNE(45,mt,2,1,"div",27),t.j41(46,"div",28),t.bIt("click",function(){return t.eBV(s),t.Njj(n.toggleCurrentPasswordVisibility())}),t.DNE(47,ut,2,0,"div",29)(48,ht,2,0,"div",30),t.k0s()(),t.j41(49,"div",24),t.nrm(50,"input",31),t.j41(51,"label",26),t.EFF(52,"Nouveau mot de passe"),t.k0s(),t.DNE(53,ft,3,2,"div",27),t.j41(54,"div",28),t.bIt("click",function(){return t.eBV(s),t.Njj(n.toggleNewPasswordVisibility())}),t.DNE(55,vt,2,0,"div",29)(56,xt,2,0,"div",30),t.k0s()(),t.j41(57,"div",24),t.nrm(58,"input",32),t.j41(59,"label",26),t.EFF(60,"Confirmer le nouveau mot de passe"),t.k0s(),t.DNE(61,Ct,2,1,"div",27),t.k0s(),t.j41(62,"div",33)(63,"button",34),t.bIt("click",function(){return t.eBV(s),t.Njj(n.updatePassword())}),t.DNE(64,kt,2,0,"span",27)(65,Mt,2,0,"span",27),t.k0s()()()()(),t.j41(66,"div",35)(67,"div",14)(68,"h5"),t.EFF(69,"D\xe9tails personnels"),t.k0s(),t.j41(70,"p"),t.EFF(71,"Pour modifier vos informations personnelles, modifiez-les et enregistrez-les ici"),t.k0s()(),t.j41(72,"form",36),t.bIt("ngSubmit",function(){return t.eBV(s),t.Njj(n.onSubmitUpdateUser())}),t.j41(73,"div",24),t.nrm(74,"input",37),t.j41(75,"label",26),t.EFF(76,"Nom & pr\xe9nom"),t.k0s()(),t.j41(77,"div",24),t.nrm(78,"input",38),t.j41(79,"label",26),t.EFF(80,"Votre num\xe9ro"),t.k0s(),t.DNE(81,Et,2,1,"div",27),t.k0s(),t.j41(82,"div",24),t.nrm(83,"input",39),t.j41(84,"label",26),t.EFF(85,"Votre mot de passe"),t.k0s(),t.j41(86,"div",28),t.bIt("click",function(){return t.eBV(s),t.Njj(n.togglePasswordVisibilityInPersonalForm())}),t.DNE(87,Ft,2,0,"div",29)(88,yt,2,0,"div",30),t.k0s()(),t.j41(89,"div",40)(90,"div",33)(91,"button",41),t.DNE(92,wt,2,0,"span",27)(93,It,2,0,"span",27),t.k0s()()()()()()()(),t.j41(94,"mat-tab",42)(95,"div",9),t.EFF(96," Contenu des notifications "),t.k0s()(),t.j41(97,"mat-tab",43)(98,"div",9)(99,"div",44)(100,"div",45)(101,"div",46)(102,"div",47)(103,"div",48)(104,"div",49)(105,"img",50),t.bIt("error",function(){return t.eBV(s),t.Njj(n.logo="http://localhost:8080/defaultLogo/Votre.png")}),t.k0s()(),t.j41(106,"div",51)(107,"div",52)(108,"p",53),t.EFF(109),t.k0s(),t.j41(110,"p",54),t.EFF(111),t.k0s(),t.j41(112,"div",55),t.EFF(113,"Email : "),t.j41(114,"a",56),t.EFF(115),t.k0s(),t.EFF(116),t.k0s()()()(),t.nrm(117,"hr")(118,"hr"),t.j41(119,"div",57)(120,"h2"),t.EFF(121,"Facture proforma: "),t.j41(122,"span",58),t.EFF(123),t.k0s()()(),t.j41(124,"div",59)(125,"p"),t.EFF(126),t.k0s()(),t.j41(127,"div",60)(128,"h4"),t.EFF(129,"Doit : "),t.k0s(),t.j41(130,"p"),t.EFF(131,"Nom de client "),t.k0s()(),t.j41(132,"div",61)(133,"h4"),t.EFF(134,"Objet :"),t.k0s(),t.j41(135,"p"),t.EFF(136,"Une petite description de l'objet"),t.k0s()(),t.j41(137,"table")(138,"thead")(139,"tr")(140,"th"),t.EFF(141,"D\xe9signation"),t.k0s(),t.j41(142,"th",62),t.EFF(143,"Description"),t.k0s(),t.j41(144,"th"),t.EFF(145,"PU"),t.k0s(),t.j41(146,"th"),t.EFF(147,"Quantit\xe9"),t.k0s(),t.j41(148,"th"),t.EFF(149,"Montant (FCFA)"),t.k0s()()(),t.j41(150,"tbody")(151,"tr")(152,"td",63),t.EFF(153,"Produit nom"),t.k0s(),t.j41(154,"td",63),t.EFF(155,"Desc..."),t.k0s(),t.j41(156,"td"),t.EFF(157,"00"),t.k0s(),t.j41(158,"td"),t.EFF(159,"00"),t.k0s(),t.j41(160,"td"),t.EFF(161," 0000"),t.k0s()()(),t.j41(162,"tfoot")(163,"tr")(164,"td",64),t.EFF(165,"Total HT"),t.k0s(),t.j41(166,"td"),t.EFF(167,"0000"),t.k0s()(),t.j41(168,"tr")(169,"td",64),t.EFF(170,"Remise 0 %"),t.k0s(),t.j41(171,"td"),t.EFF(172," 0000 "),t.k0s()(),t.j41(173,"tr")(174,"td",64),t.EFF(175,"Montant commercial"),t.k0s(),t.j41(176,"td"),t.EFF(177," 0000 "),t.k0s()(),t.j41(178,"tr")(179,"td",64),t.EFF(180),t.k0s(),t.j41(181,"td"),t.EFF(182," 0000 "),t.k0s()(),t.j41(183,"tr")(184,"td",64),t.EFF(185,"Montant TTC"),t.k0s(),t.j41(186,"td"),t.EFF(187," 0000 "),t.k0s()()()(),t.j41(188,"div",65)(189,"p")(190,"span",66),t.EFF(191,"Arr\xeat\xe9 la pr\xe9sente facture \xe0 la somme de : "),t.k0s(),t.EFF(192," Zero ....."),t.k0s()(),t.j41(193,"div",67),t.nrm(194,"div"),t.j41(195,"div",68)(196,"h6"),t.EFF(197),t.k0s(),t.j41(198,"h6",69),t.EFF(199),t.k0s(),t.j41(200,"span",70),t.EFF(201),t.k0s()()()(),t.j41(202,"div",71)(203,"div",72),t.nrm(204,"hr"),t.DNE(205,Ot,3,1,"p",27)(206,jt,3,1,"div",27)(207,At,3,1,"div",27),t.k0s()()(),t.j41(208,"div",73),t.bIt("click",function(){return t.eBV(s),t.Njj(n.openPreview())}),t.EFF(209," Agrandir "),t.nrm(210,"i",74),t.k0s()(),t.j41(211,"div",75)(212,"div",76)(213,"div",77)(214,"h6"),t.EFF(215,"Haut de page"),t.k0s()(),t.j41(216,"input",78,0),t.bIt("change",function(l){return t.eBV(s),t.Njj(n.onFileSelected(l))}),t.k0s(),t.j41(218,"div",79)(219,"p",80),t.EFF(220," Changer votre logo ici \u{1f449} "),t.j41(221,"a",81),t.bIt("click",function(){t.eBV(s);const l=t.sdS(217);return t.Njj(l.click())}),t.nrm(222,"img",82),t.k0s()()(),t.j41(223,"div",83)(224,"div",24),t.nrm(225,"input",84),t.j41(226,"label",85),t.EFF(227,"Nom entreprise"),t.k0s()(),t.j41(228,"div",24),t.nrm(229,"input",86),t.j41(230,"label",85),t.EFF(231,"Secteur"),t.k0s()(),t.j41(232,"div",24),t.nrm(233,"input",87),t.j41(234,"label",85),t.EFF(235,"Email"),t.k0s()()(),t.j41(236,"div",83)(237,"div",24),t.nrm(238,"input",88),t.j41(239,"label",85),t.EFF(240,"T\xe9l\xe9phone"),t.k0s()(),t.j41(241,"div",24),t.nrm(242,"input",89),t.j41(243,"label",85),t.EFF(244,"Ville"),t.k0s()(),t.j41(245,"div",24),t.nrm(246,"input",90),t.j41(247,"label",85),t.EFF(248,"Pays"),t.k0s()()(),t.j41(249,"div",83),t.DNE(250,St,4,0,"div",91)(251,Tt,4,0,"div",91),t.j41(252,"div",24)(253,"input",92),t.bIt("input",function(l){return t.eBV(s),t.Njj(n.onTauxTvaInput(l))}),t.k0s(),t.j41(254,"label",85),t.EFF(255,"TVA (en %)"),t.k0s()()(),t.j41(256,"div",93)(257,"h6"),t.EFF(258,"Bas de page"),t.k0s()(),t.j41(259,"div",83)(260,"div",24),t.nrm(261,"input",94),t.j41(262,"label",85),t.EFF(263,"Site web"),t.k0s()(),t.j41(264,"div",24),t.nrm(265,"input",95),t.j41(266,"label",85),t.EFF(267,"Banque"),t.k0s()(),t.j41(268,"div",24),t.nrm(269,"input",96),t.j41(270,"label",85),t.EFF(271,"NINA"),t.k0s()()(),t.j41(272,"div",83)(273,"div",24),t.nrm(274,"input",97),t.j41(275,"label",85),t.EFF(276,"RCCM"),t.k0s()(),t.j41(277,"div",24),t.nrm(278,"input",98),t.j41(279,"label",85),t.EFF(280,"NIF"),t.k0s()(),t.j41(281,"div",24),t.nrm(282,"input",99),t.j41(283,"label",85),t.EFF(284,"Adresse"),t.k0s()()(),t.j41(285,"div",93)(286,"h6"),t.EFF(287,"Signature"),t.k0s()(),t.j41(288,"div",83)(289,"div",24),t.nrm(290,"input",100),t.j41(291,"label",85),t.EFF(292,"Nom signataire"),t.k0s()(),t.j41(293,"div",24),t.nrm(294,"input",101),t.j41(295,"label",85),t.EFF(296,"Poste"),t.k0s()()(),t.j41(297,"div",24)(298,"button",102),t.bIt("click",function(){return t.eBV(s),t.Njj(n.onSubmit())}),t.EFF(299,"Enregistrer"),t.k0s()()()()()()(),t.j41(300,"mat-tab",103)(301,"div",9),t.EFF(302," Contenu de la s\xe9curit\xe9 "),t.k0s()(),t.j41(303,"mat-tab",104)(304,"div",9)(305,"div",105),t.DNE(306,$t,11,8,"div",106),t.k0s()()()()()()(),t.DNE(307,Gt,114,18,"div",107)}if(2&o){let s,a,l,_,E,I,S,T,P,Y;t.R7$(),t.Y8G("ngIf",n.isLoading),t.R7$(7),t.Y8G("selectedIndex",0),t.R7$(13),t.Y8G("src",n.photo||"assets/img/profil.png",t.B4B),t.R7$(5),t.Y8G("ngIf",n.isModalOpen),t.R7$(14),t.Y8G("formGroup",n.passwordForm),t.R7$(2),t.Y8G("type",n.showCurrentPassword?"text":"password"),t.R7$(3),t.Y8G("ngIf",(null==n.currentPassword?null:n.currentPassword.touched)&&(null==n.currentPassword?null:n.currentPassword.invalid)),t.R7$(2),t.Y8G("ngIf",!n.showCurrentPassword),t.R7$(),t.Y8G("ngIf",n.showCurrentPassword),t.R7$(2),t.Y8G("type",n.showNewPassword?"text":"password"),t.R7$(3),t.Y8G("ngIf",(null==n.newPassword?null:n.newPassword.touched)&&(null==n.newPassword?null:n.newPassword.invalid)),t.R7$(2),t.Y8G("ngIf",!n.showNewPassword),t.R7$(),t.Y8G("ngIf",n.showNewPassword),t.R7$(2),t.Y8G("type",n.showNewPassword?"text":"password"),t.R7$(3),t.Y8G("ngIf",(null==n.confirmPassword?null:n.confirmPassword.touched)&&n.passwordForm.invalid),t.R7$(2),t.Y8G("disabled",n.passwordForm.invalid||n.isLoading),t.R7$(),t.Y8G("ngIf",!n.isLoading),t.R7$(),t.Y8G("ngIf",n.isLoading),t.R7$(7),t.Y8G("formGroup",n.nomCompletForm),t.R7$(9),t.Y8G("ngIf",(null==n.phoneControl?null:n.phoneControl.touched)&&(null==n.phoneControl?null:n.phoneControl.invalid)),t.R7$(2),t.Y8G("type",n.showPasswordInPersonalForm?"text":"password"),t.R7$(4),t.Y8G("ngIf",!n.showPasswordInPersonalForm),t.R7$(),t.Y8G("ngIf",n.showPasswordInPersonalForm),t.R7$(3),t.Y8G("disabled",n.nomCompletForm.invalid),t.R7$(),t.Y8G("ngIf",!n.isLoading),t.R7$(),t.Y8G("ngIf",n.isLoading),t.R7$(12),t.Y8G("src",n.logo,t.B4B),t.R7$(4),t.JRh(null==(s=n.form.get("nom"))?null:s.value),t.R7$(2),t.SpI("Secterur: ",null==(a=n.form.get("secteur"))?null:a.value,""),t.R7$(4),t.SpI(" ",null==(l=n.form.get("email"))?null:l.value,""),t.R7$(),t.SpI(" T\xe9l\xe9phone : ",null==(_=n.form.get("telephone"))?null:_.value,""),t.R7$(7),t.Lme("",null==(E=n.form.get("prefixe"))?null:E.value,"xxx-xx-xxxx -",null==(E=n.form.get("suffixe"))?null:E.value,""),t.R7$(3),t.SpI("",null==(I=n.form.get("siege"))?null:I.value,", le dd/MM.yyyy"),t.R7$(54),t.SpI("",n.tauxTvaAffiche," %"),t.R7$(17),t.JRh(null==(S=n.form.get("signataire"))?null:S.value),t.R7$(2),t.JRh(null==(T=n.form.get("signataireNom"))?null:T.value),t.R7$(2),t.SpI(" ",null==(P=n.form.get("signataireNom"))?null:P.value," "),t.R7$(4),t.Y8G("ngIf",null==(Y=n.form.get("siteWeb"))?null:Y.value),t.R7$(),t.Y8G("ngIf",n.getLegalInfo()),t.R7$(),t.Y8G("ngIf",n.getAddressInfo()),t.R7$(5),t.Y8G("formGroup",n.form),t.R7$(38),t.Y8G("ngIf",n.shouldShowPrefixe()),t.R7$(),t.Y8G("ngIf",n.shouldShowSuffixe()),t.R7$(2),t.Y8G("value",n.tauxTvaAffiche),t.R7$(53),t.Y8G("ngForOf",n.modules),t.R7$(),t.Y8G("ngIf",n.showPreview)}},dependencies:[u.MD,u.Sq,u.bT,u.QX,h.YN,h.qT,h.me,h.BC,h.cb,f.RI,f.mq,f.T8,M.MY,C.M,h.X1,h.j4,h.JD,w.m_,m.v],styles:['@charset "UTF-8";.section[_ngcontent-%COMP%]{padding:10px}.section_title[_ngcontent-%COMP%]{font-size:16px;margin:0}.information_cadre[_ngcontent-%COMP%]{width:100%;height:auto;background-color:#fff;box-shadow:2px 2px 30px #0000001c;border-radius:5px;padding:10px;margin-bottom:10px}.custom-tabs[_ngcontent-%COMP%]{border-radius:4px;margin:0}.custom-tabs[_ngcontent-%COMP%]   .mat-tab-label-active[_ngcontent-%COMP%]{background-color:#f5f5f5;border:2px solid #0672E4;border-radius:4px 4px 0 0}.custom-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding-top:20px}.custom-tabs[_ngcontent-%COMP%]     .mat-ink-bar{background-color:#0672e4}.content_setting_facture[_ngcontent-%COMP%]{display:flex;gap:15px}.facture_model[_ngcontent-%COMP%]{height:60%;background-color:#fff;border:1px solid #b9b9b9;position:relative}.champs_setting_facture[_ngcontent-%COMP%]{width:80%;background-color:#fff;border-radius:10px;border:1px solid rgba(185,185,185,.337254902);box-shadow:2px 2px 30px #0000001c}.header_apercu[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:10px}.logo_entreprise[_ngcontent-%COMP%]{width:50px;height:50px}.logo_entreprise_preview[_ngcontent-%COMP%]{width:100px;height:50px}.entete_entreprise[_ngcontent-%COMP%]{margin-left:3%}.logo_entreprise[_ngcontent-%COMP%]{margin-left:10px}.logo_entreprise[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.logo_entreprise_preview[_ngcontent-%COMP%]{margin-left:10px}.logo_entreprise_preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.content_entete[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:6px;letter-spacing:.5px}.para3[_ngcontent-%COMP%]{font-size:6px}.content_entete[_ngcontent-%COMP%]   .para1[_ngcontent-%COMP%], .content_entete[_ngcontent-%COMP%]   .para2[_ngcontent-%COMP%]{font-weight:600}hr[_ngcontent-%COMP%]{margin:2px 0;color:#0672e4!important;border:0;border-top:1px solid rgba(0,0,0,.1);opacity:1}.titre[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:8px;text-decoration:underline;text-transform:uppercase;letter-spacing:.6px;text-align:center;margin:8px}.date[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:right;margin-right:5%;font-size:6px;margin-bottom:0}.droit[_ngcontent-%COMP%], .object[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;margin-bottom:0;margin-left:5px}.droit[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .object[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:8px;font-weight:700;margin:0}.droit[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .object[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:8px}.droit_preview[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .object_preview[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .droit_preview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .object_preview[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px}table[_ngcontent-%COMP%]{border-collapse:collapse;margin:7px 5px 0;font-size:7px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:0 5px;text-align:center;font-size:6}th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-size:8px!important}td.table_td_1[_ngcontent-%COMP%]{border-right:none}td.table_td[_ngcontent-%COMP%]{border-right:none;border-top:none;border-left:none}.table_td_descripton[_ngcontent-%COMP%]{text-align:center}td.td_left[_ngcontent-%COMP%]{text-align:left!important}.contenu_bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:6px;margin:5px 0 5px 5px}.cachet_container[_ngcontent-%COMP%]{width:100%;margin-top:0;display:flex;justify-content:space-between}.cachet[_ngcontent-%COMP%]{position:relative;top:0;right:5px}.cachet[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{text-align:center;font-size:7px}.name_directeur[_ngcontent-%COMP%]{position:relative;top:8px}.cachetSign[_ngcontent-%COMP%], .cachetSignP[_ngcontent-%COMP%]{display:block;text-align:center;font-size:7px;font-weight:600;color:#000;font-family:brittany;margin-top:40%}.cachet_preview[_ngcontent-%COMP%]{position:relative;top:50px;right:10px}.cachet_preview[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{text-align:center;font-size:10px;top:8px}.name_directeur_preview[_ngcontent-%COMP%]{position:relative;top:40px}a[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{color:#0056b3;transform:scale(1.1);transition:.2s ease}.container_footer[_ngcontent-%COMP%]{display:flex;justify-content:center}.footer[_ngcontent-%COMP%]{text-align:center;position:absolute;width:100%;bottom:2px;line-height:9px}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .footer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin:0}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:8px}.footer[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:6px}.titre_champ[_ngcontent-%COMP%]{margin:5px 10px 5px 0}.titre_champ[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0 0 20px;font-weight:400;font-size:14px}.champ_input[_ngcontent-%COMP%]{position:relative;margin-bottom:15px}.input_focus[_ngcontent-%COMP%]{width:100%;height:45px;outline:none;border-bottom:1px solid rgb(88,85,85);border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:12px;background:none;color:#695c5c}.champ_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:4px;pointer-events:none;color:#6b6666}.champ_grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:15px}.input_focus[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.input_focus[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:0;left:0;transition:all .3s ease-in-out;background:none;font-size:11px;padding:0}.input_focus[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:12px;transition:all .2s ease-in-out}.custum-file-upload[_ngcontent-%COMP%]{height:58px;display:flex;flex-direction:column;align-items:space-between;cursor:pointer;align-items:center;justify-content:center;border:2px dashed #000000;background-color:transparent;padding:1.5rem;border-radius:10px;box-shadow:0 48px 35px -48px #e8e8e8}.custum-file-upload[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.custum-file-upload[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:80px;fill:#e8e8e8}.custum-file-upload[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.custum-file-upload[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400;color:#0672e4}.custum-file-upload[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.title_panel[_ngcontent-%COMP%]{font-size:13px!important}.content_edit_facture[_ngcontent-%COMP%]{padding:10px 20px;position:relative}.champ_input[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border:none;background-color:#0672e4;color:#fff;font-size:15px;padding:5px 20px;position:absolute;right:0;bottom:0}.cadre_setting[_ngcontent-%COMP%]{margin:15px 0}.titre_autre[_ngcontent-%COMP%]{background-color:#e6e6e6;border-radius:2px;cursor:pointer}.titre_autre[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;padding:10px 5px;margin:0}.eye_container[_ngcontent-%COMP%]{position:absolute;right:7px;top:34px;transform:translateY(-50%)}.eye_ferme[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .eye_ouvre[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.eye_ferme[_ngcontent-%COMP%], .eye_ouvre[_ngcontent-%COMP%]{font-size:1.2rem;color:#666}.loading-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;justify-content:center;align-items:center;color:#fff;font-size:18px;z-index:9999999999}.loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(255,255,255,.3);border-top:4px solid white;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.red-icon[_ngcontent-%COMP%]{color:red}.statut_boutique[_ngcontent-%COMP%]{background-color:green;color:#fff;padding:4px 10px;border-radius:20px;font-size:10px}.preview-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#000000b3;display:flex;justify-content:center;align-items:center;z-index:1000}.preview-content[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 4px 20px #00000040;animation:_ngcontent-%COMP%_scaleIn .3s ease-out;margin-top:5%}.preview-content[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;background-color:#f5f5f5;border-bottom:1px solid #e0e0e0;z-index:10}.preview-content[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:500}.facture_model_preview[_ngcontent-%COMP%]{transform:scale(1.1);background-color:#fff;width:130mm;min-height:170mm;position:relative}.facture_model_preview[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%!important;box-shadow:none!important}@keyframes _ngcontent-%COMP%_scaleIn{0%{transform:scale(.9);opacity:0}to{transform:scale(1);opacity:1}}.para_preview[_ngcontent-%COMP%]{font-size:10px!important}.em_footer[_ngcontent-%COMP%]{font-size:10px}.table[_ngcontent-%COMP%]{border-collapse:collapse;margin:10px 0 0 5px;font-size:9px;width:98%}.th[_ngcontent-%COMP%], .td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:7px;text-align:center;font-size:6}.th[_ngcontent-%COMP%]{background-color:#f5f5f5;font-size:8px!important}.content_entete_preview[_ngcontent-%COMP%]{padding:10px 0}.preview-close[_ngcontent-%COMP%]{position:absolute;right:-27px;color:#fff;top:-3px;cursor:pointer}.preview-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.preview-close[_ngcontent-%COMP%]:hover{color:red;transition:all .5s}.voir_apercu[_ngcontent-%COMP%]{font-size:12px;cursor:pointer;margin:5px 0}.champ_grid_double[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:15px}.img_profil[_ngcontent-%COMP%]{width:100px;height:100px;display:flex;justify-content:center;margin:20px auto}.img_profil[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.setting_profil[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e9e9e9;box-shadow:#00000001 0 0 0 1px;border-radius:20px}.btn_changer_profil[_ngcontent-%COMP%]{display:flex;justify-content:center}.btn_changer_profil[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#0672e4;color:#fff;font-size:12px;border-radius:20px;padding:8px 20px;cursor:pointer}.info_capacity_profil[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.tilte_profil[_ngcontent-%COMP%]{margin:20px 20px 0}.tilte_profil[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:18px;margin-bottom:5px;font-weight:600;letter-spacing:.5px}.tilte_profil[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.4px;margin-bottom:0}.btn_save[_ngcontent-%COMP%]{text-align:right;margin-top:10px}.btn_save[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:5px 28px;background-color:#0672e4;color:#fff;border:none}.info_titre_input[_ngcontent-%COMP%]{margin:0 20px 20px}.btn_save[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{background-color:#0263cb;transition:all .5}.info_capacity_profil[_ngcontent-%COMP%]{margin-top:10px}.info_capacity_profil[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin:22px 0}.toast-container[_ngcontent-%COMP%]{position:fixed;top:60px;right:35px;z-index:9999}.toast-message-success[_ngcontent-%COMP%]{background-color:#d5e6de;border:1px solid #ACCEBC;color:#000;padding:10px;border-radius:8px;font-size:13px;box-shadow:0 4px 6px #0000001a;opacity:0;animation:_ngcontent-%COMP%_fadeInOut 4s ease-in-out;transform:translateY(-20px)}.toast-message-danger[_ngcontent-%COMP%]{background-color:#f3d8da;border:1px solid #E7B1B6;color:#000;padding:10px;border-radius:8px;font-size:13px;box-shadow:0 4px 6px #0000001a;opacity:0;animation:_ngcontent-%COMP%_fadeInOut 4s ease-in-out;transform:translateY(-20px)}@keyframes _ngcontent-%COMP%_fadeInOut{0%{opacity:0;transform:translateY(-20px)}20%{opacity:1;transform:translateY(0)}80%{opacity:1}to{opacity:0;transform:translateY(2px)}}.profile-img-wrapper[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;border-radius:50%;overflow:hidden;margin:22px auto 15px;cursor:pointer}.profile-img-wrapper[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.profile-img-wrapper[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;opacity:0;transition:opacity .3s}.profile-img-wrapper[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.photo-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000c;display:flex;justify-content:center;align-items:center;z-index:1000}.photo-modal[_ngcontent-%COMP%]   .photo-modal-content[_ngcontent-%COMP%]{position:relative;max-width:90%;max-height:90%}.photo-modal[_ngcontent-%COMP%]   .photo-modal-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:80vh}.photo-modal[_ngcontent-%COMP%]   .photo-modal-content[_ngcontent-%COMP%]   .fermer-btn[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-45px;background:none;border:none;color:#fff;font-size:25px;cursor:pointer}.module-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;padding:20px}.module-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 2px 8px #0000001a;padding:14px;text-align:center;transition:transform .2s,box-shadow .2s;border:1px solid #eee;position:relative}.module-card[_ngcontent-%COMP%]:hover{transform:translateY(-6px) scale(1.02);box-shadow:0 6px 18px #00000026}.module-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:contain;margin-bottom:8px}.module-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#333;margin-bottom:6px}.module-title[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:#333;margin-bottom:6px}.module-description[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-bottom:8px;min-height:40px}.module-badge[_ngcontent-%COMP%]{margin-bottom:6px}.badge[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:12px;font-size:11px;font-weight:700;letter-spacing:.5px}.badge-gratuit[_ngcontent-%COMP%]{background-color:#dfffe0;color:#2e7d32}.module-price[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:#444;margin-bottom:10px}.module-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#007bff,#0056b3);color:#fff;padding:6px 12px;border:none;border-radius:20px;cursor:pointer;font-size:11px;transition:background .3s ease}.module-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#0056b3,#003f8a)}.module-actif[_ngcontent-%COMP%]{color:#198754;font-weight:700;margin-top:8px;font-size:10px}.module-essai[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background-color:#fff3cd;color:#856404;padding:4px 12px;border-radius:12px;font-weight:700;transform:rotate(20deg);transform-origin:left center;box-shadow:0 2px 6px #0000001a;z-index:2;font-size:9px}'],changeDetection:0})}}return i})()},9327:(j,F,r)=>{r.d(F,{Rp:()=>h});const h={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},3381:(j,F,r)=>{r.d(F,{L:()=>w});var u=r(4438),h=r(8359),b=r(1413),M=r(2774),C=r(7336),f=r(7035);class w{_items;_activeItemIndex=-1;_activeItem=(0,u.vPA)(null);_wrap=!1;_typeaheadSubscription=h.yU.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=c=>c.disabled;constructor(c,m){this._items=c,c instanceof u.rOR?this._itemChangesSubscription=c.changes.subscribe(t=>this._itemsChanged(t.toArray())):(0,u.Hps)(c)&&(this._effectRef=(0,u.QZP)(()=>this._itemsChanged(c()),{injector:m}))}tabOut=new b.B;change=new b.B;skipPredicate(c){return this._skipPredicateFn=c,this}withWrap(c=!0){return this._wrap=c,this}withVerticalOrientation(c=!0){return this._vertical=c,this}withHorizontalOrientation(c){return this._horizontal=c,this}withAllowedModifierKeys(c){return this._allowedModifierKeys=c,this}withTypeAhead(c=200){this._typeaheadSubscription.unsubscribe();const m=this._getItemsArray();return this._typeahead=new M.T(m,{debounceInterval:"number"==typeof c?c:void 0,skipPredicate:t=>this._skipPredicateFn(t)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(t=>{this.setActiveItem(t)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(c=!0){return this._homeAndEnd=c,this}withPageUpDown(c=!0,m=10){return this._pageUpAndDown={enabled:c,delta:m},this}setActiveItem(c){const m=this._activeItem();this.updateActiveItem(c),this._activeItem()!==m&&this.change.next(this._activeItemIndex)}onKeydown(c){const m=c.keyCode,v=["altKey","ctrlKey","metaKey","shiftKey"].every(d=>!c[d]||this._allowedModifierKeys.indexOf(d)>-1);switch(m){case f.T:return void this.tabOut.next();case f.D:if(this._vertical&&v){this.setNextItemActive();break}return;case f.U:if(this._vertical&&v){this.setPreviousItemActive();break}return;case f.R:if(this._horizontal&&v){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case f.L:if(this._horizontal&&v){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case f.H:if(this._homeAndEnd&&v){this.setFirstItemActive();break}return;case f.E:if(this._homeAndEnd&&v){this.setLastItemActive();break}return;case f.a:if(this._pageUpAndDown.enabled&&v){const d=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(d>0?d:0,1);break}return;case f.P:if(this._pageUpAndDown.enabled&&v){const d=this._activeItemIndex+this._pageUpAndDown.delta,x=this._getItemsArray().length;this._setActiveItemByIndex(d<x?d:x-1,-1);break}return;default:return void((v||(0,C.rp)(c,"shiftKey"))&&this._typeahead?.handleKey(c))}this._typeahead?.reset(),c.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(c){const m=this._getItemsArray(),t="number"==typeof c?c:m.indexOf(c);this._activeItem.set(m[t]??null),this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(c){this._wrap?this._setActiveInWrapMode(c):this._setActiveInDefaultMode(c)}_setActiveInWrapMode(c){const m=this._getItemsArray();for(let t=1;t<=m.length;t++){const v=(this._activeItemIndex+c*t+m.length)%m.length;if(!this._skipPredicateFn(m[v]))return void this.setActiveItem(v)}}_setActiveInDefaultMode(c){this._setActiveItemByIndex(this._activeItemIndex+c,c)}_setActiveItemByIndex(c,m){const t=this._getItemsArray();if(t[c]){for(;this._skipPredicateFn(t[c]);)if(!t[c+=m])return;this.setActiveItem(c)}}_getItemsArray(){return(0,u.Hps)(this._items)?this._items():this._items instanceof u.rOR?this._items.toArray():this._items}_itemsChanged(c){this._typeahead?.setItems(c);const m=this._activeItem();if(m){const t=c.indexOf(m);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t,this._typeahead?.setCurrentSelectedItemIndex(t))}}}},2774:(j,F,r)=>{r.d(F,{T:()=>O});var u=r(1413),h=r(8141),b=r(152),M=r(5964),C=r(6354),f=r(7035);class O{_letterKeyStream=new u.B;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new u.B;selectedItem=this._selectedItem;constructor(m,t){const v="number"==typeof t?.debounceInterval?t.debounceInterval:200;t?.skipPredicate&&(this._skipPredicateFn=t.skipPredicate),this.setItems(m),this._setupKeyHandler(v)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(m){this._selectedItemIndex=m}setItems(m){this._items=m}handleKey(m){const t=m.keyCode;m.key&&1===m.key.length?this._letterKeyStream.next(m.key.toLocaleUpperCase()):(t>=f.A&&t<=f.Z||t>=f.b&&t<=f.N)&&this._letterKeyStream.next(String.fromCharCode(t))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(m){this._letterKeyStream.pipe((0,h.M)(t=>this._pressedLetters.push(t)),(0,b.B)(m),(0,M.p)(()=>this._pressedLetters.length>0),(0,C.T)(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(t=>{for(let v=1;v<this._items.length+1;v++){const x=this._items[(this._selectedItemIndex+v)%this._items.length];if(!this._skipPredicateFn?.(x)&&0===x.getLabel?.().toLocaleUpperCase().trim().indexOf(t)){this._selectedItem.next(x);break}}this._pressedLetters=[]})}}},8296:(j,F,r)=>{r.d(F,{M:()=>b});var u=r(4438),h=r(777);let b=(()=>{class M{static \u0275fac=function(w){return new(w||M)};static \u0275mod=u.$C({type:M});static \u0275inj=u.G2t({imports:[h.M,h.M]})}return M})()},1811:(j,F,r)=>{r.d(F,{M:()=>M});var u=r(2318),h=r(4438),b=r(777);let M=(()=>{class C{static \u0275fac=function(O){return new(O||C)};static \u0275mod=h.$C({type:C});static \u0275inj=h.G2t({imports:[b.M,u.w5,b.M]})}return C})()}}]);