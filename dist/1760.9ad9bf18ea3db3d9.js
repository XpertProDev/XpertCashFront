"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[1760],{9293:(F,C,s)=>{s.d(C,{R:()=>m});var g=s(1626),M=s(4412),f=s(1985),k=s(8141),b=s(2525),O=s(4438);let m=(()=>{class P{constructor(l){this.http=l,this.apiUrl=b.c.apiBaseUrl,this.categoriesSubject=new M.t([]),this.categories$=this.categoriesSubject.asObservable()}getCategories(l){if(!l)return console.error("\u26a0\ufe0f Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),new f.c;const p=(new g.Lr).set("Authorization",`Bearer ${l}`);return console.log("\u{1f539} En-t\xeates envoy\xe9s :",p),this.http.get(`${this.apiUrl}/allCategory`,{headers:p}).pipe((0,k.M)(_=>{this.categoriesSubject.next(_)}))}ajouterCategorie(l){const p=localStorage.getItem("authToken")||"",_=new g.Lr({Authorization:`Bearer ${p}`});return this.http.post(`${this.apiUrl}/createCategory`,l,{headers:_}).pipe((0,k.M)(h=>{this.categoriesSubject.next([...this.categoriesSubject.value,h])}))}static{this.\u0275fac=function(p){return new(p||P)(O.KVO(g.Qq))}}static{this.\u0275prov=O.jDH({token:P,factory:P.\u0275fac,providedIn:"root"})}}return P})()},6375:(F,C,s)=>{s.d(C,{D:()=>O});var g=s(1626),M=s(9437),f=s(8810),k=s(2525),b=s(4438);let O=(()=>{class m{constructor(d){this.http=d,this.apiUrl=k.c.apiBaseUrl}ajouterProduit(d,l,p,_,h,E){const S=`${this.apiUrl}/create?addToStock=${E}`,x=new FormData;x.append("boutiqueIds",JSON.stringify(d)),x.append("quantites",JSON.stringify(l)),x.append("produit",JSON.stringify(_)),x.append("seuilAlert",JSON.stringify(p)),h&&x.append("image",h,h.name);const t=localStorage.getItem("authToken")||"",D=new g.Lr({Authorization:`Bearer ${t}`});return this.http.post(S,x,{headers:D})}modifierProduit(d,l){const p=localStorage.getItem("authToken")||"",_=new g.Lr({Authorization:`Bearer ${p}`}),h=new FormData,{id:E,...S}=d;return h.append("produit",JSON.stringify(S)),h.append("addToStock",d.enStock?"true":"false"),l&&h.append("image",l,l.name),this.http.patch(`${this.apiUrl}/updateProduit/${d.id}`,h,{headers:_})}getProduitById(d){const l=localStorage.getItem("authToken")||"",p=new g.Lr({Authorization:`Bearer ${l}`});return this.http.get(`${this.apiUrl}/produits/${d}`,{headers:p})}getProduitsEntreprise(d){const l=localStorage.getItem("authToken"),p=new g.Lr({Authorization:`Bearer ${l}`});return this.http.get(`${this.apiUrl}/produits/${d}/stock`,{headers:p}).pipe((0,M.W)(_=>(0,f.$)(400===_.status&&"Cette boutique est d\xe9sactiv\xe9e, ses produits ne sont pas accessibles !"===_.error?.error?()=>new Error("BOUTIQUE_DESACTIVEE"):()=>_)))}getProduitBoutique(d){const l=localStorage.getItem("authToken");if(!l)return console.error("Aucun token trouv\xe9"),(0,f.$)("Aucun token trouv\xe9");const p=new g.Lr({Authorization:`Bearer ${l}`});return this.http.get(`${this.apiUrl}/produits/${d}/totaux-stock`,{headers:p})}getProduitsByEntrepriseId(d){return this.http.get(`${this.apiUrl}/produits/entreprise/${d}`)}getProduitsParEntreprise(d){return this.http.get(`${this.apiUrl}/produits/entreprise/${d}`)}getFournisseurs(){const d=localStorage.getItem("authToken")||"",l=new g.Lr({Authorization:`Bearer ${d}`});return this.http.get(`${this.apiUrl}/get-fournisseurs`,{headers:l})}static{this.\u0275fac=function(l){return new(l||m)(b.KVO(g.Qq))}}static{this.\u0275prov=b.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},1760:(F,C,s)=>{s.r(C),s.d(C,{StocksComponent:()=>et});var g=s(9417),M=s(9192),f=s(3509),k=s(1281),b=s(177),O=s(850),m=s(1811),P=s(9631),d=s(8459),l=s(9107),p=s(2288),_=s(4941),h=s.n(_),E=s(6115),S=s(5837),x=s(2525),t=s(4438),D=s(9293),T=s(6375),j=s(8026),B=s(9252);const y=["searchInput"],R=()=>[5,10,25,100];function A(r,u){if(1&r){const e=t.RV6();t.j41(0,"div",37)(1,"div",38),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.downloadExcel())}),t.EFF(2,"T\xe9l\xe9charger en Excel"),t.k0s(),t.j41(3,"div",38),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.downloadPDF())}),t.EFF(4,"T\xe9l\xe9charger en PDF"),t.k0s(),t.j41(5,"div",38),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.downloadCSV())}),t.EFF(6,"T\xe9l\xe9charger en CSV"),t.k0s()()}}function U(r,u){if(1&r){const e=t.RV6();t.j41(0,"span",39),t.EFF(1),t.j41(2,"span",40),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.removeFilter(n.selectedFilters[0]))}),t.EFF(3,"\u2716"),t.k0s()()}if(2&r){const e=t.XpG();t.R7$(),t.SpI(" ",e.selectedFilters[0].label," ")}}function $(r,u){1&r&&t.nrm(0,"i",41)}function N(r,u){1&r&&t.nrm(0,"i",42)}function z(r,u){if(1&r){const e=t.RV6();t.j41(0,"div",43),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())}),t.j41(1,"div",44)(2,"div",45)(3,"h4",46),t.EFF(4,"Filtres"),t.k0s(),t.j41(5,"div")(6,"button",47),t.bIt("click",function(n){return t.eBV(e),t.XpG().resetFilters(),t.Njj(n.stopPropagation())}),t.EFF(7," R\xe9initialiser "),t.k0s()()(),t.j41(8,"ul",48)(9,"li",49),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addFilter({type:"nomCategorie",label:"Cat\xe9gorie"}))}),t.EFF(10," Cat\xe9gorie "),t.k0s(),t.j41(11,"li",50),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addFilter({type:"nomUnite",label:"Unit\xe9"}))}),t.EFF(12," Unit\xe9 "),t.k0s()()()()}if(2&r){const e=t.XpG();t.R7$(9),t.xc7("background",e.isFilterSelected("nomCategorie")?"#f0f0f0":"transparent"),t.AVh("disabled",e.isFilterSelected("nomCategorie")),t.R7$(2),t.xc7("background",e.isFilterSelected("nomUnite")?"#f0f0f0":"transparent"),t.AVh("disabled",e.isFilterSelected("nomUnite"))}}function L(r,u){1&r&&t.nrm(0,"i",56)}function q(r,u){1&r&&t.nrm(0,"div",57)}function G(r,u){if(1&r){const e=t.RV6();t.qex(0),t.j41(1,"p",29),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG(2);return t.Njj(n.actif?i.selectBoutique(n):i.showSuspendedBoutiqueDialog())}),t.EFF(2),t.DNE(3,L,1,0,"i",54),t.k0s(),t.DNE(4,q,1,0,"div",55),t.bVm()}if(2&r){const e=u.$implicit,o=u.index,n=t.XpG(2);t.R7$(),t.xc7("color",e.actif),t.AVh("name_boutique_active",e.id===(null==n.selectedBoutique?null:n.selectedBoutique.id)&&e.actif)("suspended-boutique",!e.actif),t.R7$(),t.SpI(" ",e.nomBoutique," "),t.R7$(),t.Y8G("ngIf",!e.actif),t.R7$(),t.Y8G("ngIf",o!==n.boutiques.length-1)}}function V(r,u){if(1&r){const e=t.RV6();t.qex(0),t.j41(1,"div",51),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.selectBoutique(null))}),t.j41(2,"p",52),t.EFF(3,"Toutes les boutiques"),t.k0s()(),t.DNE(4,G,5,9,"ng-container",53),t.bVm()}if(2&r){const e=t.XpG();t.R7$(),t.AVh("name_boutique_active",null===e.selectedBoutique),t.R7$(3),t.Y8G("ngForOf",e.boutiques)}}function W(r,u){1&r&&(t.j41(0,"p",58),t.EFF(1,"Aucune boutique trouv\xe9e"),t.k0s())}function K(r,u){if(1&r&&t.nrm(0,"i"),2&r){const e=t.XpG();t.HbH("asc"===e.sortDirection?"ri-arrow-up-line":"ri-arrow-down-line")}}function Y(r,u){1&r&&(t.qex(0),t.j41(1,"th"),t.EFF(2,"Boutique"),t.k0s(),t.bVm())}function X(r,u){if(1&r){const e=t.RV6();t.j41(0,"div",64)(1,"div",65),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())}),t.nrm(2,"img",66),t.k0s()()}if(2&r){const e=t.XpG(2);t.R7$(2),t.Y8G("src",e.imagePopup,t.B4B)}}function H(r,u){if(1&r&&(t.j41(0,"td"),t.EFF(1),t.k0s()),2&r){const e=t.XpG().$implicit,o=t.XpG();t.R7$(),t.JRh(o.getBoutiqueNames(e.boutiques))}}function J(r,u){if(1&r){const e=t.RV6();t.j41(0,"tr",29),t.bIt("click",function(){const n=t.eBV(e).$implicit,i=t.XpG();return t.Njj(i.openStockDetail(n.id))}),t.nrm(1,"td",59),t.j41(2,"td")(3,"div",60),t.nrm(4,"img",61),t.k0s(),t.DNE(5,X,3,1,"div",62),t.k0s(),t.nrm(6,"td",59)(7,"td",59),t.j41(8,"td"),t.EFF(9),t.nI1(10,"customNumber"),t.k0s(),t.j41(11,"td"),t.EFF(12),t.nI1(13,"customNumber"),t.k0s(),t.nrm(14,"td",63)(15,"td",59),t.j41(16,"td"),t.EFF(17),t.k0s(),t.qex(18),t.DNE(19,H,2,1,"td",32),t.bVm(),t.k0s()}if(2&r){const e=u.$implicit,o=t.XpG();t.R7$(),t.Y8G("innerHTML",o.highlightMatch(e.codeGenerique||""),t.npT),t.R7$(3),t.Y8G("src",e.photo,t.B4B),t.R7$(),t.Y8G("ngIf",o.imagePopup),t.R7$(),t.Y8G("innerHTML",o.highlightMatch(e.nom),t.npT),t.R7$(),t.Y8G("innerHTML",o.highlightMatch(e.nomCategorie||"non categorie"),t.npT),t.R7$(2),t.JRh(t.bMT(10,11,e.prixVente)),t.R7$(3),t.JRh(t.bMT(13,13,e.prixAchat)),t.R7$(2),t.Y8G("innerHTML",o.highlightMatch(e.quantite.toString()),t.npT),t.R7$(),t.Y8G("innerHTML",o.highlightMatch(e.nomUnite||"non unite"),t.npT),t.R7$(2),t.JRh(e.seuilAlert),t.R7$(2),t.Y8G("ngIf",!o.selectedBoutique)}}function Q(r,u){1&r&&(t.j41(0,"tr")(1,"td",67),t.EFF(2,"Aucun produit trouv\xe9."),t.k0s()())}function Z(r,u){1&r&&(t.j41(0,"div",68)(1,"p",69),t.EFF(2,"Vous n'avez pas de produit"),t.k0s()())}function tt(r,u){if(1&r){const e=t.RV6();t.j41(0,"mat-paginator",70),t.bIt("page",function(n){t.eBV(e);const i=t.XpG();return t.Njj(i.onPageChange(n))}),t.k0s()}if(2&r){const e=t.XpG();t.Y8G("length",e.tasks.length)("pageSize",e.pageSize)("pageSizeOptions",t.lJ4(3,R))}}let et=(()=>{class r{onClick(e){const o=e.target;!o.closest(".container_inputSearch")&&!o.closest(".filter-dropdown")&&!o.closest(".trier")&&(this.showFilterDropdown=!1),o.closest(".export-container")||(this.showExportDropdown=!1)}constructor(e,o,n,i,a,c){this.categorieService=e,this.produitService=o,this.fb=n,this.router=i,this.usersService=a,this.dialog=c,this.backendUrl=x.c.apiBaseUrl,this.searchText="",this.tasks=[],this.imagePopup=null,this.nomEntreprise="",this.adresseEntreprise="",this.logoEntreprise="",this.userName="",this.boutiqueName="",this.addressBoutique="",this.dataSource=new k.I6,this.pageSize=5,this.currentPage=0,this.selectedBoutique=null,this.boutiques=[],this.showExportDropdown=!1,this.urllink="assets/img/appareil.jpg",this.newPhotoUrl=null,this.selectedFile=null,this.showDescription=!1,this.apiUrl=x.c.imgUrl,this.showNoProductsMessage=!1,this.showFilterDropdown=!1,this.selectedFilters=[],this.allProducts=[],this.filteredProduct=[],this.sortColumn=null,this.sortDirection="asc"}ngOnInit(){this.getUserBoutiqueId(),this.getUserInfo()}highlightMatch(e){if(!this.searchText)return e;const o=new RegExp(`(${this.searchText})`,"gi");return e.replace(o,"<mark>$1</mark>")}filteredProducts(){const o=this.currentPage*this.pageSize;return(this.filteredProduct.length>0?this.filteredProduct:this.tasks).slice(o,o+this.pageSize)}toggleExportDropdown(){this.showExportDropdown=!this.showExportDropdown}onClickOutside(e){e.target.closest(".export-container")||(this.showExportDropdown=!1)}getImageBase64(e){return new Promise((o,n)=>{const i=new XMLHttpRequest;i.onload=function(){const a=new FileReader;a.onloadend=function(){o(a.result)},a.readAsDataURL(i.response)},i.onerror=function(){n(new Error("Erreur lors du chargement de l'image"))},i.open("GET",e),i.responseType="blob",i.send()})}downloadExcel(){const e=p.Wp.json_to_sheet(this.tasks),o=p.Wp.book_new();p.Wp.book_append_sheet(o,e,"Produits"),p._h(o,"Produits.xlsx")}downloadPDF(){if(!this.tasks||0===this.tasks.length)return void console.error("Aucun produit \xe0 afficher dans le PDF !");const e=new l.default,n=this.nomEntreprise||"Nom non disponible";this.getImageBase64(this.logoEntreprise?`${this.backendUrl}/logoUpload/${this.logoEntreprise}`:`${this.backendUrl}/logoUpload/651.jpg`).then(i=>{e.addImage(i,"PNG",14,5,30,30),e.setFontSize(18),e.setFont("helvetica","bold"),e.text(`Nom de l'entreprise: ${n}`,60,20),e.text("Liste des produits en Stock",60,30),e.setLineWidth(.5),e.line(14,35,195,35);const c=this.currentPage*this.pageSize,v=this.tasks.slice(c,c+this.pageSize);if(!Array.isArray(v)||0===v.length)return void console.error("Aucun produit trouv\xe9 sur cette page !");const nt=v.map(w=>[w.codeGenerique||"",w.nom||"",w.description||"",w.nomCategorie?`Cat\xe9gorie ${w.nomCategorie}`:"Cat\xe9gorie inconnue",w.quantite??0]);h()(e,{head:[["Code","Nom produit","Description","Cat\xe9gorie","Quantit\xe9"]],body:nt,startY:40,theme:"grid",headStyles:{fillColor:[100,100,255],textColor:[255,255,255],fontSize:12},bodyStyles:{fontSize:10}});const I=e.lastAutoTable?.finalY||60;e.setLineWidth(.5),e.line(14,I+5,195,I+5),e.setFontSize(10),e.setFont("helvetica","italic"),e.text(`Nom de Boutique: ${this.boutiqueName}`,14,I+10),e.text(`Adress: ${this.addressBoutique}`,14,I+15),e.save("Produits.pdf")}).catch(i=>{console.error("Erreur lors du chargement du logo :",i)})}downloadCSV(){const o=this.tasks.map(c=>[c.codeGenerique||"",c.photo,c.nom,c.nomCategorie||"",c.description,c.prixVente,c.prixAchat,c.quantite,c.nomUnite||"",c.seuilAlert,c.createdAt]),n=[["Code","Photo","Nom produit","Cat\xe9gorie","Description","Prix Vente","Prix Achat","Quantit\xe9","Unit\xe9","Seuil Alerte","Date & heure"].join(","),...o.map(c=>c.join(","))].join("\n"),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(i),a.download="Produits.csv",a.click()}onPageChange(e){this.currentPage=e.pageIndex,this.pageSize=e.pageSize}onFileSelected(e){const o=e.target;if(o.files&&o.files.length>0){this.selectedFile=o.files[0];const n=new FileReader;n.onload=i=>{this.newPhotoUrl=i.target?.result},n.readAsDataURL(this.selectedFile)}}getUserBoutiqueId(){const e=JSON.parse(localStorage.getItem("user")||"{}");return e&&e.boutiques&&e.boutiques.length>0?e.boutiques[0]?.id||null:(console.error("Aucune boutique trouv\xe9e pour cet utilisateur"),null)}getEntrepriseId(){return JSON.parse(localStorage.getItem("user")||"{}").entrepriseId||null}getUserInfo(){this.usersService.getUserInfo().subscribe({next:e=>{localStorage.setItem("user",JSON.stringify(e)),this.userName=e.nomComplet,this.nomEntreprise=e.nomEntreprise,this.boutiques=e.boutiques,this.selectedBoutique=null,this.showNoProductsMessage=!1,this.loadAllProduits()},error:e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des informations utilisateur :",e),this.showNoProductsMessage=!0}})}loadProduits(e){this.showNoProductsMessage=!1,e?this.produitService.getProduitsEntreprise(e).subscribe({next:o=>{console.log("Produits r\xe9cup\xe9r\xe9s:",o),this.tasks=o.filter(n=>n.enStock).map(n=>({id:n.id,codeGenerique:n.codeGenerique||"",codeBare:n.codeBare||"Non num\xe9ro code barre",nom:n.nom||"Nom inconnu",description:n.description||"Sans description",prixVente:n.prixVente||0,prixAchat:n.prixAchat||0,quantite:n.quantite||0,seuilAlert:n.seuilAlert||0,enStock:n.enStock||!1,photo:(n.photo&&"null"!==n.photo&&"undefined"!==n.photo?`${this.apiUrl}${n.photo}`:"")||this.generateLetterAvatar(n.nom),nomCategorie:n.nomCategorie||"Aucune categorie",nomUnite:n.nomUnite||"Sans unit\xe9",createdAt:n.createdAt||(new Date).toISOString(),categorieId:n.categorieId,uniteId:n.uniteId,boutiqueId:n.boutiqueId,boutiques:n.boutiques||[]})).sort((n,i)=>new Date(i.createdAt).getTime()-new Date(n.createdAt).getTime()),this.allProducts=[...this.tasks],this.dataSource.data=this.tasks,this.dataSource.paginator=this.paginator,this.showNoProductsMessage=0===this.tasks.length},error:o=>{console.error("Erreur lors de la r\xe9cup\xe9ration des produits",o),this.showNoProductsMessage=0===this.tasks.length}}):console.error("L'ID de la boutique est manquant")}selectBoutique(e){this.showNoProductsMessage=!1,!e||e.actif?(this.selectedBoutique=e,null===e?this.loadAllProduits():(this.boutiqueName=e.nomBoutique,this.addressBoutique=e.adresse,this.loadProduits(e.id)),this.currentPage=0):this.showSuspendedBoutiqueDialog()}toggleFilterDropdown(){this.showFilterDropdown=!this.showFilterDropdown,this.showExportDropdown=!1}loadAllProduits(){this.showNoProductsMessage=!1;const e=this.getEntrepriseId();e?this.produitService.getProduitsByEntrepriseId(e).subscribe({next:o=>{this.tasks=o.filter(n=>n.enStock).map(n=>{const a=n.photo&&"null"!==n.photo&&"undefined"!==n.photo?`${this.apiUrl}${n.photo}`:"";return{...n,photo:a||this.generateLetterAvatar(n.nom),boutiques:n.boutiques||[]}}).sort((n,i)=>{const a=new Date(n.createdAt??(new Date).toISOString()).getTime();return new Date(i.createdAt??(new Date).toISOString()).getTime()-a}),this.dataSource.data=this.tasks,this.paginator&&(this.dataSource.paginator=this.paginator),this.allProducts=[...this.tasks],this.showNoProductsMessage=0===this.tasks.length},error:o=>{console.error("Erreur lors de la r\xe9cup\xe9ration des produits",o),this.showNoProductsMessage=0===this.tasks.length}}):console.error("ID entreprise manquant")}getBoutiqueNames(e){return e&&0!==e.length?e.length>2?`${e.slice(0,2).map(i=>i.nom).join(", ")}, ...`:e.map(n=>n.nom).join(", "):"Aucune boutique"}generateLetterAvatar(e){const n=`\n      <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100">\n        <rect width="100" height="100" fill="#0671e4ac"/>\n        <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#fff" font-size="50">${e?e.charAt(0).toUpperCase():"?"}</text>\n      </svg>\n    `;return`data:image/svg+xml;base64,${btoa(n)}`}openStockDetail(e){this.router.navigate(["/detail-stock",e],{queryParams:this.selectedBoutique?{boutiqueId:this.selectedBoutique.id}:{}})}showSuspendedBoutiqueDialog(){this.dialog.open(S.F,{width:"400px",disableClose:!0,data:{onClose:()=>{this.selectedBoutique=null}}})}applyFilters(){let e=[...this.allProducts];const o=this.searchText.toLowerCase();this.searchText&&(e=e.filter(this.selectedFilters.length>0?n=>this.selectedFilters.every(i=>{const a=i.type;return(n[a]?.toString().toLowerCase()||"").includes(o)}):n=>Object.values(n).some(i=>i?.toString().toLowerCase().includes(o)))),this.sortColumn&&e.sort((n,i)=>{const a=this.sortColumn,c=n[a]?.toString().toLowerCase()||"",v=i[a]?.toString().toLowerCase()||"";return c<v?"asc"===this.sortDirection?-1:1:c>v?"asc"===this.sortDirection?1:-1:0}),this.tasks=e,this.filteredProduct=e,this.currentPage=0}resetFilters(){this.selectedFilters=[],this.searchText="",this.tasks=[...this.allProducts],this.filteredProduct=[],this.currentPage=0,this.showFilterDropdown=!1}setSorting(e){this.sortColumn===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortColumn=e,this.sortDirection="asc"),this.applyFilters()}addFilter(e){this.selectedFilters=this.isFilterSelected(e.type)?[]:[e],this.showFilterDropdown=!1,this.applyFilters(),setTimeout(()=>{this.searchInput?.nativeElement&&this.searchInput.nativeElement.focus()},0)}isFilterSelected(e){return this.selectedFilters.some(o=>o.type===e)}focusSearchInput(){this.searchInput?.nativeElement&&this.searchInput.nativeElement.focus()}removeFilter(e){this.selectedFilters=this.selectedFilters.filter(o=>o!==e),this.applyFilters()}getSearchPlaceholder(){return this.selectedFilters.length>0?`Par ${this.selectedFilters.map(e=>e.label).join(", ")}...`:"Recherche..."}static{this.\u0275fac=function(o){return new(o||r)(t.rXU(D.R),t.rXU(T.D),t.rXU(g.ok),t.rXU(M.Ix),t.rXU(j.g),t.rXU(B.j))}}static{this.\u0275cmp=t.VBU({type:r,selectors:[["app-stocks"]],viewQuery:function(o,n){if(1&o&&(t.GBs(f.iy,5),t.GBs(y,5)),2&o){let i;t.mGM(i=t.lsd())&&(n.paginator=i.first),t.mGM(i=t.lsd())&&(n.searchInput=i.first)}},hostBindings:function(o,n){1&o&&t.bIt("click",function(a){return n.onClickOutside(a)},!1,t.EBC)},decls:60,vars:15,consts:[["searchInput",""],["noBoutiques",""],[1,"containerTable"],[1,"tasks-header"],[1,"title"],[1,"actions"],["routerLink","/stock_ajustement",1,"add-task"],[1,"contentIcon"],[1,"ri-refresh-line"],[1,"bare"],[1,"export-container"],[1,"iconDrop"],[1,"ri-printer-cloud-line",3,"click"],["class","export-dropdown",4,"ngIf"],[1,"container_inputSearch",2,"display","flex","align-items","center","position","relative"],[1,"inputSearch",2,"flex","1","position","relative"],[1,"tags-container",2,"display","flex","flex-wrap","wrap","align-items","center","padding-left","35px","min-height","40px","border","1.5px solid #000","border-top-left-radius","5px","min-width","250px","border-bottom-left-radius","5px","border-top-right-radius","0px","border-bottom-right-radius","0px","background","white","cursor","text",3,"click"],["class","tag","style","display: flex; align-items: center; background: #e0e0e0; padding: 2px 8px; border-radius: 20px; margin: 2px 4px 2px 0; z-index: 12;",4,"ngIf"],["type","text",2,"border","none","outline","none","flex","1","padding","5px 0","min-width","120px",3,"ngModelChange","click","ngModel","placeholder"],[1,"ri-search-2-line",2,"position","absolute","left","10px","top","50%","transform","translateY(-50%)","z-index","1"],["title","Trier et filtrer",1,"trier",2,"cursor","pointer",3,"click"],["style","font-size: 18px;","class","ri-arrow-down-s-fill",4,"ngIf"],["style","font-size: 18px;","class","ri-close-line",4,"ngIf"],["class","filter-dropdown","style","position: absolute; top: 100%; right: 0; background: white; \n          border: 1px solid #ccc; border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); \n          z-index: 100; width: 100%; margin-top: 5px;",3,"click",4,"ngIf"],[1,"container_list_boutique"],[1,"content_list_boutique"],[1,"name_boutique"],[4,"ngIf","ngIfElse"],[1,"titleTableProduit"],[3,"click"],[3,"class",4,"ngIf"],[2,"background-color","#0671e44a"],[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["style","text-align: center; margin-top: 20px;",4,"ngIf"],[1,"pagination"],[3,"length","pageSize","pageSizeOptions","page",4,"ngIf"],[1,"export-dropdown"],[1,"export-option",3,"click"],[1,"tag",2,"display","flex","align-items","center","background","#e0e0e0","padding","2px 8px","border-radius","20px","margin","2px 4px 2px 0","z-index","12"],[1,"remove-chip",3,"click"],[1,"ri-arrow-down-s-fill",2,"font-size","18px"],[1,"ri-close-line",2,"font-size","18px"],[1,"filter-dropdown",2,"position","absolute","top","100%","right","0","background","white","border","1px solid #ccc","border-radius","5px","box-shadow","0 2px 10px rgba(0,0,0,0.1)","z-index","100","width","100%","margin-top","5px",3,"click"],[1,"filter-section",2,"padding","10px"],[2,"display","flex","justify-content","space-between","align-items","center"],[2,"margin","0","font-size","16px","color","#333"],[2,"background","none","border","none","color","#0671e4","cursor","pointer","font-size","13px",3,"click"],[2,"list-style","none","padding","0","margin","10px 0 0 0"],[2,"padding","8px 12px","cursor","pointer","border-radius","4px","margin-bottom","5px","transition","background 0.3s",3,"click"],[2,"padding","8px 12px","cursor","pointer","border-radius","4px","transition","background 0.3s",3,"click"],[1,"all_boutique",3,"click"],[1,"all_boutique"],[4,"ngFor","ngForOf"],["class","ri-error-warning-line warning-icon",4,"ngIf"],["class","barre",4,"ngIf"],[1,"ri-error-warning-line","warning-icon"],[1,"barre"],[1,"no-boutiques-message"],[3,"innerHTML"],[1,"imgProduit"],[3,"src"],["class","modal",4,"ngIf"],[2,"background-color","#0671e410",3,"innerHTML"],[1,"modal"],[1,"modal-content",3,"click"],["alt","Produit",3,"src"],["colspan","10",2,"text-align","center"],[2,"text-align","center","margin-top","20px"],[2,"color","red"],[3,"page","length","pageSize","pageSizeOptions"]],template:function(o,n){if(1&o){const i=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"h1",4),t.EFF(3,"Mes Stocks"),t.k0s(),t.j41(4,"div",5)(5,"button",6),t.EFF(6,"Cr\xe9er un ajustement de stock"),t.k0s(),t.j41(7,"div",7),t.nrm(8,"i",8)(9,"div",9),t.j41(10,"div",10)(11,"div",11)(12,"i",12),t.bIt("click",function(){return t.eBV(i),t.Njj(n.toggleExportDropdown())}),t.k0s()(),t.DNE(13,A,7,0,"div",13),t.k0s()(),t.j41(14,"div",14)(15,"div",15)(16,"div",16),t.bIt("click",function(){return t.eBV(i),t.Njj(n.focusSearchInput())}),t.DNE(17,U,4,1,"span",17),t.j41(18,"input",18,0),t.mxI("ngModelChange",function(c){return t.eBV(i),t.DH7(n.searchText,c)||(n.searchText=c),t.Njj(c)}),t.bIt("ngModelChange",function(){return t.eBV(i),t.Njj(n.applyFilters())})("click",function(c){return t.eBV(i),t.Njj(c.stopPropagation())}),t.k0s(),t.nrm(20,"i",19),t.k0s()(),t.j41(21,"div",20),t.bIt("click",function(c){return t.eBV(i),n.toggleFilterDropdown(),t.Njj(c.stopPropagation())}),t.DNE(22,$,1,0,"i",21)(23,N,1,0,"i",22),t.k0s(),t.DNE(24,z,13,8,"div",23),t.k0s()()(),t.j41(25,"div",24)(26,"div",25)(27,"div",26),t.DNE(28,V,5,3,"ng-container",27)(29,W,2,0,"ng-template",null,1,t.C5r),t.k0s()()(),t.j41(31,"table")(32,"thead")(33,"tr",28)(34,"th",29),t.bIt("click",function(){return t.eBV(i),t.Njj(n.setSorting("codeGenerique"))}),t.EFF(35," Code "),t.DNE(36,K,1,3,"i",30),t.k0s(),t.j41(37,"th"),t.EFF(38,"Photo"),t.k0s(),t.j41(39,"th"),t.EFF(40,"Nom produit"),t.k0s(),t.j41(41,"th"),t.EFF(42,"Cat\xe9gorie"),t.k0s(),t.j41(43,"th"),t.EFF(44,"Prix Vente"),t.k0s(),t.j41(45,"th"),t.EFF(46,"Co\xfbt du produit"),t.k0s(),t.j41(47,"th",31),t.EFF(48,"En stock"),t.k0s(),t.j41(49,"th"),t.EFF(50,"Unit\xe9"),t.k0s(),t.j41(51,"th"),t.EFF(52,"Seuil Alerte"),t.k0s(),t.DNE(53,Y,3,0,"ng-container",32),t.k0s()(),t.j41(54,"tbody"),t.DNE(55,J,20,15,"tr",33)(56,Q,3,0,"tr",32),t.k0s()(),t.DNE(57,Z,3,0,"div",34),t.j41(58,"div",35),t.DNE(59,tt,1,4,"mat-paginator",36),t.k0s()()}if(2&o){const i=t.sdS(30);t.R7$(13),t.Y8G("ngIf",n.showExportDropdown),t.R7$(4),t.Y8G("ngIf",n.selectedFilters.length>0),t.R7$(),t.R50("ngModel",n.searchText),t.Y8G("placeholder",n.getSearchPlaceholder()),t.R7$(4),t.Y8G("ngIf",!n.showFilterDropdown),t.R7$(),t.Y8G("ngIf",n.showFilterDropdown),t.R7$(),t.Y8G("ngIf",n.showFilterDropdown),t.R7$(4),t.Y8G("ngIf",((null==n.boutiques?null:n.boutiques.length)||0)>0)("ngIfElse",i),t.R7$(8),t.Y8G("ngIf","codeGenerique"===n.sortColumn),t.R7$(17),t.Y8G("ngIf",!n.selectedBoutique),t.R7$(2),t.Y8G("ngForOf",n.filteredProducts()),t.R7$(),t.Y8G("ngIf",n.tasks.length>0&&0===n.filteredProducts().length),t.R7$(),t.Y8G("ngIf",n.showNoProductsMessage),t.R7$(2),t.Y8G("ngIf",n.tasks.length>5)}},dependencies:[b.MD,b.Sq,b.bT,g.X1,g.me,g.BC,g.YN,g.vS,d.M,m.M,O.jL,P.fS,f.Ou,f.iy,M.Wk,E.v],styles:['@charset "UTF-8";table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.title[_ngcontent-%COMP%]{font-size:18px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border-bottom:1px solid rgba(221,221,221,.5803921569);padding:8px;font-size:11px}th[_ngcontent-%COMP%]{background-color:#f2f2f2}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.titleTableProduit[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:12px}.containerTable[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:10px}.tasks-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.actions[_ngcontent-%COMP%]{display:flex;align-items:center}.actions[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#000}.add-task[_ngcontent-%COMP%]{padding:10px 30px;background-color:#0672e4;color:#fff;border-radius:5px;border:none}.contentIcon[_ngcontent-%COMP%]{margin:0 10px;display:flex;align-items:center}.contentIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:0 15px;font-size:20px;cursor:pointer}.contentIcon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#0672e4;transition:all .5s ease}.bare[_ngcontent-%COMP%]{width:2px;height:30px;background-color:#eee}.inputSearch[_ngcontent-%COMP%]{position:relative;height:40px;display:flex;align-items:center}.inputSearch[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:15px;font-size:17px}.totals[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-left:20px}.totals[_ngcontent-%COMP%]{font-size:14px;color:#333;margin-bottom:5px}.red-text[_ngcontent-%COMP%]{color:red}.export-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.export-dropdown[_ngcontent-%COMP%]{position:absolute;background-color:#f9f9f9;min-width:180px;box-shadow:0 8px 16px #00000063;z-index:1;top:100%;left:0;border-radius:5px}.export-dropdown[_ngcontent-%COMP%]   .export-option[_ngcontent-%COMP%]{padding:12px 16px;cursor:pointer}.export-dropdown[_ngcontent-%COMP%]   .export-option[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.iconDrop[_ngcontent-%COMP%]{display:flex;align-items:center}.iconMontreArrow[_ngcontent-%COMP%]{margin-left:-30px}.iconMontreArrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px}.imgProduit[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;box-shadow:0 4px 6px #0000001a;cursor:pointer}.imgProduit[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:80%;object-fit:cover;border-radius:50%;transition:transform .2s}.imgProduit[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000b3;display:flex;align-items:center;justify-content:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;padding:10px;border-radius:10px;max-width:80%;max-height:80%;display:flex;justify-content:center}.modal-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:80vh;border-radius:10px}.modal-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:1000}.modal-content[_ngcontent-%COMP%]{background:#fff;width:100%;max-width:600px;border-radius:8px;box-shadow:0 2px 10px #0003;overflow:hidden}.modal-header[_ngcontent-%COMP%]{padding:16px;background-color:#f1f1f1;display:flex;justify-content:space-between;align-items:center}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px}.modal-close[_ngcontent-%COMP%]{cursor:pointer;font-size:24px}.modal-body[_ngcontent-%COMP%]{padding:16px}.modal-footer[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:center}.champ_input[_ngcontent-%COMP%]{position:relative}.inpuemail[_ngcontent-%COMP%]{margin-top:20px}.input_focus[_ngcontent-%COMP%]{width:100%;min-width:250px;height:49px;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:10px 0;transition:all .3s;font-size:18px;background:none;color:#695c5c}.add_category[_ngcontent-%COMP%]{border:none;margin-top:5px;cursor:pointer}.input_focus[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.champ_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:4px;pointer-events:none;color:#6b6666}.input_focus[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:-6px;left:0;transition:all .3s ease-in-out;background:none;font-size:14px;padding:0}.input_focus[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:15px;transition:all .2s ease-in-out}.double_input[_ngcontent-%COMP%]{display:flex;align-items:center}.input_focus2[_ngcontent-%COMP%]{width:100%;min-width:250px;height:60px;outline:none;border-top:none;border-left:none;border-right:none;margin-top:10px;transition:all .3s;font-size:18px;padding-left:10px;background-color:#dcdcdc4c;color:#777474;resize:none;border-radius:5px;padding-top:10px;border-bottom:1px solid rgb(53,50,50)}.input_focus2[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.champ_input2[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:0;left:15px;pointer-events:none;color:#423838}.input_focus2[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus2[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:-10px;left:0;transition:all .3s ease-in-out;background:none;font-size:14px;padding:0}.input_focus2[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus2[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:15px;transition:all .2s ease-in-out}.champ_input_margin[_ngcontent-%COMP%]{margin-left:50px}.input_file[_ngcontent-%COMP%]{display:inline-block;width:300px;margin-top:10px}.custom-file-label[_ngcontent-%COMP%]{display:flex;align-items:center;border:1px solid #ccc;border-radius:5px;overflow:hidden;width:100%;cursor:pointer}.custom-file-button[_ngcontent-%COMP%]{background-color:#0672e4;color:#fff;padding:8px 12px;font-size:14px;border:none;outline:none;cursor:pointer}.custom-file-text[_ngcontent-%COMP%]{flex:1;padding:8px;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#555}.btn-save[_ngcontent-%COMP%]{padding:8px 20px;margin-right:10px;background-color:#0672e4;color:#fff;border:none;border-radius:5px}.btn-cancel[_ngcontent-%COMP%]{padding:8px 20px;margin-right:10px;background-color:#ff0000b3;color:#fff;border:none;border-radius:5px}.btn-save[_ngcontent-%COMP%]:hover{background-color:#0465cd;transition:all .5s}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:red;transition:all .5s}.iconArrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:10px;top:20px}.iconArrow[_ngcontent-%COMP%]{font-size:20px}.pagination[_ngcontent-%COMP%]{justify-content:right;margin-top:20px}mat-paginator[_ngcontent-%COMP%]{background-color:#dcdcdc51;border-radius:5px}.error-message[_ngcontent-%COMP%]{font-size:13px;color:red;font-weight:700;margin-top:10px}.expiring-soon[_ngcontent-%COMP%]{color:#f1940f}.expiring-today[_ngcontent-%COMP%]{color:red;animation:_ngcontent-%COMP%_blink 1s linear infinite}@keyframes _ngcontent-%COMP%_blink{50%{opacity:0}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}50%{transform:translate(5px)}75%{transform:translate(-5px)}}.shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .2s ease-in-out infinite}.expired[_ngcontent-%COMP%]{color:red;font-style:italic;opacity:.7}.description-cell[_ngcontent-%COMP%]{position:relative;cursor:pointer}.description-hover[_ngcontent-%COMP%]{display:none;position:absolute;top:100%;left:50%;transform:translate(-50%);background-color:#333;color:#fff;padding:10px;border-radius:5px;font-size:12px;width:200px;z-index:10}.description-cell[_ngcontent-%COMP%]:hover   .description-hover[_ngcontent-%COMP%]{display:block}.name_boutique[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;margin:30px 0 10px}.name_boutique[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:5px 15px}.name_boutique_active[_ngcontent-%COMP%]{background-color:#e9d421;border-radius:5px;color:#000}.barre[_ngcontent-%COMP%]{height:25px;width:1px;background-color:#0000003f;margin:8px 0}.container_list_boutique[_ngcontent-%COMP%]{overflow:auto;scrollbar-color:#888 #f1f1f1}.container_list_boutique[_ngcontent-%COMP%]::-webkit-scrollbar{width:2px;height:3px}.container_list_boutique[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.container_list_boutique[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#00f;border-radius:4px}.container_list_boutique[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:red}.name_boutique[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:pointer;padding:8px 16px;margin:4px 0;transition:all .3s ease;font-weight:500;border-radius:4px}.name_boutique[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-color:#0000000d;transform:translateY(-1px)}.name_boutique[_ngcontent-%COMP%]   p.name_boutique_active[_ngcontent-%COMP%]{background-color:#e9d421;color:#000!important}.warning-icon[_ngcontent-%COMP%]{margin-left:8px;color:red;font-size:14px}.inputSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding-left:10px;border-top-left-radius:5px;border-bottom-left-radius:5px}.trier[_ngcontent-%COMP%]{border-top:1.5px solid #000;border-right:1.5px solid #000;border-bottom:1.5px solid #000;border-top-right-radius:5px;border-bottom-right-radius:5px;padding:5px 10px;cursor:pointer}.tags-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;padding:5px 5px 5px 35px;border:1px solid #ccc;border-radius:5px;background:#fff;min-height:40px}.tag[_ngcontent-%COMP%]{display:flex;align-items:center;background:#e0e0e0;padding:2px 8px;border-radius:20px;margin:2px 4px 2px 0;font-size:12px}.tag[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:5px;cursor:pointer}.inputSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;flex:1;padding:8px 0}.filter-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #ccc;border-radius:5px;box-shadow:0 2px 10px #0000001a;z-index:100;width:250px;margin-top:5px}.filter-section[_ngcontent-%COMP%]{padding:10px}.filter-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 10px;font-size:16px;color:#333}.filter-section[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.filter-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:5px 10px;cursor:pointer;border-radius:4px;margin-bottom:5px}.filter-section[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#f0f0f0}th[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}.remove-chip[_ngcontent-%COMP%]{margin-left:5px;cursor:pointer}.remove-chip[_ngcontent-%COMP%]:hover{color:#f44}.filter-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #ccc;border-radius:5px;box-shadow:0 2px 10px #0000001a;z-index:100;width:300px;padding:15px}.filter-dropdown[_ngcontent-%COMP%]   .filter-option[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column}.filter-dropdown[_ngcontent-%COMP%]   .filter-select[_ngcontent-%COMP%]{margin-top:5px;padding:8px;border:1px solid #ddd;border-radius:4px;background:#fff;cursor:pointer}.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed!important;pointer-events:none}']})}}return r})()}}]);