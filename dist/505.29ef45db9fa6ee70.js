"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[505],{50505:(k,P,u)=>{u.r(P),u.d(P,{PosAccueilComponent:()=>F});var d=u(60177),_=u(89417),c=u(49192),m=u(40724),v=u(22525),g=u(41731),e=u(54438),O=u(80145),C=u(88026),E=u(74864),l=u(17022),o=u(37788),n=u(52719);const r=a=>({transform:a});function M(a,f){if(1&a){const t=e.RV6();e.j41(0,"li",28),e.bIt("click",function(){const i=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.setActiveCommande(i))}),e.EFF(1),e.k0s()}if(2&a){const t=f.$implicit,s=e.XpG();e.AVh("list_commande_active",s.activeCommande===t),e.R7$(),e.SpI(" ",t," ")}}function x(a,f){if(1&a){const t=e.RV6();e.j41(0,"li",29),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showCommandePopup=!0)}),e.nrm(1,"i",30),e.k0s()}}function A(a,f){if(1&a){const t=e.RV6();e.j41(0,"li",28),e.bIt("click",function(){const i=e.eBV(t).$implicit,p=e.XpG(2);return e.Njj(p.setActiveCommande(i))}),e.EFF(1),e.k0s()}if(2&a){const t=f.$implicit,s=e.XpG(2);e.AVh("active",s.activeCommande===t),e.R7$(),e.SpI(" ",t," ")}}function D(a,f){if(1&a){const t=e.RV6();e.j41(0,"div",31)(1,"div",32),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(2,"div",33),e.bIt("mousedown",function(i){e.eBV(t);const p=e.XpG();return e.Njj(p.startDragPopup(i))}),e.j41(3,"h3"),e.EFF(4,"Liste des commandes"),e.k0s(),e.j41(5,"i",34),e.bIt("click",function(i){e.eBV(t);const p=e.XpG();return e.Njj(p.closePopup(i))}),e.k0s()(),e.j41(6,"div",35)(7,"ul",36),e.DNE(8,A,2,3,"li",37),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("ngStyle",e.eq3(2,r,"translate3d("+t.popupOffsetPopup.x+"px, "+t.popupOffsetPopup.y+"px, 0)")),e.R7$(7),e.Y8G("ngForOf",t.commandes)}}function w(a,f){if(1&a&&(e.qex(0),e.j41(1,"p"),e.EFF(2),e.k0s(),e.bVm()),2&a){const t=e.XpG();e.R7$(2),e.JRh(t.selectedBoutiqueName)}}function B(a,f){1&a&&(e.j41(0,"p",38),e.EFF(1,"..."),e.k0s())}function I(a,f){if(1&a){const t=e.RV6();e.j41(0,"div",39)(1,"div",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleView("grid"))}),e.EFF(2),e.nI1(3,"async"),e.k0s(),e.j41(4,"div",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.toggleView("list"))}),e.EFF(5),e.nI1(6,"async"),e.k0s()()}if(2&a){const t=e.XpG();e.R7$(2),e.SpI(" Cadre ",e.bMT(3,2,t.isListView$)?"\u2713":""," "),e.R7$(3),e.SpI(" Liste ",e.bMT(6,4,t.isListView$)?"":"\u2713"," ")}}function $(a,f){if(1&a){const t=e.RV6();e.j41(0,"div",41)(1,"div",42),e.nrm(2,"i",43),e.EFF(3," Installer l'application "),e.k0s(),e.j41(4,"div",42),e.nrm(5,"i",44),e.EFF(6," Tableau de bord "),e.k0s(),e.j41(7,"div",42),e.nrm(8,"i",45),e.EFF(9," Recharger les donnees "),e.k0s(),e.j41(10,"div",40),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.prepareFermerCaisse())}),e.nrm(11,"i",46),e.EFF(12," Fermer la caisse "),e.k0s()()}}function j(a,f){1&a&&(e.j41(0,"div",54),e.nrm(1,"i",55),e.EFF(2," Chargement des d\xe9tails... "),e.k0s())}function R(a,f){if(1&a&&(e.j41(0,"div",61)(1,"span",62),e.EFF(2,"Ferm\xe9e le :"),e.k0s(),e.j41(3,"span",63),e.EFF(4),e.k0s()()),2&a){const t=e.XpG(3);e.R7$(4),e.JRh(t.formatDate(t.caisseDetails.dateFermeture))}}function S(a,f){if(1&a&&(e.j41(0,"div",56)(1,"div",57)(2,"div",24)(3,"span"),e.EFF(4),e.k0s()(),e.j41(5,"div")(6,"div",58),e.EFF(7),e.k0s(),e.j41(8,"div",59),e.EFF(9),e.k0s()()(),e.j41(10,"div",60)(11,"div",61)(12,"span",62),e.EFF(13,"Statut:"),e.k0s(),e.j41(14,"span",63),e.EFF(15),e.k0s()(),e.j41(16,"div",61)(17,"span",62),e.EFF(18,"Montant initial :"),e.k0s(),e.j41(19,"span",63),e.EFF(20),e.nI1(21,"cfaCurrency"),e.k0s()(),e.j41(22,"div",61)(23,"span",62),e.EFF(24,"Montant courant :"),e.k0s(),e.j41(25,"span",63),e.EFF(26),e.nI1(27,"cfaCurrency"),e.k0s()(),e.j41(28,"div",61)(29,"span",62),e.EFF(30,"Ouverte le :"),e.k0s(),e.j41(31,"span",63),e.EFF(32),e.k0s()(),e.DNE(33,R,5,1,"div",64),e.j41(34,"div",61)(35,"span",62),e.EFF(36,"Montant obtenu :"),e.k0s(),e.j41(37,"span",63),e.EFF(38),e.nI1(39,"cfaCurrency"),e.k0s()(),e.j41(40,"div",61)(41,"span",62),e.EFF(42,"Nom Vendeur :"),e.k0s(),e.j41(43,"span",63),e.EFF(44),e.k0s()(),e.j41(45,"div",61)(46,"span",62),e.EFF(47,"Nom Boutique :"),e.k0s(),e.j41(48,"span",63),e.EFF(49),e.k0s()()()()),2&a){const t=e.XpG(2);e.R7$(4),e.JRh(t.caisseDetails.nomVendeur?t.caisseDetails.nomVendeur[0]:"?"),e.R7$(3),e.JRh(t.caisseDetails.nomVendeur||"Vendeur non sp\xe9cifi\xe9"),e.R7$(2),e.JRh(t.caisseDetails.nomBoutique||"Boutique non sp\xe9cifi\xe9e"),e.R7$(5),e.AVh("text-success-status","OUVERTE"===t.caisseDetails.statut)("text-danger","FERMEE"===t.caisseDetails.statut),e.R7$(),e.SpI(" ","OUVERTE"===t.caisseDetails.statut?"Ouverte":"Ferm\xe9e"," "),e.R7$(5),e.JRh(e.bMT(21,15,t.caisseDetails.montantInitial)),e.R7$(6),e.JRh(e.bMT(27,17,t.caisseDetails.montantCourant)),e.R7$(6),e.JRh(t.formatDate(t.caisseDetails.dateOuverture)),e.R7$(),e.Y8G("ngIf",t.caisseDetails.dateFermeture),e.R7$(5),e.JRh(e.bMT(39,19,t.getMontantObtenu())),e.R7$(6),e.JRh(t.caisseDetails.nomVendeur||"N/A"),e.R7$(5),e.JRh(t.caisseDetails.nomBoutique||"N/A")}}function T(a,f){if(1&a&&(e.j41(0,"div",65),e.nrm(1,"i",66),e.EFF(2),e.k0s()),2&a){const t=e.XpG(2);e.R7$(2),e.SpI(" ",t.fermetureErrorMessage," ")}}function y(a,f){if(1&a){const t=e.RV6();e.j41(0,"div",31)(1,"div",32),e.bIt("click",function(i){return e.eBV(t),e.Njj(i.stopPropagation())}),e.j41(2,"div",33),e.bIt("mousedown",function(i){e.eBV(t);const p=e.XpG();return e.Njj(p.startDragPopup(i))}),e.j41(3,"h3"),e.EFF(4,"Fermer la caisse"),e.k0s(),e.j41(5,"i",34),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showFermerCaissePopup=!1)}),e.k0s()(),e.j41(6,"div",47),e.DNE(7,j,3,0,"div",48)(8,S,50,21,"div",49)(9,T,3,1,"div",50),e.k0s(),e.j41(10,"div",51)(11,"button",52),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.showFermerCaissePopup=!1)}),e.EFF(12," Annuler "),e.k0s(),e.j41(13,"button",53),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.onLogout())}),e.EFF(14," Confirmer la fermeture "),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(),e.Y8G("ngStyle",e.eq3(6,r,"translate3d("+t.popupOffsetPopup.x+"px, "+t.popupOffsetPopup.y+"px, 0)")),e.R7$(6),e.Y8G("ngIf",t.isLoadingCaisseDetails),e.R7$(),e.Y8G("ngIf",t.caisseDetails&&!t.isLoadingCaisseDetails),e.R7$(),e.Y8G("ngIf",t.fermetureErrorMessage),e.R7$(2),e.Y8G("disabled",t.isLoadingCaisseDetails),e.R7$(2),e.Y8G("disabled",t.isLoadingCaisseDetails||!t.caisseDetails)}}let F=(()=>{class a{constructor(t,s,i,p,h,V,U){this.router=t,this.viewState=s,this.userService=i,this.posCaisseService=p,this.commandeState=h,this.boutiqueState=V,this.boutiqueService=U,this.apiUrl=v.c.imgUrl,this.showDropdown=!1,this.activeButton="vente",this.showMenuDropdown=!1,this.userName="",this.nomEntreprise="",this.photo=null,this.photoUrl=null,this.commandes=["001"],this.activeCommande="001",this.showCommandePopup=!1,this.boutiques=[],this.selectedBoutiqueId=null,this.selectedBoutiqueName="",this.boutiquesLoaded=!1,this.isBoutiqueNameLoaded=!1,this.isDraggingPopup=!1,this.startXPopup=0,this.startYPopup=0,this.initialXPopup=0,this.initialYPopup=0,this.popupOffsetPopup={x:0,y:0},this.showFermerCaissePopup=!1,this.caisseDetails=null,this.isLoadingCaisseDetails=!1,this.fermetureErrorMessage=null,this.onMouseMovePopup=b=>{this.isDraggingPopup&&requestAnimationFrame(()=>{const L=b.clientY-this.startYPopup;this.popupOffsetPopup.x=this.initialXPopup+(b.clientX-this.startXPopup),this.popupOffsetPopup.y=this.initialYPopup+L})},this.onMouseUpPopup=()=>{this.isDraggingPopup=!1,document.removeEventListener("mousemove",this.onMouseMovePopup),document.removeEventListener("mouseup",this.onMouseUpPopup)},this.isListView$=this.viewState.isListView$,this.commandes=this.commandeState.getAllCommandesIds(),this.commandeState.commandeUpdated$.subscribe(()=>{this.commandes=this.commandeState.getAllCommandesIds()}),this.commandeState.activeCommandeId$.subscribe(b=>{this.activeCommande=b}),this.commandeSubscription=this.commandeState.activeCommandeId$.subscribe(b=>{this.activeCommande=b})}ngOnInit(){this.activeButton=this.router.url.includes("/commandes")?"commande":"vente",this.getUserInfo(),this.loadBoutiques(),this.boutiqueService.getBoutiquesByEntreprise().subscribe({next:i=>{this.boutiques=i||[],this.boutiquesLoaded=!0,null!==this.selectedBoutiqueId&&this.updateBoutiqueName(this.selectedBoutiqueId)},error:i=>console.error("Erreur chargement boutiques",i)}),this.boutiqueSub=this.boutiqueState.selectedBoutique$.subscribe(i=>{this.selectedBoutiqueId=i,null===i?this.selectedBoutiqueName="S\xe9lectionnez une boutique":this.updateBoutiqueName(i)});const s=this.router.getCurrentNavigation()?.extras?.state;s?.caisse?.boutiqueId&&this.boutiqueState.setSelectedBoutique(s.caisse.boutiqueId)}loadBoutiques(){this.boutiqueService.getBoutiquesByEntreprise().subscribe({next:t=>{this.boutiques=t||[],this.boutiquesLoaded=!0;const s=this.boutiqueState.getCurrentValue();s&&this.updateBoutiqueName(s)},error:t=>console.error("Erreur chargement boutiques",t)})}updateBoutiqueName(t){this.isBoutiqueNameLoaded=!1;const s=this.boutiques.find(i=>i.id===t);s?(this.selectedBoutiqueName=s.nomBoutique||"",this.isBoutiqueNameLoaded=!0):this.boutiqueService.getBoutiqueById(t).subscribe({next:i=>{this.selectedBoutiqueName=i?.nomBoutique||"Boutique inconnue",this.isBoutiqueNameLoaded=!0},error:()=>{this.selectedBoutiqueName="Boutique inconnue",this.isBoutiqueNameLoaded=!0}})}ngOnDestroy(){this.boutiqueSub?.unsubscribe()}toggleView(t){this.viewState.setViewPreference("grid"===t),this.showDropdown=!0}onClickCommandes(){this.activeButton="commande",this.router.navigate(["/pos-accueil/commandes"])}onClickVente(){this.activeButton="vente",this.router.navigate(["/pos-accueil"])}toggleMenuDropdown(){this.showMenuDropdown=!this.showMenuDropdown}addCommande(){const t=this.commandeState.addNewCommande();this.commandes=this.commandeState.getAllCommandesIds(),this.setActiveCommande(t),this.showCommandePopup=!1}setActiveCommande(t){this.commandeState.setActiveCommande(t),this.activeCommande=t,this.showCommandePopup=!1}get visibleCommandes(){const t=Math.max(0,this.commandes.length-6);return this.commandes.slice(t)}get hiddenCommandes(){return this.commandes.length>6?this.commandes.slice(0,this.commandes.length-6):[]}getUserInfo(){this.userService.getUserInfo().subscribe({next:t=>{this.userName=t.nomComplet.charAt(0).toUpperCase(),this.nomEntreprise=t.nomEntreprise},error:t=>{console.error("Erreur lors de la r\xe9cup\xe9ration des infos utilisateur :",t)}})}onLogout(){console.log("D\xe9but de la proc\xe9dure de d\xe9connexion...");const t=this.boutiqueState.getCurrentValue();if(!t)return console.error("Aucune boutique active d\xe9tect\xe9e."),void this.router.navigate(["/analytics"]);this.userService.getUserInfo().subscribe({next:s=>{console.log("Utilisateur r\xe9cup\xe9r\xe9:",s);const i=s.permissions;1===i.length&&i.includes("VENDRE_PRODUITS")?(console.log('L\'utilisateur a uniquement la permission "VENDRE_PRODUITS". Tentative de fermeture de la caisse...'),this.posCaisseService.fermerCaisse(t).subscribe({next:p=>{console.log("Caisse ferm\xe9e avec succ\xe8s:",p),this.userService.logoutUser(),console.log("D\xe9connexion de l'utilisateur..."),this.router.navigate(["/connexion"]).then(h=>{console.log("D\xe9connexion r\xe9ussie ?",h)})},error:p=>{console.error("Erreur lors de la fermeture de la caisse:",p.message),this.router.navigate(["/analytics"]).then(h=>{console.log("Navigation vers analytics r\xe9ussie ?",h)})}})):(console.log("L'utilisateur n'a pas uniquement la permission \"VENDRE_PRODUITS\", fermeture de la caisse et redirection vers analytics..."),this.posCaisseService.fermerCaisse(t).subscribe({next:p=>{console.log("Caisse ferm\xe9e avec succ\xe8s:",p),this.router.navigate(["/analytics"]).then(h=>{console.log("Navigation vers analytics r\xe9ussie ?",h)})},error:p=>{console.error("Erreur lors de la fermeture de la caisse:",p.message),this.router.navigate(["/analytics"]).then(h=>{console.log("Navigation vers analytics r\xe9ussie ?",h)})}}))},error:s=>{console.error("Erreur lors de la r\xe9cup\xe9ration des informations utilisateur:",s),this.router.navigate(["/analytics"])}})}prepareFermerCaisse(){this.isLoadingCaisseDetails=!0,this.fermetureErrorMessage=null,this.caisseDetails=null;const t=this.boutiqueState.getCurrentValue();if(!t)return this.fermetureErrorMessage="Aucune boutique s\xe9lectionn\xe9e",void(this.isLoadingCaisseDetails=!1);this.posCaisseService.getDerniereCaisseVendeur(t).subscribe({next:s=>{"string"==typeof s?this.fermetureErrorMessage=s:(this.caisseDetails=s,"OUVERTE"!==this.caisseDetails.statut?this.fermetureErrorMessage="Aucune caisse ouverte pour cette boutique":this.showFermerCaissePopup=!0),this.isLoadingCaisseDetails=!1},error:s=>{this.fermetureErrorMessage="Erreur lors du chargement des d\xe9tails de la caisse: "+s.message,this.isLoadingCaisseDetails=!1}})}formatDate(t){if(!t)return"N/A";const s=new Date(t);return isNaN(s.getTime())?"Date invalide":s.toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}confirmFermerCaisse(){if(!this.caisseDetails?.id)return;const t=this.caisseDetails.id;this.isLoadingCaisseDetails=!0,this.posCaisseService.fermerCaisse(t).subscribe({next:s=>{this.showFermerCaissePopup=!1,this.handlePostFermeture()},error:s=>{this.fermetureErrorMessage="\xc9chec de la fermeture de la caisse",this.isLoadingCaisseDetails=!1}})}handlePostFermeture(){this.userService.getUserInfo().subscribe({next:t=>{const s=t.permissions;1===s.length&&s.includes("VENDRE_PRODUITS")?(this.userService.logoutUser(),this.router.navigate(["/connexion"])):this.router.navigate(["/analytics"])},error:()=>this.router.navigate(["/analytics"])})}startDragPopup(t){t.preventDefault(),t.stopPropagation(),this.isDraggingPopup=!0,this.startXPopup=t.clientX,this.startYPopup=t.clientY,this.initialXPopup=this.popupOffsetPopup.x,this.initialYPopup=this.popupOffsetPopup.y,document.addEventListener("mousemove",this.onMouseMovePopup),document.addEventListener("mouseup",this.onMouseUpPopup)}closePopup(t){t&&t.stopPropagation(),this.showCommandePopup=!1}getMontantObtenu(){return this.caisseDetails?(this.caisseDetails.montantCourant||0)-(this.caisseDetails.montantInitial||0):0}static{this.\u0275fac=function(s){return new(s||a)(e.rXU(c.Ix),e.rXU(O.C),e.rXU(C.g),e.rXU(E.U),e.rXU(l.f),e.rXU(o.j),e.rXU(n.c))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-pos-accueil"]],decls:38,vars:17,consts:[["loadingBoutique",""],[1,"pos_container"],[1,"pos_content"],[1,"pos_header"],[1,"navBar"],[1,"header_left"],[1,"btn_vente_pos",3,"click"],[1,"btn","btn_default"],[1,"btn_commande_pos",3,"click"],[1,"btn_add_commande"],[1,"btn",3,"click"],[1,"ri-add-line"],[1,"list_commande"],[3,"list_commande_active","click",4,"ngFor","ngForOf"],["class","list_commande_plus",3,"click",4,"ngIf"],["class","commande-popup-overlay",4,"ngIf"],[1,"header_right"],[1,"name_boutique"],[4,"ngIf","ngIfElse"],[1,"inputSearch"],[1,"ri-search-2-line"],["type","text","placeholder","Recherche des produits"],["clickOutside","",1,"icon_sort",3,"click","clickOutside"],["class","view-dropdown",4,"ngIf"],[1,"profil"],["clickOutside","",1,"menu",3,"click","clickOutside"],[1,"ri-menu-line"],["class","menu-dropdown",4,"ngIf"],[3,"click"],[1,"list_commande_plus",3,"click"],[1,"ri-arrow-down-s-line"],[1,"commande-popup-overlay"],[1,"commande-popup-content",3,"click","ngStyle"],[1,"popup-header",3,"mousedown"],[1,"ri-close-line",3,"click"],[1,"popup-commandes"],[1,"list_commande","commandes-grid"],[3,"active","click",4,"ngFor","ngForOf"],[1,"boutique-loading"],[1,"view-dropdown"],[1,"dropdown-item",3,"click"],[1,"menu-dropdown"],[1,"dropdown-item"],[1,"ri-download-line"],[1,"ri-home-5-line"],[1,"ri-restart-line"],[1,"ri-money-euro-circle-line"],[1,"popup-body"],["class","loading-indicator",4,"ngIf"],["class","caisse-details-container",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"popup-footer"],[1,"btn","btn-cancel",3,"click","disabled"],[1,"btn","btn-confirm",3,"click","disabled"],[1,"loading-indicator"],[1,"ri-loader-4-line","spin"],[1,"caisse-details-container"],[1,"caisse-info-header"],[1,"caisse-info-title"],[1,"caisse-info-subtitle"],[1,"caisse-details-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],["class","detail-item",4,"ngIf"],[1,"error-message"],[1,"ri-error-warning-line"]],template:function(s,i){if(1&s){const p=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"nav",4)(4,"div",5)(5,"div",6),e.bIt("click",function(){return e.eBV(p),e.Njj(i.onClickVente())}),e.j41(6,"button",7),e.EFF(7," Ventes POS "),e.k0s()(),e.j41(8,"div",8),e.bIt("click",function(){return e.eBV(p),e.Njj(i.onClickCommandes())}),e.j41(9,"button",7),e.EFF(10," Commandes "),e.k0s()(),e.j41(11,"div",9)(12,"button",10),e.bIt("click",function(){return e.eBV(p),e.Njj(i.addCommande())}),e.nrm(13,"i",11),e.k0s()(),e.j41(14,"ul",12),e.DNE(15,M,2,3,"li",13)(16,x,2,0,"li",14),e.k0s(),e.DNE(17,D,9,4,"div",15),e.k0s(),e.j41(18,"div",16)(19,"div",17),e.DNE(20,w,3,1,"ng-container",18)(21,B,2,0,"ng-template",null,0,e.C5r),e.k0s(),e.j41(23,"div",19),e.nrm(24,"i",20)(25,"input",21),e.k0s(),e.j41(26,"div",22),e.bIt("click",function(){return e.eBV(p),e.Njj(i.showDropdown=!i.showDropdown)})("clickOutside",function(){return e.eBV(p),e.Njj(i.showDropdown=!1)}),e.nrm(27,"i"),e.nI1(28,"async"),e.DNE(29,I,7,6,"div",23),e.k0s(),e.j41(30,"div",24)(31,"span"),e.EFF(32),e.k0s()(),e.j41(33,"div",25),e.bIt("click",function(){return e.eBV(p),e.Njj(i.toggleMenuDropdown())})("clickOutside",function(){return e.eBV(p),e.Njj(i.showMenuDropdown=!1)}),e.nrm(34,"i",26),e.DNE(35,$,13,0,"div",27),e.k0s()()()(),e.nrm(36,"router-outlet"),e.k0s()(),e.DNE(37,y,15,8,"div",15)}if(2&s){const p=e.sdS(22);e.R7$(6),e.AVh("btn_active","vente"===i.activeButton),e.R7$(3),e.AVh("btn_active","commande"===i.activeButton),e.R7$(6),e.Y8G("ngForOf",i.visibleCommandes),e.R7$(),e.Y8G("ngIf",i.commandes.length>6),e.R7$(),e.Y8G("ngIf",i.showCommandePopup),e.R7$(3),e.Y8G("ngIf",i.isBoutiqueNameLoaded)("ngIfElse",p),e.R7$(7),e.HbH(e.bMT(28,15,i.isListView$)?"ri-apps-fill":"ri-list-check"),e.R7$(2),e.Y8G("ngIf",i.showDropdown),e.R7$(3),e.JRh(i.userName),e.R7$(3),e.Y8G("ngIf",i.showMenuDropdown),e.R7$(2),e.Y8G("ngIf",i.showFermerCaissePopup)}},dependencies:[_.YN,d.MD,d.Sq,d.bT,d.B3,d.Jj,c.iI,c.n3,m.z,g.M],styles:['@charset "UTF-8";[_nghost-%COMP%]{display:flex;flex-direction:column;position:fixed;inset:0;overflow:hidden}.pos_container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.pos_content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;min-height:0}.pos_header[_ngcontent-%COMP%]{flex:0 0 auto}.view-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #ddd;border-radius:4px;box-shadow:0 2px 5px #0000001a;z-index:100;min-width:150px}.dropdown-item[_ngcontent-%COMP%]{padding:8px 12px;font-size:14px;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.navBar[_ngcontent-%COMP%]{width:100%;height:60px;display:flex;align-items:center;justify-content:space-between;background-color:#fff;border-bottom:1px solid #ddd;box-shadow:#2123261a 0 10px 10px -10px;padding:0 15px}.header_left[_ngcontent-%COMP%], .header_right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.header_right[_ngcontent-%COMP%]{gap:20px}.btn_vente_pos[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .btn_commande_pos[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{gap:10px}.btn_default[_ngcontent-%COMP%]{background-color:#f4f4f4}.btn_default[_ngcontent-%COMP%]:focus{background-color:#f4f4f4}.btn[_ngcontent-%COMP%]{border:none;padding:8px 16px;border-radius:4px;cursor:pointer;transition:background-color .3s}.btn.btn_active[_ngcontent-%COMP%]{background-color:#cde3fa;color:#1a73e8}.btn_add_commande[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:4px 13px}.btn_add_commande[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px}li.list_commande_active[_ngcontent-%COMP%]{background-color:#cde3fa!important}ul.list_commande[_ngcontent-%COMP%]{list-style-type:none;display:flex;align-items:center;gap:10px;margin:0;padding:0}ul.list_commande[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:7px 13px;border-radius:5px;cursor:pointer}ul.list_commande[_ngcontent-%COMP%]   li.list_commande_plus[_ngcontent-%COMP%]{padding:5px}.name_boutique[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.inputSearch[_ngcontent-%COMP%]{position:relative;width:250px;height:35px;display:flex;align-items:center}.inputSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding-left:10px;border-radius:5px;border:1px solid #000;font-size:13px}.inputSearch[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:15px;font-size:17px}.icon_sort[_ngcontent-%COMP%]{position:relative;background-color:#f4f4f4;padding:5px 11px;border-radius:5px;cursor:pointer}.icon_sort[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px}.profil[_ngcontent-%COMP%]{background-color:#0672e4;padding:0 12px;border-radius:4px;cursor:pointer}.profil[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#fff}.menu[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:17px;cursor:pointer}.menu[_ngcontent-%COMP%]{position:relative;cursor:pointer}.menu[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background:#fff;border:1px solid #e1e1e1;border-radius:4px;box-shadow:0 4px 12px #0000001a;z-index:1000;min-width:200px;margin-top:8px;overflow:hidden}.menu[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{padding:10px 16px;display:flex;align-items:center;gap:12px;font-size:12px;color:#333;transition:all .2s;cursor:pointer}.menu[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:hover{background:#f5f7fa}.menu[_ngcontent-%COMP%]   .menu-dropdown[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#64748b}.commande-popup[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;width:300px;background:#fff;border:1px solid #e0e0e0;border-radius:8px;box-shadow:0 4px 12px #0000001a;z-index:1000;margin-top:8px}.commande-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #f0f0f0}.commande-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600}.commande-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;font-size:20px;color:#666}.commande-popup[_ngcontent-%COMP%]   .popup-commandes[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;max-height:300px;overflow-y:auto}.commande-popup[_ngcontent-%COMP%]   .popup-commandes[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;cursor:pointer;border-bottom:1px solid #f8f8f8;transition:background .2s}.commande-popup[_ngcontent-%COMP%]   .popup-commandes[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#f4f4f4}.commande-popup[_ngcontent-%COMP%]   .popup-commandes[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:#e6f4ff;color:#1890ff}.commande-popup[_ngcontent-%COMP%]   .popup-commandes[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#999}.commande-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:10000}.commande-popup-content[_ngcontent-%COMP%]{background:#fff;border-radius:12px;width:90%;max-width:800px;max-height:80vh;overflow-y:auto;box-shadow:0 10px 30px #0000004d}.commande-popup-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.commande-popup-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0003;border-radius:3px}.commande-popup-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:5px 20px;border-bottom:1px solid #eee;position:sticky;top:0;background:#fff;z-index:10}.popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:600;color:#333}.popup-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;cursor:pointer;color:#666;transition:color .2s}.popup-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.popup-commandes[_ngcontent-%COMP%]{padding:15px}.popup-commandes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.popup-commandes[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:12px 15px;border-radius:6px;margin-bottom:8px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:all .2s;border:1px solid #f0f0f0}.popup-commandes[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#f8f9fa;border-color:#e0e0e0}.popup-commandes[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#e6f4ff;border-color:#91caff;color:#1890ff;font-weight:500}.popup-commandes[_ngcontent-%COMP%]   .commandes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(65px,1fr));gap:10px;padding:0;margin:0;list-style:none}.popup-commandes[_ngcontent-%COMP%]   .commandes-grid[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f8f8f8;border:1px solid #e0e0e0;border-radius:6px;cursor:pointer;transition:all .2s;text-align:center;margin-bottom:0!important;display:flex;align-items:center;justify-content:center}.popup-commandes[_ngcontent-%COMP%]   .commandes-grid[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}.popup-commandes[_ngcontent-%COMP%]   .commandes-grid[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background-color:#cde3fa;border-color:#a0c5f0;color:#1a73e8;font-weight:700}[draggable][_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.popup-header[_ngcontent-%COMP%]{cursor:move}.caisse-info-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin-bottom:20px;padding-bottom:15px;border-bottom:1px solid #eee}.caisse-info-header[_ngcontent-%COMP%]   .profil[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:#4e73df;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:18px}.caisse-info-header[_ngcontent-%COMP%]   .caisse-info-title[_ngcontent-%COMP%]{font-weight:600;font-size:18px}.caisse-info-header[_ngcontent-%COMP%]   .caisse-info-subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:14px}.caisse-details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:15px}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.detail-label[_ngcontent-%COMP%]{font-size:13px;color:#6c757d;margin-bottom:4px}.detail-value[_ngcontent-%COMP%]{font-weight:500;font-size:14px;word-break:break-word}.text-success-status[_ngcontent-%COMP%]{color:green!important;font-weight:600}.text-danger[_ngcontent-%COMP%]{color:#dc3545;font-weight:600}.popup-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:15px;border-top:1px solid #eee;margin-top:15px}.popup-footer[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:500;transition:all .2s}.popup-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;color:#495057}.popup-footer[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background:#e9ecef}.popup-footer[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none}.popup-footer[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]:hover{background:#c82333}.popup-footer[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]:disabled{background:#e99ba4;cursor:not-allowed}.loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:20px;color:#6c757d}.loading-indicator[_ngcontent-%COMP%]   .spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:10px;font-size:20px}.error-message[_ngcontent-%COMP%]{padding:10px;background:#f8d7da;color:#721c24;border-radius:4px;margin-top:15px;display:flex;align-items:center}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;font-size:18px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.popup-body[_ngcontent-%COMP%]{padding:20px}.boutique-loading[_ngcontent-%COMP%]{opacity:.6;font-size:14px;color:#666}.spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite;display:inline-block;vertical-align:middle}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}']})}}return a})()},37788:(k,P,u)=>{u.d(P,{j:()=>c});var d=u(84412),_=u(54438);let c=(()=>{class m{constructor(){this.STORAGE_KEY="selectedBoutiqueId",this.selectedBoutiqueSubject=new d.t(this.loadInitial()),this.selectedBoutique$=this.selectedBoutiqueSubject.asObservable()}loadInitial(){const g=localStorage.getItem(this.STORAGE_KEY);if(null!==g){try{sessionStorage.setItem(this.STORAGE_KEY,g)}catch(O){console.warn("Impossible de migrer la boutique depuis localStorage",O)}localStorage.removeItem(this.STORAGE_KEY)}const e=sessionStorage.getItem(this.STORAGE_KEY);return null!==e?Number(e):null}setSelectedBoutique(g){null!==g?sessionStorage.setItem(this.STORAGE_KEY,g.toString()):sessionStorage.removeItem(this.STORAGE_KEY),this.selectedBoutiqueSubject.next(g)}getCurrentValue(){const g=sessionStorage.getItem(this.STORAGE_KEY);return null!==g?Number(g):null}static{this.\u0275fac=function(e){return new(e||m)}}static{this.\u0275prov=_.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}}return m})()},74864:(k,P,u)=>{u.d(P,{U:()=>C});var d=u(21626),_=u(22525),c=u(18810),m=u(25558),v=u(99437),g=u(96354),e=u(54438),O=u(88026);let C=(()=>{class E{constructor(o,n){this.http=o,this.usersService=n,this.apiUrl=_.c.apiBaseUrl}ouvrirCaisse(o){return this.usersService.getValidAccessToken().pipe((0,m.n)(n=>{if(!n)throw new Error("Aucun token trouv\xe9");const r=new d.Lr({Authorization:`Bearer ${n}`});return this.http.post(`${this.apiUrl}/ouvrir`,o,{headers:r})}),(0,v.W)(n=>{console.error("Erreur d\xe9taill\xe9e",n);let r="Erreur lors de l'ouverture de la caisse";return n.error&&n.error.error?r=n.error.error:n.error&&n.error.message?r=n.error.message:n.message&&(r=n.message),(0,c.$)(()=>({message:r,originalError:n}))}))}fermerCaisse(o){return console.log("Tentative de r\xe9cup\xe9ration du token..."),this.usersService.getValidAccessToken().pipe((0,m.n)(n=>{if(!n)throw console.error("Aucun token trouv\xe9"),new Error("Aucun token trouv\xe9");console.log("Token r\xe9cup\xe9r\xe9 :",n);const r=new d.Lr({Authorization:`Bearer ${n}`}),M={boutiqueId:o};return console.log("Envoi de la requ\xeate POST pour fermer la caisse..."),this.http.post(`${this.apiUrl}/fermer`,M,{headers:r}).pipe((0,v.W)(x=>(console.error("Erreur lors de la requ\xeate pour fermer la caisse:",x),(0,c.$)(()=>x))))}),(0,v.W)(n=>{console.error("Erreur d\xe9taill\xe9e dans le service:",n);let r="Erreur lors de la fermeture de la caisse";return n.error&&n.error.error?r=n.error.error:n.error&&n.error.message?r=n.error.message:n.message&&(r=n.message),(0,c.$)(()=>({message:r,originalError:n}))}))}getDerniereCaisseVendeur(o){return this.usersService.getValidAccessToken().pipe((0,m.n)(n=>{if(!n)throw new Error("Aucun token trouv\xe9");const r=new d.Lr({Authorization:`Bearer ${n}`});return this.http.get(`${this.apiUrl}/caisse/derniere/${o}`,{headers:r,responseType:"text"}).pipe((0,g.T)(M=>{try{return JSON.parse(M)}catch{throw new Error(M||"R\xe9ponse serveur invalide")}}))}),(0,v.W)(n=>{let r="Erreur lors du chargement de la derni\xe8re caisse";return n instanceof Error?r=n.message:n?.error&&(r=n.error),(0,c.$)(()=>new Error(r))}))}getCaissesByBoutique(o){return this.usersService.getValidAccessToken().pipe((0,m.n)(n=>{if(!n)throw new Error("Aucun token trouv\xe9");const r=new d.Lr({Authorization:`Bearer ${n}`});return this.http.get(`${this.apiUrl}/boutique/${o}/caisses`,{headers:r})}),(0,v.W)(n=>{let r="Erreur lors du chargement des caisses";return n?.error?.error?r=n.error.error:n?.error?.message?r=n.error.message:n.message&&(r=n.message),(0,c.$)(()=>({message:r,originalError:n}))}))}getHistoriqueCaissesByVendeur(o){return this.usersService.getValidAccessToken().pipe((0,m.n)(n=>{if(!n)throw new Error("Aucun token trouv\xe9");const r=new d.Lr({Authorization:`Bearer ${n}`});return this.http.get(`${this.apiUrl}/vendeur/${o}`,{headers:r})}),(0,v.W)(n=>{let r="Erreur lors du chargement de l'historique des caisses";return n?.error?.error?r=n.error.error:n?.error?.message?r=n.error.message:n.message&&(r=n.message),(0,c.$)(()=>({message:r,originalError:n}))}))}static{this.\u0275fac=function(n){return new(n||E)(e.KVO(d.Qq),e.KVO(O.g))}}static{this.\u0275prov=e.jDH({token:E,factory:E.\u0275fac,providedIn:"root"})}}return E})()},52719:(k,P,u)=>{u.d(P,{c:()=>O});var d=u(21626),_=u(25558),c=u(18810),m=u(99437),v=u(22525),g=u(54438),e=u(88026);let O=(()=>{class C{constructor(l,o){this.http=l,this.usersService=o,this.apiUrl=v.c.apiBaseUrl}updateBoutique(l,o){return this.usersService.getValidAccessToken().pipe((0,_.n)(n=>{if(!n)return console.error("Aucun token trouv\xe9"),(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const r=new d.Lr({Authorization:`Bearer ${n}`});return this.http.put(`${this.apiUrl}/updatedBoutique/${l}`,o,{headers:r})}),(0,m.W)(n=>(console.error("Erreur lors de la mise \xe0 jour de la boutique:",n),(0,c.$)(()=>n))))}getBoutiquesByEntreprise(){return this.usersService.getValidAccessToken().pipe((0,_.n)(l=>{if(!l)return console.error("Aucun token trouv\xe9"),(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const o=new d.Lr({Authorization:`Bearer ${l}`});return this.http.get(`${this.apiUrl}/boutiqueEntreprise`,{headers:o})}),(0,m.W)(l=>(console.error("Erreur lors de la r\xe9cup\xe9ration des boutiques:",l),(0,c.$)(()=>l))))}getBoutiqueById(l){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{if(!o)return console.error("Aucun token trouv\xe9"),(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const n=new d.Lr({Authorization:`Bearer ${o}`});return this.http.get(`${this.apiUrl}/boutique/${l}`,{headers:n})}),(0,m.W)(o=>(console.error("Erreur lors de la r\xe9cup\xe9ration de la boutique:",o),(0,c.$)(()=>o))))}activerBoutique(l){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{if(!o)return console.error("Aucun token trouv\xe9"),(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const n=new d.Lr({Authorization:`Bearer ${o}`});return this.http.put(`${this.apiUrl}/activerBoutique/${l}`,{},{headers:n})}),(0,m.W)(o=>(console.error("Erreur lors de l'activation de la boutique:",o),(0,c.$)(()=>o))))}desactiverBoutique(l){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{if(!o)return console.error("Aucun token trouv\xe9"),(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const n=new d.Lr({Authorization:`Bearer ${o}`});return this.http.put(`${this.apiUrl}/desactiverBoutique/${l}`,{},{headers:n})}),(0,m.W)(o=>(console.error("Erreur lors de la d\xe9sactivation de la boutique:",o),(0,c.$)(()=>o))))}deleteBoutique(l){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{if(!o)return console.error("Aucun token trouv\xe9"),(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const n=new d.Lr({Authorization:`Bearer ${o}`});return this.http.delete(`${this.apiUrl}/boutique/${l}`,{headers:n})}),(0,m.W)(o=>(console.error("Erreur lors de la suppression de la boutique:",o),(0,c.$)(()=>o))))}getProductsByBoutiqueId(l){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{if(!o)return console.error("Aucun token trouv\xe9"),(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const n=new d.Lr({Authorization:`Bearer ${o}`});return this.http.get(`${this.apiUrl}/boutique/${l}/produits`,{headers:n})}),(0,m.W)(o=>(console.error("Erreur lors de la r\xe9cup\xe9ration des produits:",o),(0,c.$)(()=>o))))}copierProduits(l){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{if(!o)return(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const n=new d.Lr({Authorization:`Bearer ${o}`});return this.http.post(`${this.apiUrl}/copier-produits`,l,{headers:n,responseType:"json"})}),(0,m.W)(o=>{if(o.error&&"string"==typeof o.error)try{const n=JSON.parse(o.error);return(0,c.$)(()=>n)}catch{return(0,c.$)(()=>({message:o.error}))}return(0,c.$)(()=>o)}))}mettreEnCorbeille(l){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{if(!o)return(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const n=new d.Lr({Authorization:`Bearer ${o}`});return this.http.delete(`${this.apiUrl}/corbeille/${l}`,{headers:n})}),(0,m.W)(o=>{let n="Erreur lors de la mise en corbeille";return o.error?.message?n=o.error.message:o.message&&(n=o.message),(0,c.$)(()=>new Error(n))}))}associateUserToBoutique(l,o){return this.http.post(`${this.apiUrl}/boutiques/${l}/users/${o}`,{})}assignerVendeur(l){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{if(!o)return console.error("Aucun token trouv\xe9"),(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const n=new d.Lr({Authorization:`Bearer ${o}`});return this.http.post(`${this.apiUrl}/assigner-vendeur`,l,{headers:n})}),(0,m.W)(o=>(console.error("Erreur lors de l'assignation du vendeur:",o),(0,c.$)(()=>o))))}retirerVendeur(l){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{if(!o)return console.error("Aucun token trouv\xe9"),(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const n=new d.Lr({Authorization:`Bearer ${o}`});return this.http.post(`${this.apiUrl}/retirer-vendeur`,l,{headers:n})}),(0,m.W)(o=>(console.error("Erreur lors de l'assignation du vendeur:",o),(0,c.$)(()=>o))))}getVendeursDeBoutique(l){return this.usersService.getValidAccessToken().pipe((0,_.n)(o=>{if(!o)return console.error("Aucun token trouv\xe9"),(0,c.$)(()=>new Error("Aucun token trouv\xe9"));const n=new d.Lr({Authorization:`Bearer ${o}`});return this.http.get(`${this.apiUrl}/vendeurs/${l}`,{headers:n}).pipe((0,m.W)(r=>(console.error("Erreur lors de la r\xe9cup\xe9ration des vendeurs:",r),(0,c.$)(()=>r))))}))}static{this.\u0275fac=function(o){return new(o||C)(g.KVO(d.Qq),g.KVO(e.g))}}static{this.\u0275prov=g.jDH({token:C,factory:C.\u0275fac,providedIn:"root"})}}return C})()}}]);