"use strict";(self.webpackChunkskeleton=self.webpackChunkskeleton||[]).push([[8399],{8399:(I,F,l)=>{l.r(F),l.d(F,{PosVenteComponent:()=>xe});var g=l(177),u=l(9417),P=l(2525);class C{constructor(r={}){Object.assign(this,r)}}var h=l(7673),M=l(4412),E=l(6697),b=l(5558),k=l(8810),j=l(4572),v=l(9172),V=l(6354),a=l(980),p=l(850),_=l(8250),x=l(1731),t=l(4438),D=l(9192),R=l(145),G=l(9293),$=l(7022),w=l(7746),A=l(8026),N=l(345),S=l(2120),X=l(6375),B=l(4413),Y=l(7788),L=l(3);const O=i=>({transform:i}),z=()=>({standalone:!0});function K(i,r){if(1&i){const e=t.RV6();t.j41(0,"li",48),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.selectCategory(n.id))}),t.j41(1,"div",49)(2,"span"),t.EFF(3),t.k0s()(),t.j41(4,"div",50),t.EFF(5),t.k0s()()}if(2&i){const e=r.$implicit,o=t.XpG(2);t.AVh("selected",o.selectedCategoryId===e.id),t.R7$(3),t.JRh(e.nom),t.R7$(2),t.SpI(" ",e.produitCount||0," ")}}function q(i,r){if(1&i&&(t.j41(0,"ul",46),t.DNE(1,K,6,4,"li",47),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.categories)}}function U(i,r){if(1&i&&(t.j41(0,"span",64),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(),t.SpI(" ",o.getSelectedQuantity(e.id)," ")}}function Q(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",54),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.addToCart(n))})("pointerdown",function(n){const s=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.startPress(n,s))})("pointerup",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.endPress())})("pointerleave",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.endPress())}),t.DNE(1,U,2,1,"span",55),t.nrm(2,"img",56),t.j41(3,"div",57)(4,"p",58),t.EFF(5),t.k0s(),t.j41(6,"p",59),t.EFF(7),t.k0s()(),t.j41(8,"div",60)(9,"div",61)(10,"p"),t.EFF(11),t.nI1(12,"cfaCurrency"),t.k0s()(),t.j41(13,"button",62),t.bIt("click",function(n){const s=t.eBV(e).$implicit;return t.XpG(2).decreaseQuantity(s),t.Njj(n.stopPropagation())}),t.nrm(14,"i",63),t.k0s()()()}if(2&i){const e=r.$implicit,o=t.XpG(2);t.AVh("disabled",o.getAvailableStock(e)<=0),t.R7$(),t.Y8G("ngIf",o.getSelectedQuantity(e.id)>0),t.R7$(),t.Y8G("src",o.getProductImage(e.photo),t.B4B),t.R7$(3),t.JRh(e.nom),t.R7$(2),t.SpI("Stocks : ",o.getAvailableStock(e),""),t.R7$(4),t.JRh(t.bMT(12,7,e.prixVente))}}function J(i,r){1&i&&(t.j41(0,"div",65),t.nrm(1,"i",66),t.EFF(2," Chargement des produits... "),t.k0s())}function W(i,r){if(1&i&&(t.j41(0,"div",51),t.DNE(1,Q,15,9,"div",52)(2,J,3,0,"div",53),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.Y8G("ngForOf",e.displayedProducts),t.R7$(),t.Y8G("ngIf",!e.categories.length)}}function H(i,r){if(1&i&&(t.j41(0,"span",85),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,o=t.XpG(2);t.R7$(),t.SpI(" ",o.getSelectedQuantity(e.id)," ")}}function Z(i,r){if(1&i){const e=t.RV6();t.j41(0,"li",71),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.addToCart(n))})("pointerdown",function(n){const s=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.startPress(n,s))})("pointerup",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.endPress())})("pointerleave",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.endPress())}),t.j41(1,"div",72)(2,"div",73)(3,"div",74),t.nrm(4,"img",75),t.k0s(),t.j41(5,"div",76)(6,"p",77),t.EFF(7),t.k0s(),t.j41(8,"p",78),t.EFF(9),t.k0s()()()(),t.j41(10,"div",79)(11,"div",80)(12,"div",61)(13,"p"),t.EFF(14),t.nI1(15,"cfaCurrency"),t.k0s()(),t.j41(16,"div",81),t.DNE(17,H,2,1,"span",82),t.k0s(),t.j41(18,"button",62),t.bIt("click",function(n){const s=t.eBV(e).$implicit;return t.XpG(2).decreaseQuantity(s),t.Njj(n.stopPropagation())}),t.nrm(19,"i",63),t.k0s(),t.j41(20,"div",83),t.nrm(21,"i",84),t.k0s()()()()}if(2&i){const e=r.$implicit,o=t.XpG(2);t.AVh("disabled",o.getAvailableStock(e)<=0),t.R7$(4),t.Y8G("src",o.getProductImage(e.photo),t.B4B),t.R7$(3),t.JRh(e.nom),t.R7$(2),t.SpI("Stocks : ",o.getAvailableStock(e),""),t.R7$(5),t.JRh(t.bMT(15,7,e.prixVente)),t.R7$(3),t.Y8G("ngIf",o.getSelectedQuantity(e.id)>0)}}function tt(i,r){1&i&&(t.j41(0,"div",86),t.EFF(1," Aucun produit dans cette cat\xe9gorie "),t.k0s())}function et(i,r){if(1&i&&(t.j41(0,"div",67)(1,"ul",68),t.DNE(2,Z,22,9,"li",69),t.k0s(),t.DNE(3,tt,2,0,"div",70),t.k0s()),2&i){const e=t.XpG();t.R7$(2),t.Y8G("ngForOf",e.displayedProducts),t.R7$(),t.Y8G("ngIf",0===e.displayedProducts.length&&e.categories.length)}}function nt(i,r){if(1&i&&(t.j41(0,"span",96),t.EFF(1),t.nI1(2,"cfaCurrency"),t.k0s()),2&i){const e=t.XpG().$implicit,o=t.XpG();t.R7$(),t.SpI(" ",t.bMT(2,1,o.getProductDiscount(e.product.id))," ")}}function ot(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",97),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG();return t.Njj(s.removeProduct(n.product.id))}),t.nrm(1,"i",98),t.k0s()}}function it(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",99),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG();return t.Njj(s.isEditingDiscount(n.product.id)?s.saveDiscount(n.product):s.editDiscount(n.product))}),t.nrm(1,"i"),t.k0s()}if(2&i){const e=t.XpG().$implicit,o=t.XpG();t.R7$(),t.HbH(o.isEditingDiscount(e.product.id)?"ri-check-fill":"ri-edit-2-line")}}function st(i,r){if(1&i){const e=t.RV6();t.j41(0,"li",87),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.selectProductForDiscount(n.product))}),t.j41(1,"div",88)(2,"div",89),t.EFF(3),t.k0s(),t.j41(4,"div",90)(5,"p",91),t.EFF(6),t.j41(7,"span"),t.EFF(8),t.nI1(9,"cfaCurrency"),t.k0s(),t.DNE(10,nt,3,3,"span",92),t.k0s()()(),t.j41(11,"div",88)(12,"div",93),t.EFF(13),t.nI1(14,"cfaCurrency"),t.k0s(),t.DNE(15,ot,2,0,"div",94)(16,it,2,2,"div",95),t.k0s()()}if(2&i){const e=r.$implicit,o=t.XpG();t.R7$(3),t.SpI(" ",e.quantity," "),t.R7$(3),t.SpI(" ",e.product.nom," "),t.R7$(2),t.SpI("(",t.bMT(9,7,e.product.prixVente),")"),t.R7$(2),t.Y8G("ngIf",o.getProductDiscount(e.product.id)>0),t.R7$(3),t.SpI(" ",t.bMT(14,9,o.calculateItemTotal(e))," "),t.R7$(2),t.Y8G("ngIf","discount"!==o.inputMode&&!o.isEditingDiscount(e.product.id)),t.R7$(),t.Y8G("ngIf","discount"===o.inputMode)}}function rt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",100)(1,"button",101),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.setDiscountType("CFA"))}),t.EFF(2," CFA "),t.k0s(),t.j41(3,"input",102),t.bIt("input",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.onDiscountInputChange(n))})("focus",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.disablePhysicalKeyboard=!0)})("blur",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.disablePhysicalKeyboard=!1)}),t.k0s(),t.j41(4,"button",103),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.setDiscountType("%"))}),t.EFF(5," % "),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(),t.AVh("active","CFA"===e.discountMode.type),t.R7$(2),t.Y8G("value",e.currentDiscountInput),t.R7$(),t.AVh("active","%"===e.discountMode.type)}}function ct(i,r){1&i&&(t.j41(0,"p"),t.EFF(1,"Client"),t.k0s())}function lt(i,r){if(1&i&&(t.j41(0,"div",104)(1,"span"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.JRh(e.selectedClient.nomComplet||"Client")}}function pt(i,r){if(1&i&&(t.j41(0,"div",104)(1,"span"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG();t.R7$(2),t.JRh(e.selectedEntreprise.nom||"Entreprise")}}function at(i,r){if(1&i){const e=t.RV6();t.j41(0,"span",105),t.bIt("click",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.clearCustomerSelection(n))}),t.nrm(1,"i",106),t.k0s()}}function dt(i,r){if(1&i&&(t.j41(0,"div",140),t.EFF(1),t.nI1(2,"cfaCurrency"),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.SpI(" ",t.bMT(2,1,e.getSubtotal())," ")}}function ut(i,r){if(1&i&&(t.j41(0,"div",23)(1,"span"),t.EFF(2,"Remise(s) produit"),t.k0s(),t.j41(3,"span"),t.EFF(4),t.nI1(5,"cfaCurrency"),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(4),t.SpI("-",t.bMT(5,1,e.getTotalDiscount()),"")}}function _t(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",100)(1,"button",101),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.setGlobalDiscountType("CFA"))}),t.EFF(2," CFA "),t.k0s(),t.j41(3,"input",141),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG(2);return t.DH7(s.globalDiscount.value,n)||(s.globalDiscount.value=n),t.Njj(n)}),t.bIt("input",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.onGlobalDiscountInputChange())}),t.k0s(),t.j41(4,"button",103),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.setGlobalDiscountType("%"))}),t.EFF(5," % "),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(),t.AVh("active","CFA"===e.globalDiscount.type),t.R7$(2),t.R50("ngModel",e.globalDiscount.value),t.R7$(),t.AVh("active","%"===e.globalDiscount.type)}}function mt(i,r){1&i&&(t.j41(0,"p"),t.EFF(1,"Client"),t.k0s())}function gt(i,r){if(1&i&&(t.j41(0,"div",104)(1,"span"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.JRh(e.selectedClient.nomComplet||"Client")}}function ft(i,r){if(1&i&&(t.j41(0,"div",104)(1,"span"),t.EFF(2),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.JRh(e.selectedEntreprise.nom||"Entreprise")}}function ht(i,r){if(1&i){const e=t.RV6();t.j41(0,"span",105),t.bIt("click",function(n){t.eBV(e);const s=t.XpG(2);return t.Njj(s.clearCustomerSelection(n))}),t.nrm(1,"i",106),t.k0s()}}function Pt(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Valider Paiement"),t.k0s())}function Ct(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"En cours\u2026"),t.k0s())}function bt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",107)(1,"div",108),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())}),t.j41(2,"div",109),t.bIt("mousedown",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.startDrag(n))}),t.j41(3,"button",110),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closePaymentPopup())}),t.nrm(4,"i",106),t.k0s()(),t.j41(5,"div",111)(6,"div",112)(7,"div",113)(8,"div",114)(9,"h1"),t.EFF(10),t.nI1(11,"cfaCurrency"),t.k0s(),t.j41(12,"span"),t.EFF(13,"CFA"),t.k0s(),t.DNE(14,dt,3,3,"div",115),t.k0s(),t.j41(15,"div",116)(16,"div",117)(17,"p"),t.EFF(18),t.k0s()(),t.j41(19,"div",118)(20,"div",119)(21,"p"),t.EFF(22),t.nI1(23,"cfaCurrency"),t.k0s(),t.j41(24,"i",120),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return n.enteredAmount="",t.Njj(n.calculatePayment())}),t.k0s()()()(),t.j41(25,"div",121)(26,"div",122)(27,"p"),t.EFF(28),t.k0s()(),t.j41(29,"div",118)(30,"div",119)(31,"p"),t.EFF(32),t.nI1(33,"cfaCurrency"),t.k0s()()()(),t.j41(34,"div",22),t.DNE(35,ut,6,3,"div",123),t.j41(36,"div"),t.DNE(37,_t,6,5,"div",25),t.j41(38,"p",124),t.EFF(39,"Remise globale"),t.k0s()(),t.j41(40,"div",24)(41,"strong"),t.EFF(42,"Total"),t.k0s(),t.j41(43,"strong"),t.EFF(44),t.nI1(45,"cfaCurrency"),t.k0s()()(),t.j41(46,"div",125)(47,"p"),t.EFF(48,"Remise sur produit"),t.k0s()()()(),t.j41(49,"div",126)(50,"div",19)(51,"div",127)(52,"div",128),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.selectPaymentMethod("Esp\xe8ces"))}),t.j41(53,"div",129),t.nrm(54,"img",130),t.k0s(),t.j41(55,"div",131)(56,"p"),t.EFF(57,"Esp\xe8ces"),t.k0s()()(),t.j41(58,"div",128),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.selectPaymentMethod("Carte"))}),t.j41(59,"div",132),t.nrm(60,"img",133),t.k0s(),t.j41(61,"div",131)(62,"p"),t.EFF(63,"Carte"),t.k0s()()(),t.j41(64,"div",128),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.selectPaymentMethod("Compte client"))}),t.j41(65,"div",134),t.nrm(66,"img",135),t.k0s(),t.j41(67,"div",131)(68,"p"),t.EFF(69,"Compte client"),t.k0s()()()()(),t.j41(70,"div",136)(71,"div",27)(72,"div",28),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.openListClientPopup())}),t.DNE(73,mt,2,0,"p",29)(74,gt,3,1,"div",30)(75,ft,3,1,"div",30)(76,ht,2,0,"span",31),t.k0s(),t.j41(77,"button",137),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.toggleGlobalDiscount())}),t.EFF(78),t.k0s()()(),t.j41(79,"div",138)(80,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("1"))}),t.EFF(81,"1"),t.k0s(),t.j41(82,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("2"))}),t.EFF(83,"2"),t.k0s(),t.j41(84,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("3"))}),t.EFF(85,"3"),t.k0s(),t.j41(86,"button"),t.EFF(87,"Qt\xe9"),t.k0s(),t.j41(88,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("4"))}),t.EFF(89,"4"),t.k0s(),t.j41(90,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("5"))}),t.EFF(91,"5"),t.k0s(),t.j41(92,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("6"))}),t.EFF(93,"6"),t.k0s(),t.j41(94,"button"),t.EFF(95,"%"),t.k0s(),t.j41(96,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("7"))}),t.EFF(97,"7"),t.k0s(),t.j41(98,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("8"))}),t.EFF(99,"8"),t.k0s(),t.j41(100,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("9"))}),t.EFF(101,"9"),t.k0s(),t.j41(102,"button"),t.EFF(103,"Prix"),t.k0s(),t.j41(104,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("+/-"))}),t.EFF(105,"+/-"),t.k0s(),t.j41(106,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("0"))}),t.EFF(107,"0"),t.k0s(),t.j41(108,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress(","))}),t.EFF(109,","),t.k0s(),t.j41(110,"button",38),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.handlePaymentKeyPress("backspace"))}),t.nrm(111,"i",39),t.k0s()(),t.j41(112,"div",40)(113,"button",139),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.completePayment())}),t.DNE(114,Pt,2,0,"span",29)(115,Ct,2,0,"span",29),t.k0s()()()()()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("ngStyle",t.eq3(38,O,"translate3d("+e.popupOffset.x+"px, "+e.popupOffset.y+"px, 0)")),t.R7$(9),t.JRh(t.bMT(11,30,e.getTotalCart())),t.R7$(4),t.Y8G("ngIf",e.getTotalDiscount()>0||e.globalDiscount.active),t.R7$(4),t.JRh(e.selectedPaymentMethod),t.R7$(4),t.JRh(t.bMT(23,32,e.paymentAmount)),t.R7$(5),t.xc7("color",e.paymentAmount>=e.totalAmount?"#008000":"#ff0000"),t.R7$(),t.SpI(" ",e.paymentAmount>=e.totalAmount?"Monnaie":"Restant"," "),t.R7$(3),t.xc7("color",e.paymentAmount>=e.totalAmount?"#008000":"#ff0000"),t.R7$(),t.SpI(" ",t.bMT(33,34,e.changeDue)," "),t.R7$(3),t.Y8G("ngIf",e.getTotalDiscount()>0),t.R7$(2),t.Y8G("ngIf",e.globalDiscount.active),t.R7$(7),t.JRh(t.bMT(45,36,e.getTotalCart())),t.R7$(8),t.AVh("selected_mode_pay","Esp\xe8ces"===e.selectedPaymentMethod),t.R7$(6),t.AVh("selected_mode_pay","card"===e.selectedPaymentMethod),t.R7$(6),t.AVh("selected_mode_pay","account"===e.selectedPaymentMethod),t.R7$(9),t.Y8G("ngIf",!e.selectedClient&&!e.selectedEntreprise),t.R7$(),t.Y8G("ngIf",e.selectedClient),t.R7$(),t.Y8G("ngIf",e.selectedEntreprise),t.R7$(),t.Y8G("ngIf",e.selectedClient||e.selectedEntreprise),t.R7$(),t.AVh("global-active",e.globalDiscount.active),t.R7$(),t.SpI(" ",e.globalDiscount.active?"Annuler Globale":"Remise Globale"," "),t.R7$(35),t.Y8G("disabled",!e.isAmountEntered||e.isSubmittingVente),t.R7$(),t.Y8G("ngIf",!e.isSubmittingVente),t.R7$(),t.Y8G("ngIf",e.isSubmittingVente)}}function vt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",109),t.bIt("mousedown",function(n){t.eBV(e);const s=t.XpG(2);return t.Njj(s.startDrag(n))}),t.j41(1,"h3"),t.EFF(2),t.k0s(),t.j41(3,"button",110),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.closeDetailPopup())}),t.nrm(4,"i",106),t.k0s()()}if(2&i){const e=t.XpG(2);t.R7$(2),t.SpI("Information [",e.selectedProductForDetail.codeGenerique,"]")}}function xt(i,r){1&i&&(t.qex(0),t.EFF(1,"\u26a0\ufe0f"),t.bVm())}function Mt(i,r){if(1&i&&(t.j41(0,"div",153)(1,"span",154),t.EFF(2,"Code barre"),t.k0s(),t.j41(3,"span",155),t.nrm(4,"ngx-barcode6",160),t.k0s()()),2&i){const e=t.XpG(3);t.R7$(4),t.Y8G("bc-value",e.selectedProductForDetail.codeBare)("bc-line-color","#000000")("bc-width",1)("bc-height",30)("bc-font-size",10)("bc-display-value",!0)}}function kt(i,r){if(1&i&&(t.j41(0,"div",148)(1,"div",149),t.nrm(2,"img",150),t.k0s(),t.j41(3,"div",151)(4,"div",152)(5,"div",153)(6,"span",154),t.EFF(7,"Nom produit"),t.k0s(),t.j41(8,"span",155),t.EFF(9),t.k0s()(),t.j41(10,"div",153)(11,"span",154),t.EFF(12,"Prix de vente"),t.k0s(),t.j41(13,"span",155),t.EFF(14),t.nI1(15,"number"),t.k0s()(),t.j41(16,"div",153)(17,"span",154),t.EFF(18,"Cat\xe9gorie"),t.k0s(),t.j41(19,"span",155),t.EFF(20),t.k0s()(),t.j41(21,"div",153)(22,"span",154),t.EFF(23,"Unit\xe9 de mesure"),t.k0s(),t.j41(24,"span",155),t.EFF(25),t.k0s()()(),t.j41(26,"div",156)(27,"div",153)(28,"span",154),t.EFF(29,"Stocks actuel"),t.k0s(),t.j41(30,"span",157),t.EFF(31),t.DNE(32,xt,2,0,"ng-container",29),t.k0s()(),t.j41(33,"div",153)(34,"span",154),t.EFF(35,"Boutique"),t.k0s(),t.j41(36,"span",155),t.EFF(37),t.k0s()(),t.j41(38,"div",153)(39,"span",154),t.EFF(40,"Code"),t.k0s(),t.j41(41,"span",155),t.EFF(42),t.k0s()(),t.DNE(43,Mt,5,6,"div",158),t.k0s()(),t.j41(44,"div",159)(45,"span",154),t.EFF(46,"Description:"),t.k0s(),t.nrm(47,"br"),t.EFF(48),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.Y8G("src",e.selectedProductForDetail?e.getProductImage(e.selectedProductForDetail.photo):"",t.B4B),t.R7$(7),t.JRh(e.selectedProductForDetail.nom),t.R7$(5),t.SpI("",t.bMT(15,12,e.selectedProductForDetail.prixVente)," CFA"),t.R7$(6),t.JRh(e.selectedProductForDetail.nomCategorie),t.R7$(5),t.JRh(e.selectedProductForDetail.nomUnite),t.R7$(5),t.Y8G("ngClass",e.getQuantiteClass(e.selectedProductForDetail)),t.R7$(),t.SpI(" ",e.getQuantiteDansBoutiqueCourante(e.selectedProductForDetail)," "),t.R7$(),t.Y8G("ngIf",e.isQuantiteCritique(e.selectedProductForDetail)),t.R7$(5),t.JRh(e.getNomBoutiqueCourante(e.selectedProductForDetail)),t.R7$(5),t.JRh(e.selectedProductForDetail.codeGenerique),t.R7$(),t.Y8G("ngIf",e.selectedProductForDetail.codeBare),t.R7$(5),t.SpI(" ",e.selectedProductForDetail.description||"Pas de description"," ")}}function yt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",142)(1,"div",143),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())}),t.DNE(2,vt,5,1,"div",144)(3,kt,49,14,"div",145),t.j41(4,"div",146)(5,"button",147),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return n.addToCart(n.selectedProductForDetail),t.Njj(n.closeDetailPopup())}),t.EFF(6," Ajouter au panier "),t.k0s()()()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("ngStyle",t.eq3(3,O,"translate3d("+e.popupOffset.x+"px, "+e.popupOffset.y+"px, 0)")),t.R7$(),t.Y8G("ngIf",e.showDetailPopup&&e.selectedProductForDetail),t.R7$(),t.Y8G("ngIf",e.showDetailPopup&&e.selectedProductForDetail)}}function Ft(i,r){if(1&i&&t.nrm(0,"span",180),2&i){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("innerHTML",o.highlightMatch(e.nomComplet),t.npT)}}function Ot(i,r){1&i&&(t.j41(0,"span",181),t.EFF(1,"Nom est vide"),t.k0s())}function Et(i,r){if(1&i&&(t.j41(0,"span",180),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("innerHTML",o.highlightMatch(e.email),t.npT),t.R7$(),t.JRh(e.email)}}function jt(i,r){1&i&&(t.j41(0,"span",181),t.EFF(1,"Non email"),t.k0s())}function Vt(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.adresse)}}function Tt(i,r){1&i&&(t.j41(0,"span",181),t.EFF(1,"Non adresse"),t.k0s())}function It(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.telephone)}}function Dt(i,r){1&i&&(t.j41(0,"span",181),t.EFF(1,"Non num\xe9ro de t\xe9l\xe9phone"),t.k0s())}function Rt(i,r){1&i&&(t.j41(0,"div",182),t.nrm(1,"i",183),t.k0s())}function Gt(i,r){}function $t(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.createdAt,"dd/MM/yyyy"))}}function wt(i,r){1&i&&(t.j41(0,"span",181),t.EFF(1,"Non date"),t.k0s())}function At(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr",36),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.selectClient(n))}),t.j41(1,"td")(2,"div",175),t.nrm(3,"img",176),t.k0s()(),t.j41(4,"td"),t.DNE(5,Ft,1,1,"span",177)(6,Ot,2,0,"ng-template",null,0,t.C5r),t.k0s(),t.j41(8,"td"),t.DNE(9,Et,2,2,"span",177)(10,jt,2,0,"ng-template",null,1,t.C5r),t.k0s(),t.j41(12,"td"),t.DNE(13,Vt,2,1,"span",178)(14,Tt,2,0,"ng-template",null,2,t.C5r),t.k0s(),t.j41(16,"td"),t.DNE(17,It,2,1,"span",178)(18,Dt,2,0,"ng-template",null,3,t.C5r),t.k0s(),t.j41(20,"td"),t.DNE(21,Rt,2,0,"div",179)(22,Gt,0,0,"ng-template",null,4,t.C5r),t.k0s(),t.j41(24,"td"),t.DNE(25,$t,3,4,"span",178)(26,wt,2,0,"ng-template",null,5,t.C5r),t.k0s()()}if(2&i){const e=r.$implicit,o=t.sdS(7),n=t.sdS(11),s=t.sdS(15),c=t.sdS(19),d=t.sdS(23),m=t.sdS(27);t.R7$(3),t.Y8G("src",e.photo,t.B4B),t.R7$(2),t.Y8G("ngIf",e.nomComplet)("ngIfElse",o),t.R7$(4),t.Y8G("ngIf",e.email)("ngIfElse",n),t.R7$(4),t.Y8G("ngIf",e.adresse)("ngIfElse",s),t.R7$(4),t.Y8G("ngIf",e.telephone)("ngIfElse",c),t.R7$(4),t.Y8G("ngIf",e.entrepriseClient)("ngIfElse",d),t.R7$(4),t.Y8G("ngIf",e.createdAt)("ngIfElse",m)}}function Nt(i,r){1&i&&(t.j41(0,"tr")(1,"td",184),t.EFF(2,"Aucun client trouv\xe9"),t.k0s()())}function St(i,r){if(1&i&&(t.j41(0,"table"),t.nrm(1,"thead"),t.j41(2,"tbody"),t.DNE(3,At,28,13,"tr",174)(4,Nt,3,0,"tr",29),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(3),t.Y8G("ngForOf",e.filteredClients),t.R7$(),t.Y8G("ngIf",0===e.filteredClients.length)}}function Xt(i,r){if(1&i&&(t.j41(0,"span",180),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("innerHTML",o.highlightMatch(e.nom),t.npT),t.R7$(),t.JRh(e.nom)}}function Bt(i,r){1&i&&(t.j41(0,"span",181),t.EFF(1,"Nom vide"),t.k0s())}function Yt(i,r){if(1&i&&(t.j41(0,"span",180),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit,o=t.XpG(3);t.Y8G("innerHTML",o.highlightMatch(e.email),t.npT),t.R7$(),t.JRh(e.email)}}function Lt(i,r){1&i&&(t.j41(0,"span",181),t.EFF(1,"Non email"),t.k0s())}function zt(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.adresse)}}function Kt(i,r){1&i&&(t.j41(0,"span",181),t.EFF(1,"Non adresse"),t.k0s())}function qt(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(e.telephone)}}function Ut(i,r){1&i&&(t.j41(0,"span",181),t.EFF(1,"Non t\xe9l\xe9phone"),t.k0s())}function Qt(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&i){const e=t.XpG().$implicit;t.R7$(),t.JRh(t.i5U(2,1,e.createdAt,"dd/MM/yyyy"))}}function Jt(i,r){1&i&&(t.j41(0,"span",181),t.EFF(1,"Non date"),t.k0s())}function Wt(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr",36),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.selectEntreprise(n))}),t.j41(1,"td")(2,"div",175),t.nrm(3,"img",185),t.k0s()(),t.j41(4,"td"),t.DNE(5,Xt,2,2,"span",177)(6,Bt,2,0,"ng-template",null,6,t.C5r),t.k0s(),t.j41(8,"td"),t.DNE(9,Yt,2,2,"span",177)(10,Lt,2,0,"ng-template",null,1,t.C5r),t.k0s(),t.j41(12,"td"),t.DNE(13,zt,2,1,"span",178)(14,Kt,2,0,"ng-template",null,2,t.C5r),t.k0s(),t.j41(16,"td"),t.DNE(17,qt,2,1,"span",178)(18,Ut,2,0,"ng-template",null,3,t.C5r),t.k0s(),t.j41(20,"td"),t.EFF(21),t.k0s(),t.j41(22,"td"),t.EFF(23),t.k0s(),t.j41(24,"td"),t.EFF(25),t.k0s(),t.j41(26,"td"),t.DNE(27,Qt,3,4,"span",178)(28,Jt,2,0,"ng-template",null,5,t.C5r),t.k0s()()}if(2&i){const e=r.$implicit,o=t.sdS(7),n=t.sdS(11),s=t.sdS(15),c=t.sdS(19),d=t.sdS(29);t.R7$(5),t.Y8G("ngIf",e.nom)("ngIfElse",o),t.R7$(4),t.Y8G("ngIf",e.email)("ngIfElse",n),t.R7$(4),t.Y8G("ngIf",e.adresse)("ngIfElse",s),t.R7$(4),t.Y8G("ngIf",e.telephone)("ngIfElse",c),t.R7$(4),t.JRh(e.pays||"--"),t.R7$(2),t.JRh(e.siege||"--"),t.R7$(2),t.JRh(e.secteur||"--"),t.R7$(2),t.Y8G("ngIf",e.createdAt)("ngIfElse",d)}}function Ht(i,r){if(1&i&&(t.j41(0,"table")(1,"tbody"),t.DNE(2,Wt,30,13,"tr",174),t.k0s()()),2&i){const e=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",e.filteredEntreprisesPopup)}}function Zt(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",161)(1,"div",162),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())}),t.j41(2,"div",109),t.bIt("mousedown",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.startDrag(n))}),t.j41(3,"h6",163),t.EFF(4),t.k0s(),t.j41(5,"div",164)(6,"div",165)(7,"button",36),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.openAddClient())}),t.EFF(8," Ajouter Client "),t.k0s()(),t.nrm(9,"div",166),t.j41(10,"div",167),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.setListTypePopup("clients"))}),t.nrm(11,"i",168),t.j41(12,"div",169)(13,"span"),t.EFF(14),t.k0s()()(),t.nrm(15,"div",166),t.j41(16,"div",167),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.setListTypePopup("entreprises"))}),t.nrm(17,"i",170),t.j41(18,"div",169)(19,"span"),t.EFF(20),t.k0s()()(),t.nrm(21,"div",166),t.j41(22,"div",171),t.nrm(23,"i",172),t.j41(24,"input",173),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG();return t.DH7(s.searchText,n)||(s.searchText=n),t.Njj(n)}),t.k0s()(),t.j41(25,"button",110),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeListClientPopup())}),t.nrm(26,"i",106),t.k0s()()(),t.DNE(27,St,5,2,"table",29)(28,Ht,3,1,"table",29),t.k0s()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("ngStyle",t.eq3(11,O,"translate3d("+e.popupOffset.x+"px, "+e.popupOffset.y+"px, 0)")),t.R7$(3),t.SpI(" ","clients"===e.currentListTypePopup?"Client individuel":"Client entreprise"," "),t.R7$(6),t.AVh("active","clients"===e.currentListTypePopup),t.R7$(4),t.JRh(e.clients.length),t.R7$(2),t.AVh("active","entreprises"===e.currentListTypePopup),t.R7$(4),t.JRh(e.entreprisesPopup.length),t.R7$(4),t.R50("ngModel",e.searchText),t.R7$(3),t.Y8G("ngIf","clients"===e.currentListTypePopup),t.R7$(),t.Y8G("ngIf","entreprises"===e.currentListTypePopup)}}function te(i,r){1&i&&(t.j41(0,"small"),t.EFF(1,"Champ requis."),t.k0s())}function ee(i,r){1&i&&(t.j41(0,"small"),t.EFF(1,"Au moins 2 caract\xe8res."),t.k0s())}function ne(i,r){if(1&i&&(t.j41(0,"div",225),t.DNE(1,te,2,0,"small",29)(2,ee,2,0,"small",29),t.k0s()),2&i){let e,o;const n=t.XpG(3);t.R7$(),t.Y8G("ngIf",null==(e=n.clientForm.get("nomComplet"))||null==e.errors?null:e.errors.required),t.R7$(),t.Y8G("ngIf",null==(o=n.clientForm.get("nomComplet"))||null==o.errors?null:o.errors.minlength)}}function oe(i,r){1&i&&(t.j41(0,"small"),t.EFF(1,"Format invalide."),t.k0s())}function ie(i,r){if(1&i&&(t.j41(0,"div",225),t.DNE(1,oe,2,0,"small",29),t.k0s()),2&i){let e;const o=t.XpG(3);t.R7$(),t.Y8G("ngIf",null==(e=o.clientForm.get("email"))||null==e.errors?null:e.errors.email)}}function se(i,r){if(1&i&&(t.j41(0,"option",226),t.EFF(1),t.k0s()),2&i){const e=r.$implicit,o=t.XpG(3);t.Y8G("value",e),t.R7$(),t.Lme(" ",e," (",o.paysIndicatifs[e].indicatif,") ")}}function re(i,r){1&i&&(t.j41(0,"div",225)(1,"small"),t.EFF(2,"Ce champ est requis"),t.k0s()())}function ce(i,r){if(1&i&&(t.j41(0,"div",225)(1,"small"),t.EFF(2),t.k0s()()),2&i){const e=r.ngIf,o=t.XpG(3);t.R7$(2),t.Lme(" Le num\xe9ro doit contenir ",o.paysIndicatifs[e].longueur," chiffres apr\xe8s l\u2019indicatif ",o.paysIndicatifs[e].indicatif.trim(),". ")}}function le(i,r){1&i&&(t.j41(0,"div",225)(1,"small"),t.EFF(2,"Le t\xe9l\xe9phone est requis."),t.k0s()())}function pe(i,r){if(1&i&&(t.j41(0,"mat-option",226)(1,"div",229),t.EFF(2),t.k0s()()),2&i){const e=r.$implicit;t.Y8G("value",e),t.R7$(2),t.SpI(" ",e.nom," ")}}function ae(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",197),t.nrm(1,"input",227),t.j41(2,"mat-autocomplete",228,7),t.bIt("optionSelected",function(n){t.eBV(e);const s=t.XpG(3);return t.Njj(s.onEntrepriseSelected(n))}),t.DNE(4,pe,3,2,"mat-option",211),t.nI1(5,"async"),t.k0s()()}if(2&i){const e=t.sdS(3),o=t.XpG(3);t.R7$(),t.Y8G("formControl",o.control)("matAutocomplete",e),t.R7$(),t.Y8G("displayWith",o.displayFnEntreprise),t.R7$(2),t.Y8G("ngForOf",t.bMT(5,4,o.filteredOptions))}}function de(i,r){if(1&i){const e=t.RV6();t.j41(0,"form",195)(1,"div",196)(2,"div",197),t.nrm(3,"input",198),t.j41(4,"label",199),t.EFF(5,"Nom et pr\xe9nom"),t.k0s(),t.DNE(6,ne,3,2,"div",200),t.k0s(),t.j41(7,"div",197),t.nrm(8,"input",201),t.j41(9,"label",202),t.EFF(10,"Email"),t.k0s(),t.DNE(11,ie,2,1,"div",200),t.k0s()(),t.j41(12,"div",196)(13,"div",197),t.nrm(14,"input",203),t.j41(15,"label",204),t.EFF(16,"Adresse"),t.k0s()(),t.j41(17,"div",197),t.nrm(18,"input",205),t.j41(19,"label",206),t.EFF(20,"Poste"),t.k0s()()(),t.j41(21,"div",207)(22,"div",208)(23,"select",209),t.bIt("change",function(n){t.eBV(e);const s=t.XpG(2);return t.Njj(s.onPaysChange(n))}),t.j41(24,"option",210),t.EFF(25,"Pays"),t.k0s(),t.DNE(26,se,2,3,"option",211),t.k0s(),t.j41(27,"label",212),t.EFF(28,"Pays"),t.k0s(),t.DNE(29,re,3,0,"div",200),t.k0s(),t.j41(30,"div",213)(31,"input",214),t.bIt("input",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.formatPhoneNumber())}),t.k0s(),t.j41(32,"label",215),t.EFF(33,"T\xe9l\xe9phone"),t.k0s(),t.DNE(34,ce,3,2,"div",200)(35,le,3,0,"div",200),t.k0s(),t.j41(36,"div",216),t.nrm(37,"input",217),t.j41(38,"label",218),t.EFF(39,"Ville"),t.k0s()()(),t.j41(40,"div",219)(41,"h5"),t.EFF(42,"Entreprise"),t.k0s(),t.j41(43,"div",220)(44,"p"),t.EFF(45,"J'appartient \xe0 une entreprise"),t.k0s(),t.j41(46,"label",221)(47,"input",222),t.mxI("ngModelChange",function(n){t.eBV(e);const s=t.XpG(2);return t.DH7(s.isEntrepriseSelected,n)||(s.isEntrepriseSelected=n),t.Njj(n)}),t.k0s(),t.nrm(48,"span",223),t.k0s()()(),t.DNE(49,ae,6,6,"div",224),t.k0s()}if(2&i){let e,o,n,s,c;const d=t.XpG(2);t.Y8G("formGroup",d.clientForm),t.R7$(6),t.Y8G("ngIf",(null==(e=d.clientForm.get("nomComplet"))?null:e.touched)&&(null==(e=d.clientForm.get("nomComplet"))?null:e.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(o=d.clientForm.get("email"))?null:o.touched)&&(null==(o=d.clientForm.get("email"))?null:o.invalid)),t.R7$(15),t.Y8G("ngForOf",d.paysKeys),t.R7$(3),t.Y8G("ngIf",(null==(n=d.clientForm.get("pays"))?null:n.invalid)&&(null==(n=d.clientForm.get("pays"))?null:n.touched)),t.R7$(5),t.Y8G("ngIf",(null==(s=d.clientForm.get("telephone"))?null:s.touched)&&(null==(s=d.clientForm.get("telephone"))||null==s.errors?null:s.errors.pattern)&&(null==(s=d.clientForm.get("pays"))?null:s.value)),t.R7$(),t.Y8G("ngIf",(null==(c=d.clientForm.get("telephone"))?null:c.touched)&&(null==(c=d.clientForm.get("telephone"))||null==c.errors?null:c.errors.required)),t.R7$(12),t.R50("ngModel",d.isEntrepriseSelected),t.Y8G("ngModelOptions",t.lJ4(10,z)),t.R7$(2),t.Y8G("ngIf",d.isEntrepriseSelected)}}function ue(i,r){1&i&&(t.j41(0,"small"),t.EFF(1,"Champ requis."),t.k0s())}function _e(i,r){1&i&&(t.j41(0,"small"),t.EFF(1,"Au moins 2 caract\xe8res."),t.k0s())}function me(i,r){if(1&i&&(t.j41(0,"div",225),t.DNE(1,ue,2,0,"small",29)(2,_e,2,0,"small",29),t.k0s()),2&i){let e,o;const n=t.XpG(3);t.R7$(),t.Y8G("ngIf",null==(e=n.entrepriseForm.get("nom"))||null==e.errors?null:e.errors.required),t.R7$(),t.Y8G("ngIf",null==(o=n.entrepriseForm.get("nom"))||null==o.errors?null:o.errors.minlength)}}function ge(i,r){1&i&&(t.j41(0,"small"),t.EFF(1,"Format invalide."),t.k0s())}function fe(i,r){if(1&i&&(t.j41(0,"div",225),t.DNE(1,ge,2,0,"small",29),t.k0s()),2&i){let e;const o=t.XpG(3);t.R7$(),t.Y8G("ngIf",null==(e=o.entrepriseForm.get("email"))||null==e.errors?null:e.errors.email)}}function he(i,r){if(1&i&&(t.j41(0,"option",226),t.EFF(1),t.k0s()),2&i){const e=r.$implicit,o=t.XpG(3);t.Y8G("value",e),t.R7$(),t.Lme(" ",e," (",o.paysIndicatifs[e].indicatif,") ")}}function Pe(i,r){if(1&i&&(t.j41(0,"div",225)(1,"small"),t.EFF(2),t.k0s()()),2&i){const e=r.ngIf,o=t.XpG(3);t.R7$(2),t.Lme(" Le num\xe9ro doit contenir ",o.paysIndicatifs[e].longueur," chiffres apr\xe8s l'indicatif ",o.paysIndicatifs[e].indicatif.trim(),". ")}}function Ce(i,r){1&i&&(t.j41(0,"div",225)(1,"small"),t.EFF(2,"Le t\xe9l\xe9phone est requis."),t.k0s()())}function be(i,r){if(1&i){const e=t.RV6();t.j41(0,"form",195)(1,"div",196)(2,"div",197),t.nrm(3,"input",230),t.j41(4,"label",231),t.EFF(5,"Nom d'entreprise"),t.k0s(),t.DNE(6,me,3,2,"div",200),t.k0s(),t.j41(7,"div",197),t.nrm(8,"input",201),t.j41(9,"label",202),t.EFF(10,"Email"),t.k0s(),t.DNE(11,fe,2,1,"div",200),t.k0s()(),t.j41(12,"div",196)(13,"div",197),t.nrm(14,"input",203),t.j41(15,"label",204),t.EFF(16,"Adresse"),t.k0s()(),t.j41(17,"div",197),t.nrm(18,"input",232),t.j41(19,"label",233),t.EFF(20,"Si\xe8ge"),t.k0s()()(),t.j41(21,"div",207)(22,"div",208)(23,"select",209),t.bIt("change",function(n){t.eBV(e);const s=t.XpG(2);return t.Njj(s.onEntreprisePaysChange(n))}),t.j41(24,"option",210),t.EFF(25,"Pays"),t.k0s(),t.DNE(26,he,2,3,"option",211),t.k0s(),t.j41(27,"label",212),t.EFF(28,"Pays"),t.k0s()(),t.j41(29,"div",213)(30,"input",214),t.bIt("input",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.formatEntreprisePhoneNumber())}),t.k0s(),t.j41(31,"label",215),t.EFF(32,"T\xe9l\xe9phone"),t.k0s(),t.DNE(33,Pe,3,2,"div",200)(34,Ce,3,0,"div",200),t.k0s(),t.j41(35,"div",216),t.nrm(36,"input",234),t.j41(37,"label",235),t.EFF(38,"Secteur"),t.k0s()()()()}if(2&i){let e,o,n,s;const c=t.XpG(2);t.Y8G("formGroup",c.entrepriseForm),t.R7$(6),t.Y8G("ngIf",(null==(e=c.entrepriseForm.get("nom"))?null:e.touched)&&(null==(e=c.entrepriseForm.get("nom"))?null:e.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(o=c.entrepriseForm.get("email"))?null:o.touched)&&(null==(o=c.entrepriseForm.get("email"))?null:o.invalid)),t.R7$(15),t.Y8G("ngForOf",c.paysKeys),t.R7$(7),t.Y8G("ngIf",(null==(n=c.entrepriseForm.get("telephone"))?null:n.touched)&&(null==(n=c.entrepriseForm.get("telephone"))||null==n.errors?null:n.errors.pattern)&&(null==(n=c.entrepriseForm.get("pays"))?null:n.value)),t.R7$(),t.Y8G("ngIf",(null==(s=c.entrepriseForm.get("telephone"))?null:s.touched)&&(null==(s=c.entrepriseForm.get("telephone"))||null==s.errors?null:s.errors.required))}}function ve(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",186)(1,"div",187),t.bIt("click",function(n){return t.eBV(e),t.Njj(n.stopPropagation())}),t.j41(2,"div",109),t.bIt("mousedown",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.startDrag(n))}),t.j41(3,"h3"),t.EFF(4,"Ajouter un nouveau client"),t.k0s(),t.j41(5,"button",110),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeAddClientPopup())}),t.nrm(6,"i",106),t.k0s()(),t.j41(7,"div",148)(8,"div",188)(9,"div",189)(10,"label"),t.EFF(11,"Type de client"),t.k0s(),t.j41(12,"div",190)(13,"button",191),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.setClientType("individuel"))}),t.EFF(14," Individuel "),t.k0s(),t.j41(15,"button",191),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.setClientType("entreprise"))}),t.EFF(16," Entreprise "),t.k0s()()(),t.DNE(17,de,50,11,"form",192)(18,be,39,6,"form",192),t.k0s()(),t.j41(19,"div",146)(20,"button",193),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.closeAddClientPopup())}),t.EFF(21,"Annuler"),t.k0s(),t.j41(22,"button",194),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj("individuel"===n.clientType?n.ajouterClientDansPopup():n.ajouterEntrepriseDansPopup())}),t.EFF(23," Enregistrer "),t.k0s()()()()}if(2&i){const e=t.XpG();t.R7$(),t.Y8G("ngStyle",t.eq3(14,O,"translate3d("+e.popupOffset.x+"px, "+e.popupOffset.y+"px, 0)")),t.R7$(12),t.AVh("active","individuel"===e.clientType),t.R7$(2),t.AVh("active","entreprise"===e.clientType),t.R7$(2),t.Y8G("ngIf","individuel"===e.clientType),t.R7$(),t.Y8G("ngIf","entreprise"===e.clientType),t.R7$(4),t.xc7("background-color",("individuel"===e.clientType?e.clientForm.valid:e.entrepriseForm.valid)?"#0672E4":"#0671e434")("color",("individuel"===e.clientType?e.clientForm.valid:e.entrepriseForm.valid)?"#ffffff":"#00000073")("cursor",("individuel"===e.clientType?e.clientForm.valid:e.entrepriseForm.valid)?"pointer":"no-drop"),t.Y8G("disabled","individuel"===e.clientType?e.clientForm.invalid:e.entrepriseForm.invalid)}}let xe=(()=>{class i{setInputMode(e){this.inputMode=e}constructor(e,o,n,s,c,d,m,f,y,Me,ke,ye){this.router=e,this.viewState=o,this.categorieService=n,this.commandeState=s,this.clientService=c,this.usersService=d,this.sanitizer=m,this.fb=f,this.entrepriseService=y,this.produitService=Me,this.venteService=ke,this.boutiqueState=ye,this.isListView=!0,this.showDropdown=!1,this.showPaymentPopup=!1,this.categories=[],this.selectedCategoryId=null,this.displayedProducts=[],this.currentQuantityInput="",this.selectedProduct=null,this.quantityMode=!0,this.showStockWarning=!1,this.cart=new Map,this.totalAmount=0,this.selectedPaymentMethod="Esp\xe8ces",this.enteredAmount="",this.paymentAmount=0,this.changeDue=0,this.isAmountEntered=!1,this.longPressTimer=null,this.selectedProductForDetail=null,this.showDetailPopup=!1,this.showClientPopup=!1,this.lastTap=0,this.tapDelay=300,this.allProducts=[],this.clientType="individuel",this.entrepriseIndicatif="",this.entrepriseMaxPhoneLength=0,this.clients=[],this.searchText="",this.sortField="nomComplet",this.sortDirection="asc",this.currentListTypePopup="clients",this.entreprisesPopup=[],this.isEntrepriseSelected=!1,this.showAddClientPopup=!1,this.paysIndicatifs={Mali:{indicatif:"+223",longueur:8},S\u00e9n\u00e9gal:{indicatif:"+221",longueur:9},"C\xf4te d'Ivoire":{indicatif:"+225",longueur:10},"Burkina Faso":{indicatif:"+226",longueur:8},Niger:{indicatif:"+227",longueur:8},France:{indicatif:"+33",longueur:9},Belgique:{indicatif:"+32",longueur:9},Suisse:{indicatif:"+41",longueur:9},Canada:{indicatif:"+1",longueur:10},"\xc9tats-Unis":{indicatif:"+1",longueur:10},Maroc:{indicatif:"+212",longueur:9},Alg\u00e9rie:{indicatif:"+213",longueur:9},Tunisie:{indicatif:"+216",longueur:8},Togo:{indicatif:"+228",longueur:8},B\u00e9nin:{indicatif:"+229",longueur:8},Guin\u00e9e:{indicatif:"+224",longueur:9},Tchad:{indicatif:"+235",longueur:8},Cameroun:{indicatif:"+237",longueur:9},RDC:{indicatif:"+243",longueur:9},Gabon:{indicatif:"+241",longueur:9},"Afrique du Sud":{indicatif:"+27",longueur:9},Rwanda:{indicatif:"+250",longueur:9},Kenya:{indicatif:"+254",longueur:9},Nig\u00e9ria:{indicatif:"+234",longueur:10},Ghana:{indicatif:"+233",longueur:9},\u00c9thiopie:{indicatif:"+251",longueur:9},\u00c9gypte:{indicatif:"+20",longueur:10},Inde:{indicatif:"+91",longueur:10},Chine:{indicatif:"+86",longueur:11},Mexique:{indicatif:"+52",longueur:10},Allemagne:{indicatif:"+49",longueur:10},Espagne:{indicatif:"+34",longueur:9},Italie:{indicatif:"+39",longueur:10},"Royaume-Uni":{indicatif:"+44",longueur:10},"Pays-Bas":{indicatif:"+31",longueur:9},Portugal:{indicatif:"+351",longueur:9}},this.paysKeys=Object.keys(this.paysIndicatifs),this.indicatif="",this.maxPhoneLength=0,this.control=new u.MJ,this.filteredOptions=(0,h.of)([]),this.optionsEntreprise$=new M.t([]),this.currentListType="clients",this.selectedBoutiqueId=null,this.isSubmittingVente=!1,this.venteErrorMessage=null,this.selectedClient=null,this.selectedEntreprise=null,this.isComposingNewQuantity=!1,this.isDragging=!1,this.startX=0,this.startY=0,this.initialX=0,this.initialY=0,this.popupOffset={x:0,y:0},this.showDiscountInput=!1,this.discountValue=0,this.discountType="CFA",this.discountButtonText="Remise",this.selectedProductForDiscount=null,this.discountMode={active:!1,type:"CFA",value:0},this.globalDiscount={active:!1,type:"CFA",value:0},this.productDiscounts=new Map,this.lastSelectedForDiscount=null,this.inputMode="quantity",this.currentDiscountInput="",this.disablePhysicalKeyboard=!1,this.onMouseMove=T=>{this.isDragging&&requestAnimationFrame(()=>{const Oe=T.clientY-this.startY;this.popupOffset.x=this.initialX+(T.clientX-this.startX),this.popupOffset.y=this.initialY+Oe})},this.onMouseUp=()=>{this.isDragging=!1,document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},this.commandeState.activeCommandeId$.subscribe(()=>{this.loadActiveCart()}),this.initClientForm(),this.initForms()}initForms(){this.initClientForm(),this.initEntrepriseForm()}initClientForm(){this.clientForm=this.fb.group({nomComplet:["",[u.k0.required,u.k0.minLength(2)]],email:["",[u.k0.email]],telephone:["",u.k0.required],adresse:[""],poste:[""],pays:[""],ville:[""]})}initEntrepriseForm(){this.entrepriseForm=this.fb.group({nom:["",[u.k0.required,u.k0.minLength(2)]],adresse:[""],email:["",[u.k0.email]],telephone:["",u.k0.required],pays:[""],siege:[""],secteur:[""]})}ngOnInit(){const e=localStorage.getItem("viewPreference");this.isListView=!e||"list"===e,this.loadActiveCart(),this.viewState.isListView$.subscribe(o=>{this.isListView=o}),this.categories.length||this.loadCategories(),this.boutiqueState.selectedBoutique$.pipe((0,E.s)(1)).subscribe(o=>{this.selectedBoutiqueId=o}),this.boutiqueState.selectedBoutique$.subscribe(o=>this.selectedBoutiqueId=o)}loadActiveCart(){this.cart=new Map(this.commandeState.getActiveCart())}saveActiveCart(){this.commandeState.updateActiveCart(this.cart)}loadCategories(){this.categorieService.getCategories().subscribe({next:e=>{this.categories=e,this.allProducts=[],this.categories.forEach(o=>{o.produits&&this.allProducts.push(...o.produits)}),this.showAllProducts()},error:e=>{console.error("Erreur lors du chargement des cat\xe9gories",e)}})}showAllProducts(){this.selectedCategoryId=null,this.displayedProducts=[],this.categories.forEach(e=>{e.produits&&(this.displayedProducts=[...this.displayedProducts,...e.produits])})}selectCategory(e){if(void 0===e)return;this.selectedCategoryId=e;const o=this.categories.find(n=>n.id===e);this.displayedProducts=o&&o.produits?o.produits:[]}getProductImage(e){return e&&""!==e?e.startsWith("http")?e:e.startsWith("/uploads")?P.c.imgUrl.replace("/api","")+e:e:"assets/img/default-product.png"}onDiscountInputChange(e){this.currentDiscountInput=e.target.value,this.discountMode.value=parseFloat(this.currentDiscountInput)||0,this.updateCommandeTotals()}handleDiscountKeyPress(e){switch(e){case"backspace":this.currentDiscountInput=this.currentDiscountInput.slice(0,-1);break;case",":break;default:this.currentDiscountInput.length<10&&(this.currentDiscountInput+=e)}this.discountMode.value=parseInt(this.currentDiscountInput,10)||0,this.updateCommandeTotals()}openPaymentPopup(){this.showPaymentPopup=!0,this.totalAmount=this.getTotalCart(),this.enteredAmount="",this.paymentAmount=0,this.changeDue=0,this.isAmountEntered=!1,this.selectedPaymentMethod="Esp\xe8ces"}handlePaymentKeyPress(e){switch(e){case"backspace":this.enteredAmount=this.enteredAmount.slice(0,-1);break;case",":this.enteredAmount.includes(",")||(this.enteredAmount+=",");break;case"+/-":break;default:this.enteredAmount.length<10&&(this.enteredAmount+=e)}this.calculatePayment()}calculatePayment(){this.totalAmount=this.getTotalCart();const e=parseFloat(this.enteredAmount.replace(",","."))||0;this.paymentAmount=e,this.isAmountEntered=e>0,this.changeDue=+(this.paymentAmount-this.totalAmount)}selectPaymentMethod(e){this.selectedPaymentMethod=e}completePayment(){this.isSubmittingVente||(this.isSubmittingVente=!0,this.submitVente())}closePaymentPopup(){this.showPaymentPopup=!1}addToCart(e){if(this.getAvailableStock(e)<=0)return;if(this.discountMode.active)return void this.applyDiscount(e);const o=this.cart.get(e.id)||0;this.cart.set(e.id,o+1),this.saveActiveCart(),this.selectedProduct=e,this.isComposingNewQuantity=!1}calculateItemTotal(e){return e.product.prixVente*e.quantity-(this.productDiscounts.get(e.product.id)||0)}getSubtotal(){let e=0;return this.cart.forEach((o,n)=>{const s=this.allProducts.find(c=>c.id===n);s&&(e+=o*s.prixVente)}),e}getTotalDiscount(){let e=0;return this.cart.forEach((o,n)=>{const s=this.allProducts.find(c=>c.id===n);s&&o>0&&(e+=this.computeDiscountForItem(s,o))}),e}getTotalCart(){const n=this.getSubtotal()-this.getTotalDiscount();let s=n;return this.globalDiscount.active&&this.globalDiscount.value>0&&(s-="CFA"===this.globalDiscount.type?this.globalDiscount.value:n*(this.globalDiscount.value/100)),Math.max(0,s)}removeProduct(e){this.cart.delete(e),this.productDiscounts.delete(e),this.saveActiveCart(),this.updateCommandeTotals()}decreaseQuantity(e){const o=this.cart.get(e.id)||0;if(o>0){const n=o-1;this.cart.set(e.id,n),this.selectedProduct?.id===e.id&&(this.currentQuantityInput=n>0?n.toString():"")}this.saveActiveCart(),this.updateCommandeTotals()}getSelectedQuantity(e){return this.cart.get(e)||0}updateCommandeTotals(){const e=this.getTotalItems(),o=this.getTotalCart(),n=this.commandeState.getActiveCommandeId();this.commandeState.updateCommandeTotals(n,e,o)}getTotalItems(){let e=0;return this.cart.forEach(o=>e+=o),e}getCartItems(){const e=[];for(const[o,n]of this.cart.entries())if(n>0){const s=this.allProducts.find(c=>c.id===o);s&&e.push({product:s,quantity:n})}return e}getAvailableStock(e){const o=this.getSelectedQuantity(e.id);return e.quantite-o}handleKeyPress(e){if("discount"===this.inputMode)this.handleDiscountKeyPress(e);else{if(!this.selectedProduct)return;switch(this.isComposingNewQuantity||(this.currentQuantityInput="",this.isComposingNewQuantity=!0),e){case"backspace":this.currentQuantityInput=this.currentQuantityInput.slice(0,-1);break;case"+/-":break;default:this.currentQuantityInput.length<5&&(this.currentQuantityInput+=e)}this.applyQuantityToProduct()}}calculateDiscountedPrice(e){return e.product.prixVente*e.quantity-(e.product.remise||0)}applyQuantityToProduct(){if(!this.selectedProduct||""===this.currentQuantityInput)return;const e=parseInt(this.currentQuantityInput,10);if(isNaN(e))return;const o=this.selectedProduct.quantite;e>0&&e<=o?this.cart.set(this.selectedProduct.id,e):(this.cart.set(this.selectedProduct.id,o),this.currentQuantityInput=o.toString(),this.showStockWarning=!0,setTimeout(()=>this.showStockWarning=!1,3e3)),this.saveActiveCart()}startPress(e,o){this.getAvailableStock(o)<=0||(this.longPressTimer=setTimeout(()=>{this.produitService.getProduitById(o.id).subscribe({next:n=>{const s=new C({...n,categorieId:n.categorieId??0,seuilAlert:n.seuilAlert??0,nomCategorie:n.nomCategorie??"",nomUnite:n.nomUnite??"",typeProduit:n.typeProduit??"",createdAt:n.createdAt??"",lastUpdated:n.lastUpdated??"",datePreemption:n.datePreemption??null,boutiqueId:n.boutiqueId??null,description:n.description??"",codeBare:n.codeBare??"",codeGenerique:n.codeGenerique??""});this.selectedProductForDetail=s,this.showDetailPopup=!0},error:n=>{console.error("Erreur lors de la r\xe9cup\xe9ration du produit :",n)}}),this.longPressTimer=null},500))}getNomBoutiqueCourante(e){return e.boutiques?.find(n=>n.id===e.boutiqueId)?.nom||"Boutique inconnue"}isQuantiteCritique(e){const o=this.getQuantiteDansBoutiqueCourante(e);return null==e.seuilAlert||0===e.seuilAlert?o<=10:o<=e.seuilAlert}getQuantiteClass(e){return this.isQuantiteCritique(e)?"alert-low-stock":"safe-stock"}getQuantiteDansBoutiqueCourante(e){return e.boutiques?.find(n=>n.id===e.boutiqueId)?.quantite??0}activateQuantityMode(){this.selectedProduct&&(this.quantityMode=!0,this.currentQuantityInput=(this.cart.get(this.selectedProduct.id)||0).toString())}endPress(){this.longPressTimer&&(clearTimeout(this.longPressTimer),this.longPressTimer=null)}goTopaiement(){this.router.navigate(["/pos-accueil/paiement"])}closeDetailPopup(){this.showDetailPopup=!1,this.selectedProductForDetail=null}loadClients(){this.usersService.getValidAccessToken().pipe((0,b.n)(e=>e?this.clientService.getListClients():(0,k.$)(()=>new Error("Aucun token trouv\xe9")))).subscribe({next:e=>{this.clients=e.map(o=>({...o,photo:o.photo?`${P.c.imgUrl}${o.photo}`:"assets/img/profil.png",entrepriseClient:o.entrepriseClient?{id:o.entrepriseClient.id}:null})).sort((o,n)=>{const s=o.createdAt?new Date(o.createdAt).getTime():0;return(n.createdAt?new Date(n.createdAt).getTime():0)-s})},error:e=>{console.error("Erreur r\xe9cup\xe9ration clients :",e)}})}closeListClientPopup(){this.showClientPopup=!1}highlightMatch(e){if(!e)return"";if(!this.searchText.trim())return e;const o=this.searchText.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),n=new RegExp(`(${o})`,"gi");return this.sanitizer.bypassSecurityTrustHtml(e.replace(n,"<mark>$1</mark>"))}get filteredClients(){let e=this.clients;if(this.searchText.trim()){const o=this.searchText.toLowerCase().trim();e=e.filter(n=>n.nomComplet?.toLowerCase().includes(o)||n.email?.toLowerCase().includes(o)||n.adresse?.toLowerCase().includes(o)||n.telephone?.includes(o))}return e.sort((o,n)=>{const s=o.createdAt?new Date(o.createdAt).getTime():0;return(n.createdAt?new Date(n.createdAt).getTime():0)-s})}sort(e){this.sortField===e?this.sortDirection="asc"===this.sortDirection?"desc":"asc":(this.sortField=e,this.sortDirection="asc"),this.clients.sort((o,n)=>{const s="asc"===this.sortDirection?1:-1,c=o[e]?.toString().toLowerCase()??"",d=n[e]?.toString().toLowerCase()??"";return c.localeCompare(d)*s})}selectClient(e){this.selectedClient=e,this.selectedEntreprise=null,console.log("Client s\xe9lectionn\xe9:",e),this.closeListClientPopup()}onPaysChange(e){const n=this.paysIndicatifs[e.target.value];if(!n)return;this.indicatif=n.indicatif,this.maxPhoneLength=n.longueur;const s=this.clientForm.get("telephone");let c=s?.value??"";const d=this.indicatif.replace(/\D/g,""),m=c.replace(/\D/g,"");if(m.startsWith(d)){const f=m.slice(d.length,d.length+this.maxPhoneLength);s?.setValue(this.indicatif+f)}else s?.setValue(this.indicatif);this.updatePhoneValidator(n.longueur)}updatePhoneValidator(e){const o=this.clientForm.get("telephone"),n=new RegExp(`^\\${this.indicatif}\\s?\\d{${e}}$`);o?.setValidators([u.k0.required,u.k0.pattern(n)]),o?.updateValueAndValidity()}formatPhoneNumber(){let e=this.clientForm.get("telephone")?.value;if(!e.startsWith(this.indicatif))return void this.clientForm.get("telephone")?.setValue(this.indicatif);const o=e.replace(this.indicatif,"").replace(/\D/g,""),n=this.indicatif+o;this.clientForm.get("telephone")?.setValue(n.slice(0,this.indicatif.length+this.maxPhoneLength))}loadEntreprises(){this.usersService.getValidAccessToken().pipe((0,b.n)(e=>e?this.entrepriseService.getListEntreprise():(console.error("Aucun token valide trouv\xe9 !"),(0,k.$)(()=>new Error("Aucun token trouv\xe9"))))).subscribe({next:e=>{this.optionsEntreprise$.next(e),this.setupAutocomplete()},error:e=>{console.error("Erreur lors de la r\xe9cup\xe9ration des entreprises :",e)}})}setupAutocomplete(){this.filteredOptions=(0,j.z)([this.control.valueChanges.pipe((0,v.Z)(""),(0,V.T)(e=>"string"==typeof e?e:e?.nom)),this.optionsEntreprise$]).pipe((0,V.T)(([e,o])=>e?this._filter(e,o):o))}_filter(e,o){const n=e.toLowerCase();return o.filter(s=>s.nom.toLowerCase().includes(n))}displayFnEntreprise(e){return e?e.nom:""}onEntrepriseSelected(e){}openAddClient(){this.showAddClientPopup=!0,this.loadEntreprises()}closeAddClientPopup(){this.showAddClientPopup=!1,this.clientForm.reset()}ajouterClientDansPopup(){if(this.clientForm.invalid)return;const e=this.clientForm.value;if(this.isEntrepriseSelected){const o=this.control.value;o&&o.id&&(e.entrepriseClient={id:o.id})}this.clientService.addClient(e).subscribe({next:o=>{const n={...e,id:o.id,createdAt:new Date};this.closeAddClientPopup(),this.clients=[n,...this.clients],this.currentListTypePopup="clients",this.searchText=""},error:o=>{console.error("Erreur lors de l'ajout du client:",o)}})}setClientType(e){this.clientType=e}onEntreprisePaysChange(e){const n=this.paysIndicatifs[e.target.value];if(!n)return;this.entrepriseIndicatif=n.indicatif,this.entrepriseMaxPhoneLength=n.longueur;const s=this.entrepriseForm.get("telephone");let c=s?.value??"";const d=this.entrepriseIndicatif.replace(/\D/g,""),m=c.replace(/\D/g,"");if(m.startsWith(d)){const f=m.slice(d.length,d.length+this.entrepriseMaxPhoneLength);s?.setValue(this.entrepriseIndicatif+f)}else s?.setValue(this.entrepriseIndicatif);this.updateEntreprisePhoneValidator(n.longueur)}updateEntreprisePhoneValidator(e){const o=this.entrepriseForm.get("telephone"),n=new RegExp(`^\\${this.entrepriseIndicatif}\\s?\\d{${e}}$`);o?.setValidators([u.k0.required,u.k0.pattern(n)]),o?.updateValueAndValidity()}formatEntreprisePhoneNumber(){let e=this.entrepriseForm.get("telephone")?.value;if(!e.startsWith(this.entrepriseIndicatif))return void this.entrepriseForm.get("telephone")?.setValue(this.entrepriseIndicatif);const o=e.replace(this.entrepriseIndicatif,"").replace(/\D/g,""),n=this.entrepriseIndicatif+o;this.entrepriseForm.get("telephone")?.setValue(n.slice(0,this.entrepriseIndicatif.length+this.entrepriseMaxPhoneLength))}ajouterEntrepriseDansPopup(){this.entrepriseForm.invalid||this.entrepriseService.addEntreprise(this.entrepriseForm.value).subscribe({next:o=>{this.closeAddClientPopup(),this.entreprisesPopup=[o,...this.entreprisesPopup],this.currentListTypePopup="entreprises",this.searchText=""},error:o=>{console.error("Erreur lors de l'ajout de l'entreprise:",o)}})}loadEntreprisesForPopup(){this.usersService.getValidAccessToken().pipe((0,b.n)(e=>e?this.entrepriseService.getListEntreprises():(console.error("Aucun token valide trouv\xe9 !"),(0,k.$)(()=>new Error("Aucun token trouv\xe9"))))).subscribe({next:e=>{this.entreprisesPopup=e.sort((o,n)=>{const s=o.createdAt?new Date(o.createdAt).getTime():0;return(n.createdAt?new Date(n.createdAt).getTime():0)-s})},error:e=>{console.error("Erreur r\xe9cup\xe9ration entreprises :",e)}})}setListTypePopup(e){this.currentListTypePopup=e,this.searchText=""}get filteredEntreprisesPopup(){let e=this.entreprisesPopup;if(this.searchText.trim()){const o=this.searchText.toLowerCase().trim();e=e.filter(n=>n.nom?.toLowerCase().includes(o)||n.email?.toLowerCase().includes(o)||n.adresse?.toLowerCase().includes(o)||n.telephone?.includes(o))}return e.sort((o,n)=>{const s=o.createdAt?new Date(o.createdAt).getTime():0;return(n.createdAt?new Date(n.createdAt).getTime():0)-s})}selectEntreprise(e){this.selectedEntreprise=e,this.selectedClient=null,console.log("Entreprise s\xe9lectionn\xe9e:",e),this.closeListClientPopup()}getSelectedCustomerName(){return this.selectedClient?this.selectedClient.nomComplet||"Client sans nom":this.selectedEntreprise?this.selectedEntreprise.nom||"Entreprise sans nom":"Client"}handleKeyboardEvent(e){this.showPaymentPopup?this.handlePaymentKeyPressPhysical(e):this.handleKeyPressPhysical(e)}handleKeyPressPhysical(e){if(this.disablePhysicalKeyboard||this.discountMode.active||this.discountMode.active||this.showDetailPopup||this.showClientPopup||this.showAddClientPopup)return;const o=e.key;switch(o){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.handleKeyPress(o);break;case",":case".":this.handleKeyPress(",");break;case"Backspace":this.handleKeyPress("backspace");break;case"-":case"+":this.handleKeyPress("+/-")}}handlePaymentKeyPressPhysical(e){const o=e.key;switch(o){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.handlePaymentKeyPress(o);break;case",":case".":this.handlePaymentKeyPress(",");break;case"Backspace":this.handlePaymentKeyPress("backspace");break;case"-":case"+":this.handlePaymentKeyPress("+/-");break;case"Enter":this.isAmountEntered&&this.completePayment()}}buildVenteRequestFromCart(){if(!this.selectedBoutiqueId)return this.venteErrorMessage="Aucune boutique s\xe9lectionn\xe9e.",null;const e={};if(this.cart.forEach((m,f)=>{m>0&&(e[String(f)]=m)}),0===Object.keys(e).length)return this.venteErrorMessage="Le panier est vide.",null;const o=this.mapPaymentMethodToEnum(this.selectedPaymentMethod);let n,s;this.selectedClient?(n=this.selectedClient.nomComplet||void 0,s=this.selectedClient.telephone||void 0):this.selectedEntreprise&&(n=this.selectedEntreprise.nom||void 0,s=this.selectedEntreprise.telephone||void 0);const c={boutiqueId:this.selectedBoutiqueId,produitsQuantites:e,description:"Vente POS",clientNom:n,clientNumero:s,modePaiement:o??void 0},d={};if(this.getCartItems().forEach(m=>{let f=this.productDiscounts.get(m.product.id)||0;if((!f||0===f)&&this.discountMode.active&&this.discountMode.productId===m.product.id)if("CFA"===this.discountMode.type)f=Math.max(0,this.discountMode.value||0);else{const y=Math.max(0,this.discountMode.value||0)/100;f=Math.round(m.product.prixVente*m.quantity*y)}f>0&&(d[m.product.id]=f/(m.product.prixVente*m.quantity)*100)}),Object.keys(d).length>0&&(c.remises=d),this.globalDiscount.active&&this.globalDiscount.value>0)if("CFA"===this.globalDiscount.type){const m=this.getSubtotal();m>0&&(c.remiseGlobale=this.globalDiscount.value/m*100)}else c.remiseGlobale=this.globalDiscount.value;return c}submitVente(){this.venteErrorMessage=null;const e=this.buildVenteRequestFromCart();e&&(console.log("\u2192 Envoi de la requ\xeate vente:",e),console.log("selectedBoutiqueId=",this.selectedBoutiqueId,"cart=",Array.from(this.cart.entries())),this.isSubmittingVente=!0,this.venteService.enregistrerVente(e).pipe((0,a.j)(()=>this.isSubmittingVente=!1)).subscribe({next:o=>{console.log("Vente enregistr\xe9e",o),this.cart.clear(),this.saveActiveCart(),this.updateCommandeTotals(),this.router.navigate(["/pos-accueil/paiement"],{state:{vente:o,paymentAmount:this.paymentAmount,changeDue:this.changeDue,paymentMethod:this.selectedPaymentMethod}}),this.showPaymentPopup=!1},error:o=>{console.error("Erreur enregistrement vente (subscribe) :",o);const n=o?.original??o;let s=null;n?.error&&(s=n.error.error||n.error.message||n.message),this.venteErrorMessage=s||o?.message||"Erreur inconnue lors de l'enregistrement de la vente",alert("Erreur : "+this.venteErrorMessage)}}))}mapPaymentMethodToEnum(e){if(!e)return null;const o=e.trim().toLowerCase();return"esp\xe8ces"===o||"esp\xe8ces "===o||"especes"===o||"especes"===o||"esp\xe8ces"===o?"ESPECES":"carte"===o||"card"===o?"CARTE":"mobile money"===o||"mobile_money"===o||o.includes("mobile")?"MOBILE_MONEY":"ch\xe8que"===o||"cheque"===o||"cheque"===o?"CHEQUE":(o.includes("compte")||o.includes("client")||o.includes("compte client"),"AUTRE")}clearCustomerSelection(e){e.stopPropagation(),this.selectedClient=null,this.selectedEntreprise=null}startDrag(e){e.preventDefault(),this.isDragging=!0,this.startX=e.clientX,this.startY=e.clientY,this.initialX=this.popupOffset.x,this.initialY=this.popupOffset.y,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}toggleDiscountInput(){this.showDiscountInput=!this.showDiscountInput,this.showDiscountInput?this.discountButtonText="Annuler":this.resetDiscount()}resetDiscount(){this.showDiscountInput=!1,this.discountValue=0,this.discountType="CFA",this.discountButtonText="Remise",this.selectedProductForDiscount=null}toggleDiscountMode(){if(this.discountMode.active=!this.discountMode.active,this.discountMode.active){if(!this.discountMode.productId)if(this.lastSelectedForDiscount)this.discountMode.productId=this.lastSelectedForDiscount;else{const e=this.getCartItems();1===e.length&&(this.discountMode.productId=e[0].product.id)}}else this.resetDiscountMode();this.updateCommandeTotals()}setDiscountType(e){this.discountMode.type=e,this.updateCommandeTotals()}selectProductForDiscount(e){this.lastSelectedForDiscount=e.id,this.discountMode.productId=e.id,this.discountMode.active=!0;const o=this.productDiscounts.get(e.id)||0;if(o>0){const n=Math.round(o/e.prixVente*100);n>0&&n<=100?(this.discountMode.type="%",this.discountMode.value=n):(this.discountMode.type="CFA",this.discountMode.value=o)}else this.discountMode.value=0;this.updateCommandeTotals()}applyDiscount(e){if(this.discountMode.value<0)return;const o=this.getSelectedQuantity(e.id)||0;if(o<=0)return;let n=0;this.discountMode.value>0&&(n="%"===this.discountMode.type?e.prixVente*o*(this.discountMode.value/100):this.discountMode.value);const s=e.prixVente*o;n>s&&(n=s),n>0?this.productDiscounts.set(e.id,n):this.productDiscounts.delete(e.id),this.resetDiscountMode(),this.updateCommandeTotals()}resetDiscountMode(){this.discountMode={active:!1,type:"CFA",value:0}}editDiscount(e){const o=this.productDiscounts.get(e.id)||0;let n=o,s="CFA";if(o>0){const c=Math.round(o/e.prixVente*100);c>0&&c<=100&&(n=c,s="%")}this.discountMode={active:!0,type:s,value:n,productId:e.id},this.lastSelectedForDiscount=e.id,this.updateCommandeTotals()}getProductDiscount(e){if(this.discountMode.active&&this.discountMode.productId===e){const o=this.allProducts.find(s=>s.id===e),n=this.cart.get(e)||0;return this.computeDiscountForItem(o,n)}return this.productDiscounts.get(e)||0}computeDiscountForItem(e,o){if(!e||o<=0)return 0;if(this.discountMode.active&&this.discountMode.productId===e.id){if("CFA"===this.discountMode.type){const n=Math.max(0,this.discountMode.value||0);return Math.min(n,e.prixVente*o)}{const n=Math.max(0,this.discountMode.value||0)/100,s=Math.round(e.prixVente*o*n);return Math.min(s,e.prixVente*o)}}return this.productDiscounts.get(e.id)||0}toggleGlobalDiscount(){this.globalDiscount.active=!this.globalDiscount.active,this.globalDiscount.active&&(this.discountMode.active=!1,this.productDiscounts.clear()),this.updateCommandeTotals()}setGlobalDiscountType(e){this.globalDiscount.type=e,this.updateCommandeTotals()}onGlobalDiscountInputChange(){this.globalDiscount.value<0&&(this.globalDiscount.value=0),this.updateCommandeTotals(),this.showPaymentPopup&&this.calculatePayment()}getGlobalDiscountAmount(){return!this.globalDiscount.active||this.globalDiscount.value<=0?0:"CFA"===this.globalDiscount.type?this.globalDiscount.value:this.getSubtotal()*(this.globalDiscount.value/100)}openListClientPopup(){this.showClientPopup=!0,this.loadClients(),this.loadEntreprisesForPopup()}isEditingDiscount(e){return this.discountMode.active&&this.discountMode.productId===e}saveDiscount(e){this.applyDiscount(e),this.updateCommandeTotals(),this.currentDiscountInput="",this.discountMode.value=0}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(D.Ix),t.rXU(R.C),t.rXU(G.R),t.rXU($.f),t.rXU(w.X),t.rXU(A.g),t.rXU(N.up),t.rXU(u.ok),t.rXU(S.r),t.rXU(X.D),t.rXU(B.W),t.rXU(Y.j))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-pos-vente"]],hostBindings:function(o,n){1&o&&t.bIt("keydown",function(c){return n.handleKeyboardEvent(c)},!1,t.EBC)},decls:79,vars:22,consts:[["noNomComplet",""],["noEmail",""],["noAdresse",""],["noPhone",""],["noEntreprise",""],["noDate",""],["noNom",""],["auto","matAutocomplete"],[1,"section_contenu_container"],[1,"section_contenu_left"],[1,"section_favory_produit"],[1,"section_favory"],[1,"titre_categorie"],[1,"allCate",3,"click"],["class","ul_name_categorie",4,"ngIf"],[1,"section_produit"],["class","cadre_produit product-grid",4,"ngIf"],["class","cadre_produit_list product-list",4,"ngIf"],[1,"section_contenu_right",2,"background-color","#ffffff","height","100vh","box-shadow","rgba(0, 0, 0, 0.04) 0px 3px 5px"],[1,"list_produit_select"],[1,"ul_list_produit_select"],["class","li_list_produit_select",3,"click",4,"ngFor","ngForOf"],[1,"summary_panel"],[1,"double_row"],[1,"double_row","total"],["class","discount-input",4,"ngIf"],[1,"client_facture",2,"padding-top","5px"],[1,"double_client_facture"],[1,"paiement_btn","btn_client",3,"click"],[4,"ngIf"],["class","selected-client-info",4,"ngIf"],["class","clear-customer",3,"click",4,"ngIf"],[1,"paiement_btn","btn_facture"],["type","checkbox"],[1,"keypad"],["tabindex","-1",3,"click"],[3,"click"],["tabindex","-1",1,"btn_keypad_action"],["tabindex","-1",1,"backspace",3,"click"],[1,"ri-delete-back-2-line"],[1,"btn_content"],[1,"btn-payment",3,"click"],["class","payment-popup-overlay",4,"ngIf"],["class","detail-popup-overlay",4,"ngIf"],["class","list-client-popup-overlay",4,"ngIf"],["class","add-client-popup-overlay",4,"ngIf"],[1,"ul_name_categorie"],["class","ul_li_name_categorie",3,"selected","click",4,"ngFor","ngForOf"],[1,"ul_li_name_categorie",3,"click"],[1,"name_categorie"],[1,"nombre"],[1,"cadre_produit","product-grid"],["class","product-card",3,"disabled","click","pointerdown","pointerup","pointerleave",4,"ngFor","ngForOf"],["class","loading-indicator",4,"ngIf"],[1,"product-card",3,"click","pointerdown","pointerup","pointerleave"],["class","stock-badge",4,"ngIf"],["alt","",1,"product-img",3,"src"],[1,"card-body"],[1,"product-name"],[1,"product-stock"],[1,"bottom_price_sub"],[1,"product-price"],[1,"btn-decrement",3,"click"],[1,"ri-subtract-line"],[1,"stock-badge"],[1,"loading-indicator"],[1,"ri-loader-4-line"],[1,"cadre_produit_list","product-list"],[1,"ul_list"],["class","li_list",3,"disabled","click","pointerdown","pointerup","pointerleave",4,"ngFor","ngForOf"],["class","empty-category",4,"ngIf"],[1,"li_list",3,"click","pointerdown","pointerup","pointerleave"],[1,"list_left"],[1,"double"],[1,"img_product_list"],["alt","",3,"src"],[1,"name_stock_list"],[1,"product-name-list"],[1,"product-stock-list"],[1,"list_right"],[1,"double",2,"gap","15px"],[1,"btn_badge"],["class","stock-badge-list",4,"ngIf"],[1,"btn_fovory"],[1,"ri-heart-line","favorite-icon-list"],[1,"stock-badge-list"],[1,"empty-category"],[1,"li_list_produit_select",3,"click"],[1,"double",2,"gap","5px"],[1,"nombre_select"],[1,"name_produit_select"],[2,"margin","0"],["class","discount-badge",4,"ngIf"],[1,"price_produit"],["class","icon_close_select",3,"click",4,"ngIf"],["class","edit-discount",3,"click",4,"ngIf"],[1,"discount-badge"],[1,"icon_close_select",3,"click"],[1,"ri-close-circle-fill"],[1,"edit-discount",3,"click"],[1,"discount-input"],[1,"btn-currency",3,"click"],["type","number","placeholder","0","min","0",1,"input-discount",3,"input","focus","blur","value"],[1,"btn-percent",3,"click"],[1,"selected-client-info"],[1,"clear-customer",3,"click"],[1,"ri-close-line"],[1,"payment-popup-overlay"],[1,"payment-popup",3,"click","ngStyle"],[1,"popup-header",3,"mousedown"],[1,"close-btn",3,"click"],[1,"section_popup_paiement"],[1,"cadre_section_contenu_left_prise"],[1,"section_contenu_left_prise"],[1,"montant_paiement"],["class","original-price",4,"ngIf"],[1,"moyen_paiement_price"],[1,"moyen_paiement"],[1,"moyen_prise_du"],[1,"price_du"],[1,"ri-close-line","clear-icon",3,"click"],[1,"paiement_restant"],[1,"moyen_paiement_restant"],["class","double_row",4,"ngIf"],[2,"padding","10px 10px 5px","text-align","center"],[1,"discount-label"],[1,"section_contenu_right",2,"background-color","#ffffff","height","80vh","box-shadow","rgba(100, 100, 111, 0.2) 0px 7px 29px 0px"],[1,"methode_paiement"],[1,"cadre_paiement",3,"click"],[1,"img_paiement"],["src","assets/img/payer.png","alt",""],[1,"title_paiement"],[1,"img_paiement","img_paiement_carte"],["src","assets/img/carte-de-credit.png","alt",""],[1,"img_paiement","img_paiement_compte"],["src","assets/img/compte-rendu.png","alt",""],[1,"client_facture"],[1,"paiement_btn","remise_produit",2,"border","none",3,"click"],[1,"keypad",2,"padding-top","5px"],[1,"btn-payment-pop",3,"click","disabled"],[1,"original-price"],["type","number","placeholder","0","min","0",1,"input-discount",3,"ngModelChange","input","ngModel"],[1,"detail-popup-overlay"],[1,"detail-popup",3,"click","ngStyle"],["class","popup-header",3,"mousedown",4,"ngIf"],["class","popup-body",4,"ngIf"],[1,"popup-actions"],[1,"btn-add",3,"click"],[1,"popup-body"],[1,"detail-image"],["alt","Image produit",3,"src"],[1,"detail-info"],[1,"detail_info_left"],[1,"info-row"],[1,"label"],[1,"value"],[1,"detail_info_right"],[1,"value",3,"ngClass"],["class","info-row",4,"ngIf"],[1,"detail-description"],["bc-format","CODE128",1,"barcode-shifted",3,"bc-value","bc-line-color","bc-width","bc-height","bc-font-size","bc-display-value"],[1,"list-client-popup-overlay"],[1,"list-client-popup",3,"click","ngStyle"],[1,"title",2,"margin-bottom","0","font-size","16px","letter-spacing","0.65px"],[1,"double",2,"gap","10px"],[1,"btnAddClient"],[1,"barre"],[1,"contentIcon",3,"click"],[1,"ri-folder-user-line"],[1,"nombreCount"],[1,"ri-building-line"],[1,"inputSearch"],[1,"ri-search-2-line"],["type","text","placeholder","Recherche un client",3,"ngModelChange","ngModel"],[3,"click",4,"ngFor","ngForOf"],[1,"imgClient"],["alt","Photo client",3,"src"],[3,"innerHTML",4,"ngIf","ngIfElse"],[4,"ngIf","ngIfElse"],["class","iconEntrepriseList",4,"ngIf","ngIfElse"],[3,"innerHTML"],[1,"no-phone-text"],[1,"iconEntrepriseList"],["title","Affiliation d'Entreprise",1,"ri-git-branch-fill"],["colspan","7",1,"no-client-message"],["src","assets/img/office_building.png","alt","Logo entreprise"],[1,"add-client-popup-overlay"],[1,"add-client-popup",3,"click","ngStyle"],[1,"add-client-form"],[1,"form-group"],[1,"client-type-selector"],["type","button",1,"client-type-btn",3,"click"],["class","add-client-form",3,"formGroup",4,"ngIf"],[1,"btn-cancel",3,"click"],[1,"btn-save",3,"click","disabled"],[1,"add-client-form",3,"formGroup"],[1,"double_input"],[1,"champ_input"],["type","text","id","nomComplet","formControlName","nomComplet","name","nomComplet","placeholder","Saisis le nom et pr\xe9nom",1,"input_focus"],["for","nomComplet",1,"label"],["class","error",4,"ngIf"],["type","email","id","email","formControlName","email","name","email","placeholder","Saisis l'email",1,"input_focus"],["for","email",1,"label"],["id","adresse","formControlName","adresse","name","adresse","placeholder","Saisis l'adresse",1,"input_focus"],["for","adresse",1,"label"],["id","poste","formControlName","poste","name","poste","placeholder","Saisissez votre poste ",1,"input_focus"],["for","poste",1,"label"],[1,"grid_colonne"],[1,"champ_input","div1"],["formControlName","pays",1,"input_focus",3,"change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","pays",1,"label"],[1,"champ_input","div2"],["type","tel","id","telephone","formControlName","telephone","name","telephone","placeholder","Saisis le num\xe9ro de t\xe9l\xe9phone",1,"input_focus",3,"input"],["for","telephone",1,"label"],[1,"champ_input","div3"],["id","ville","formControlName","ville","name","ville","placeholder","Saisis la ville",1,"input_focus"],["for","ville",1,"label"],[1,"info_titre_input",2,"margin-top","20px"],[1,"champ_input_inventaire"],[1,"switch"],["type","checkbox",3,"ngModelChange","ngModel","ngModelOptions"],[1,"slider","round"],["class","champ_input",4,"ngIf"],[1,"error"],[3,"value"],["type","text","placeholder","Selectionner une entreprise",1,"input_focus","input_cursor",3,"formControl","matAutocomplete"],[3,"optionSelected","displayWith"],[1,"option-content"],["type","text","id","nom","formControlName","nom","name","nom","placeholder","Saisis le nom d'entreprise",1,"input_focus"],["for","nom",1,"label"],["id","siege","formControlName","siege","name","siege","placeholder","Saisis le si\xe8ge",1,"input_focus"],["for","siege",1,"label"],["id","secteur","formControlName","secteur","name","secteur","placeholder","Saisis le secteur",1,"input_focus"],["for","secteur",1,"label"]],template:function(o,n){1&o&&(t.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"p",13),t.bIt("click",function(){return n.showAllProducts()}),t.EFF(6," Toutes les cat\xe9gories"),t.k0s()(),t.DNE(7,q,2,1,"ul",14),t.k0s(),t.j41(8,"div",15),t.DNE(9,W,3,2,"div",16)(10,et,4,2,"div",17),t.k0s()()(),t.j41(11,"div",18)(12,"div",19)(13,"ul",20),t.DNE(14,st,17,11,"li",21),t.k0s()(),t.j41(15,"div",22)(16,"div",23)(17,"span"),t.EFF(18,"Taxes"),t.k0s(),t.j41(19,"span"),t.EFF(20,"00 CFA"),t.k0s()(),t.j41(21,"div",24)(22,"strong"),t.EFF(23,"Total"),t.k0s(),t.j41(24,"strong"),t.EFF(25),t.nI1(26,"cfaCurrency"),t.k0s()(),t.DNE(27,rt,6,5,"div",25),t.k0s(),t.j41(28,"div",26)(29,"div",27)(30,"div",28),t.bIt("click",function(){return n.openListClientPopup()}),t.DNE(31,ct,2,0,"p",29)(32,lt,3,1,"div",30)(33,pt,3,1,"div",30)(34,at,2,0,"span",31),t.k0s(),t.j41(35,"div",32)(36,"p"),t.EFF(37,"Facture"),t.k0s(),t.nrm(38,"input",33),t.k0s()()(),t.j41(39,"div",34)(40,"button",35),t.bIt("click",function(){return n.handleKeyPress("1")}),t.EFF(41,"1"),t.k0s(),t.j41(42,"button",35),t.bIt("click",function(){return n.handleKeyPress("2")}),t.EFF(43,"2"),t.k0s(),t.j41(44,"button",35),t.bIt("click",function(){return n.handleKeyPress("3")}),t.EFF(45,"3"),t.k0s(),t.j41(46,"button",36),t.bIt("click",function(){return n.setInputMode("quantity")}),t.EFF(47," Qt\xe9 "),t.k0s(),t.j41(48,"button",35),t.bIt("click",function(){return n.handleKeyPress("4")}),t.EFF(49,"4"),t.k0s(),t.j41(50,"button",35),t.bIt("click",function(){return n.handleKeyPress("5")}),t.EFF(51,"5"),t.k0s(),t.j41(52,"button",35),t.bIt("click",function(){return n.handleKeyPress("6")}),t.EFF(53,"6"),t.k0s(),t.j41(54,"button",36),t.bIt("click",function(){return n.setInputMode("discount")}),t.EFF(55," Remise "),t.k0s(),t.j41(56,"button",35),t.bIt("click",function(){return n.handleKeyPress("7")}),t.EFF(57,"7"),t.k0s(),t.j41(58,"button",35),t.bIt("click",function(){return n.handleKeyPress("8")}),t.EFF(59,"8"),t.k0s(),t.j41(60,"button",35),t.bIt("click",function(){return n.handleKeyPress("9")}),t.EFF(61,"9"),t.k0s(),t.j41(62,"button",37),t.EFF(63,"Prix"),t.k0s(),t.j41(64,"button",35),t.bIt("click",function(){return n.handleKeyPress("+/-")}),t.EFF(65,"+/-"),t.k0s(),t.j41(66,"button",35),t.bIt("click",function(){return n.handleKeyPress("0")}),t.EFF(67,"0"),t.k0s(),t.j41(68,"button",35),t.bIt("click",function(){return n.handleKeyPress(",")}),t.EFF(69,","),t.k0s(),t.j41(70,"button",38),t.bIt("click",function(){return n.handleKeyPress("backspace")}),t.nrm(71,"i",39),t.k0s()(),t.j41(72,"div",40)(73,"button",41),t.bIt("click",function(){return n.openPaymentPopup()}),t.EFF(74,"Paiement"),t.k0s()()()(),t.DNE(75,bt,116,40,"div",42)(76,yt,7,5,"div",43)(77,Zt,29,13,"div",44)(78,ve,24,16,"div",45)),2&o&&(t.R7$(4),t.AVh("selected",null===n.selectedCategoryId),t.R7$(3),t.Y8G("ngIf",n.categories.length),t.R7$(2),t.Y8G("ngIf",n.isListView),t.R7$(),t.Y8G("ngIf",!n.isListView),t.R7$(4),t.Y8G("ngForOf",n.getCartItems()),t.R7$(11),t.JRh(t.bMT(26,20,n.getTotalCart())),t.R7$(2),t.Y8G("ngIf",n.discountMode.active),t.R7$(4),t.Y8G("ngIf",!n.selectedClient&&!n.selectedEntreprise),t.R7$(),t.Y8G("ngIf",n.selectedClient),t.R7$(),t.Y8G("ngIf",n.selectedEntreprise),t.R7$(),t.Y8G("ngIf",n.selectedClient||n.selectedEntreprise),t.R7$(12),t.AVh("btn_keypad_active","quantity"===n.inputMode),t.R7$(8),t.AVh("btn_keypad_active","discount"===n.inputMode),t.R7$(21),t.Y8G("ngIf",n.showPaymentPopup),t.R7$(),t.Y8G("ngIf",n.showDetailPopup),t.R7$(),t.Y8G("ngIf",n.showClientPopup),t.R7$(),t.Y8G("ngIf",n.showAddClientPopup))},dependencies:[u.YN,u.qT,u.xH,u.y7,u.me,u.Q0,u.Zm,u.wz,u.BC,u.cb,u.VZ,u.vS,g.MD,g.YU,g.Sq,g.bT,g.B3,g.Jj,g.QX,g.vh,u.X1,u.l_,u.j4,u.JD,p.jL,p.$3,L.wT,p.pN,_.c,_.N,x.M],styles:['@charset "UTF-8";.payment-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1000}.payment-popup[_ngcontent-%COMP%]{background-color:#fff;width:85%;height:90vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden;position:relative}.payment-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer;transition:color .2s}.payment-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.list-client-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1000}.list-client-popup[_ngcontent-%COMP%]{background-color:#fff;width:90%;height:90vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden;position:relative}.list-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.list-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer;transition:color .2s}.list-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.detail-popup-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:flex-start;padding:2rem 0;z-index:1000}.detail-image[_ngcontent-%COMP%]{height:100px;width:100px}.detail-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;border-radius:4px}.detail-popup[_ngcontent-%COMP%]{background:#fff;width:90%;max-width:900px;border-radius:8px;overflow:hidden;display:flex;flex-direction:column;box-shadow:0 5px 15px #0000004d}.detail-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 1.5rem;border-bottom:1px solid #e5e5e5}.detail-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px}.detail-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;cursor:pointer}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]{padding:1.5rem}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .shop-name[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:16px;font-weight:500}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:1.5rem;margin-bottom:1.5rem}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:250px 250px 1fr;row-gap:.75rem;column-gap:4rem;margin-top:15px;margin-bottom:15px}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;line-height:25px}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#555}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-info[_ngcontent-%COMP%]   .info-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:600;color:#222}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-description[_ngcontent-%COMP%]{justify-content:space-between;padding:1rem 0;border-top:1px solid #e5e5e5}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-description[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500;color:#555}.detail-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .detail-description[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-style:italic;color:#333}.detail-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;background:#f8f9fa;text-align:right}.detail-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{background:#0672e4;border:none;color:#fff;padding:.6rem 1.2rem;border-radius:4px;cursor:pointer;transition:background .2s}.detail-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover{background:#45a049}.btn-payment-pop[_ngcontent-%COMP%]:disabled{background-color:#f4f4f4;cursor:not-allowed;color:#acacac}.btnAddClient[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px}.btnAddClient[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:#0672e4;padding:8px 20px;border-radius:5px;color:#fff;font-size:12px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}tr[_ngcontent-%COMP%]{font-size:13px}td[_ngcontent-%COMP%]{padding:18px 15px;border-bottom:1px solid rgba(221,221,221,.5803921569)}th[_ngcontent-%COMP%]{background-color:#f2f2f2;border-bottom:1px solid rgba(221,221,221,.5803921569);padding:12px 8px}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.imgClient[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;overflow:hidden;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;box-shadow:0 4px 6px #0000001a;cursor:pointer}.imgClient[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;height:80%;border-radius:50%;object-fit:cover;transition:transform .2s}.imgClient[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.no-client-message[_ngcontent-%COMP%]{text-align:center;padding:20px;color:#888}.inputSearch[_ngcontent-%COMP%]{position:relative;width:250px;height:35px;display:flex;align-items:center}.inputSearch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;padding-left:10px;border-radius:5px;border:1px solid #000;font-size:13px}.inputSearch[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:15px;font-size:17px}.add-client-popup-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000b;display:flex;justify-content:center;align-items:center;z-index:1001}.add-client-popup[_ngcontent-%COMP%]{position:relative;background-color:#fff;width:700px;height:83vh;border-radius:10px;box-shadow:0 5px 30px #0000004d;overflow:hidden}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;background-color:#f8f9fa;border-bottom:1px solid #dee2e6}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.5rem;color:#6c757d;cursor:pointer}.add-client-popup[_ngcontent-%COMP%]   .popup-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]:hover{color:#dc3545}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;padding:15px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:4px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0003;border-radius:3px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:10px 15px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px;font-weight:500;font-size:13px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #ced4da;border-radius:4px;font-size:14px}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#0672e4;box-shadow:0 0 0 .2rem #0672e440}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:80px;resize:vertical}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .client-type-selector[_ngcontent-%COMP%]{display:flex}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .client-type-selector[_ngcontent-%COMP%]   .client-type-btn[_ngcontent-%COMP%]{flex:1;padding:8px;background:#f1f1f1;border:none;border-radius:4px;cursor:pointer;transition:all .2s}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .client-type-selector[_ngcontent-%COMP%]   .client-type-btn.active[_ngcontent-%COMP%]{background:#0672e4;color:#fff}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   .photo-placeholder[_ngcontent-%COMP%]{height:100px;border:1px dashed #ced4da;border-radius:4px;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   .photo-placeholder[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;margin-bottom:5px;color:#6c757d}.add-client-popup[_ngcontent-%COMP%]   .popup-body[_ngcontent-%COMP%]   .add-client-form[_ngcontent-%COMP%]   .photo-upload[_ngcontent-%COMP%]   .photo-placeholder[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px;color:#6c757d}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;padding:15px 20px;background-color:#f8f9fa;border-top:1px solid #dee2e6;display:flex;justify-content:flex-end;box-shadow:0 -2px 5px #0000001a}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;padding:8px 16px;border:none;border-radius:4px;font-size:14px;cursor:pointer}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{padding:8px 30px;border:none;border-radius:5px;background-color:red;color:#fff}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d70404}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background-color:#0672e4;color:#fff}.add-client-popup[_ngcontent-%COMP%]   .popup-actions[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#055cb9}.double_input[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:10px}.grid_colonne[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:1fr;grid-column-gap:0px;grid-row-gap:0px;gap:20px}.champ_input[_ngcontent-%COMP%]{position:relative;margin-bottom:10px}.input_focus[_ngcontent-%COMP%]{width:100%;height:49px;outline:none;border-bottom:1px solid rgb(53,50,50);border-top:none;border-left:none;border-right:none;margin:10px 0 0;transition:all .3s;font-size:14px;background:none;color:#695c5c}.champ_input[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;top:22px;left:4px;pointer-events:none;color:#6b6666}.input_focus[_ngcontent-%COMP%]:hover{border-bottom:1px solid #0672E4;border-top:none;border-left:none;border-right:none}.input_focus[_ngcontent-%COMP%]:not(:placeholder-shown) + .label[_ngcontent-%COMP%], .input_focus[_ngcontent-%COMP%]:focus + .label[_ngcontent-%COMP%]{color:#0672e4;top:5px;left:0;transition:all .3s ease-in-out;background:none;font-size:11px;padding:0}.input_focus[_ngcontent-%COMP%]::placeholder{opacity:0}.input_focus[_ngcontent-%COMP%]:focus::placeholder{opacity:1;animation-delay:1s;font-size:12px;transition:all .2s ease-in-out}.champ_input_inventaire[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.champ_input_inventaire[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:50px;height:24px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;width:0;height:0}.slider[_ngcontent-%COMP%]{position:absolute;cursor:pointer;inset:0;background-color:#ccc;transition:.4s;border-radius:24px}.slider[_ngcontent-%COMP%]:before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:.4s;border-radius:50%}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#0672e4}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translate(26px)}.input_cursor[_ngcontent-%COMP%]{cursor:pointer}.client-type-selector[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px}.client-type-selector[_ngcontent-%COMP%]   .client-type-btn[_ngcontent-%COMP%]{flex:1;padding:10px;background:#f1f1f1;border:none;border-radius:4px;cursor:pointer;transition:all .2s;text-align:center}.client-type-selector[_ngcontent-%COMP%]   .client-type-btn.active[_ngcontent-%COMP%]{background:#0672e4;color:#fff}.nombreCount[_ngcontent-%COMP%]{border-radius:50%;position:absolute;top:-15px;background-color:#ddd;width:18px;height:18px;display:flex;align-items:center;justify-content:center;right:-9px}.nombreCount[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000;border-radius:50%;font-size:9px}.barre[_ngcontent-%COMP%]{height:25px;width:1px;background-color:#0000003f;margin:8px 10px}.contentIcon[_ngcontent-%COMP%]{position:relative;cursor:pointer;transition:all .3s ease;padding:0 5px;border-radius:4px;display:flex;align-items:center;justify-content:center}.contentIcon.active[_ngcontent-%COMP%]{background-color:#e6f7ff;border:1px solid #1890ff}.contentIcon.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#1890ff}.contentIcon[_ngcontent-%COMP%]:hover:not(.active){background-color:#f5f5f5}ul[_ngcontent-%COMP%]{list-style-type:none;padding:0}.section_contenu_container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 400px;flex:1;min-height:0}.section_contenu_left[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:0}.section_favory_produit[_ngcontent-%COMP%]{display:grid;grid-template-columns:220px 1fr;margin-top:12px;flex:1;min-height:0}.section_favory[_ngcontent-%COMP%]{border-right:1px solid #d1d1d1;height:100vh}.section_favory[_ngcontent-%COMP%]   .ul_section_favory[_ngcontent-%COMP%]   .li_section_favory[_ngcontent-%COMP%]{background-color:#cde3fa;padding:5px 10px}.double[_ngcontent-%COMP%]   .icon_favory[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.title_favory[_ngcontent-%COMP%]{margin:0}.titre_categorie[_ngcontent-%COMP%]{padding-left:10px}.titre_categorie[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin-bottom:10px;font-weight:600}.ul_li_name_categorie[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:7px 10px;margin-bottom:8px;font-size:15px;cursor:pointer}.ul_li_name_categorie[_ngcontent-%COMP%]:hover{background-color:#cde3fa}.allCate[_ngcontent-%COMP%]{cursor:pointer;padding:10px 0;letter-spacing:.6px;font-weight:500}.section_produit[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(100vh - 75px);min-height:0}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px;height:2px}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#0672e433;border-radius:5px}.section_produit[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.li_list_produit_select[_ngcontent-%COMP%]{background-color:#f4f4f4;display:flex;align-items:center;justify-content:space-between;padding:8px 10px;margin:6px 8px;border-radius:5px}.nombre_select[_ngcontent-%COMP%], .name_produit_select[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price_produit[_ngcontent-%COMP%]{font-size:12px}.icon_close_select[_ngcontent-%COMP%]{cursor:pointer}.icon_close_select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.icon_close_select[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:red}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1rem;padding:0 10px 10px}.product-card[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:8px;box-shadow:0 2px 5px #0000000d;overflow:hidden;display:flex;flex-direction:column;align-items:center;padding-bottom:10px}.stock-badge[_ngcontent-%COMP%]{position:absolute;top:8px;left:5px;background:#fde047;color:#333;font-size:.8rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.product-card.disabled[_ngcontent-%COMP%], .li_list.disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;pointer-events:none}.stock-badge-list[_ngcontent-%COMP%]{background:#fde047;color:#333;font-size:.8rem;font-weight:700;width:24px;height:24px;border-radius:50%;display:flex;align-items:center;justify-content:center}.product-img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;margin-top:10px;box-shadow:#0000001a 0 1px 2px}.favorite-icon[_ngcontent-%COMP%]{position:absolute;top:2px;right:3px;font-size:1.2rem;color:#0672e4;cursor:pointer}.favorite-icon.ri-heart-fill[_ngcontent-%COMP%]{color:#0672e4}.favorite-icon-list[_ngcontent-%COMP%]{font-size:1.2rem;color:#0672e4;cursor:pointer}.favorite-icon-list.ri-heart-fill[_ngcontent-%COMP%]{color:#0672e4}.card-body[_ngcontent-%COMP%]{text-align:center;margin:.5rem 0;flex:1}.product-name[_ngcontent-%COMP%]{font-weight:500;margin:.25rem 0}.product-stock[_ngcontent-%COMP%]{font-size:10px;color:#666;margin:.15rem 0}.product-price[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;margin:0;font-size:13px}.btn-decrement[_ngcontent-%COMP%]{border:none;background:#f3f4f6;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;pointer-events:auto!important;z-index:10}.btn-decrement[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem;color:#333}.bottom_price_sub[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%;padding:0 10px}.section_contenu_right[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;box-shadow:#0000000a 0 3px 5px;padding-bottom:10px}.list_produit_select[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.summary_panel[_ngcontent-%COMP%]{background:#f1f5f9;padding:4px 10px;margin:0 10px}.summary_panel[_ngcontent-%COMP%]   .double_row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:.25rem 0}.summary_panel[_ngcontent-%COMP%]   .double_row.total[_ngcontent-%COMP%]{font-size:1.1rem;padding-top:.5rem;border-bottom:none}.double_row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.double_row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:14px}.keypad[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:5px;padding:5px 10px}.keypad[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:3.5rem;background:#f1f5f9;border:none;font-size:1rem;cursor:pointer;border-radius:4px}.keypad[_ngcontent-%COMP%]   button.backspace[_ngcontent-%COMP%]{font-size:1.2rem}.btn_content[_ngcontent-%COMP%]{margin:0 10px}.btn-payment[_ngcontent-%COMP%]{width:100%;padding:.75rem;margin-bottom:68px;background:#2978f2;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.name_stock_list[_ngcontent-%COMP%]{line-height:1.5;padding:10px}.product-stock-list[_ngcontent-%COMP%]{font-size:10px;color:#666}.name_stock_list[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .moyen_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .price_du[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .moyen_paiement_restant[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .paiement_btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}ul.ul_list[_ngcontent-%COMP%]{margin:0 10px}.li_list[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#fff;box-shadow:#64646f10 0 7px 29px;padding:0 10px;border-radius:5px;margin-bottom:10px}.img_product_list[_ngcontent-%COMP%]{width:60px;height:60px;display:flex;justify-content:center;margin:5px 0}.img_product_list[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:5px;cursor:pointer;box-shadow:#0000000d 0 0 0 1px}.section_popup_paiement[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 350px;flex:1;min-height:0;margin:30px 80px}.btn-payment-pop[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#2978f2;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer}.methode_paiement[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));gap:15px;margin:20px 10px}.cadre_paiement[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;height:135px;box-shadow:#0000000d 0 6px 24px,#00000014 0 0 0 1px;padding:10px 0;cursor:pointer}.cadre_paiement[_ngcontent-%COMP%]:hover{border:.5px solid #0672e4}.img_paiement[_ngcontent-%COMP%]{width:50px;height:50px;object-fit:cover;margin:0 auto;display:flex;justify-content:center;align-items:center}.img_paiement[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.title_paiement[_ngcontent-%COMP%]{margin-top:22px}.title_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;text-align:center}.montant_paiement[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.double[_ngcontent-%COMP%]{display:flex;align-items:center}.cadre_section_contenu_left_prise[_ngcontent-%COMP%]{width:100%;background:#fff;padding:24px;border-radius:8px;align-items:center}.section_contenu_left_prise[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.montant_paiement[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:baseline;gap:8px}.montant_paiement[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:48px;font-weight:600;margin:0}.montant_paiement[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;color:#666}.moyen_paiement_price[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#cde3fa;gap:16px;border-radius:5px;padding:10px}.moyen_paiement[_ngcontent-%COMP%]{background:#e6f3ff;border:1px solid #C1E0FF;border-radius:8px;padding:8px 16px;text-align:center;cursor:pointer}.moyen_paiement.selected[_ngcontent-%COMP%]{background:#d0ebff;border-color:#90cdf4}.moyen_paiement[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;color:#333}.moyen_prise_du[_ngcontent-%COMP%]   .price_du[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:16px;color:#333}.clear-icon[_ngcontent-%COMP%]{font-size:18px;color:#e53e3e;cursor:pointer}.discount-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;border-bottom:1px solid #ccc;padding-bottom:8px}.btn-currency[_ngcontent-%COMP%], .btn-percent[_ngcontent-%COMP%]{background:#f0f0f0;border:1px solid #b2b2b2;border-radius:4px;font-size:16px;cursor:pointer}.btn-percent[_ngcontent-%COMP%]{padding:2px 15px}.btn-currency[_ngcontent-%COMP%]{padding:5px 12px;font-size:12px!important}.input-discount[_ngcontent-%COMP%]{width:100px;border:none;outline:none;text-align:right;font-size:16px;text-align:center}.discount-unit[_ngcontent-%COMP%]{font-size:18px;color:#333}.discount-label[_ngcontent-%COMP%]{text-align:center;position:relative;top:-18px}.discount-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0 0;font-size:10px;color:#666}.paiement_restant[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 30px}.btn_facture[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.btn_facture[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}.paiement_btn[_ngcontent-%COMP%]{background-color:#f4f4f4;padding:12px;border-radius:5px}.paiement_btn[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px}.btn_client[_ngcontent-%COMP%]{cursor:pointer}.btn_client[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.double_client_facture[_ngcontent-%COMP%]{gap:5px;display:grid;grid-template-columns:repeat(2,1fr);padding:0 10px}.double_remise_facture[_ngcontent-%COMP%]{gap:3px;display:grid;grid-template-columns:75px 1fr}.selected[_ngcontent-%COMP%]{background-color:#0672e4!important;color:#fff!important}.selected[_ngcontent-%COMP%]   .name_categorie[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .selected[_ngcontent-%COMP%]   .nombre[_ngcontent-%COMP%]{color:#fff!important}.selected_mode_pay[_ngcontent-%COMP%]{border:1px solid #2f7dd1}.keypad[_ngcontent-%COMP%]   button.btn_keypad_active[_ngcontent-%COMP%]{border:1px solid #2f7dd1;background-color:#e0efff}.cadre_paiement.selected[_ngcontent-%COMP%]{border:2px solid #4CAF50;background-color:#f0fff4}.price_du[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:1.2em}.alert-low-stock[_ngcontent-%COMP%]{color:red!important;font-weight:700}.safe-stock[_ngcontent-%COMP%]{color:green!important;font-weight:700}.barcode-shifted[_ngcontent-%COMP%]{left:11px;position:relative}.btn_client.has-selected[_ngcontent-%COMP%]{background-color:#e6f7ff;border:1px solid #91d5ff}.clear-customer[_ngcontent-%COMP%]:hover{color:#cf1322}.selected-client-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.selected-client-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;font-size:14px}.selected-client-info[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:12px;color:#666}.paiement_btn[_ngcontent-%COMP%]{position:relative}.clear-customer[_ngcontent-%COMP%]{position:absolute;top:12px;right:8px;background:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;box-shadow:#0000000d 0 0 0 1px;cursor:pointer}[draggable][_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.popup-header[_ngcontent-%COMP%]{cursor:move}.discount-badge[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;padding:2px 6px 2px 0;border-radius:4px;font-size:9px;margin-left:5px}.edit-discount[_ngcontent-%COMP%]{cursor:pointer;color:#0672e4}.edit-discount[_ngcontent-%COMP%]:hover{color:#044d99}.btn-currency.active[_ngcontent-%COMP%], .btn-percent.active[_ngcontent-%COMP%]{color:#000;background-color:#cde3fa;border:1px solid #0672e4}.global-discount[_ngcontent-%COMP%]{padding:8px 0;border-bottom:1px dashed #eee}.global-discount[_ngcontent-%COMP%]   .discount-input[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.global-discount[_ngcontent-%COMP%]   .discount-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px 8px;border:1px solid #ddd;border-radius:4px;background:#f8f8f8;cursor:pointer}.global-discount[_ngcontent-%COMP%]   .discount-input[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#0672e4;color:#fff;border-color:#0672e4}.global-discount[_ngcontent-%COMP%]   .discount-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:70px;text-align:center;padding:6px;border:1px solid #ddd;border-radius:4px}.double_row.total[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding-top:8px;margin-top:8px}.global-active[_ngcontent-%COMP%]{background-color:#e6f7ff!important;border:1px solid #91d5ff!important}']})}}return i})()},2120:(I,F,l)=>{l.d(F,{r:()=>j});var g=l(1626),u=l(4412),P=l(5558),C=l(9437),h=l(8810),M=l(8141),E=l(2525),b=l(4438),k=l(8026);let j=(()=>{class v{constructor(a,p){this.http=a,this.usersService=p,this.apiUrl=E.c.apiBaseUrl,this.entrepriseSubject=new u.t([]),this.entreprise$=this.entrepriseSubject.asObservable()}getListEntreprises(){return this.usersService.getValidAccessToken().pipe((0,P.n)(a=>{const p=new g.Lr({Authorization:`Bearer ${a}`,"Content-Type":"application/json"});return this.http.get(`${this.apiUrl}/entreprises`,{headers:p})}),(0,C.W)(a=>{let p="Erreur inconnue";return a.error instanceof ErrorEvent?p=`Erreur: ${a.error.message}`:404===a.status&&(p="Aucune entreprise trouv\xe9e"),(0,h.$)(()=>new Error(p))}))}addEntreprise(a){return this.usersService.getValidAccessToken().pipe((0,P.n)(p=>{const _=new g.Lr({Authorization:`Bearer ${p}`,"Content-Type":"application/json"});return this.http.post(`${this.apiUrl}/entreprise-clients`,a,{headers:_})}),(0,M.M)(p=>{this.entrepriseSubject.next([...this.entrepriseSubject.value,p])}),(0,C.W)(p=>{let _="Erreur inconnue";return p.error instanceof ErrorEvent?_=`Erreur: ${p.error.message}`:400===p.status&&(_=p.error||"Donn\xe9es invalides"),(0,h.$)(()=>new Error(_))}))}getListEntreprise(){return this.usersService.getValidAccessToken().pipe((0,P.n)(a=>{if(!a)return console.error("Token vide ou non d\xe9fini ! V\xe9rifiez que l'utilisateur est bien connect\xe9."),(0,h.$)(()=>new Error("Token manquant"));const p=(new g.Lr).set("Authorization",`Bearer ${a}`);return console.log("En-t\xeates envoy\xe9s : ",p),this.http.get(`${this.apiUrl}/entreprises`,{headers:p})}),(0,M.M)(a=>{this.entrepriseSubject.next(a)}),(0,C.W)(a=>(console.error("Erreur lors de la r\xe9cup\xe9ration des entreprises:",a),(0,h.$)(()=>a))))}getEntrepriseById(a){return this.usersService.getValidAccessToken().pipe((0,P.n)(p=>{if(!p)return console.error("Token manquant"),(0,h.$)(()=>new Error("Token manquant"));const _=new g.Lr({Authorization:`Bearer ${p}`,"Content-Type":"application/json"});return this.http.get(`${this.apiUrl}/entreprises/${a}`,{headers:_})}),(0,C.W)(p=>{let _="Erreur inconnue";return p.error instanceof ErrorEvent?_=`Erreur: ${p.error.message}`:404===p.status&&(_="Entreprise non trouv\xe9e"),(0,h.$)(()=>new Error(_))}))}updateEntreprise(a,p){return this.usersService.getValidAccessToken().pipe((0,P.n)(_=>{if(!_)return(0,h.$)(()=>new Error("Token manquant"));const x=new g.Lr({Authorization:`Bearer ${_}`});return this.http.patch(`${this.apiUrl}/updateEntreprise/${a}`,p,{headers:x,responseType:"text"})}),(0,C.W)(_=>{let x="Erreur inconnue";return _.error instanceof ErrorEvent?x=`Erreur: ${_.error.message}`:400===_.status&&(x=_.error||"Donn\xe9es invalides"),(0,h.$)(()=>new Error(x))}))}getEntrepriseInfo(){return this.usersService.getValidAccessToken().pipe((0,P.n)(a=>{if(!a)return(0,h.$)(()=>new Error("Aucun token trouv\xe9"));const p=new g.Lr({Authorization:`Bearer ${a}`});return this.http.get(`${this.apiUrl}/myEntreprise`,{headers:p}).pipe((0,M.M)(_=>{localStorage.setItem("entreprise",JSON.stringify(_))}))}),(0,C.W)(a=>(console.error("Erreur r\xe9cup\xe9ration info entreprise:",a),(0,h.$)(()=>a))))}decodeJwt(a){return JSON.parse(atob(a.split(".")[1]))}isTokenExpired(a){return new Date(1e3*a.exp)<new Date}getNewTokenFromApi(){const a=localStorage.getItem("refreshToken");return this.http.post(`${this.apiUrl}/refresh-token`,{refreshToken:a})}static{this.\u0275fac=function(p){return new(p||v)(b.KVO(g.Qq),b.KVO(k.g))}}static{this.\u0275prov=b.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()}}]);